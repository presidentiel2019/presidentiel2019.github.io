!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=t()}(function(){return function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){return r(e[o][1][t]||t)},u,u.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){"use strict";var i=t("../src/lib"),r={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var a in r){var o=a.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");i.addStyleRule(o,r[a])}},{"../src/lib":159}],2:[function(t,e,n){"use strict";e.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #119dff;} .cls-2 {fill: #25fefd;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],3:[function(t,e,n){"use strict";e.exports=t("../src/traces/bar")},{"../src/traces/bar":259}],4:[function(t,e,n){"use strict";e.exports=t("../src/core")},{"../src/core":142}],5:[function(t,e,n){"use strict";var i=t("./core");i.register([t("./bar"),t("./pie")]),e.exports=i},{"./bar":3,"./core":4,"./pie":6}],6:[function(t,e,n){"use strict";e.exports=t("../src/traces/pie")},{"../src/traces/pie":273}],7:[function(t,e,n){var i=Object.create||function(t){var e=function(){};return e.prototype=t,new e},r=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},a=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0;var s,l=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),s=0===c.x}catch(t){s=!1}function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var a,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=i(null),t._eventsCount=0),s){if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(a=u(t))&&a>0&&s.length>a){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else s=o[e]=n,++t._eventsCount;return t}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function f(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=a.call(d,i);return r.listener=n,i.wrapFn=r,r}function p(t,e,n){var i=t._events;if(!i)return[];var r=i[e];return r?"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):g(r,r.length):[]}function v(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function g(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}s?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');l=t}}):o.defaultMaxListeners=l,o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){var e,n,i,r,a,o,s="error"===t;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var l=new Error('Unhandled "error" event. ('+e+")");throw l.context=e,l}if(!(n=o[t]))return!1;var c="function"==typeof n;switch(i=arguments.length){case 1:!function(t,e,n){if(c)t.call(n);else for(var i=t.length,r=g(t,i),a=0;a<i;++a)r[a].call(n)}(n,0,this);break;case 2:!function(t,e,n,i){if(c)t.call(n,i);else for(var r=t.length,a=g(t,r),o=0;o<r;++o)a[o].call(n,i)}(n,0,this,arguments[1]);break;case 3:!function(t,e,n,i,r){if(c)t.call(n,i,r);else for(var a=t.length,o=g(t,a),s=0;s<a;++s)o[s].call(n,i,r)}(n,0,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,i,r,a){if(c)t.call(n,i,r,a);else for(var o=t.length,s=g(t,o),l=0;l<o;++l)s[l].call(n,i,r,a)}(n,0,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];!function(t,e,n,i){if(c)t.apply(n,i);else for(var r=t.length,a=g(t,r),o=0;o<r;++o)a[o].apply(n,i)}(n,0,this,r)}return!0},o.prototype.on=o.prototype.addListener=function(t,e){return h(this,t,e,!1)},o.prototype.prependListener=function(t,e){return h(this,t,e,!0)},o.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,f(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,f(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,r,a,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=i(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(t,e){for(var n=a,i=n+1,r=t.length;i<r;n+=1,i+=1)t[n]=t[i];t.pop()}(n),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,s||e)}return this},o.prototype.removeAllListeners=function(t){var e,n,a;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=i(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=i(null):delete n[t]),this;if(0===arguments.length){var o,s=r(n);for(a=0;a<s.length;++a)"removeListener"!==(o=s[a])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(a=e.length-1;a>=0;a--)this.removeListener(t,e[a]);return this},o.prototype.listeners=function(t){return p(this,t,!0)},o.prototype.rawListeners=function(t){return p(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},o.prototype.listenerCount=v,o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],8:[function(t,e,n){!function(){var t={version:"3.5.17"},n=[].slice,i=function(t){return n.call(t)},r=this.document;function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(r)try{i(r.documentElement.childNodes)}catch(t){i=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),r)try{r.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var s=this.Element.prototype,l=s.setAttribute,c=s.setAttributeNS,u=this.CSSStyleDeclaration.prototype,h=u.setProperty;s.setAttribute=function(t,e){l.call(this,t,e+"")},s.setAttributeNS=function(t,e,n){c.call(this,t,e,n+"")},u.setProperty=function(t,e,n){h.call(this,t,e+"",n)}}function d(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function f(t){return null===t?NaN:+t}function p(t){return!isNaN(t)}function v(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}}t.ascending=d,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},t.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},t.extent=function(t,e){var n,i,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t[a])&&(n>i&&(n=i),r<i&&(r=i))}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&(n>i&&(n=i),r<i&&(r=i))}return[n,r]},t.sum=function(t,e){var n,i=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)p(n=+t[a])&&(i+=n);else for(;++a<r;)p(n=+e.call(t,t[a],a))&&(i+=n);return i},t.mean=function(t,e){var n,i=0,r=t.length,a=-1,o=r;if(1===arguments.length)for(;++a<r;)p(n=f(t[a]))?i+=n:--o;else for(;++a<r;)p(n=f(e.call(t,t[a],a)))?i+=n:--o;if(o)return i/o},t.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],a=n-i;return a?r+a*(t[i]-r):r},t.median=function(e,n){var i,r=[],a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)p(i=f(e[o]))&&r.push(i);else for(;++o<a;)p(i=f(n.call(e,e[o],o)))&&r.push(i);if(r.length)return t.quantile(r.sort(d),.5)},t.variance=function(t,e){var n,i,r=t.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<r;)p(n=f(t[s]))&&(o+=(i=n-a)*(n-(a+=i/++l)));else for(;++s<r;)p(n=f(e.call(t,t[s],s)))&&(o+=(i=n-a)*(n-(a+=i/++l)));if(l>1)return o/(l-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var g=v(d);function m(t){return t.length}t.bisectLeft=g.left,t.bisect=t.bisectRight=g.right,t.bisector=function(t){return v(1===t.length?function(e,n){return d(t(e),n)}:t)},t.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var i,r,a=n-e;a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},t.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},t.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},t.transpose=function(e){if(!(a=e.length))return[];for(var n=-1,i=t.min(e,m),r=new Array(i);++n<i;)for(var a,o=-1,s=r[n]=new Array(a);++o<a;)s[o]=e[o][n];return r},t.zip=function(){return t.transpose(arguments)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.merge=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--o]=i[e];return n};var y=Math.abs;function _(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function x(){this._=Object.create(null)}t.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,r=[],a=function(t){for(var e=1;t*e%1;)e*=10;return e}(y(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(i=t+n*++o)>e;)r.push(i/a);else for(;(i=t+n*++o)<e;)r.push(i/a);return r},t.map=function(t,e){var n=new x;if(t instanceof x)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e.call(t,i=t[r],r),i)}else for(var o in t)n.set(o,t[o]);return n};var b="__proto__",w="\0";function k(t){return(t+="")===b||t[0]===w?w+t:t}function T(t){return(t+="")[0]===w?t.slice(1):t}function M(t){return k(t)in this._}function A(t){return(t=k(t))in this._&&delete this._[t]}function C(){var t=[];for(var e in this._)t.push(T(e));return t}function L(){var t=0;for(var e in this._)++t;return t}function S(){for(var t in this._)return!1;return!0}function E(){this._=Object.create(null)}function O(t){return t}function P(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function D(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=z.length;n<i;++n){var r=z[n]+e;if(r in t)return r}}_(x,{has:M,get:function(t){return this._[k(t)]},set:function(t,e){return this._[k(t)]=e},remove:A,keys:C,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:T(e),value:this._[e]});return t},size:L,empty:S,forEach:function(t){for(var e in this._)t.call(this,T(e),this._[e])}}),t.nest=function(){var e,n,i={},r=[],a=[];function o(t,a,s){if(s>=r.length)return n?n.call(i,a):e?a.sort(e):a;for(var l,c,u,h,d=-1,f=a.length,p=r[s++],v=new x;++d<f;)(h=v.get(l=p(c=a[d])))?h.push(c):v.set(l,[c]);return t?(c=t(),u=function(e,n){c.set(e,o(t,n,s))}):(c={},u=function(e,n){c[e]=o(t,n,s)}),v.forEach(u),c}return i.map=function(t,e){return o(e,t,0)},i.entries=function(e){return function t(e,n){if(n>=r.length)return e;var i=[],o=a[n++];return e.forEach(function(e,r){i.push({key:e,values:t(r,n)})}),o?i.sort(function(t,e){return o(t.key,e.key)}):i}(o(t.map,e,0),0)},i.key=function(t){return r.push(t),i},i.sortKeys=function(t){return a[r.length-1]=t,i},i.sortValues=function(t){return e=t,i},i.rollup=function(t){return n=t,i},i},t.set=function(t){var e=new E;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},_(E,{has:M,add:function(t){return this._[k(t+="")]=!0,t},remove:A,values:C,size:L,empty:S,forEach:function(t){for(var e in this._)t.call(this,T(e))}}),t.behavior={},t.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=P(t,e,e[n]);return t};var z=["webkit","ms","moz","Moz","o","O"];function I(){}function R(){}function B(t){var e=[],n=new x;function i(){for(var n,i=e,r=-1,a=i.length;++r<a;)(n=i[r].on)&&n.apply(this,arguments);return t}return i.on=function(i,r){var a,o=n.get(i);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,a=e.indexOf(o)).concat(e.slice(a+1)),n.remove(i)),r&&e.push(n.set(i,{on:r})),t)},i}function N(){t.event.preventDefault()}function F(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function j(e){for(var n=new R,i=0,r=arguments.length;++i<r;)n[arguments[i]]=B(n);return n.of=function(i,r){return function(a){try{var o=a.sourceEvent=t.event;a.target=e,t.event=a,n[a.type].apply(i,r)}finally{t.event=o}}},n}t.dispatch=function(){for(var t=new R,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=B(t);return t},R.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},t.event=null,t.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,$={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function q(t){return $(t,U),t}var Z=function(t,e){return e.querySelector(t)},V=function(t,e){return e.querySelectorAll(t)},W=function(t,e){var n=t.matches||t[D(t,"matchesSelector")];return(W=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Z=function(t,e){return Sizzle(t,e)[0]||null},V=Sizzle,W=Sizzle.matchesSelector),t.selection=function(){return t.select(r.documentElement)};var U=t.selection.prototype=[];function G(t){return"function"==typeof t?t:function(){return Z(t,this)}}function X(t){return"function"==typeof t?t:function(){return V(t,this)}}U.select=function(t){var e,n,i,r,a=[];t=G(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var l=-1,c=i.length;++l<c;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return q(a)},U.selectAll=function(t){var e,n,r=[];t=X(t);for(var a=-1,o=this.length;++a<o;)for(var s=this[a],l=-1,c=s.length;++l<c;)(n=s[l])&&(r.push(e=i(t.call(n,n.__data__,l,a))),e.parentNode=n);return q(r)};var Y="http://www.w3.org/1999/xhtml",Q={svg:"http://www.w3.org/2000/svg",xhtml:Y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function K(e,n){return e=t.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function J(t){return t.trim().replace(/\s+/g," ")}function tt(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function nt(t,e){var n=(t=et(t).map(it)).length;return"function"==typeof e?function(){for(var i=-1,r=e.apply(this,arguments);++i<n;)t[i](this,r)}:function(){for(var i=-1;++i<n;)t[i](this,e)}}function it(t){var e=tt(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",J(r+" "+t))):n.setAttribute("class",J(r.replace(e," ")))}}function rt(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}:function(){this.style.setProperty(t,e,n)}}function at(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ot(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Y&&t.documentElement.namespaceURI===Y?t.createElement(e):t.createElementNS(n,e)}}function st(){var t=this.parentNode;t&&t.removeChild(this)}function lt(t){return{__data__:t}}function ct(t){return function(){return W(this,t)}}function ut(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,a=t[n],o=0,s=a.length;o<s;o++)(r=a[o])&&e(r,o,n);return t}function ht(t){return $(t,dt),t}t.ns={prefix:Q,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Q.hasOwnProperty(n)?{space:Q[n],local:t}:t}},U.attr=function(e,n){if(arguments.length<2){if("string"==typeof e){var i=this.node();return(e=t.ns.qualify(e)).local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}for(n in e)this.each(K(n,e[n]));return this}return this.each(K(e,n))},U.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=et(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!tt(t[r]).test(e))return!1;return!0}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},U.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(rt(n,t[n],e));return this}if(i<2){var r=this.node();return o(r).getComputedStyle(r,null).getPropertyValue(t)}n=""}return this.each(rt(t,e,n))},U.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},U.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},U.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},U.append=function(t){return t=ot(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},U.insert=function(t,e){return t=ot(t),e=G(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},U.remove=function(){return this.each(st)},U.data=function(t,e){var n,i,r=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++r<a;)(i=n[r])&&(t[r]=i.__data__);return t}function o(t,n){var i,r,a,o=t.length,u=n.length,h=Math.min(o,u),d=new Array(u),f=new Array(u),p=new Array(o);if(e){var v,g=new x,m=new Array(o);for(i=-1;++i<o;)(r=t[i])&&(g.has(v=e.call(r,r.__data__,i))?p[i]=r:g.set(v,r),m[i]=v);for(i=-1;++i<u;)(r=g.get(v=e.call(n,a=n[i],i)))?!0!==r&&(d[i]=r,r.__data__=a):f[i]=lt(a),g.set(v,!0);for(i=-1;++i<o;)i in m&&!0!==g.get(m[i])&&(p[i]=t[i])}else{for(i=-1;++i<h;)a=n[i],(r=t[i])?(r.__data__=a,d[i]=r):f[i]=lt(a);for(;i<u;++i)f[i]=lt(n[i]);for(;i<o;++i)p[i]=t[i]}f.update=d,f.parentNode=d.parentNode=p.parentNode=t.parentNode,s.push(f),l.push(d),c.push(p)}var s=ht([]),l=q([]),c=q([]);if("function"==typeof t)for(;++r<a;)o(n=this[r],t.call(n,n.parentNode.__data__,r));else for(;++r<a;)o(n=this[r],t);return l.enter=function(){return s},l.exit=function(){return c},l},U.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},U.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=ct(t));for(var a=0,o=this.length;a<o;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(i=n[s])&&t.call(i,i.__data__,s,a)&&e.push(i)}return q(r)},U.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},U.sort=function(t){t=(function(t){return arguments.length||(t=d),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}).apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},U.each=function(t){return ut(this,function(e,n,i){t.call(e,e.__data__,n,i)})},U.call=function(t){var e=i(arguments);return t.apply(e[0]=this,e),this},U.empty=function(){return!this.node()},U.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var a=n[i];if(a)return a}return null},U.size=function(){var t=0;return ut(this,function(){++t}),t};var dt=[];function ft(e,n,r){var a="__on"+e,o=e.indexOf("."),s=vt;o>0&&(e=e.slice(0,o));var l=pt.get(e);function c(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}return l&&(e=l,s=gt),o?n?function(){var t=s(n,i(arguments));c.call(this),this.addEventListener(e,this[a]=t,t.$=r),t._=n}:c:n?I:function(){var n,i=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var r in this)if(n=r.match(i)){var a=this[r];this.removeEventListener(n[1],a,a.$),delete this[r]}}}t.selection.enter=ht,t.selection.enter.prototype=dt,dt.append=U.append,dt.empty=U.empty,dt.node=U.node,dt.call=U.call,dt.size=U.size,dt.select=function(t){for(var e,n,i,r,a,o=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var c=-1,u=r.length;++c<u;)(a=r[c])?(e.push(i[c]=n=t.call(r.parentNode,a.__data__,c,s)),n.__data__=a.__data__):e.push(null)}return q(o)},dt.insert=function(t,e){var n,i,r;return arguments.length<2&&(n=this,e=function(t,e,a){var o,s=n[a].update,l=s.length;for(a!=r&&(r=a,i=0),e>=i&&(i=e+1);!(o=s[i])&&++i<l;);return o}),U.insert.call(this,t,e)},t.select=function(t){var e;return"string"==typeof t?(e=[Z(t,r)]).parentNode=r.documentElement:(e=[t]).parentNode=a(t),q([e])},t.selectAll=function(t){var e;return"string"==typeof t?(e=i(V(t,r))).parentNode=r.documentElement:(e=i(t)).parentNode=null,q([e])},U.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(ft(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(ft(t,e,n))};var pt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function vt(e,n){return function(i){var r=t.event;t.event=i,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=r}}}function gt(t,e){var n=vt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}r&&pt.forEach(function(t){"on"+t in r&&pt.remove(t)});var mt,yt=0;function _t(e){var n=".dragsuppress-"+ ++yt,i="click"+n,r=t.select(o(e)).on("touchmove"+n,N).on("dragstart"+n,N).on("selectstart"+n,N);if(null==mt&&(mt=!("onselectstart"in e)&&D(e.style,"userSelect")),mt){var s=a(e).style,l=s[mt];s[mt]="none"}return function(t){if(r.on(n,null),mt&&(s[mt]=l),t){var e=function(){r.on(i,null)};r.on(i,function(){N(),e()},!0),setTimeout(e,0)}}}t.mouse=function(t){return bt(t,F())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function bt(e,n){n.changedTouches&&(n=n.changedTouches[0]);var i=e.ownerSVGElement||e;if(i.createSVGPoint){var r=i.createSVGPoint();if(xt<0){var a=o(e);if(a.scrollX||a.scrollY){var s=(i=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(s.f||s.e),i.remove()}}return xt?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var l=e.getBoundingClientRect();return[n.clientX-l.left-e.clientLeft,n.clientY-l.top-e.clientTop]}function wt(){return t.event.changedTouches[0].identifier}t.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=F().changedTouches),e)for(var i,r=0,a=e.length;r<a;++r)if((i=e[r]).identifier===n)return bt(t,i)},t.behavior.drag=function(){var e=j(a,"drag","dragstart","dragend"),n=null,i=s(I,t.mouse,o,"mousemove","mouseup"),r=s(wt,t.touch,O,"touchmove","touchend");function a(){this.on("mousedown.drag",i).on("touchstart.drag",r)}function s(i,r,a,o,s){return function(){var l,c=t.event.target.correspondingElement||t.event.target,u=this.parentNode,h=e.of(this,arguments),d=0,f=i(),p=".drag"+(null==f?"":"-"+f),v=t.select(a(c)).on(o+p,function(){var t,e,n=r(u,f);n&&(d|=(t=n[0]-m[0])|(e=n[1]-m[1]),m=n,h({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e}))}).on(s+p,function(){r(u,f)&&(v.on(o+p,null).on(s+p,null),g(d),h({type:"dragend"}))}),g=_t(c),m=r(u,f);l=n?[(l=n.apply(this,arguments)).x-m[0],l.y-m[1]]:[0,0],h({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(n=t,a):n},t.rebind(a,e,"on")},t.touches=function(t,e){return arguments.length<2&&(e=F().touches),e?i(e).map(function(e){var n=bt(t,e);return n.identifier=e.identifier,n}):[]};var kt=1e-6,Tt=kt*kt,Mt=Math.PI,At=2*Mt,Ct=At-kt,Lt=Mt/2,St=Mt/180,Et=180/Mt;function Ot(t){return t>0?1:t<0?-1:0}function Pt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Dt(t){return t>1?0:t<-1?Mt:Math.acos(t)}function zt(t){return t>1?Lt:t<-1?-Lt:Math.asin(t)}function It(t){return((t=Math.exp(t))+1/t)/2}function Rt(t){return(t=Math.sin(t/2))*t}var Bt=Math.SQRT2;t.interpolateZoom=function(t,e){var n,i,r=t[0],a=t[1],o=t[2],s=e[2],l=e[0]-r,c=e[1]-a,u=l*l+c*c;if(u<Tt)i=Math.log(s/o)/Bt,n=function(t){return[r+t*l,a+t*c,o*Math.exp(Bt*t*i)]};else{var h=Math.sqrt(u),d=(s*s-o*o+4*u)/(2*o*2*h),f=(s*s-o*o-4*u)/(2*s*2*h),p=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(f*f+1)-f);i=(v-p)/Bt,n=function(t){var e,n=t*i,s=It(p),u=o/(2*h)*(s*(e=Bt*n+p,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[r+u*l,a+u*c,o*s/It(Bt*n+p)]}}return n.duration=1e3*i,n},t.behavior.zoom=function(){var e,n,i,a,s,l,c,u,h,d={x:0,y:0,k:1},f=[960,500],p=jt,v=250,g=0,m="mousedown.zoom",y="mousemove.zoom",_="mouseup.zoom",x="touchstart.zoom",b=j(w,"zoomstart","zoom","zoomend");function w(t){t.on(m,O).on(Ft+".zoom",D).on("dblclick.zoom",z).on(x,P)}function k(t){return[(t[0]-d.x)/d.k,(t[1]-d.y)/d.k]}function T(t){d.k=Math.max(p[0],Math.min(p[1],t))}function M(t,e){d.x+=t[0]-(e=[e[0]*d.k+d.x,e[1]*d.k+d.y])[0],d.y+=t[1]-e[1]}function A(e,i,r,a){e.__chart__={x:d.x,y:d.y,k:d.k},T(Math.pow(2,a)),M(n=i,r),e=t.select(e),v>0&&(e=e.transition().duration(v)),e.call(w.event)}function C(){c&&c.domain(l.range().map(function(t){return(t-d.x)/d.k}).map(l.invert)),h&&h.domain(u.range().map(function(t){return(t-d.y)/d.k}).map(u.invert))}function L(t){g++||t({type:"zoomstart"})}function S(t){C(),t({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function E(t){--g||(t({type:"zoomend"}),n=null)}function O(){var e=this,n=b.of(e,arguments),i=0,r=t.select(o(e)).on(y,function(){i=1,M(t.mouse(e),a),S(n)}).on(_,function(){r.on(y,null).on(_,null),s(i),E(n)}),a=k(t.mouse(e)),s=_t(e);us.call(e),L(n)}function P(){var e,n=this,i=b.of(n,arguments),r={},a=0,o=".zoom-"+t.event.changedTouches[0].identifier,l="touchmove"+o,c="touchend"+o,u=[],h=t.select(n),f=_t(n);function p(){var i=t.touches(n);return e=d.k,i.forEach(function(t){t.identifier in r&&(r[t.identifier]=k(t))}),i}function v(){var e=t.event.target;t.select(e).on(l,g).on(c,y),u.push(e);for(var i=t.event.changedTouches,o=0,h=i.length;o<h;++o)r[i[o].identifier]=null;var f=p(),v=Date.now();if(1===f.length){if(v-s<500){var m=f[0];A(n,m,r[m.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),N()}s=v}else if(f.length>1){var _=f[1],x=(m=f[0])[0]-_[0],b=m[1]-_[1];a=x*x+b*b}}function g(){var o,l,c,u,h=t.touches(n);us.call(n);for(var d=0,f=h.length;d<f;++d,u=null)if(u=r[(c=h[d]).identifier]){if(l)break;o=c,l=u}if(u){var p=(p=c[0]-o[0])*p+(p=c[1]-o[1])*p,v=a&&Math.sqrt(p/a);o=[(o[0]+c[0])/2,(o[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],T(v*e)}s=null,M(o,l),S(i)}function y(){if(t.event.touches.length){for(var e=t.event.changedTouches,n=0,a=e.length;n<a;++n)delete r[e[n].identifier];for(var s in r)return void p()}t.selectAll(u).on(o,null),h.on(m,O).on(x,P),f(),E(i)}v(),L(i),h.on(m,null).on(x,v)}function D(){var r=b.of(this,arguments);a?clearTimeout(a):(us.call(this),e=k(n=i||t.mouse(this)),L(r)),a=setTimeout(function(){a=null,E(r)},50),N(),T(Math.pow(2,.002*Nt())*d.k),M(n,e),S(r)}function z(){var e=t.mouse(this),n=Math.log(d.k)/Math.LN2;A(this,e,k(e),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return Ft||(Ft="onwheel"in r?(Nt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?(Nt=function(){return t.event.wheelDelta},"mousewheel"):(Nt=function(){return-t.event.detail},"MozMousePixelScroll")),w.event=function(e){e.each(function(){var e=b.of(this,arguments),i=d;fs?t.select(this).transition().each("start.zoom",function(){d=this.__chart__||{x:0,y:0,k:1},L(e)}).tween("zoom:zoom",function(){var r=f[0],a=n?n[0]:r/2,o=n?n[1]:f[1]/2,s=t.interpolateZoom([(a-d.x)/d.k,(o-d.y)/d.k,r/d.k],[(a-i.x)/i.k,(o-i.y)/i.k,r/i.k]);return function(t){var n=s(t),i=r/n[2];this.__chart__=d={x:a-n[0]*i,y:o-n[1]*i,k:i},S(e)}}).each("interrupt.zoom",function(){E(e)}).each("end.zoom",function(){E(e)}):(this.__chart__=d,L(e),S(e),E(e))})},w.translate=function(t){return arguments.length?(d={x:+t[0],y:+t[1],k:d.k},C(),w):[d.x,d.y]},w.scale=function(t){return arguments.length?(d={x:d.x,y:d.y,k:null},T(+t),C(),w):d.k},w.scaleExtent=function(t){return arguments.length?(p=null==t?jt:[+t[0],+t[1]],w):p},w.center=function(t){return arguments.length?(i=t&&[+t[0],+t[1]],w):i},w.size=function(t){return arguments.length?(f=t&&[+t[0],+t[1]],w):f},w.duration=function(t){return arguments.length?(v=+t,w):v},w.x=function(t){return arguments.length?(c=t,l=t.copy(),d={x:0,y:0,k:1},w):c},w.y=function(t){return arguments.length?(h=t,u=t.copy(),d={x:0,y:0,k:1},w):h},t.rebind(w,b,"on")};var Nt,Ft,jt=[0,1/0];function Ht(){}function $t(t,e,n){return this instanceof $t?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof $t?new $t(t.h,t.s,t.l):ce(""+t,ue,$t):new $t(t,e,n)}t.color=Ht,Ht.prototype.toString=function(){return this.rgb()+""},t.hsl=$t;var qt=$t.prototype=new Ht;function Zt(t,e,n){var i,r;function a(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?i+(r-i)*t/60:t<180?r:t<240?i+(r-i)*(240-t)/60:i}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,i=2*(n=n<0?0:n>1?1:n)-(r=n<=.5?n*(1+e):n+e-n*e),new re(a(t+120),a(t),a(t-120))}function Vt(e,n,i){return this instanceof Vt?(this.h=+e,this.c=+n,void(this.l=+i)):arguments.length<2?e instanceof Vt?new Vt(e.h,e.c,e.l):function(t,e,n){return t>0?new Vt(Math.atan2(n,e)*Et,Math.sqrt(e*e+n*n),t):new Vt(NaN,NaN,t)}(e instanceof Gt?e.l:(e=he((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Vt(e,n,i)}qt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new $t(this.h,this.s,this.l/t)},qt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new $t(this.h,this.s,t*this.l)},qt.rgb=function(){return Zt(this.h,this.s,this.l)},t.hcl=Vt;var Wt=Vt.prototype=new Ht;function Ut(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Gt(n,Math.cos(t*=St)*e,Math.sin(t)*e)}function Gt(t,e,n){return this instanceof Gt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Gt?new Gt(t.l,t.a,t.b):t instanceof Vt?Ut(t.h,t.c,t.l):he((t=re(t)).r,t.g,t.b):new Gt(t,e,n)}Wt.brighter=function(t){return new Vt(this.h,this.c,Math.min(100,this.l+Xt*(arguments.length?t:1)))},Wt.darker=function(t){return new Vt(this.h,this.c,Math.max(0,this.l-Xt*(arguments.length?t:1)))},Wt.rgb=function(){return Ut(this.h,this.c,this.l).rgb()},t.lab=Gt;var Xt=18,Yt=.95047,Qt=1,Kt=1.08883,Jt=Gt.prototype=new Ht;function te(t,e,n){var i=(t+16)/116,r=i+e/500,a=i-n/200;return new re(ie(3.2404542*(r=ee(r)*Yt)-1.5371385*(i=ee(i)*Qt)-.4985314*(a=ee(a)*Kt)),ie(-.969266*r+1.8760108*i+.041556*a),ie(.0556434*r-.2040259*i+1.0572252*a))}function ee(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ne(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ie(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function re(t,e,n){return this instanceof re?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof re?new re(t.r,t.g,t.b):ce(""+t,re,Zt):new re(t,e,n)}function ae(t){return new re(t>>16,t>>8&255,255&t)}function oe(t){return ae(t)+""}Jt.brighter=function(t){return new Gt(Math.min(100,this.l+Xt*(arguments.length?t:1)),this.a,this.b)},Jt.darker=function(t){return new Gt(Math.max(0,this.l-Xt*(arguments.length?t:1)),this.a,this.b)},Jt.rgb=function(){return te(this.l,this.a,this.b)},t.rgb=re;var se=re.prototype=new Ht;function le(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ce(t,e,n){var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(fe(r[0]),fe(r[1]),fe(r[2]))}return(a=pe.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),e(o,s,l))}function ue(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(r=l<.5?s/(o+a):s/(2-o-a),i=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=l>0&&l<1?0:i),new $t(i,r,l)}function he(t,e,n){var i=ne((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(n=de(n)))/Yt),r=ne((.2126729*t+.7151522*e+.072175*n)/Qt);return Gt(116*r-16,500*(i-r),200*(r-ne((.0193339*t+.119192*e+.9503041*n)/Kt)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}se.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&e<r&&(e=r),n&&n<r&&(n=r),i&&i<r&&(i=r),new re(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new re(r,r,r)},se.darker=function(t){return new re((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},se.hsl=function(){return ue(this.r,this.g,this.b)},se.toString=function(){return"#"+le(this.r)+le(this.g)+le(this.b)};var pe=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ve(t){return"function"==typeof t?t:function(){return t}}function ge(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),me(e,n,t,i)}}function me(e,n,r,a){var o={},s=t.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function h(){var t,e=c.status;if(!e&&function(t){var e=c.responseType;return e&&"text"!==e?c.response:c.responseText}()||e>=200&&e<300||304===e){try{t=r.call(o,c)}catch(t){return void s.error.call(o,t)}s.load.call(o,t)}else s.error.call(o,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(e)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=h:c.onreadystatechange=function(){c.readyState>3&&h()},c.onprogress=function(e){var n=t.event;t.event=e;try{s.progress.call(o,c)}finally{t.event=n}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return r=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(i(arguments)))}}),o.send=function(t,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),c.open(t,e,!0),null==n||"accept"in l||(l.accept=n+",*/*"),c.setRequestHeader)for(var a in l)c.setRequestHeader(a,l[a]);return null!=n&&c.overrideMimeType&&c.overrideMimeType(n),null!=u&&(c.responseType=u),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),s.beforesend.call(o,c),c.send(null==i?null:i),o},o.abort=function(){return c.abort(),o},t.rebind(o,s,"on"),null==a?o:o.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(a))}pe.forEach(function(t,e){pe.set(t,ae(e))}),t.functor=ve,t.xhr=ge(O),t.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),i=t.charCodeAt(0);function r(t,n,i){arguments.length<3&&(i=n,n=null);var r=me(t,e,null==n?a:o(n),i);return r.row=function(t){return arguments.length?r.response(null==(n=t)?a:o(t)):n},r}function a(t){return r.parse(t.responseText)}function o(t){return function(e){return r.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return r.parse=function(t,e){var n;return r.parseRows(t,function(t,i){if(n)return n(t,i-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(r(t),n)}:r})},r.parseRows=function(t,e){var n,r,a={},o={},s=[],l=t.length,c=0,u=0;function h(){if(c>=l)return o;if(r)return r=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return c=n+2,13===(s=t.charCodeAt(n+1))?(r=!0,10===t.charCodeAt(n+2)&&++c):10===s&&(r=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=t.charCodeAt(c++)))r=!0;else if(13===s)r=!0,10===t.charCodeAt(c)&&(++c,++u);else if(s!==i)continue;return t.slice(e,c-u)}return t.slice(e)}for(;(n=h())!==o;){for(var d=[];n!==a&&n!==o;)d.push(n),n=h();e&&null==(d=e(d,u++))||s.push(d)}return s},r.format=function(e){if(Array.isArray(e[0]))return r.formatRows(e);var n=new E,i=[];return e.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(l).join(t)].concat(e.map(function(e){return i.map(function(t){return l(e[t])}).join(t)})).join("\n")},r.formatRows=function(t){return t.map(s).join("\n")},r},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var ye,_e,xe,be,we=this[D(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function ke(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var r={c:t,t:n+e,n:null};return _e?_e.n=r:ye=r,_e=r,xe||(be=clearTimeout(be),xe=1,we(Te)),r}function Te(){var t=Me(),e=Ae()-t;e>24?(isFinite(e)&&(clearTimeout(be),be=setTimeout(Te,e)),xe=0):(xe=1,we(Te))}function Me(){for(var t=Date.now(),e=ye;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ae(){for(var t,e=ye,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ye=e.n;return _e=t,n}function Ce(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.timer=function(){ke.apply(this,arguments)},t.timer.flush=function(){Me(),Ae()},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Le=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*y(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});t.formatPrefix=function(e,n){var i=0;return(e=+e)&&(e<0&&(e*=-1),n&&(e=t.round(e,Ce(e,n))),i=1+Math.floor(1e-12+Math.log(e)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i-1)/3)))),Le[8+i/3]};var Se=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ee=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(e,n){return(e=t.round(e,Ce(e,n))).toFixed(Math.max(0,Math.min(20,Ce(e*(1+1e-15),n))))}});function Oe(t){return t+""}var Pe=t.time={},De=Date;function ze(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}ze.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ie.setUTCDate.apply(this._,arguments)},setDay:function(){Ie.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ie.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ie.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ie.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ie.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ie.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ie.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ie.setTime.apply(this._,arguments)}};var Ie=Date.prototype;function Re(t,e,n){function i(e){var n=t(e),i=a(n,1);return e-n<i-e?n:i}function r(n){return e(n=t(new De(n-1)),1),n}function a(t,n){return e(t=new De(+t),n),t}function o(t,i,a){var o=r(t),s=[];if(a>1)for(;o<i;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;o<i;)s.push(new Date(+o)),e(o,1);return s}t.floor=t,t.round=i,t.ceil=r,t.offset=a,t.range=o;var s=t.utc=Be(t);return s.floor=s,s.round=Be(i),s.ceil=Be(r),s.offset=Be(a),s.range=function(t,e,n){try{De=ze;var i=new ze;return i._=t,o(i,e,n)}finally{De=Date}},t}function Be(t){return function(e,n){try{De=ze;var i=new ze;return i._=e,t(i,n)._}finally{De=Date}}}Pe.year=Re(function(t){return(t=Pe.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Pe.years=Pe.year.range,Pe.years.utc=Pe.year.utc.range,Pe.day=Re(function(t){var e=new De(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Pe.days=Pe.day.range,Pe.days.utc=Pe.day.utc.range,Pe.dayOfYear=function(t){var e=Pe.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Pe[t]=Re(function(t){return(t=Pe.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Pe.year(t).getDay();return Math.floor((Pe.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Pe[t+"s"]=n.range,Pe[t+"s"].utc=n.utc.range,Pe[t+"OfYear"]=function(t){var n=Pe.year(t).getDay();return Math.floor((Pe.dayOfYear(t)+(n+e)%7)/7)}}),Pe.week=Pe.sunday,Pe.weeks=Pe.sunday.range,Pe.weeks.utc=Pe.sunday.utc.range,Pe.weekOfYear=Pe.sundayOfYear;var Ne={"-":"",_:" ",0:"0"},Fe=/^\s*\d+/,je=/^%/;function He(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function $e(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function qe(t){for(var e=new x,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Ze(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ve(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function We(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Ue(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ge(t,e,n){Fe.lastIndex=0;var i,r=Fe.exec(e.slice(n,n+2));return r?(t.y=(i=+r[0])+(i>68?1900:2e3),n+r[0].length):-1}function Xe(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ye(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Qe(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Ke(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function Je(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function tn(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function en(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function nn(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function rn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=y(e)/60|0,r=y(e)%60;return n+He(i,"0",2)+He(r,"0",2)}function an(t,e,n){je.lastIndex=0;var i=je.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function on(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}t.locale=function(e){return{numberFormat:function(e){var n=e.decimal,i=e.thousands,r=e.grouping,a=e.currency,o=r&&i?function(t,e){for(var n=t.length,a=[],o=0,s=r[0],l=0;n>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),a.push(t.substring(n-=s,n+s)),!((l+=s+1)>e));)s=r[o=(o+1)%r.length];return a.reverse().join(i)}:O;return function(e){var i=Se.exec(e),r=i[1]||" ",s=i[2]||">",l=i[3]||"-",c=i[4]||"",u=i[5],h=+i[6],d=i[7],f=i[8],p=i[9],v=1,g="",m="",y=!1,_=!0;switch(f&&(f=+f.substring(1)),(u||"0"===r&&"="===s)&&(u=r="0",s="="),p){case"n":d=!0,p="g";break;case"%":v=100,m="%",p="f";break;case"p":v=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===c&&(g="0"+p.toLowerCase());case"c":_=!1;case"d":y=!0,f=0;break;case"s":v=-1,p="r"}"$"===c&&(g=a[0],m=a[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=Ee.get(p)||Oe;var x=u&&d;return function(e){var i=m;if(y&&e%1)return"";var a=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===l?"":l;if(v<0){var c=t.formatPrefix(e,f);e=c.scale(e),i=c.symbol+m}else e*=v;var b,w,k=(e=p(e,f)).lastIndexOf(".");if(k<0){var T=_?e.lastIndexOf("e"):-1;T<0?(b=e,w=""):(b=e.substring(0,T),w=e.substring(T))}else b=e.substring(0,k),w=n+e.substring(k+1);!u&&d&&(b=o(b,1/0));var M=g.length+b.length+w.length+(x?0:a.length),A=M<h?new Array(M=h-M+1).join(r):"";return x&&(b=o(A+b,A.length?h-w.length:1/0)),a+=g,e=b+w,("<"===s?a+e+A:">"===s?A+a+e:"^"===s?A.substring(0,M>>=1)+a+e+A.substring(M):a+(x?e:A+e))+i}}}(e),timeFormat:function(e){var n=e.dateTime,i=e.date,r=e.time,a=e.periods,o=e.days,s=e.shortDays,l=e.months,c=e.shortMonths;function u(t){var e=t.length;function n(n){for(var i,r,a,o=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(r=Ne[i=t.charAt(++s)])&&(i=t.charAt(++s)),(a=b[i])&&(i=a(n,null==r?"e"===i?" ":"0":r)),o.push(i),l=s+1);return o.push(t.slice(l,s)),o.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=null!=n.Z&&De!==ze,r=new(i?ze:De);return"j"in n?r.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),r.setFullYear(n.y,0,1),r.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(r.getDay()+5)%7:n.w+7*n.U-(r.getDay()+6)%7)):r.setFullYear(n.y,n.m,n.d),r.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?r._:r},n.toString=function(){return t},n}function h(t,e,n,i){for(var r,a,o,s=0,l=e.length,c=n.length;s<l;){if(i>=c)return-1;if(37===(r=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=w[o in Ne?e.charAt(s++):o])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}u.utc=function(t){var e=u(t);function n(t){try{var n=new(De=ze);return n._=t,e(n)}finally{De=Date}}return n.parse=function(t){try{De=ze;var n=e.parse(t);return n&&n._}finally{De=Date}},n.toString=e.toString,n},u.multi=u.utc.multi=on;var d=t.map(),f=$e(o),p=qe(o),v=$e(s),g=qe(s),m=$e(l),y=qe(l),_=$e(c),x=qe(c);a.forEach(function(t,e){d.set(t.toLowerCase(),e)});var b={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:u(n),d:function(t,e){return He(t.getDate(),e,2)},e:function(t,e){return He(t.getDate(),e,2)},H:function(t,e){return He(t.getHours(),e,2)},I:function(t,e){return He(t.getHours()%12||12,e,2)},j:function(t,e){return He(1+Pe.dayOfYear(t),e,3)},L:function(t,e){return He(t.getMilliseconds(),e,3)},m:function(t,e){return He(t.getMonth()+1,e,2)},M:function(t,e){return He(t.getMinutes(),e,2)},p:function(t){return a[+(t.getHours()>=12)]},S:function(t,e){return He(t.getSeconds(),e,2)},U:function(t,e){return He(Pe.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return He(Pe.mondayOfYear(t),e,2)},x:u(i),X:u(r),y:function(t,e){return He(t.getFullYear()%100,e,2)},Y:function(t,e){return He(t.getFullYear()%1e4,e,4)},Z:rn,"%":function(){return"%"}},w={a:function(t,e,n){v.lastIndex=0;var i=v.exec(e.slice(n));return i?(t.w=g.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){f.lastIndex=0;var i=f.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){_.lastIndex=0;var i=_.exec(e.slice(n));return i?(t.m=x.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){m.lastIndex=0;var i=m.exec(e.slice(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return h(t,b.c.toString(),e,n)},d:Qe,e:Qe,H:Je,I:Je,j:Ke,L:nn,m:Ye,M:tn,p:function(t,e,n){var i=d.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:en,U:Ve,w:Ze,W:We,x:function(t,e,n){return h(t,b.x.toString(),e,n)},X:function(t,e,n){return h(t,b.X.toString(),e,n)},y:Ge,Y:Ue,Z:Xe,"%":an};return u}(e)}};var sn=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ln(){}t.format=sn.numberFormat,t.geo={},ln.prototype={s:0,t:0,add:function(t){un(t,this.t,cn),un(cn.s,this.s,this),this.s?this.t+=cn.t:this.s=cn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var cn=new ln;function un(t,e,n){var i=n.s=t+e,r=i-t;n.t=t-(i-r)+(e-r)}function hn(t,e){t&&fn.hasOwnProperty(t.type)&&fn[t.type](t,e)}t.geo.stream=function(t,e){t&&dn.hasOwnProperty(t.type)?dn[t.type](t,e):hn(t,e)};var dn={Feature:function(t,e){hn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)hn(n[i].geometry,e)}},fn={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)e.point((t=n[i])[0],t[1],t[2])},LineString:function(t,e){pn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)pn(n[i],e,0)},Polygon:function(t,e){vn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)vn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)hn(n[i],e)}};function pn(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)e.point((i=t[r])[0],i[1],i[2]);e.lineEnd()}function vn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)pn(t[n],e,1);e.polygonEnd()}t.geo.area=function(e){return gn=0,t.geo.stream(e,Sn),gn};var gn,mn,yn,_n,xn,bn,wn,kn,Tn,Mn,An,Cn,Ln=new ln,Sn={sphere:function(){gn+=4*Mt},point:I,lineStart:I,lineEnd:I,polygonStart:function(){Ln.reset(),Sn.lineStart=En},polygonEnd:function(){var t=2*Ln;gn+=t<0?4*Mt+t:t,Sn.lineStart=Sn.lineEnd=Sn.point=I}};function En(){var t,e,n,i,r;function a(t,e){e=e*St/2+Mt/4;var a=(t*=St)-n,o=a>=0?1:-1,s=o*a,l=Math.cos(e),c=Math.sin(e),u=r*c,h=i*l+u*Math.cos(s),d=u*o*Math.sin(s);Ln.add(Math.atan2(d,h)),n=t,i=l,r=c}Sn.point=function(o,s){Sn.point=a,n=(t=o)*St,i=Math.cos(s=(e=s)*St/2+Mt/4),r=Math.sin(s)},Sn.lineEnd=function(){a(t,e)}}function On(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Pn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Dn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function zn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function In(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Rn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Bn(t){return[Math.atan2(t[1],t[0]),zt(t[2])]}function Nn(t,e){return y(t[0]-e[0])<kt&&y(t[1]-e[1])<kt}t.geo.bounds=function(){var e,n,i,r,a,o,s,l,c,u,h,d={point:f,lineStart:v,lineEnd:g,polygonStart:function(){d.point=m,d.lineStart=_,d.lineEnd=x,c=0,Sn.polygonStart()},polygonEnd:function(){Sn.polygonEnd(),d.point=f,d.lineStart=v,d.lineEnd=g,Ln<0?(e=-(i=180),n=-(r=90)):c>kt?r=90:c<-kt&&(n=-90),h[0]=e,h[1]=i}};function f(t,a){u.push(h=[e=t,i=t]),a<n&&(n=a),a>r&&(r=a)}function p(t,o){var s=On([t*St,o*St]);if(l){var c=Dn(l,s),u=Dn([c[1],-c[0],0],c);Rn(u),u=Bn(u);var h=t-a,d=h>0?1:-1,p=u[0]*Et*d,v=y(h)>180;if(v^(d*a<p&&p<d*t))(g=u[1]*Et)>r&&(r=g);else if(v^(d*a<(p=(p+360)%360-180)&&p<d*t)){var g;(g=-u[1]*Et)<n&&(n=g)}else o<n&&(n=o),o>r&&(r=o);v?t<a?b(e,t)>b(e,i)&&(i=t):b(t,i)>b(e,i)&&(e=t):i>=e?(t<e&&(e=t),t>i&&(i=t)):t>a?b(e,t)>b(e,i)&&(i=t):b(t,i)>b(e,i)&&(e=t)}else f(t,o);l=s,a=t}function v(){d.point=p}function g(){h[0]=e,h[1]=i,d.point=f,l=null}function m(t,e){if(l){var n=t-a;c+=y(n)>180?n+(n>0?360:-360):n}else o=t,s=e;Sn.point(t,e),p(t,e)}function _(){Sn.lineStart()}function x(){m(o,s),Sn.lineEnd(),y(c)>kt&&(e=-(i=180)),h[0]=e,h[1]=i,l=null}function b(t,e){return(e-=t)<0?e+360:e}function w(t,e){return t[0]-e[0]}function k(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(a){if(r=i=-(e=n=1/0),u=[],t.geo.stream(a,d),c=u.length){u.sort(w);for(var o=1,s=[v=u[0]];o<c;++o)k((f=u[o])[0],v)||k(f[1],v)?(b(v[0],f[1])>b(v[0],v[1])&&(v[1]=f[1]),b(f[0],v[1])>b(v[0],v[1])&&(v[0]=f[0])):s.push(v=f);for(var l,c,f,p=-1/0,v=(o=0,s[c=s.length-1]);o<=c;v=f,++o)(l=b(v[1],(f=s[o])[0]))>p&&(p=l,e=f[0],i=v[1])}return u=h=null,e===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,n],[i,r]]}}(),t.geo.centroid=function(e){mn=yn=_n=xn=bn=wn=kn=Tn=Mn=An=Cn=0,t.geo.stream(e,Fn);var n=Mn,i=An,r=Cn,a=n*n+i*i+r*r;return a<Tt&&(n=wn,i=kn,r=Tn,yn<kt&&(n=_n,i=xn,r=bn),(a=n*n+i*i+r*r)<Tt)?[NaN,NaN]:[Math.atan2(i,n)*Et,zt(r/Math.sqrt(a))*Et]};var Fn={sphere:I,point:jn,lineStart:$n,lineEnd:qn,polygonStart:function(){Fn.lineStart=Zn},polygonEnd:function(){Fn.lineStart=$n}};function jn(t,e){t*=St;var n=Math.cos(e*=St);Hn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Hn(t,e,n){_n+=(t-_n)/++mn,xn+=(e-xn)/mn,bn+=(n-bn)/mn}function $n(){var t,e,n;function i(i,r){i*=St;var a=Math.cos(r*=St),o=a*Math.cos(i),s=a*Math.sin(i),l=Math.sin(r),c=Math.atan2(Math.sqrt((c=e*l-n*s)*c+(c=n*o-t*l)*c+(c=t*s-e*o)*c),t*o+e*s+n*l);yn+=c,wn+=c*(t+(t=o)),kn+=c*(e+(e=s)),Tn+=c*(n+(n=l)),Hn(t,e,n)}Fn.point=function(r,a){r*=St;var o=Math.cos(a*=St);t=o*Math.cos(r),e=o*Math.sin(r),n=Math.sin(a),Fn.point=i,Hn(t,e,n)}}function qn(){Fn.point=jn}function Zn(){var t,e,n,i,r;function a(t,e){t*=St;var a=Math.cos(e*=St),o=a*Math.cos(t),s=a*Math.sin(t),l=Math.sin(e),c=i*l-r*s,u=r*o-n*l,h=n*s-i*o,d=Math.sqrt(c*c+u*u+h*h),f=n*o+i*s+r*l,p=d&&-Dt(f)/d,v=Math.atan2(d,f);Mn+=p*c,An+=p*u,Cn+=p*h,yn+=v,wn+=v*(n+(n=o)),kn+=v*(i+(i=s)),Tn+=v*(r+(r=l)),Hn(n,i,r)}Fn.point=function(o,s){t=o,e=s,Fn.point=a,o*=St;var l=Math.cos(s*=St);n=l*Math.cos(o),i=l*Math.sin(o),r=Math.sin(s),Hn(n,i,r)},Fn.lineEnd=function(){a(t,e),Fn.lineEnd=qn,Fn.point=jn}}function Vn(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Wn(){return!0}function Un(t,e,n,i,r){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Nn(n,i)){r.lineStart();for(var s=0;s<e;++s)r.point((n=t[s])[0],n[1]);r.lineEnd()}else{var l=new Xn(n,t,null,!0),c=new Xn(n,null,l,!1);l.o=c,a.push(l),o.push(c),l=new Xn(i,t,null,!1),c=new Xn(i,null,l,!0),l.o=c,a.push(l),o.push(c)}}}),o.sort(e),Gn(a),Gn(o),a.length){for(var s=0,l=n,c=o.length;s<c;++s)o[s].e=l=!l;for(var u,h,d=a[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,c=u.length;s<c;++s)r.point((h=u[s])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(s=(u=f.p.z).length-1;s>=0;--s)r.point((h=u[s])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);r.lineEnd()}}}function Gn(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Xn(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Yn(e,n,i,r){return function(a,o){var s,l=n(o),c=a.invert(r[0],r[1]),u={point:h,lineStart:f,lineEnd:p,polygonStart:function(){u.point=x,u.lineStart=b,u.lineEnd=w,s=[],v=[]},polygonEnd:function(){u.point=h,u.lineStart=f,u.lineEnd=p,s=t.merge(s);var e=function(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Ln.reset();for(var s=0,l=e.length;s<l;++s){var c=e[s],u=c.length;if(u)for(var h=c[0],d=h[0],f=h[1]/2+Mt/4,p=Math.sin(f),v=Math.cos(f),g=1;;){g===u&&(g=0);var m=(t=c[g])[0],y=t[1]/2+Mt/4,_=Math.sin(y),x=Math.cos(y),b=m-d,w=b>=0?1:-1,k=w*b,T=k>Mt,M=p*_;if(Ln.add(Math.atan2(M*w*Math.sin(k),v*x+M*Math.cos(k))),a+=T?b+w*At:b,T^d>=n^m>=n){var A=Dn(On(h),On(t));Rn(A);var C=Dn(r,A);Rn(C);var L=(T^b>=0?-1:1)*zt(C[2]);(i>L||i===L&&(A[0]||A[1]))&&(o+=T^b>=0?1:-1)}if(!g++)break;d=m,p=_,v=x,h=t}}return(a<-kt||a<kt&&Ln<-kt)^1&o}(c,v);s.length?(_||(o.polygonStart(),_=!0),Un(s,Jn,e,i,o)):e&&(_||(o.polygonStart(),_=!0),o.lineStart(),i(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),s=v=null},sphere:function(){o.polygonStart(),o.lineStart(),i(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function h(t,n){var i=a(t,n);e(t=i[0],n=i[1])&&o.point(t,n)}function d(t,e){var n=a(t,e);l.point(n[0],n[1])}function f(){u.point=d,l.lineStart()}function p(){u.point=h,l.lineEnd()}var v,g,m=Kn(),y=n(m),_=!1;function x(t,e){g.push([t,e]);var n=a(t,e);y.point(n[0],n[1])}function b(){y.lineStart(),g=[]}function w(){x(g[0][0],g[0][1]),y.lineEnd();var t,e=y.clean(),n=m.buffer(),i=n.length;if(g.pop(),v.push(g),g=null,i)if(1&e){var r,a=-1;if((i=(t=n[0]).length-1)>0){for(_||(o.polygonStart(),_=!0),o.lineStart();++a<i;)o.point((r=t[a])[0],r[1]);o.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(Qn))}return u}}function Qn(t){return t.length>1}function Kn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:I,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Jn(t,e){return((t=t.x)[0]<0?t[1]-Lt-kt:Lt-t[1])-((e=e.x)[0]<0?e[1]-Lt-kt:Lt-e[1])}var ti=Yn(Wn,function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Mt:-Mt,l=y(a-n);y(l-Mt)<kt?(t.point(n,i=(i+o)/2>0?Lt:-Lt),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(a,i),e=0):r!==s&&l>=Mt&&(y(n-r)<kt&&(n-=r*kt),y(a-s)<kt&&(a-=s*kt),i=function(t,e,n,i){var r,a,o=Math.sin(t-n);return y(o)>kt?Math.atan((Math.sin(e)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*a*o)):(e+i)/2}(n,i,a,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=a,i=o),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)i.point(-Mt,r=n*Lt),i.point(0,r),i.point(Mt,r),i.point(Mt,0),i.point(Mt,-r),i.point(0,-r),i.point(-Mt,-r),i.point(-Mt,0),i.point(-Mt,r);else if(y(t[0]-e[0])>kt){var a=t[0]<e[0]?Mt:-Mt;i.point(-a,r=n*a/2),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])},[-Mt,-Mt/2]);function ei(t,e,n,i){return function(r){var a,o=r.a,s=r.b,l=o.x,c=o.y,u=0,h=1,d=s.x-l,f=s.y-c;if(a=t-l,d||!(a>0)){if(a/=d,d<0){if(a<u)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>u&&(u=a)}if(a=n-l,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>u&&(u=a)}else if(d>0){if(a<u)return;a<h&&(h=a)}if(a=e-c,f||!(a>0)){if(a/=f,f<0){if(a<u)return;a<h&&(h=a)}else if(f>0){if(a>h)return;a>u&&(u=a)}if(a=i-c,f||!(a<0)){if(a/=f,f<0){if(a>h)return;a>u&&(u=a)}else if(f>0){if(a<u)return;a<h&&(h=a)}return u>0&&(r.a={x:l+u*d,y:c+u*f}),h<1&&(r.b={x:l+h*d,y:c+h*f}),r}}}}}}var ni=1e9;function ii(e,n,i,r){return function(l){var c,u,h,d,f,p,v,g,m,y,_,x=l,b=Kn(),w=ei(e,n,i,r),k={point:A,lineStart:function(){k.point=C,u&&u.push(h=[]),y=!0,m=!1,v=g=NaN},lineEnd:function(){c&&(C(d,f),p&&m&&b.rejoin(),c.push(b.buffer())),k.point=A,m&&l.lineEnd()},polygonStart:function(){l=b,c=[],u=[],_=!0},polygonEnd:function(){l=x,c=t.merge(c);var n=function(t){for(var e=0,n=u.length,i=t[1],r=0;r<n;++r)for(var a,o=1,s=u[r],l=s.length,c=s[0];o<l;++o)a=s[o],c[1]<=i?a[1]>i&&Pt(c,a,t)>0&&++e:a[1]<=i&&Pt(c,a,t)<0&&--e,c=a;return 0!==e}([e,r]),i=_&&n,a=c.length;(i||a)&&(l.polygonStart(),i&&(l.lineStart(),T(null,null,1,l),l.lineEnd()),a&&Un(c,o,n,T,l),l.polygonEnd()),c=u=h=null}};function T(t,o,l,c){var u=0,h=0;if(null==t||(u=a(t,l))!==(h=a(o,l))||s(t,o)<0^l>0)do{c.point(0===u||3===u?e:i,u>1?r:n)}while((u=(u+l+4)%4)!==h);else c.point(o[0],o[1])}function M(t,a){return e<=t&&t<=i&&n<=a&&a<=r}function A(t,e){M(t,e)&&l.point(t,e)}function C(t,e){var n=M(t=Math.max(-ni,Math.min(ni,t)),e=Math.max(-ni,Math.min(ni,e)));if(u&&h.push([t,e]),y)d=t,f=e,p=n,y=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&m)l.point(t,e);else{var i={a:{x:v,y:g},b:{x:t,y:e}};w(i)?(m||(l.lineStart(),l.point(i.a.x,i.a.y)),l.point(i.b.x,i.b.y),n||l.lineEnd(),_=!1):n&&(l.lineStart(),l.point(t,e),_=!1)}v=t,g=e,m=n}return k};function a(t,r){return y(t[0]-e)<kt?r>0?0:3:y(t[0]-i)<kt?r>0?2:1:y(t[1]-n)<kt?r>0?1:0:r>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function ri(t){var e=0,n=Mt/3,i=Li(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Mt/180,n=t[1]*Mt/180):[e/Mt*180,n/Mt*180]},r}function ai(t,e){var n=Math.sin(t),i=(n+Math.sin(e))/2,r=1+n*(2*i-n),a=Math.sqrt(r)/i;function o(t,e){var n=Math.sqrt(r-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}return o.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,zt((r-(t*t+n*n)*i*i)/(2*i))]},o}t.geo.clipExtent=function(){var t,e,n,i,r,a,o={stream:function(t){return r&&(r.valid=!1),(r=a(t)).valid=!0,r},extent:function(s){return arguments.length?(a=ii(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),o):[[t,e],[n,i]]}};return o.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return ri(ai)}).raw=ai,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){var e,n,i,r,a=t.geo.albers(),o=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};function c(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(i(a,o),e)||r(a,o),e}return c.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?o:r>=.166&&r<.234&&i>=-.214&&i<-.115?s:a).invert(t)},c.stream=function(t){var e=a.stream(t),n=o.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},c.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),c):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),u=+t[0],h=+t[1];return n=a.translate(t).clipExtent([[u-.455*e,h-.238*e],[u+.455*e,h+.238*e]]).stream(l).point,i=o.translate([u-.307*e,h+.201*e]).clipExtent([[u-.425*e+kt,h+.12*e+kt],[u-.214*e-kt,h+.234*e-kt]]).stream(l).point,r=s.translate([u-.205*e,h+.212*e]).clipExtent([[u-.214*e+kt,h+.166*e+kt],[u-.115*e-kt,h+.234*e-kt]]).stream(l).point,c},c.scale(1070)};var oi,si,li,ci,ui,hi,di={point:I,lineStart:I,lineEnd:I,polygonStart:function(){si=0,di.lineStart=fi},polygonEnd:function(){di.lineStart=di.lineEnd=di.point=I,oi+=y(si/2)}};function fi(){var t,e,n,i;function r(t,e){si+=i*t-n*e,n=t,i=e}di.point=function(a,o){di.point=r,t=n=a,e=i=o},di.lineEnd=function(){r(t,e)}}var pi={point:function(t,e){t<li&&(li=t),t>ui&&(ui=t),e<ci&&(ci=e),e>hi&&(hi=e)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I};function vi(){var t=gi(4.5),e=[],n={point:i,lineStart:function(){n.point=r},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=i},pointRadius:function(e){return t=gi(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function i(n,i){e.push("M",n,",",i,t)}function r(t,i){e.push("M",t,",",i),n.point=a}function a(t,n){e.push("L",t,",",n)}function o(){n.point=i}function s(){e.push("Z")}return n}function gi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var mi,yi={point:_i,lineStart:xi,lineEnd:bi,polygonStart:function(){yi.lineStart=wi},polygonEnd:function(){yi.point=_i,yi.lineStart=xi,yi.lineEnd=bi}};function _i(t,e){_n+=t,xn+=e,++bn}function xi(){var t,e;function n(n,i){var r=n-t,a=i-e,o=Math.sqrt(r*r+a*a);wn+=o*(t+n)/2,kn+=o*(e+i)/2,Tn+=o,_i(t=n,e=i)}yi.point=function(i,r){yi.point=n,_i(t=i,e=r)}}function bi(){yi.point=_i}function wi(){var t,e,n,i;function r(t,e){var r=t-n,a=e-i,o=Math.sqrt(r*r+a*a);wn+=o*(n+t)/2,kn+=o*(i+e)/2,Tn+=o,Mn+=(o=i*t-n*e)*(n+t),An+=o*(i+e),Cn+=3*o,_i(n=t,i=e)}yi.point=function(a,o){yi.point=r,_i(t=n=a,e=i=o)},yi.lineEnd=function(){r(t,e)}}function ki(t){var e=4.5,n={point:i,lineStart:function(){n.point=r},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=i},pointRadius:function(t){return e=t,n},result:I};function i(n,i){t.moveTo(n+e,i),t.arc(n,i,e,0,At)}function r(e,i){t.moveTo(e,i),n.point=a}function a(e,n){t.lineTo(e,n)}function o(){n.point=i}function s(){t.closePath()}return n}function Ti(t){var e=.5,n=Math.cos(30*St),i=16;function r(e){return(i?function(e){var n,r,o,s,l,c,u,h,d,f,p,v,g={point:m,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function m(n,i){n=t(n,i),e.point(n[0],n[1])}function y(){h=NaN,g.point=_,e.lineStart()}function _(n,r){var o=On([n,r]),s=t(n,r);a(h,d,u,f,p,v,h=s[0],d=s[1],u=n,f=o[0],p=o[1],v=o[2],i,e),e.point(h,d)}function x(){g.point=m,e.lineEnd()}function b(){y(),g.point=w,g.lineEnd=k}function w(t,e){_(n=t,e),r=h,o=d,s=f,l=p,c=v,g.point=_}function k(){a(h,d,u,f,p,v,r,o,n,s,l,c,i,e),g.lineEnd=x,x()}return g}:function(e){return Ai(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})})(e)}function a(i,r,o,s,l,c,u,h,d,f,p,v,g,m){var _=u-i,x=h-r,b=_*_+x*x;if(b>4*e&&g--){var w=s+f,k=l+p,T=c+v,M=Math.sqrt(w*w+k*k+T*T),A=Math.asin(T/=M),C=y(y(T)-1)<kt||y(o-d)<kt?(o+d)/2:Math.atan2(k,w),L=t(C,A),S=L[0],E=L[1],O=S-i,P=E-r,D=x*O-_*P;(D*D/b>e||y((_*O+x*P)/b-.5)>.3||s*f+l*p+c*v<n)&&(a(i,r,o,s,l,c,S,E,C,w/=M,k/=M,T,g,m),m.point(S,E),a(S,E,C,w,k,T,u,h,d,f,p,v,g,m))}}return r.precision=function(t){return arguments.length?(i=(e=t*t)>0&&16,r):Math.sqrt(e)},r}function Mi(t){this.stream=t}function Ai(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Ci(t){return Li(function(){return t})()}function Li(e){var n,i,r,a,o,s,l=Ti(function(t,e){return[(t=n(t,e))[0]*c+a,o-t[1]*c]}),c=150,u=480,h=250,d=0,f=0,p=0,v=0,g=0,m=ti,_=O,x=null,b=null;function w(t){return[(t=r(t[0]*St,t[1]*St))[0]*c+a,o-t[1]*c]}function k(t){return(t=r.invert((t[0]-a)/c,(o-t[1])/c))&&[t[0]*Et,t[1]*Et]}function T(){r=Vn(i=Pi(p,v,g),n);var t=n(d,f);return a=u-t[0]*c,o=h+t[1]*c,M()}function M(){return s&&(s.valid=!1,s=null),w}return w.stream=function(t){return s&&(s.valid=!1),(s=Si(m(i,l(_(t))))).valid=!0,s},w.clipAngle=function(t){return arguments.length?(m=null==t?(x=t,ti):function(t){var e=Math.cos(t),n=e>0,i=y(e)>kt;return Yn(r,function(t){var e,s,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,d){var f,p=[h,d],v=r(h,d),g=n?v?0:o(h,d):v?o(h+(h<0?Mt:-Mt),d):0;if(!e&&(c=l=v)&&t.lineStart(),v!==l&&(f=a(e,p),(Nn(e,f)||Nn(p,f))&&(p[0]+=kt,p[1]+=kt,v=r(p[0],p[1]))),v!==l)u=0,v?(t.lineStart(),f=a(p,e),t.point(f[0],f[1])):(f=a(e,p),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(i&&e&&n^v){var m;g&s||!(m=a(p,e,!0))||(u=0,n?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&Nn(e,p)||t.point(p[0],p[1]),e=p,l=v,s=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}},Ri(t,6*St),n?[0,-t]:[-Mt,t-Mt]);function r(t,n){return Math.cos(t)*Math.cos(n)>e}function a(t,n,i){var r=[1,0,0],a=Dn(On(t),On(n)),o=Pn(a,a),s=a[0],l=o-s*s;if(!l)return!i&&t;var c=e*o/l,u=-e*s/l,h=Dn(r,a),d=In(r,c);zn(d,In(a,u));var f=h,p=Pn(d,f),v=Pn(f,f),g=p*p-v*(Pn(d,d)-1);if(!(g<0)){var m=Math.sqrt(g),_=In(f,(-p-m)/v);if(zn(_,d),_=Bn(_),!i)return _;var x,b=t[0],w=n[0],k=t[1],T=n[1];w<b&&(x=b,b=w,w=x);var M=w-b,A=y(M-Mt)<kt;if(!A&&T<k&&(x=k,k=T,T=x),A||M<kt?A?k+T>0^_[1]<(y(_[0]-b)<kt?k:T):k<=_[1]&&_[1]<=T:M>Mt^(b<=_[0]&&_[0]<=w)){var C=In(f,(-p+m)/v);return zn(C,d),[_,Bn(C)]}}}function o(e,i){var r=n?t:Mt-t,a=0;return e<-r?a|=1:e>r&&(a|=2),i<-r?a|=4:i>r&&(a|=8),a}}((x=+t)*St),M()):x},w.clipExtent=function(t){return arguments.length?(b=t,_=t?ii(t[0][0],t[0][1],t[1][0],t[1][1]):O,M()):b},w.scale=function(t){return arguments.length?(c=+t,T()):c},w.translate=function(t){return arguments.length?(u=+t[0],h=+t[1],T()):[u,h]},w.center=function(t){return arguments.length?(d=t[0]%360*St,f=t[1]%360*St,T()):[d*Et,f*Et]},w.rotate=function(t){return arguments.length?(p=t[0]%360*St,v=t[1]%360*St,g=t.length>2?t[2]%360*St:0,T()):[p*Et,v*Et,g*Et]},t.rebind(w,l,"precision"),function(){return n=e.apply(this,arguments),w.invert=n.invert&&k,T()}}function Si(t){return Ai(t,function(e,n){t.point(e*St,n*St)})}function Ei(t,e){return[t,e]}function Oi(t,e){return[t>Mt?t-At:t<-Mt?t+At:t,e]}function Pi(t,e,n){return t?e||n?Vn(zi(t),Ii(e,n)):zi(t):e||n?Ii(e,n):Oi}function Di(t){return function(e,n){return[(e+=t)>Mt?e-At:e<-Mt?e+At:e,n]}}function zi(t){var e=Di(t);return e.invert=Di(-t),e}function Ii(t,e){var n=Math.cos(t),i=Math.sin(t),r=Math.cos(e),a=Math.sin(e);function o(t,e){var o=Math.cos(e),s=Math.cos(t)*o,l=Math.sin(t)*o,c=Math.sin(e),u=c*n+s*i;return[Math.atan2(l*r-u*a,s*n-c*i),zt(u*r+l*a)]}return o.invert=function(t,e){var o=Math.cos(e),s=Math.cos(t)*o,l=Math.sin(t)*o,c=Math.sin(e),u=c*r-l*a;return[Math.atan2(l*r+c*a,s*n+u*i),zt(u*n-s*i)]},o}function Ri(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,a,o,s){var l=o*e;null!=r?(r=Bi(n,r),a=Bi(n,a),(o>0?r<a:r>a)&&(r+=o*At)):(r=t+o*At,a=t-.5*l);for(var c,u=r;o>0?u>a:u<a;u-=l)s.point((c=Bn([n,-i*Math.cos(u),-i*Math.sin(u)]))[0],c[1])}}function Bi(t,e){var n=On(e);n[0]-=t,Rn(n);var i=Dt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-kt)%(2*Math.PI)}function Ni(e,n,i){var r=t.range(e,n-kt,i).concat(n);return function(t){return r.map(function(e){return[t,e]})}}function Fi(e,n,i){var r=t.range(e,n-kt,i).concat(n);return function(t){return r.map(function(e){return[e,t]})}}function ji(t){return t.source}function Hi(t){return t.target}t.geo.path=function(){var e,n,i,r,a,o=4.5;function s(e){return e&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=i(r)),t.geo.stream(e,a)),r.result()}function l(){return a=null,s}return s.area=function(e){return oi=0,t.geo.stream(e,i(di)),oi},s.centroid=function(e){return _n=xn=bn=wn=kn=Tn=Mn=An=Cn=0,t.geo.stream(e,i(yi)),Cn?[Mn/Cn,An/Cn]:Tn?[wn/Tn,kn/Tn]:bn?[_n/bn,xn/bn]:[NaN,NaN]},s.bounds=function(e){return ui=hi=-(li=ci=1/0),t.geo.stream(e,i(pi)),[[li,ci],[ui,hi]]},s.projection=function(t){return arguments.length?(i=(e=t)?t.stream||(n=t,r=Ti(function(t,e){return n([t*Et,e*Et])}),function(t){return Si(r(t))}):O,l()):e;var n,r},s.context=function(t){return arguments.length?(r=null==(n=t)?new vi:new ki(t),"function"!=typeof o&&r.pointRadius(o),l()):n},s.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),s):o},s.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(t){return{stream:function(e){var n=new Mi(e);for(var i in t)n[i]=t[i];return n}}},Mi.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=Ci,t.geo.projectionMutator=Li,(t.geo.equirectangular=function(){return Ci(Ei)}).raw=Ei.invert=Ei,t.geo.rotation=function(t){function e(e){return(e=t(e[0]*St,e[1]*St))[0]*=Et,e[1]*=Et,e}return t=Pi(t[0]%360*St,t[1]*St,t.length>2?t[2]*St:0),e.invert=function(e){return(e=t.invert(e[0]*St,e[1]*St))[0]*=Et,e[1]*=Et,e},e},Oi.invert=Ei,t.geo.circle=function(){var t,e,n=[0,0],i=6;function r(){var t="function"==typeof n?n.apply(this,arguments):n,i=Pi(-t[0]*St,-t[1]*St,0).invert,r=[];return e(null,null,1,{point:function(t,e){r.push(t=i(t,e)),t[0]*=Et,t[1]*=Et}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(t){return arguments.length?(n=t,r):n},r.angle=function(n){return arguments.length?(e=Ri((t=+n)*St,i*St),r):t},r.precision=function(n){return arguments.length?(e=Ri(t*St,(i=+n)*St),r):i},r.angle(90)},t.geo.distance=function(t,e){var n,i=(e[0]-t[0])*St,r=t[1]*St,a=e[1]*St,o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r),u=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((n=h*o)*n+(n=c*u-l*h*s)*n),l*u+c*h*s)},t.geo.graticule=function(){var e,n,i,r,a,o,s,l,c,u,h,d,f=10,p=f,v=90,g=360,m=2.5;function _(){return{type:"MultiLineString",coordinates:x()}}function x(){return t.range(Math.ceil(r/v)*v,i,v).map(h).concat(t.range(Math.ceil(l/g)*g,s,g).map(d)).concat(t.range(Math.ceil(n/f)*f,e,f).filter(function(t){return y(t%v)>kt}).map(c)).concat(t.range(Math.ceil(o/p)*p,a,p).filter(function(t){return y(t%g)>kt}).map(u))}return _.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(d(s).slice(1),h(i).reverse().slice(1),d(l).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.majorExtent(t).minorExtent(t):_.minorExtent()},_.majorExtent=function(t){return arguments.length?(l=+t[0][1],s=+t[1][1],(r=+t[0][0])>(i=+t[1][0])&&(t=r,r=i,i=t),l>s&&(t=l,l=s,s=t),_.precision(m)):[[r,l],[i,s]]},_.minorExtent=function(t){return arguments.length?(o=+t[0][1],a=+t[1][1],(n=+t[0][0])>(e=+t[1][0])&&(t=n,n=e,e=t),o>a&&(t=o,o=a,a=t),_.precision(m)):[[n,o],[e,a]]},_.step=function(t){return arguments.length?_.majorStep(t).minorStep(t):_.minorStep()},_.majorStep=function(t){return arguments.length?(v=+t[0],g=+t[1],_):[v,g]},_.minorStep=function(t){return arguments.length?(f=+t[0],p=+t[1],_):[f,p]},_.precision=function(t){return arguments.length?(m=+t,c=Ni(o,a,90),u=Fi(n,e,m),h=Ni(l,s,90),d=Fi(r,i,m),_):m},_.majorExtent([[-180,-90+kt],[180,90-kt]]).minorExtent([[-180,-80-kt],[180,80+kt]])},t.geo.greatArc=function(){var e,n,i=ji,r=Hi;function a(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}return a.distance=function(){return t.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},a.source=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,a):i},a.target=function(t){return arguments.length?(r=t,n="function"==typeof t?null:t,a):r},a.precision=function(){return arguments.length?a:0},a},t.geo.interpolate=function(t,e){return n=t[0]*St,i=t[1]*St,r=e[0]*St,a=e[1]*St,o=Math.cos(i),s=Math.sin(i),l=Math.cos(a),c=Math.sin(a),u=o*Math.cos(n),h=o*Math.sin(n),d=l*Math.cos(r),f=l*Math.sin(r),p=2*Math.asin(Math.sqrt(Rt(a-i)+o*l*Rt(r-n))),v=1/Math.sin(p),(g=p?function(t){var e=Math.sin(t*=p)*v,n=Math.sin(p-t)*v,i=n*u+e*d,r=n*h+e*f,a=n*s+e*c;return[Math.atan2(r,i)*Et,Math.atan2(a,Math.sqrt(i*i+r*r))*Et]}:function(){return[n*Et,i*Et]}).distance=p,g;var n,i,r,a,o,s,l,c,u,h,d,f,p,v,g},t.geo.length=function(e){return mi=0,t.geo.stream(e,$i),mi};var $i={sphere:I,point:I,lineStart:function(){var t,e,n;function i(i,r){var a=Math.sin(r*=St),o=Math.cos(r),s=y((i*=St)-t),l=Math.cos(s);mi+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-e*o*l)*s),e*a+n*o*l),t=i,e=a,n=o}$i.point=function(r,a){t=r*St,e=Math.sin(a*=St),n=Math.cos(a),$i.point=i},$i.lineEnd=function(){$i.point=$i.lineEnd=I}},lineEnd:I,polygonStart:I,polygonEnd:I};function qi(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),a=t(i*r);return[a*r*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(t*a,i*o),Math.asin(i&&n*a/i)]},n}var Zi=qi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(t.geo.azimuthalEqualArea=function(){return Ci(Zi)}).raw=Zi;var Vi=qi(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},O);function Wi(t,e){var n=Math.cos(t),i=function(t){return Math.tan(Mt/4+t/2)},r=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),a=n*Math.pow(i(t),r)/r;if(!r)return Xi;function o(t,e){a>0?e<-Lt+kt&&(e=-Lt+kt):e>Lt-kt&&(e=Lt-kt);var n=a/Math.pow(i(e),r);return[n*Math.sin(r*t),a-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=a-e,i=Ot(r)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/r,2*Math.atan(Math.pow(a/i,1/r))-Lt]},o}function Ui(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),r=n/i+t;if(y(i)<kt)return Ei;function a(t,e){var n=r-e;return[n*Math.sin(i*t),r-n*Math.cos(i*t)]}return a.invert=function(t,e){var n=r-e;return[Math.atan2(t,n)/i,r-Ot(i)*Math.sqrt(t*t+n*n)]},a}(t.geo.azimuthalEquidistant=function(){return Ci(Vi)}).raw=Vi,(t.geo.conicConformal=function(){return ri(Wi)}).raw=Wi,(t.geo.conicEquidistant=function(){return ri(Ui)}).raw=Ui;var Gi=qi(function(t){return 1/t},Math.atan);function Xi(t,e){return[t,Math.log(Math.tan(Mt/4+e/2))]}function Yi(t){var e,n=Ci(t),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=Mt*i(),l=r();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}(t.geo.gnomonic=function(){return Ci(Gi)}).raw=Gi,Xi.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Lt]},(t.geo.mercator=function(){return Yi(Xi)}).raw=Xi;var Qi=qi(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Ci(Qi)}).raw=Qi;var Ki=qi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function Ji(t,e){return[Math.log(Math.tan(Mt/4+e/2)),-t]}function tr(t){return t[0]}function er(t){return t[1]}function nr(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;i>1&&Pt(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function ir(t,e){return t[0]-e[0]||t[1]-e[1]}(t.geo.stereographic=function(){return Ci(Ki)}).raw=Ki,Ji.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Lt]},(t.geo.transverseMercator=function(){var t=Yi(Ji),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=Ji,t.geom={},t.geom.hull=function(t){var e=tr,n=er;if(arguments.length)return i(t);function i(t){if(t.length<3)return[];var i,r=ve(e),a=ve(n),o=t.length,s=[],l=[];for(i=0;i<o;i++)s.push([+r.call(this,t[i],i),+a.call(this,t[i],i),i]);for(s.sort(ir),i=0;i<o;i++)l.push([s[i][0],-s[i][1]]);var c=nr(s),u=nr(l),h=u[0]===c[0],d=u[u.length-1]===c[c.length-1],f=[];for(i=c.length-1;i>=0;--i)f.push(t[s[c[i]][2]]);for(i=+h;i<u.length-d;++i)f.push(t[s[u[i]][2]]);return f}return i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(t){return arguments.length?(n=t,i):n},i},t.geom.polygon=function(t){return $(t,rr),t};var rr=t.geom.polygon.prototype=[];function ar(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function or(t,e,n,i){var r=t[0],a=n[0],o=e[0]-r,s=i[0]-a,l=t[1],c=n[1],u=e[1]-l,h=i[1]-c,d=(s*(l-c)-h*(r-a))/(h*o-s*u);return[r+d*o,l+d*u]}function sr(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}rr.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)r+=(t=i)[1]*(i=this[e])[0]-t[0]*i[1];return.5*r},rr.centroid=function(t){var e,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)a+=((e=s)[0]+(s=this[i])[0])*(n=e[0]*s[1]-s[0]*e[1]),o+=(e[1]+s[1])*n;return[a*t,o*t]},rr.clip=function(t){for(var e,n,i,r,a,o,s=sr(t),l=-1,c=this.length-sr(this),u=this[c-1];++l<c;){for(e=t.slice(),t.length=0,r=this[l],a=e[(i=e.length-s)-1],n=-1;++n<i;)ar(o=e[n],u,r)?(ar(a,u,r)||t.push(or(a,o,u,r)),t.push(o)):ar(a,u,r)&&t.push(or(a,o,u,r)),a=o;s&&t.push(t[0]),u=r}return t};var lr,cr,ur,hr,dr,fr=[],pr=[];function vr(){Dr(this),this.edge=this.site=this.circle=null}function gr(t){var e=fr.pop()||new vr;return e.site=t,e}function mr(t){Ar(t),ur.remove(t),fr.push(t),Dr(t)}function yr(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},a=t.P,o=t.N,s=[t];mr(t);for(var l=a;l.circle&&y(n-l.circle.x)<kt&&y(i-l.circle.cy)<kt;)a=l.P,s.unshift(l),mr(l),l=a;s.unshift(l),Ar(l);for(var c=o;c.circle&&y(n-c.circle.x)<kt&&y(i-c.circle.cy)<kt;)o=c.N,s.push(c),mr(c),c=o;s.push(c),Ar(c);var u,h=s.length;for(u=1;u<h;++u)Er((c=s[u]).edge,(l=s[u-1]).site,c.site,r);(c=s[h-1]).edge=Sr((l=s[0]).site,c.site,null,r),Mr(l),Mr(c)}function _r(t){for(var e,n,i,r,a=t.x,o=t.y,s=ur._;s;)if((i=xr(s,o)-a)>kt)s=s.L;else{if(!((r=a-br(s,o))>kt)){i>-kt?(e=s.P,n=s):r>-kt?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=gr(t);if(ur.insert(e,l),e||n){if(e===n)return Ar(e),n=gr(e.site),ur.insert(l,n),l.edge=n.edge=Sr(e.site,l.site),Mr(e),void Mr(n);if(n){Ar(e),Ar(n);var c=e.site,u=c.x,h=c.y,d=t.x-u,f=t.y-h,p=n.site,v=p.x-u,g=p.y-h,m=2*(d*g-f*v),y=d*d+f*f,_=v*v+g*g,x={x:(g*y-f*_)/m+u,y:(d*_-v*y)/m+h};Er(n.edge,c,p,x),l.edge=Sr(c,t,null,x),n.edge=Sr(t,p,null,x),Mr(e),Mr(n)}else l.edge=Sr(e.site,l.site)}}function xr(t,e){var n=t.site,i=n.x,r=n.y,a=r-e;if(!a)return i;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,c=l-e;if(!c)return s;var u=s-i,h=1/a-1/c,d=u/c;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*c)-l+c/2+r-a/2)))/h+i:(i+s)/2}function br(t,e){var n=t.N;if(n)return xr(n,e);var i=t.site;return i.y===e?i.x:1/0}function wr(t){this.site=t,this.edges=[]}function kr(t,e){return e.angle-t.angle}function Tr(){Dr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Mr(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r.x,s=r.y,l=i.x-o,c=i.y-s,u=a.x-o,h=2*(l*(g=a.y-s)-c*u);if(!(h>=-Tt)){var d=l*l+c*c,f=u*u+g*g,p=(g*d-c*f)/h,v=(l*f-u*d)/h,g=v+s,m=pr.pop()||new Tr;m.arc=t,m.site=r,m.x=p+o,m.y=g+Math.sqrt(p*p+v*v),m.cy=g,t.circle=m;for(var y=null,_=dr._;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}dr.insert(y,m),y||(hr=m)}}}}function Ar(t){var e=t.circle;e&&(e.P||(hr=e.N),dr.remove(e),pr.push(e),Dr(e),t.circle=null)}function Cr(t,e){var n=t.b;if(n)return!0;var i,r,a=t.a,o=e[0][0],s=e[1][0],l=e[0][1],c=e[1][1],u=t.l,h=t.r,d=u.x,f=u.y,p=h.x,v=h.y,g=(d+p)/2;if(v===f){if(g<o||g>=s)return;if(d>p){if(a){if(a.y>=c)return}else a={x:g,y:l};n={x:g,y:c}}else{if(a){if(a.y<l)return}else a={x:g,y:c};n={x:g,y:l}}}else if(r=(f+v)/2-(i=(d-p)/(v-f))*g,i<-1||i>1)if(d>p){if(a){if(a.y>=c)return}else a={x:(l-r)/i,y:l};n={x:(c-r)/i,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-r)/i,y:c};n={x:(l-r)/i,y:l}}else if(f<v){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return t.a=a,t.b=n,!0}function Lr(t,e){this.l=t,this.r=e,this.a=this.b=null}function Sr(t,e,n,i){var r=new Lr(t,e);return lr.push(r),n&&Er(r,t,e,n),i&&Er(r,e,t,i),cr[t.i].edges.push(new Or(r,t,e)),cr[e.i].edges.push(new Or(r,e,t)),r}function Er(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Or(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Pr(){this._=null}function Dr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function zr(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Ir(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Rr(t){for(;t.L;)t=t.L;return t}function Br(t,e){var n,i,r,a=t.sort(Nr).pop();for(lr=[],cr=new Array(t.length),ur=new Pr,dr=new Pr;;)if(r=hr,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))a.x===n&&a.y===i||(cr[a.i]=new wr(a),_r(a),n=a.x,i=a.y),a=t.pop();else{if(!r)break;yr(r.arc)}e&&(function(t){for(var e,n=lr,i=ei(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)(!Cr(e=n[r],t)||!i(e)||y(e.a.x-e.b.x)<kt&&y(e.a.y-e.b.y)<kt)&&(e.a=e.b=null,n.splice(r,1))}(e),function(t){for(var e,n,i,r,a,o,s,l,c,u,h=t[0][0],d=t[1][0],f=t[0][1],p=t[1][1],v=cr,g=v.length;g--;)if((a=v[g])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)i=(u=s[o].end()).x,r=u.y,e=(c=s[++o%l].start()).x,n=c.y,(y(i-e)>kt||y(r-n)>kt)&&(s.splice(o,0,new Or((m=a.site,_=u,x=y(i-h)<kt&&p-r>kt?{x:h,y:y(e-h)<kt?n:p}:y(r-p)<kt&&d-i>kt?{x:y(n-p)<kt?e:d,y:p}:y(i-d)<kt&&r-f>kt?{x:d,y:y(e-d)<kt?n:f}:y(r-f)<kt&&i-h>kt?{x:y(n-f)<kt?e:h,y:f}:null,b=void 0,(b=new Lr(m,null)).a=_,b.b=x,lr.push(b),b),a.site,null)),++l);var m,_,x,b}(e));var o={cells:cr,edges:lr};return ur=dr=lr=cr=null,o}function Nr(t,e){return e.y-t.y||e.x-t.x}wr.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(kr),e.length},Or.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Pr.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Rr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(zr(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ir(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Ir(this,n),n=(t=n).U),n.C=!1,i.C=!0,zr(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?Rr(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=t.U,r.L=t=n.R,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,zr(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ir(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,zr(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Ir(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,zr(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Ir(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},t.geom.voronoi=function(t){var e=tr,n=er,i=e,r=n,a=Fr;if(t)return o(t);function o(t){var e=new Array(t.length),n=a[0][0],i=a[0][1],r=a[1][0],o=a[1][1];return Br(s(t),a).cells.forEach(function(a,s){var l=a.edges,c=a.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=n&&c.x<=r&&c.y>=i&&c.y<=o?[[n,o],[r,o],[r,i],[n,i]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/kt)*kt,y:Math.round(r(t,e)/kt)*kt,i:e}})}return o.links=function(t){return Br(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},o.triangles=function(t){var e=[];return Br(s(t)).cells.forEach(function(n,i){for(var r,a,o,s,l=n.site,c=n.edges.sort(kr),u=-1,h=c.length,d=c[h-1].edge,f=d.l===l?d.r:d.l;++u<h;)r=f,f=(d=c[u].edge).l===l?d.r:d.l,i<r.i&&i<f.i&&((a=l).x-(s=f).x)*((o=r).y-a.y)-(a.x-o.x)*(s.y-a.y)<0&&e.push([t[i],t[r.i],t[f.i]])}),e},o.x=function(t){return arguments.length?(i=ve(e=t),o):e},o.y=function(t){return arguments.length?(r=ve(n=t),o):n},o.clipExtent=function(t){return arguments.length?(a=null==t?Fr:t,o):a===Fr?null:a},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):a===Fr?null:a&&a[1]},o};var Fr=[[-1e6,-1e6],[1e6,1e6]];function jr(t){return t.x}function Hr(t){return t.y}function $r(e,n){e=t.rgb(e),n=t.rgb(n);var i=e.r,r=e.g,a=e.b,o=n.r-i,s=n.g-r,l=n.b-a;return function(t){return"#"+le(Math.round(i+o*t))+le(Math.round(r+s*t))+le(Math.round(a+l*t))}}function qr(t,e){var n,i={},r={};for(n in t)n in e?i[n]=Gr(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function Zr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vr(t,e){var n,i,r,a=Wr.lastIndex=Ur.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=Wr.exec(t))&&(i=Ur.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Zr(n,i)})),a=Ur.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(t,e,n,i,r){var a,o=tr,s=er;if(a=arguments.length)return o=jr,s=Hr,3===a&&(r=n,i=e,n=e=0),l(t);function l(t){var l,c,u,h,d,f,p,v,g,m=ve(o),_=ve(s);if(null!=e)f=e,p=n,v=i,g=r;else if(v=g=-(f=p=1/0),c=[],u=[],d=t.length,a)for(h=0;h<d;++h)(l=t[h]).x<f&&(f=l.x),l.y<p&&(p=l.y),l.x>v&&(v=l.x),l.y>g&&(g=l.y),c.push(l.x),u.push(l.y);else for(h=0;h<d;++h){var x=+m(l=t[h],h),b=+_(l,h);x<f&&(f=x),b<p&&(p=b),x>v&&(v=x),b>g&&(g=b),c.push(x),u.push(b)}var w=v-f,k=g-p;function T(t,e,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(y(l-n)+y(c-i)<.01)M(t,e,n,i,r,a,o,s);else{var u=t.point;t.x=t.y=t.point=null,M(t,u,l,c,r,a,o,s),M(t,e,n,i,r,a,o,s)}else t.x=n,t.y=i,t.point=e}else M(t,e,n,i,r,a,o,s)}function M(t,e,n,i,r,a,o,s){var l=.5*(r+o),c=.5*(a+s),u=n>=l,h=i>=c,d=h<<1|u;t.leaf=!1,u?r=l:o=l,h?a=c:s=c,T(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){T(A,t,+m(t,++h),+_(t,h),f,p,v,g)}}),e,n,i,r,a,o,s)}w>k?g=p+w:v=f+k;var A={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){T(A,t,+m(t,++h),+_(t,h),f,p,v,g)},visit:function(t){!function t(e,n,i,r,a,o){if(!e(n,i,r,a,o)){var s=.5*(i+a),l=.5*(r+o),c=n.nodes;c[0]&&t(e,c[0],i,r,s,l),c[1]&&t(e,c[1],s,r,a,l),c[2]&&t(e,c[2],i,l,s,o),c[3]&&t(e,c[3],s,l,a,o)}}(t,A,f,p,v,g)},find:function(t){return e=t[0],n=t[1],l=1/0,function t(c,u,h,d,f){if(!(u>a||h>o||d<i||f<r)){if(p=c.point){var p,v=e-c.x,g=n-c.y,m=v*v+g*g;if(m<l){var y=Math.sqrt(l=m);i=e-y,r=n-y,a=e+y,o=n+y,s=p}}for(var _=c.nodes,x=.5*(u+d),b=.5*(h+f),w=(n>=b)<<1|e>=x,k=w+4;w<k;++w)if(c=_[3&w])switch(3&w){case 0:t(c,u,h,x,b);break;case 1:t(c,x,h,d,b);break;case 2:t(c,u,b,x,f);break;case 3:t(c,x,b,d,f)}}}(A,i=f,r=p,a=v,o=g),s;var e,n,i,r,a,o,s,l}};if(h=-1,null==e){for(;++h<d;)T(A,t[h],c[h],u[h],f,p,v,g);--h}else t.forEach(A.add);return c=u=t=l=null,A}return l.x=function(t){return arguments.length?(o=t,l):o},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),l):null==e?null:[[e,n],[i,r]]},l.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),l):null==e?null:[i-e,r-n]},l},t.interpolateRgb=$r,t.interpolateObject=qr,t.interpolateNumber=Zr,t.interpolateString=Vr;var Wr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ur=new RegExp(Wr.source,"g");function Gr(e,n){for(var i,r=t.interpolators.length;--r>=0&&!(i=t.interpolators[r](e,n)););return i}function Xr(t,e){var n,i=[],r=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)i.push(Gr(t[n],e[n]));for(;n<a;++n)r[n]=t[n];for(;n<o;++n)r[n]=e[n];return function(t){for(n=0;n<s;++n)r[n]=i[n](t);return r}}t.interpolate=Gr,t.interpolators=[function(t,e){var n=typeof e;return("string"===n?pe.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?$r:Vr:e instanceof Ht?$r:Array.isArray(e)?Xr:"object"===n&&isNaN(e)?qr:Zr)(t,e)}],t.interpolateArray=Xr;var Yr=function(){return O},Qr=t.map({linear:Yr,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return ea},cubic:function(){return na},sin:function(){return ra},exp:function(){return aa},circle:function(){return oa},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/At*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*At/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return sa}}),Kr=t.map({in:O,out:Jr,"in-out":ta,"out-in":function(t){return ta(Jr(t))}});function Jr(t){return function(e){return 1-t(1-e)}}function ta(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function ea(t){return t*t}function na(t){return t*t*t}function ia(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function ra(t){return 1-Math.cos(t*Lt)}function aa(t){return Math.pow(2,10*(t-1))}function oa(t){return 1-Math.sqrt(1-t*t)}function sa(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function la(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ca(t){var e,n,i,r=[t.a,t.b],a=[t.c,t.d],o=ha(r),s=ua(r,a),l=ha(((e=a)[0]+=(i=-s)*(n=r)[0],e[1]+=i*n[1],e))||0;r[0]*a[1]<a[0]*r[1]&&(r[0]*=-1,r[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(r[1],r[0]):Math.atan2(-a[0],a[1]))*Et,this.translate=[t.e,t.f],this.scale=[o,l],this.skew=l?Math.atan2(s,l)*Et:0}function ua(t,e){return t[0]*e[0]+t[1]*e[1]}function ha(t){var e=Math.sqrt(ua(t,t));return e&&(t[0]/=e,t[1]/=e),e}t.ease=function(t){var e,i=t.indexOf("-"),r=i>=0?t.slice(0,i):t,a=i>=0?t.slice(i+1):"in";return r=Qr.get(r)||Yr,a=Kr.get(a)||O,e=a(r.apply(null,n.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},t.interpolateHcl=function(e,n){e=t.hcl(e),n=t.hcl(n);var i=e.h,r=e.c,a=e.l,o=n.h-i,s=n.c-r,l=n.l-a;return isNaN(s)&&(s=0,r=isNaN(r)?n.c:r),isNaN(o)?(o=0,i=isNaN(i)?n.h:i):o>180?o-=360:o<-180&&(o+=360),function(t){return Ut(i+o*t,r+s*t,a+l*t)+""}},t.interpolateHsl=function(e,n){e=t.hsl(e),n=t.hsl(n);var i=e.h,r=e.s,a=e.l,o=n.h-i,s=n.s-r,l=n.l-a;return isNaN(s)&&(s=0,r=isNaN(r)?n.s:r),isNaN(o)?(o=0,i=isNaN(i)?n.h:i):o>180?o-=360:o<-180&&(o+=360),function(t){return Zt(i+o*t,r+s*t,a+l*t)+""}},t.interpolateLab=function(e,n){e=t.lab(e),n=t.lab(n);var i=e.l,r=e.a,a=e.b,o=n.l-i,s=n.a-r,l=n.b-a;return function(t){return te(i+o*t,r+s*t,a+l*t)+""}},t.interpolateRound=la,t.transform=function(e){var n=r.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new ca(e?e.matrix:da)})(e)},ca.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var da={a:1,b:0,c:0,d:1,e:0,f:0};function fa(t){return t.length?t.pop()+",":""}function pa(e,n){var i=[],r=[];return e=t.transform(e),n=t.transform(n),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:Zr(t[0],e[0])},{i:r-2,x:Zr(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(e.translate,n.translate,i,r),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(fa(n)+"rotate(",null,")")-2,x:Zr(t,e)})):e&&n.push(fa(n)+"rotate("+e+")")}(e.rotate,n.rotate,i),function(t,e,n,i){t!==e?r.push({i:n.push(fa(n)+"skewX(",null,")")-2,x:Zr(t,e)}):e&&n.push(fa(n)+"skewX("+e+")")}(e.skew,n.skew,i),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push(fa(n)+"scale(",null,",",null,")");i.push({i:r-4,x:Zr(t[0],e[0])},{i:r-2,x:Zr(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(fa(n)+"scale("+e+")")}(e.scale,n.scale,i,r),e=n=null,function(t){for(var e,n=-1,a=r.length;++n<a;)i[(e=r[n]).i]=e.x(t);return i.join("")}}function va(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function ga(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function ma(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;for(var n=ya(t),i=ya(e),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}(e,n),r=[e];e!==i;)r.push(e=e.parent);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function ya(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function _a(t){t.fixed|=2}function xa(t){t.fixed&=-7}function ba(t){t.fixed|=4,t.px=t.x,t.py=t.y}function wa(t){t.fixed&=-5}t.interpolateTransform=pa,t.layout={},t.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(ma(t[n]));return e}},t.layout.chord=function(){var e,n,i,r,a,o,s,l={},c=0;function u(){var l,u,d,f,p,v={},g=[],m=t.range(r),y=[];for(e=[],n=[],l=0,f=-1;++f<r;){for(u=0,p=-1;++p<r;)u+=i[f][p];g.push(u),y.push(t.range(r)),l+=u}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),o&&y.forEach(function(t,e){t.sort(function(t,n){return o(i[e][t],i[e][n])})}),l=(At-c*r)/l,u=0,f=-1;++f<r;){for(d=u,p=-1;++p<r;){var _=m[f],x=y[_][p],b=i[_][x],w=u,k=u+=b*l;v[_+"-"+x]={index:_,subindex:x,startAngle:w,endAngle:k,value:b}}n[_]={index:_,startAngle:d,endAngle:u,value:g[_]},u+=c}for(f=-1;++f<r;)for(p=f-1;++p<r;){var T=v[f+"-"+p],M=v[p+"-"+f];(T.value||M.value)&&e.push(T.value<M.value?{source:M,target:T}:{source:T,target:M})}s&&h()}function h(){e.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return l.matrix=function(t){return arguments.length?(r=(i=t)&&i.length,e=n=null,l):i},l.padding=function(t){return arguments.length?(c=t,e=n=null,l):c},l.sortGroups=function(t){return arguments.length?(a=t,e=n=null,l):a},l.sortSubgroups=function(t){return arguments.length?(o=t,e=null,l):o},l.sortChords=function(t){return arguments.length?(s=t,e&&h(),l):s},l.chords=function(){return e||u(),e},l.groups=function(){return n||u(),n},l},t.layout.force=function(){var e,n,i,r,a,o,s={},l=t.dispatch("start","tick","end"),c=[1,1],u=.9,h=ka,d=Ta,f=-30,p=Ma,v=.1,g=.64,m=[],y=[];function _(t){return function(e,n,i,r){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=r-n,l=a*a+o*o;if(s*s/g<l){if(l<p){var c=e.charge/l;t.px-=a*c,t.py-=o*c}return!0}e.point&&l&&l<p&&(t.px-=a*(c=e.pointCharge/l),t.py-=o*c)}return!e.charge}}function x(e){e.px=t.event.x,e.py=t.event.y,s.resume()}return s.tick=function(){if((i*=.99)<.005)return e=null,l.end({type:"end",alpha:i=0}),!0;var n,s,h,d,p,g,x,b,w,k=m.length,T=y.length;for(s=0;s<T;++s)d=(h=y[s]).source,(g=(b=(p=h.target).x-d.x)*b+(w=p.y-d.y)*w)&&(b*=g=i*a[s]*((g=Math.sqrt(g))-r[s])/g,w*=g,p.x-=b*(x=d.weight+p.weight?d.weight/(d.weight+p.weight):.5),p.y-=w*x,d.x+=b*(x=1-x),d.y+=w*x);if((x=i*v)&&(b=c[0]/2,w=c[1]/2,s=-1,x))for(;++s<k;)(h=m[s]).x+=(b-h.x)*x,h.y+=(w-h.y)*x;if(f)for(function t(e,n,i){var r=0,a=0;if(e.charge=0,!e.leaf)for(var o,s=e.nodes,l=s.length,c=-1;++c<l;)null!=(o=s[c])&&(t(o,n,i),e.charge+=o.charge,r+=o.charge*o.cx,a+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=n*i[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,a+=u*e.point.y}e.cx=r/e.charge,e.cy=a/e.charge}(n=t.geom.quadtree(m),i,o),s=-1;++s<k;)(h=m[s]).fixed||n.visit(_(h));for(s=-1;++s<k;)(h=m[s]).fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*u,h.y-=(h.py-(h.py=h.y))*u);l.tick({type:"tick",alpha:i})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(u=+t,s):u},s.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(v=+t,s):v},s.theta=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:i=0})):t>0&&(l.start({type:"start",alpha:i=t}),e=ke(s.tick)),s):i},s.start=function(){var t,e,n,i=m.length,l=y.length,u=c[0],p=c[1];for(t=0;t<i;++t)(n=m[t]).index=t,n.weight=0;for(t=0;t<l;++t)"number"==typeof(n=y[t]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<i;++t)n=m[t],isNaN(n.x)&&(n.x=v("x",u)),isNaN(n.y)&&(n.y=v("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof h)for(t=0;t<l;++t)r[t]=+h.call(this,y[t],t);else for(t=0;t<l;++t)r[t]=h;if(a=[],"function"==typeof d)for(t=0;t<l;++t)a[t]=+d.call(this,y[t],t);else for(t=0;t<l;++t)a[t]=d;if(o=[],"function"==typeof f)for(t=0;t<i;++t)o[t]=+f.call(this,m[t],t);else for(t=0;t<i;++t)o[t]=f;function v(n,r){if(!e){for(e=new Array(i),c=0;c<i;++c)e[c]=[];for(c=0;c<l;++c){var a=y[c];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var o,s=e[t],c=-1,u=s.length;++c<u;)if(!isNaN(o=s[c][n]))return o;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=t.behavior.drag().origin(O).on("dragstart.force",_a).on("drag.force",x).on("dragend.force",xa)),!arguments.length)return n;this.on("mouseover.force",ba).on("mouseout.force",wa).call(n)},t.rebind(s,l,"on")};var ka=20,Ta=1,Ma=1/0;function Aa(e,n){return t.rebind(e,n,"sort","children","value"),e.nodes=e,e.links=Pa,e}function Ca(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function La(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(a=t.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(t=i.pop());)e(t)}function Sa(t){return t.children}function Ea(t){return t.value}function Oa(t,e){return e.value-t.value}function Pa(e){return t.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}t.layout.hierarchy=function(){var t=Oa,e=Sa,n=Ea;function i(r){var a,o=[r],s=[];for(r.depth=0;null!=(a=o.pop());)if(s.push(a),(c=e.call(i,a,a.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=a,u.depth=a.depth+1;n&&(a.value=0),a.children=c}else n&&(a.value=+n.call(i,a,a.depth)||0),delete a.children;return La(r,function(e){var i,r;t&&(i=e.children)&&i.sort(t),n&&(r=e.parent)&&(r.value+=e.value)}),s}return i.sort=function(e){return arguments.length?(t=e,i):t},i.children=function(t){return arguments.length?(e=t,i):e},i.value=function(t){return arguments.length?(n=t,i):n},i.revalue=function(t){return n&&(Ca(t,function(t){t.children&&(t.value=0)}),La(t,function(t){var e;t.children||(t.value=+n.call(i,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},i},t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function i(t,i){var r=e.call(this,t,i);return function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(o=a.length)){var o,s,l,c=-1;for(i=e.value?i/e.value:0;++c<o;)t(s=a[c],n,l=s.value*i,r),n+=l}}(r[0],0,n[0],n[1]/function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,t(n[a]));return 1+i}(r[0])),r}return i.size=function(t){return arguments.length?(n=t,i):n},Aa(i,e)},t.layout.pie=function(){var e=Number,n=Da,i=0,r=At,a=0;function o(s){var l,c=s.length,u=s.map(function(t,n){return+e.call(o,t,n)}),h=+("function"==typeof i?i.apply(this,arguments):i),d=("function"==typeof r?r.apply(this,arguments):r)-h,f=Math.min(Math.abs(d)/c,+("function"==typeof a?a.apply(this,arguments):a)),p=f*(d<0?-1:1),v=t.sum(u),g=v?(d-c*p)/v:0,m=t.range(c),y=[];return null!=n&&m.sort(n===Da?function(t,e){return u[e]-u[t]}:function(t,e){return n(s[t],s[e])}),m.forEach(function(t){y[t]={data:s[t],value:l=u[t],startAngle:h,endAngle:h+=l*g+p,padAngle:f}}),y}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(t){return arguments.length?(n=t,o):n},o.startAngle=function(t){return arguments.length?(i=t,o):i},o.endAngle=function(t){return arguments.length?(r=t,o):r},o.padAngle=function(t){return arguments.length?(a=t,o):a},o};var Da={};function za(t){return t.x}function Ia(t){return t.y}function Ra(t,e,n){t.y0=e,t.y=n}t.layout.stack=function(){var e=O,n=Fa,i=ja,r=Ra,a=za,o=Ia;function s(l,c){if(!(f=l.length))return l;var u=l.map(function(t,n){return e.call(s,t,n)}),h=u.map(function(t){return t.map(function(t,e){return[a.call(s,t,e),o.call(s,t,e)]})}),d=n.call(s,h,c);u=t.permute(u,d),h=t.permute(h,d);var f,p,v,g,m=i.call(s,h,c),y=u[0].length;for(v=0;v<y;++v)for(r.call(s,u[0][v],g=m[v],h[0][v][1]),p=1;p<f;++p)r.call(s,u[p][v],g+=h[p-1][v][1],h[p][v][1]);return l}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(t){return arguments.length?(n="function"==typeof t?t:Ba.get(t)||Fa,s):n},s.offset=function(t){return arguments.length?(i="function"==typeof t?t:Na.get(t)||ja,s):i},s.x=function(t){return arguments.length?(a=t,s):a},s.y=function(t){return arguments.length?(o=t,s):o},s.out=function(t){return arguments.length?(r=t,s):r},s};var Ba=t.map({"inside-out":function(e){var n,i,r=e.length,a=e.map(Ha),o=e.map($a),s=t.range(r).sort(function(t,e){return a[t]-a[e]}),l=0,c=0,u=[],h=[];for(n=0;n<r;++n)i=s[n],l<c?(l+=o[i],u.push(i)):(c+=o[i],h.push(i));return h.reverse().concat(u)},reverse:function(e){return t.range(e.length).reverse()},default:Fa}),Na=t.map({silhouette:function(t){var e,n,i,r=t.length,a=t[0].length,o=[],s=0,l=[];for(n=0;n<a;++n){for(e=0,i=0;e<r;e++)i+=t[e][n][1];i>s&&(s=i),o.push(i)}for(n=0;n<a;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,i,r,a,o,s,l,c,u=t.length,h=t[0],d=h.length,f=[];for(f[0]=l=c=0,n=1;n<d;++n){for(e=0,r=0;e<u;++e)r+=t[e][n][1];for(e=0,a=0,s=h[n][0]-h[n-1][0];e<u;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)o+=(t[i][n][1]-t[i][n-1][1])/s;a+=o*t[e][n][1]}f[n]=l-=r?a/r*s:0,l<c&&(c=l)}for(n=0;n<d;++n)f[n]-=c;return f},expand:function(t){var e,n,i,r=t.length,a=t[0].length,o=1/r,s=[];for(n=0;n<a;++n){for(e=0,i=0;e<r;e++)i+=t[e][n][1];if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:ja});function Fa(e){return t.range(e.length)}function ja(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Ha(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function $a(t){return t.reduce(qa,0)}function qa(t,e){return t+e[1]}function Za(t,e){return Va(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Va(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function Wa(e){return[t.min(e),t.max(e)]}function Ua(t,e){return t.value-e.value}function Ga(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Xa(t,e){t._pack_next=e,e._pack_prev=t}function Ya(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Qa(t){if((e=t.children)&&(l=e.length)){var e,n,i,r,a,o,s,l,c=1/0,u=-1/0,h=1/0,d=-1/0;if(e.forEach(Ka),(n=e[0]).x=-n.r,n.y=0,_(n),l>1&&((i=e[1]).x=i.r,i.y=0,_(i),l>2))for(to(n,i,r=e[2]),_(r),Ga(n,r),n._pack_prev=r,Ga(r,i),i=n._pack_next,a=3;a<l;a++){to(n,i,r=e[a]);var f=0,p=1,v=1;for(o=i._pack_next;o!==i;o=o._pack_next,p++)if(Ya(o,r)){f=1;break}if(1==f)for(s=n._pack_prev;s!==o._pack_prev&&!Ya(s,r);s=s._pack_prev,v++);f?(p<v||p==v&&i.r<n.r?Xa(n,i=o):Xa(n=s,i),a--):(Ga(n,r),i=r,_(r))}var g=(c+u)/2,m=(h+d)/2,y=0;for(a=0;a<l;a++)(r=e[a]).x-=g,r.y-=m,y=Math.max(y,r.r+Math.sqrt(r.x*r.x+r.y*r.y));t.r=y,e.forEach(Ja)}function _(t){c=Math.min(t.x-t.r,c),u=Math.max(t.x+t.r,u),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}}function Ka(t){t._pack_next=t._pack_prev=t}function Ja(t){delete t._pack_next,delete t._pack_prev}function to(t,e,n){var i=t.r+n.r,r=e.x-t.x,a=e.y-t.y;if(i&&(r||a)){var o=e.r+n.r,s=r*r+a*a,l=.5+((i*=i)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=t.x+l*r+c*a,n.y=t.y+l*a-c*r}else n.x=t.x+i,n.y=t.y}function eo(t,e){return t.parent==e.parent?1:2}function no(t){var e=t.children;return e.length?e[0]:t.t}function io(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function ro(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function ao(t,e,n){return t.a.parent===e.parent?t.a:n}function oo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function so(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),a<0&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function lo(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function co(t){return t.rangeExtent?t.rangeExtent():lo(t.range())}function uo(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function ho(t,e){var n,i=0,r=t.length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function fo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:po}t.layout.histogram=function(){var e=!0,n=Number,i=Wa,r=Za;function a(a,o){for(var s,l,c=[],u=a.map(n,this),h=i.call(this,u,o),d=r.call(this,h,u,o),f=(o=-1,u.length),p=d.length-1,v=e?1:1/f;++o<p;)(s=c[o]=[]).dx=d[o+1]-(s.x=d[o]),s.y=0;if(p>0)for(o=-1;++o<f;)(l=u[o])>=h[0]&&l<=h[1]&&((s=c[t.bisect(d,l,1,p)-1]).y+=v,s.push(a[o]));return c}return a.value=function(t){return arguments.length?(n=t,a):n},a.range=function(t){return arguments.length?(i=ve(t),a):i},a.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return Va(e,t)}:ve(t),a):r},a.frequency=function(t){return arguments.length?(e=!!t,a):e},a},t.layout.pack=function(){var e,n=t.layout.hierarchy().sort(Ua),i=0,r=[1,1];function a(t,a){var o=n.call(this,t,a),s=o[0],l=r[0],c=r[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,La(s,function(t){t.r=+u(t.value)}),La(s,Qa),i){var h=i*(e?1:Math.max(2*s.r/l,2*s.r/c))/2;La(s,function(t){t.r+=h}),La(s,Qa),La(s,function(t){t.r-=h})}return function t(e,n,i,r){var a=e.children;if(e.x=n+=r*e.x,e.y=i+=r*e.y,e.r*=r,a)for(var o=-1,s=a.length;++o<s;)t(a[o],n,i,r)}(s,l/2,c/2,e?1:1/Math.max(2*s.r/l,2*s.r/c)),o}return a.size=function(t){return arguments.length?(r=t,a):r},a.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,a):e},a.padding=function(t){return arguments.length?(i=+t,a):i},Aa(a,n)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=eo,i=[1,1],r=null;function a(t,a){var c=e.call(this,t,a),u=c[0],h=function(t){for(var e,n={A:null,children:[u]},i=[n];null!=(e=i.pop());)for(var r,a=e.children,o=0,s=a.length;o<s;++o)i.push((a[o]=r={_:a[o],parent:e,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}();if(La(h,o),h.parent.m=-h.z,Ca(h,s),r)Ca(u,l);else{var d=u,f=u,p=u;Ca(u,function(t){t.x<d.x&&(d=t),t.x>f.x&&(f=t),t.depth>p.depth&&(p=t)});var v=n(d,f)/2-d.x,g=i[0]/(f.x+n(f,d)/2+v),m=i[1]/(p.depth||1);Ca(u,function(t){t.x=(t.x+v)*g,t.y=t.depth*m})}return c}function o(t){var e=t.children,i=t.parent.children,r=t.i?i[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)(e=r[a]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var a=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+n(t._,r._),t.m=t.z-a):t.z=a}else r&&(t.z=r.z+n(t._,r._));t.parent.A=function(t,e,i){if(e){for(var r,a=t,o=t,s=e,l=a.parent.children[0],c=a.m,u=o.m,h=s.m,d=l.m;s=io(s),a=no(a),s&&a;)l=no(l),(o=io(o)).a=t,(r=s.z+h-a.z-c+n(s._,a._))>0&&(ro(ao(s,t,i),t,r),c+=r,u+=r),h+=s.m,c+=a.m,d+=l.m,u+=o.m;s&&!io(o)&&(o.t=s,o.m+=h-u),a&&!no(l)&&(l.t=a,l.m+=c-d,i=t)}return i}(t,r,t.parent.A||i[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=i[0],t.y=t.depth*i[1]}return a.separation=function(t){return arguments.length?(n=t,a):n},a.size=function(t){return arguments.length?(r=null==(i=t)?l:null,a):r?null:i},a.nodeSize=function(t){return arguments.length?(r=null==(i=t)?null:l,a):r?i:null},Aa(a,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=eo,i=[1,1],r=!1;function a(a,o){var s,l=e.call(this,a,o),c=l[0],u=0;La(c,function(e){var i=e.children;i&&i.length?(e.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(i),e.y=1+t.max(i,function(t){return t.y})):(e.x=s?u+=n(e,s):0,e.y=0,s=e)});var h=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(c),d=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(c),f=h.x-n(h,d)/2,p=d.x+n(d,h)/2;return La(c,r?function(t){t.x=(t.x-c.x)*i[0],t.y=(c.y-t.y)*i[1]}:function(t){t.x=(t.x-f)/(p-f)*i[0],t.y=(1-(c.y?t.y/c.y:1))*i[1]}),l}return a.separation=function(t){return arguments.length?(n=t,a):n},a.size=function(t){return arguments.length?(r=null==(i=t),a):r?null:i},a.nodeSize=function(t){return arguments.length?(r=null!=(i=t),a):r?i:null},Aa(a,e)},t.layout.treemap=function(){var e,n=t.layout.hierarchy(),i=Math.round,r=[1,1],a=null,o=oo,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function h(t){var e=t.children;if(e&&e.length){var n,i,r,a=o(t),s=[],c=e.slice(),d=1/0,v="slice"===l?a.dx:"dice"===l?a.dy:"slice-dice"===l?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(u(c,a.dx*a.dy/t.value),s.area=0;(r=c.length)>0;)s.push(n=c[r-1]),s.area+=n.area,"squarify"!==l||(i=f(s,v))<=d?(c.pop(),d=i):(s.area-=s.pop().area,p(s,v,a,!1),v=Math.min(a.dx,a.dy),s.length=s.area=0,d=1/0);s.length&&(p(s,v,a,!0),s.length=s.area=0),e.forEach(h)}}function d(t){var e=t.children;if(e&&e.length){var n,i=o(t),r=e.slice(),a=[];for(u(r,i.dx*i.dy/t.value),a.area=0;n=r.pop();)a.push(n),a.area+=n.area,null!=n.z&&(p(a,n.z?i.dx:i.dy,i,!r.length),a.length=a.area=0);e.forEach(d)}}function f(t,e){for(var n,i=t.area,r=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),n>r&&(r=n));return e*=e,(i*=i)?Math.max(e*r*c/i,i/(e*a*c)):1/0}function p(t,e,n,r){var a,o=-1,s=t.length,l=n.x,c=n.y,u=e?i(t.area/e):0;if(e==n.dx){for((r||u>n.dy)&&(u=n.dy);++o<s;)(a=t[o]).x=l,a.y=c,a.dy=u,l+=a.dx=Math.min(n.x+n.dx-l,u?i(a.area/u):0);a.z=!0,a.dx+=n.x+n.dx-l,n.y+=u,n.dy-=u}else{for((r||u>n.dx)&&(u=n.dx);++o<s;)(a=t[o]).x=l,a.y=c,a.dx=u,c+=a.dy=Math.min(n.y+n.dy-c,u?i(a.area/u):0);a.z=!1,a.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function v(t){var i=e||n(t),a=i[0];return a.x=a.y=0,a.value?(a.dx=r[0],a.dy=r[1]):a.dx=a.dy=0,e&&n.revalue(a),u([a],a.dx*a.dy/a.value),(e?d:h)(a),s&&(e=i),i}return v.size=function(t){return arguments.length?(r=t,v):r},v.padding=function(t){if(!arguments.length)return a;function e(e){return so(e,t)}var n;return o=null==(a=t)?oo:"function"==(n=typeof t)?function(e){var n=t.call(v,e,e.depth);return null==n?oo(e):so(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,v},v.round=function(t){return arguments.length?(i=t?Math.round:Number,v):i!=Number},v.sticky=function(t){return arguments.length?(s=t,e=null,v):s},v.ratio=function(t){return arguments.length?(c=t,v):c},v.mode=function(t){return arguments.length?(l=t+"",v):l},Aa(v,n)},t.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,i,r;do{r=(n=2*Math.random()-1)*n+(i=2*Math.random()-1)*i}while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},t.scale={};var po={floor:O,ceil:O};function vo(e,n,i,r){var a=[],o=[],s=0,l=Math.min(e.length,n.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<=l;)a.push(i(e[s-1],e[s])),o.push(r(n[s-1],n[s]));return function(n){var i=t.bisect(e,n,1,l)-1;return o[i](a[i](n))}}function go(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function mo(t,e){return ho(t,fo(yo(t,e)[2])),ho(t,fo(yo(t,e)[2])),t}function yo(t,e){null==e&&(e=10);var n=lo(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=e/i*r;return a<=.15?r*=10:a<=.35?r*=5:a<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function _o(e,n){return t.range.apply(t,yo(e,n))}function xo(e,n,i){var r=yo(e,n);if(i){var a=Se.exec(i);if(a.shift(),"s"===a[8]){var o=t.formatPrefix(Math.max(y(r[0]),y(r[1])));return a[7]||(a[7]="."+wo(o.scale(r[2]))),a[8]="f",i=t.format(a.join("")),function(t){return i(o.scale(t))+o.symbol}}a[7]||(a[7]="."+function(t,e){var n=wo(e[2]);return t in bo?Math.abs(n-wo(Math.max(y(e[0]),y(e[1]))))+ +("e"!==t):n-2*("%"===t)}(a[8],r)),i=a.join("")}else i=",."+wo(r[2])+"f";return t.format(i)}t.scale.linear=function(){return function t(e,n,i,r){var a,o;function s(){var t=Math.min(e.length,n.length)>2?vo:uo,s=r?ga:va;return a=t(e,n,s,i),o=t(n,e,s,Gr),l}function l(t){return a(t)}return l.invert=function(t){return o(t)},l.domain=function(t){return arguments.length?(e=t.map(Number),s()):e},l.range=function(t){return arguments.length?(n=t,s()):n},l.rangeRound=function(t){return l.range(t).interpolate(la)},l.clamp=function(t){return arguments.length?(r=t,s()):r},l.interpolate=function(t){return arguments.length?(i=t,s()):i},l.ticks=function(t){return _o(e,t)},l.tickFormat=function(t,n){return xo(e,t,n)},l.nice=function(t){return mo(e,t),s()},l.copy=function(){return t(e,n,i,r)},s()}([0,1],[0,1],Gr,!1)};var bo={s:1,g:1,p:1,r:1,e:1};function wo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}t.scale.log=function(){return function e(n,i,r,a){function o(t){return(r?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(i)}function s(t){return r?Math.pow(i,t):-Math.pow(i,-t)}function l(t){return n(o(t))}return l.invert=function(t){return s(n.invert(t))},l.domain=function(t){return arguments.length?(r=t[0]>=0,n.domain((a=t.map(Number)).map(o)),l):a},l.base=function(t){return arguments.length?(i=+t,n.domain(a.map(o)),l):i},l.nice=function(){var t=ho(a.map(o),r?Math:To);return n.domain(t),a=t.map(s),l},l.ticks=function(){var t=lo(a),e=[],n=t[0],l=t[1],c=Math.floor(o(n)),u=Math.ceil(o(l)),h=i%1?2:i;if(isFinite(u-c)){if(r){for(;c<u;c++)for(var d=1;d<h;d++)e.push(s(c)*d);e.push(s(c))}else for(e.push(s(c));c++<u;)for(d=h-1;d>0;d--)e.push(s(c)*d);for(c=0;e[c]<n;c++);for(u=e.length;e[u-1]>l;u--);e=e.slice(c,u)}return e},l.tickFormat=function(e,n){if(!arguments.length)return ko;arguments.length<2?n=ko:"function"!=typeof n&&(n=t.format(n));var r=Math.max(1,i*e/l.ticks().length);return function(t){var e=t/s(Math.round(o(t)));return e*i<i-.5&&(e*=i),e<=r?n(t):""}},l.copy=function(){return e(n.copy(),i,r,a)},go(l,n)}(t.scale.linear().domain([0,1]),10,!0,[1,10])};var ko=t.format(".0e"),To={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Mo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}t.scale.pow=function(){return function t(e,n,i){var r=Mo(n),a=Mo(1/n);function o(t){return e(r(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(r)),o):i},o.ticks=function(t){return _o(i,t)},o.tickFormat=function(t,e){return xo(i,t,e)},o.nice=function(t){return o.domain(mo(i,t))},o.exponent=function(t){return arguments.length?(r=Mo(n=t),a=Mo(1/n),e.domain(i.map(r)),o):n},o.copy=function(){return t(e.copy(),n,i)},go(o,e)}(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return function e(n,i){var r,a,o;function s(t){return a[((r.get(t)||("range"===i.t?r.set(t,n.push(t)):NaN))-1)%a.length]}function l(e,i){return t.range(n.length).map(function(t){return e+i*t})}return s.domain=function(t){if(!arguments.length)return n;n=[],r=new x;for(var e,a=-1,o=t.length;++a<o;)r.has(e=t[a])||r.set(e,n.push(e));return s[i.t].apply(s,i.a)},s.range=function(t){return arguments.length?(a=t,o=0,i={t:"range",a:arguments},s):a},s.rangePoints=function(t,e){arguments.length<2&&(e=0);var r=t[0],c=t[1],u=n.length<2?(r=(r+c)/2,0):(c-r)/(n.length-1+e);return a=l(r+u*e/2,u),o=0,i={t:"rangePoints",a:arguments},s},s.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var r=t[0],c=t[1],u=n.length<2?(r=c=Math.round((r+c)/2),0):(c-r)/(n.length-1+e)|0;return a=l(r+Math.round(u*e/2+(c-r-(n.length-1+e)*u)/2),u),o=0,i={t:"rangeRoundPoints",a:arguments},s},s.rangeBands=function(t,e,r){arguments.length<2&&(e=0),arguments.length<3&&(r=e);var c=t[1]<t[0],u=t[c-0],h=(t[1-c]-u)/(n.length-e+2*r);return a=l(u+h*r,h),c&&a.reverse(),o=h*(1-e),i={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(t,e,r){arguments.length<2&&(e=0),arguments.length<3&&(r=e);var c=t[1]<t[0],u=t[c-0],h=t[1-c],d=Math.floor((h-u)/(n.length-e+2*r));return a=l(u+Math.round((h-u-(n.length-e)*d)/2),d),c&&a.reverse(),o=Math.round(d*(1-e)),i={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return o},s.rangeExtent=function(){return lo(i.a[0])},s.copy=function(){return e(n,i)},s.domain(n)}([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(Ao)},t.scale.category20=function(){return t.scale.ordinal().range(Co)},t.scale.category20b=function(){return t.scale.ordinal().range(Lo)},t.scale.category20c=function(){return t.scale.ordinal().range(So)};var Ao=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(oe),Co=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(oe),Lo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(oe),So=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(oe);function Eo(){return 0}t.scale.quantile=function(){return function e(n,i){var r;function a(){var e=0,a=i.length;for(r=[];++e<a;)r[e-1]=t.quantile(n,e/a);return o}function o(e){if(!isNaN(e=+e))return i[t.bisect(r,e)]}return o.domain=function(t){return arguments.length?(n=t.map(f).filter(p).sort(d),a()):n},o.range=function(t){return arguments.length?(i=t,a()):i},o.quantiles=function(){return r},o.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[t>0?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]},o.copy=function(){return e(n,i)},a()}([],[])},t.scale.quantize=function(){return function t(e,n,i){var r,a;function o(t){return i[Math.max(0,Math.min(a,Math.floor(r*(t-e))))]}function s(){return r=i.length/(n-e),a=i.length-1,o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]},o.range=function(t){return arguments.length?(i=t,s()):i},o.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/r+e,t+1/r]},o.copy=function(){return t(e,n,i)},s()}(0,1,[0,1])},t.scale.threshold=function(){return function e(n,i){function r(e){if(e<=e)return i[t.bisect(n,e)]}return r.domain=function(t){return arguments.length?(n=t,r):n},r.range=function(t){return arguments.length?(i=t,r):i},r.invertExtent=function(t){return t=i.indexOf(t),[n[t-1],n[t]]},r.copy=function(){return e(n,i)},r}([.5],[0,1])},t.scale.identity=function(){return function t(e){function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e},n.ticks=function(t){return _o(e,t)},n.tickFormat=function(t,n){return xo(e,t,n)},n.copy=function(){return t(e)},n}([0,1])},t.svg={},t.svg.arc=function(){var t=Po,e=Do,n=Eo,i=Oo,r=zo,a=Io,o=Ro;function s(){var s=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),u=r.apply(this,arguments)-Lt,h=a.apply(this,arguments)-Lt,d=Math.abs(h-u),f=u>h?0:1;if(c<s&&(p=c,c=s,s=p),d>=Ct)return l(c,f)+(s?l(s,1-f):"")+"Z";var p,v,g,m,y,_,x,b,w,k,T,M,A=0,C=0,L=[];if((m=(+o.apply(this,arguments)||0)/2)&&(g=i===Oo?Math.sqrt(s*s+c*c):+i.apply(this,arguments),f||(C*=-1),c&&(C=zt(g/c*Math.sin(m))),s&&(A=zt(g/s*Math.sin(m)))),c){y=c*Math.cos(u+C),_=c*Math.sin(u+C),x=c*Math.cos(h-C),b=c*Math.sin(h-C);var S=Math.abs(h-u-2*C)<=Mt?0:1;if(C&&Bo(y,_,x,b)===f^S){var E=(u+h)/2;y=c*Math.cos(E),_=c*Math.sin(E),x=b=null}}else y=_=0;if(s){w=s*Math.cos(h-A),k=s*Math.sin(h-A),T=s*Math.cos(u+A),M=s*Math.sin(u+A);var O=Math.abs(u-h+2*A)<=Mt?0:1;if(A&&Bo(w,k,T,M)===1-f^O){var P=(u+h)/2;w=s*Math.cos(P),k=s*Math.sin(P),T=M=null}}else w=k=0;if(d>kt&&(p=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){v=s<c^f?0:1;var D=p,z=p;if(d<Mt){var I=null==T?[w,k]:null==x?[y,_]:or([y,_],[T,M],[x,b],[w,k]),R=y-I[0],B=_-I[1],N=x-I[0],F=b-I[1],j=1/Math.sin(Math.acos((R*N+B*F)/(Math.sqrt(R*R+B*B)*Math.sqrt(N*N+F*F)))/2),H=Math.sqrt(I[0]*I[0]+I[1]*I[1]);z=Math.min(p,(s-H)/(j-1)),D=Math.min(p,(c-H)/(j+1))}if(null!=x){var $=No(null==T?[w,k]:[T,M],[y,_],c,D,f),q=No([x,b],[w,k],c,D,f);p===D?L.push("M",$[0],"A",D,",",D," 0 0,",v," ",$[1],"A",c,",",c," 0 ",1-f^Bo($[1][0],$[1][1],q[1][0],q[1][1]),",",f," ",q[1],"A",D,",",D," 0 0,",v," ",q[0]):L.push("M",$[0],"A",D,",",D," 0 1,",v," ",q[0])}else L.push("M",y,",",_);if(null!=T){var Z=No([y,_],[T,M],s,-z,f),V=No([w,k],null==x?[y,_]:[x,b],s,-z,f);p===z?L.push("L",V[0],"A",z,",",z," 0 0,",v," ",V[1],"A",s,",",s," 0 ",f^Bo(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-f," ",Z[1],"A",z,",",z," 0 0,",v," ",Z[0]):L.push("L",V[0],"A",z,",",z," 0 0,",v," ",Z[0])}else L.push("L",w,",",k)}else L.push("M",y,",",_),null!=x&&L.push("A",c,",",c," 0 ",S,",",f," ",x,",",b),L.push("L",w,",",k),null!=T&&L.push("A",s,",",s," 0 ",O,",",1-f," ",T,",",M);return L.push("Z"),L.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=ve(e),s):t},s.outerRadius=function(t){return arguments.length?(e=ve(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=ve(t),s):n},s.padRadius=function(t){return arguments.length?(i=t==Oo?Oo:ve(t),s):i},s.startAngle=function(t){return arguments.length?(r=ve(t),s):r},s.endAngle=function(t){return arguments.length?(a=ve(t),s):a},s.padAngle=function(t){return arguments.length?(o=ve(t),s):o},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Lt;return[Math.cos(i)*n,Math.sin(i)*n]},s};var Oo="auto";function Po(t){return t.innerRadius}function Do(t){return t.outerRadius}function zo(t){return t.startAngle}function Io(t){return t.endAngle}function Ro(t){return t&&t.padAngle}function Bo(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function No(t,e,n,i,r){var a=t[0]-e[0],o=t[1]-e[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=t[0]+l,h=t[1]+c,d=e[0]+l,f=e[1]+c,p=(u+d)/2,v=(h+f)/2,g=d-u,m=f-h,y=g*g+m*m,_=n-i,x=u*f-d*h,b=(m<0?-1:1)*Math.sqrt(Math.max(0,_*_*y-x*x)),w=(x*m-g*b)/y,k=(-x*g-m*b)/y,T=(x*m+g*b)/y,M=(-x*g+m*b)/y,A=w-p,C=k-v,L=T-p,S=M-v;return A*A+C*C>L*L+S*S&&(w=T,k=M),[[w-l,k-c],[w*n/_,k*n/_]]}function Fo(t){var e=tr,n=er,i=Wn,r=Ho,a=r.key,o=.7;function s(a){var s,l=[],c=[],u=-1,h=a.length,d=ve(e),f=ve(n);function p(){l.push("M",r(t(c),o))}for(;++u<h;)i.call(this,s=a[u],u)?c.push([+d.call(this,s,u),+f.call(this,s,u)]):c.length&&(p(),c=[]);return c.length&&p(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(i=t,s):i},s.interpolate=function(t){return arguments.length?(a="function"==typeof t?r=t:(r=jo.get(t)||Ho).key,s):a},s.tension=function(t){return arguments.length?(o=t,s):o},s}t.svg.line=function(){return Fo(O)};var jo=t.map({linear:Ho,"linear-closed":$o,step:function(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")},"step-before":qo,"step-after":Zo,basis:Uo,"basis-open":function(t){if(t.length<4)return Ho(t);for(var e,n=[],i=-1,r=t.length,a=[0],o=[0];++i<3;)a.push((e=t[i])[0]),o.push(e[1]);for(n.push(Go(Qo,a)+","+Go(Qo,o)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Ko(n,a,o);return n.join("")},"basis-closed":function(t){for(var e,n,i=-1,r=t.length,a=r+4,o=[],s=[];++i<4;)o.push((n=t[i%r])[0]),s.push(n[1]);for(e=[Go(Qo,o),",",Go(Qo,s)],--i;++i<a;)n=t[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ko(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,c=-1;++c<=n;)(i=t[c])[0]=e*i[0]+(1-e)*(a+(r=c/n)*s),i[1]=e*i[1]+(1-e)*(o+r*l);return Uo(t)},cardinal:function(t,e){return t.length<3?Ho(t):t[0]+Vo(t,Wo(t,e))},"cardinal-open":function(t,e){return t.length<4?Ho(t):t[1]+Vo(t.slice(1,-1),Wo(t,e))},"cardinal-closed":function(t,e){return t.length<3?$o(t):t[0]+Vo((t.push(t[0]),t),Wo([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Ho(t):t[0]+Vo(t,function(t){for(var e,n,i,r,a=[],o=function(t){for(var e=0,n=t.length-1,i=[],r=t[0],a=t[1],o=i[0]=Jo(r,a);++e<n;)i[e]=(o+(o=Jo(r=a,a=t[e+1])))/2;return i[e]=o,i}(t),s=-1,l=t.length-1;++s<l;)e=Jo(t[s],t[s+1]),y(e)<kt?o[s]=o[s+1]=0:(r=(n=o[s]/e)*n+(i=o[s+1]/e)*i)>9&&(r=3*e/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i);for(s=-1;++s<=l;)r=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}(t))}});function Ho(t){return t.length>1?t.join("L"):t+"Z"}function $o(t){return t.join("L")+"Z"}function qo(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Zo(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Vo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ho(t);var n=t.length!=e.length,i="",r=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=t[1],l=2),e.length>1){a=t[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-(s=e[1])[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,l++)i+="S"+((a=t[l])[0]-(s=e[c])[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var u=t[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return i}function Wo(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,i.push([r*((o=t[s])[0]-n[0]),r*(o[1]-n[1])]);return i}function Uo(t){if(t.length<3)return Ho(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],o=[r,r,r,(i=t[1])[0]],s=[a,a,a,i[1]],l=[r,",",a,"L",Go(Qo,o),",",Go(Qo,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Ko(l,o,s);return t.pop(),l.push("L",i),l.join("")}function Go(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}jo.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Xo=[0,2/3,1/3,0],Yo=[0,1/3,2/3,0],Qo=[0,1/6,2/3,1/6];function Ko(t,e,n){t.push("C",Go(Xo,e),",",Go(Xo,n),",",Go(Yo,e),",",Go(Yo,n),",",Go(Qo,e),",",Go(Qo,n))}function Jo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function ts(t){for(var e,n,i,r=-1,a=t.length;++r<a;)n=(e=t[r])[0],i=e[1]-Lt,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function es(t){var e=tr,n=tr,i=0,r=er,a=Wn,o=Ho,s=o.key,l=o,c="L",u=.7;function h(s){var h,d,f,p=[],v=[],g=[],m=-1,y=s.length,_=ve(e),x=ve(i),b=e===n?function(){return d}:ve(n),w=i===r?function(){return f}:ve(r);function k(){p.push("M",o(t(g),u),c,l(t(v.reverse()),u),"Z")}for(;++m<y;)a.call(this,h=s[m],m)?(v.push([d=+_.call(this,h,m),f=+x.call(this,h,m)]),g.push([+b.call(this,h,m),+w.call(this,h,m)])):v.length&&(k(),v=[],g=[]);return v.length&&k(),p.length?p.join(""):null}return h.x=function(t){return arguments.length?(e=n=t,h):n},h.x0=function(t){return arguments.length?(e=t,h):e},h.x1=function(t){return arguments.length?(n=t,h):n},h.y=function(t){return arguments.length?(i=r=t,h):r},h.y0=function(t){return arguments.length?(i=t,h):i},h.y1=function(t){return arguments.length?(r=t,h):r},h.defined=function(t){return arguments.length?(a=t,h):a},h.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=jo.get(t)||Ho).key,l=o.reverse||o,c=o.closed?"M":"L",h):s},h.tension=function(t){return arguments.length?(u=t,h):u},h}function ns(t){return t.radius}function is(t){return[t.x,t.y]}function rs(){return 64}function as(){return"circle"}function os(t){var e=Math.sqrt(t/Mt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}t.svg.line.radial=function(){var t=Fo(ts);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},qo.reverse=Zo,Zo.reverse=qo,t.svg.area=function(){return es(O)},t.svg.area.radial=function(){var t=es(ts);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},t.svg.chord=function(){var t=ji,e=Hi,n=ns,i=zo,r=Io;function a(n,i){var r,a,c=o(this,t,n,i),u=o(this,e,n,i);return"M"+c.p0+s(c.r,c.p1,c.a1-c.a0)+((r=c).a0==(a=u).a0&&r.a1==a.a1?l(0,0,0,c.p0):l(0,0,0,u.p0)+s(u.r,u.p1,u.a1-u.a0)+l(0,0,0,c.p0))+"Z"}function o(t,e,a,o){var s=e.call(t,a,o),l=n.call(t,s,o),c=i.call(t,s,o)-Lt,u=r.call(t,s,o)-Lt;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Mt)+",1 "+e}function l(t,e,n,i){return"Q 0,0 "+i}return a.radius=function(t){return arguments.length?(n=ve(t),a):n},a.source=function(e){return arguments.length?(t=ve(e),a):t},a.target=function(t){return arguments.length?(e=ve(t),a):e},a.startAngle=function(t){return arguments.length?(i=ve(t),a):i},a.endAngle=function(t){return arguments.length?(r=ve(t),a):r},a},t.svg.diagonal=function(){var t=ji,e=Hi,n=is;function i(i,r){var a=t.call(this,i,r),o=e.call(this,i,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return i.source=function(e){return arguments.length?(t=ve(e),i):t},i.target=function(t){return arguments.length?(e=ve(t),i):e},i.projection=function(t){return arguments.length?(n=t,i):n},i},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=is,i=e.projection;return e.projection=function(t){return arguments.length?i(function(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Lt;return[n*Math.cos(i),n*Math.sin(i)]}}(n=t)):n},e},t.svg.symbol=function(){var t=as,e=rs;function n(n,i){return(ss.get(t.call(this,n,i))||os)(e.call(this,n,i))}return n.type=function(e){return arguments.length?(t=ve(e),n):t},n.size=function(t){return arguments.length?(e=ve(t),n):e},n};var ss=t.map({circle:os,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*cs)),n=e*cs;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ls),n=e*ls/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ls),n=e*ls/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});t.svg.symbolTypes=ss.keys();var ls=Math.sqrt(3),cs=Math.tan(30*St);U.transition=function(t){for(var e,n,i=fs||++gs,r=_s(t),a=[],o=ps||{time:Date.now(),ease:ia,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var c=this[s],u=-1,h=c.length;++u<h;)(n=c[u])&&xs(n,u,r,i,o),e.push(n)}return ds(a,r,i)},U.interrupt=function(t){return this.each(null==t?us:hs(_s(t)))};var us=hs(_s());function hs(t){return function(){var e,n,i;(e=this[t])&&(i=e[n=e.active])&&(i.timer.c=null,i.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function ds(t,e,n){return $(t,vs),t.namespace=e,t.id=n,t}var fs,ps,vs=[],gs=0;function ms(t,e,n,i){var r=t.id,a=t.namespace;return ut(t,"function"==typeof n?function(t,o,s){t[a][r].tween.set(e,i(n.call(t,t.__data__,o,s)))}:(n=i(n),function(t){t[a][r].tween.set(e,n)}))}function ys(t){return null==t&&(t=""),function(){this.textContent=t}}function _s(t){return null==t?"__transition__":"__transition_"+t+"__"}function xs(t,e,n,i,r){var a,o,s,l,c,u=t[n]||(t[n]={active:0,count:0}),h=u[i];function d(n){var r=u.active,d=u[r];for(var p in d&&(d.timer.c=null,d.timer.t=NaN,--u.count,delete u[r],d.event&&d.event.interrupt.call(t,t.__data__,d.index)),u)if(+p<i){var v=u[p];v.timer.c=null,v.timer.t=NaN,--u.count,delete u[p]}o.c=f,ke(function(){return o.c&&f(n||1)&&(o.c=null,o.t=NaN),1},0,a),u.active=i,h.event&&h.event.start.call(t,t.__data__,e),c=[],h.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&c.push(i)}),l=h.ease,s=h.duration}function f(r){for(var a=r/s,o=l(a),d=c.length;d>0;)c[--d].call(t,o);if(a>=1)return h.event&&h.event.end.call(t,t.__data__,e),--u.count?delete u[i]:delete t[n],1}h||(o=ke(function(t){var e=h.delay;if(o.t=e+a,e<=t)return d(t-e);o.c=d},0,a=r.time),h=u[i]={tween:new x,time:a,timer:o,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++u.count)}vs.call=U.call,vs.empty=U.empty,vs.node=U.node,vs.size=U.size,t.transition=function(e,n){return e&&e.transition?fs?e.transition(n):e:t.selection().transition(e)},t.transition.prototype=vs,vs.select=function(t){var e,n,i,r=this.id,a=this.namespace,o=[];t=G(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var c=this[s],u=-1,h=c.length;++u<h;)(i=c[u])&&(n=t.call(i,i.__data__,u,s))?("__data__"in i&&(n.__data__=i.__data__),xs(n,u,a,r,i[a][r]),e.push(n)):e.push(null)}return ds(o,a,r)},vs.selectAll=function(t){var e,n,i,r,a,o=this.id,s=this.namespace,l=[];t=X(t);for(var c=-1,u=this.length;++c<u;)for(var h=this[c],d=-1,f=h.length;++d<f;)if(i=h[d]){a=i[s][o],n=t.call(i,i.__data__,d,c),l.push(e=[]);for(var p=-1,v=n.length;++p<v;)(r=n[p])&&xs(r,p,s,o,a),e.push(r)}return ds(l,s,o)},vs.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=ct(t));for(var r=0,a=this.length;r<a;r++){i.push(e=[]);for(var o,s=0,l=(o=this[r]).length;s<l;s++)(n=o[s])&&t.call(n,n.__data__,s,r)&&e.push(n)}return ds(i,this.namespace,this.id)},vs.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):ut(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},vs.attr=function(e,n){if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var i="transform"==e?pa:Gr,r=t.ns.qualify(e);function a(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}return ms(this,"attr."+e,n,r.local?function(t){return null==t?o:(t+="",function(){var e,n=this.getAttributeNS(r.space,r.local);return n!==t&&(e=i(n,t),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(t){return null==t?a:(t+="",function(){var e,n=this.getAttribute(r);return n!==t&&(e=i(n,t),function(t){this.setAttribute(r,e(t))})})})},vs.attrTween=function(e,n){var i=t.ns.qualify(e);return this.tween("attr."+e,i.local?function(t,e){var r=n.call(this,t,e,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}:function(t,e){var r=n.call(this,t,e,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}})},vs.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function r(){this.style.removeProperty(t)}return ms(this,"style."+t,e,function(e){return null==e?r:(e+="",function(){var i,r=o(this).getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=Gr(r,e),function(e){this.style.setProperty(t,i(e),n)})})})},vs.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(i,r){var a=e.call(this,i,r,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}})},vs.text=function(t){return ms(this,"text",t,ys)},vs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},vs.ease=function(e){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),ut(this,function(t){t[i][n].ease=e}))},vs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:ut(this,"function"==typeof t?function(i,r,a){i[n][e].delay=+t.call(i,i.__data__,r,a)}:(t=+t,function(i){i[n][e].delay=t}))},vs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:ut(this,"function"==typeof t?function(i,r,a){i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,a))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},vs.each=function(e,n){var i=this.id,r=this.namespace;if(arguments.length<2){var a=ps,o=fs;try{fs=i,ut(this,function(t,n,a){ps=t[r][i],e.call(t,t.__data__,n,a)})}finally{ps=a,fs=o}}else ut(this,function(a){var o=a[r][i];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,n)});return this},vs.transition=function(){for(var t,e,n,i=this.id,r=++gs,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(t=[]);for(var c,u=0,h=(c=this[s]).length;u<h;u++)(e=c[u])&&xs(e,u,a,r,{time:(n=e[a][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return ds(o,a,r)},t.svg.axis=function(){var e,n=t.scale.linear(),r=bs,a=6,o=6,s=3,l=[10],c=null;function u(i){i.each(function(){var i,u=t.select(this),h=this.__chart__||n,d=this.__chart__=n.copy(),f=null==c?d.ticks?d.ticks.apply(d,l):d.domain():c,p=null==e?d.tickFormat?d.tickFormat.apply(d,l):O:e,v=u.selectAll(".tick").data(f,d),g=v.enter().insert("g",".domain").attr("class","tick").style("opacity",kt),m=t.transition(v.exit()).style("opacity",kt).remove(),y=t.transition(v.order()).style("opacity",1),_=Math.max(a,0)+s,x=co(d),b=u.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),t.transition(b));g.append("line"),g.append("text");var k,T,M,A,C=g.select("line"),L=y.select("line"),S=v.select("text").text(p),E=g.select("text"),P=y.select("text"),D="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(i=ks,k="x",M="y",T="x2",A="y2",S.attr("dy",D<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+D*o+"V0H"+x[1]+"V"+D*o)):(i=Ts,k="y",M="x",T="y2",A="x2",S.attr("dy",".32em").style("text-anchor",D<0?"end":"start"),w.attr("d","M"+D*o+","+x[0]+"H0V"+x[1]+"H"+D*o)),C.attr(A,D*a),E.attr(M,D*_),L.attr(T,0).attr(A,D*a),P.attr(k,0).attr(M,D*_),d.rangeBand){var z=d,I=z.rangeBand()/2;h=d=function(t){return z(t)+I}}else h.rangeBand?h=d:m.call(i,d,h);g.call(i,h,d),y.call(i,d,d)})}return u.scale=function(t){return arguments.length?(n=t,u):n},u.orient=function(t){return arguments.length?(r=t in ws?t+"":bs,u):r},u.ticks=function(){return arguments.length?(l=i(arguments),u):l},u.tickValues=function(t){return arguments.length?(c=t,u):c},u.tickFormat=function(t){return arguments.length?(e=t,u):e},u.tickSize=function(t){var e=arguments.length;return e?(a=+t,o=+arguments[e-1],u):a},u.innerTickSize=function(t){return arguments.length?(a=+t,u):a},u.outerTickSize=function(t){return arguments.length?(o=+t,u):o},u.tickPadding=function(t){return arguments.length?(s=+t,u):s},u.tickSubdivide=function(){return arguments.length&&u},u};var bs="bottom",ws={top:1,right:1,bottom:1,left:1};function ks(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"})}function Ts(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"})}t.svg.brush=function(){var e,n,i=j(d,"brushstart","brush","brushend"),r=null,a=null,s=[0,0],l=[0,0],c=!0,u=!0,h=As[0];function d(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=e.selectAll(".resize").data(h,O);i.exit().remove(),i.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ms[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),i.style("display",d.empty()?"none":null);var o,s=t.transition(e),l=t.transition(n);r&&(o=co(r),l.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),a&&(o=co(a),l.attr("y",o[0]).attr("height",o[1]-o[0]),v(s)),f(s)})}function f(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+s[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function v(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function g(){var h,g,m=this,y=t.select(t.event.target),_=i.of(m,arguments),x=t.select(m),b=y.datum(),w=!/^(n|s)$/.test(b)&&r,k=!/^(e|w)$/.test(b)&&a,T=y.classed("extent"),M=_t(m),A=t.mouse(m),C=t.select(o(m)).on("keydown.brush",function(){32==t.event.keyCode&&(T||(h=null,A[0]-=s[1],A[1]-=l[1],T=2),N())}).on("keyup.brush",function(){32==t.event.keyCode&&2==T&&(A[0]+=s[1],A[1]+=l[1],T=0,N())});if(t.event.changedTouches?C.on("touchmove.brush",E).on("touchend.brush",P):C.on("mousemove.brush",E).on("mouseup.brush",P),x.interrupt().selectAll("*").interrupt(),T)A[0]=s[0]-A[0],A[1]=l[0]-A[1];else if(b){var L=+/w$/.test(b),S=+/^n/.test(b);g=[s[1-L]-A[0],l[1-S]-A[1]],A[0]=s[L],A[1]=l[S]}else t.event.altKey&&(h=A.slice());function E(){var e=t.mouse(m),n=!1;g&&(e[0]+=g[0],e[1]+=g[1]),T||(t.event.altKey?(h||(h=[(s[0]+s[1])/2,(l[0]+l[1])/2]),A[0]=s[+(e[0]<h[0])],A[1]=l[+(e[1]<h[1])]):h=null),w&&O(e,r,0)&&(p(x),n=!0),k&&O(e,a,1)&&(v(x),n=!0),n&&(f(x),_({type:"brush",mode:T?"move":"resize"}))}function O(t,i,r){var a,o,d=co(i),f=d[0],p=d[1],v=A[r],g=r?l:s,m=g[1]-g[0];if(T&&(f-=v,p-=m+v),a=(r?u:c)?Math.max(f,Math.min(p,t[r])):t[r],T?o=(a+=v)+m:(h&&(v=Math.max(f,Math.min(p,2*h[r]-a))),v<a?(o=a,a=v):o=v),g[0]!=a||g[1]!=o)return r?n=null:e=null,g[0]=a,g[1]=o,!0}function P(){E(),x.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),t.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),_({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",y.style("cursor")),_({type:"brushstart"}),E()}return d.event=function(r){r.each(function(){var r=i.of(this,arguments),a={x:s,y:l,i:e,j:n},o=this.__chart__||a;this.__chart__=a,fs?t.select(this).transition().each("start.brush",function(){e=o.i,n=o.j,s=o.x,l=o.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=Xr(s,a.x),i=Xr(l,a.y);return e=n=null,function(e){s=a.x=t(e),l=a.y=i(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=a.i,n=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},d.x=function(t){return arguments.length?(h=As[!(r=t)<<1|!a],d):r},d.y=function(t){return arguments.length?(h=As[!r<<1|!(a=t)],d):a},d.clamp=function(t){return arguments.length?(r&&a?(c=!!t[0],u=!!t[1]):r?c=!!t:a&&(u=!!t),d):r&&a?[c,u]:r?c:a?u:null},d.extent=function(t){var i,o,c,u,h;return arguments.length?(r&&(i=t[0],o=t[1],a&&(i=i[0],o=o[0]),e=[i,o],r.invert&&(i=r(i),o=r(o)),o<i&&(h=i,i=o,o=h),i==s[0]&&o==s[1]||(s=[i,o])),a&&(c=t[0],u=t[1],r&&(c=c[1],u=u[1]),n=[c,u],a.invert&&(c=a(c),u=a(u)),u<c&&(h=c,c=u,u=h),c==l[0]&&u==l[1]||(l=[c,u])),d):(r&&(e?(i=e[0],o=e[1]):(i=s[0],o=s[1],r.invert&&(i=r.invert(i),o=r.invert(o)),o<i&&(h=i,i=o,o=h))),a&&(n?(c=n[0],u=n[1]):(c=l[0],u=l[1],a.invert&&(c=a.invert(c),u=a.invert(u)),u<c&&(h=c,c=u,u=h))),r&&a?[[i,c],[o,u]]:r?[i,o]:a&&[c,u])},d.clear=function(){return d.empty()||(s=[0,0],l=[0,0],e=n=null),d},d.empty=function(){return!!r&&s[0]==s[1]||!!a&&l[0]==l[1]},t.rebind(d,i,"on")};var Ms={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},As=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Cs=Pe.format=sn.timeFormat,Ls=Cs.utc,Ss=Ls("%Y-%m-%dT%H:%M:%S.%LZ");function Es(t){return t.toISOString()}function Os(e,n,i){function r(t){return e(t)}function a(e,i){var r=(e[1]-e[0])/i,a=t.bisect(Ds,r);return a==Ds.length?[n.year,yo(e.map(function(t){return t/31536e6}),i)[2]]:a?n[r/Ds[a-1]<Ds[a]/r?a-1:a]:[Rs,yo(e,i)[2]]}return r.invert=function(t){return Ps(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Ps)},r.nice=function(t,e){var n=r.domain(),i=lo(n),o=null==t?a(i,10):"number"==typeof t&&a(i,t);function s(n){return!isNaN(n)&&!t.range(n,Ps(+n+1),e).length}return o&&(t=o[0],e=o[1]),r.domain(ho(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Ps(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Ps(+e+1);return e}}:t))},r.ticks=function(t,e){var n=lo(r.domain()),i=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Ps(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return i},r.copy=function(){return Os(e.copy(),n,i)},go(r,e)}function Ps(t){return new Date(t)}Cs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Es:Ss,Es.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Es.toString=Ss.toString,Pe.second=Re(function(t){return new De(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Pe.seconds=Pe.second.range,Pe.seconds.utc=Pe.second.utc.range,Pe.minute=Re(function(t){return new De(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Pe.minutes=Pe.minute.range,Pe.minutes.utc=Pe.minute.utc.range,Pe.hour=Re(function(t){var e=t.getTimezoneOffset()/60;return new De(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Pe.hours=Pe.hour.range,Pe.hours.utc=Pe.hour.utc.range,Pe.month=Re(function(t){return(t=Pe.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Pe.months=Pe.month.range,Pe.months.utc=Pe.month.utc.range;var Ds=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],zs=[[Pe.second,1],[Pe.second,5],[Pe.second,15],[Pe.second,30],[Pe.minute,1],[Pe.minute,5],[Pe.minute,15],[Pe.minute,30],[Pe.hour,1],[Pe.hour,3],[Pe.hour,6],[Pe.hour,12],[Pe.day,1],[Pe.day,2],[Pe.week,1],[Pe.month,1],[Pe.month,3],[Pe.year,1]],Is=Cs.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Wn]]),Rs={range:function(e,n,i){return t.range(Math.ceil(e/i)*i,+n,i).map(Ps)},floor:O,ceil:O};zs.year=Pe.year,Pe.scale=function(){return Os(t.scale.linear(),zs,Is)};var Bs=zs.map(function(t){return[t[0].utc,t[1]]}),Ns=Ls.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Wn]]);function Fs(t){return JSON.parse(t.responseText)}function js(t){var e=r.createRange();return e.selectNode(r.body),e.createContextualFragment(t.responseText)}Bs.year=Pe.year.utc,Pe.scale.utc=function(){return Os(t.scale.linear(),Bs,Ns)},t.text=ge(function(t){return t.responseText}),t.json=function(t,e){return me(t,"application/json",Fs,e)},t.html=function(t,e){return me(t,"text/html",js,e)},t.xml=ge(function(t){return t.responseXML}),"object"==typeof e&&e.exports?e.exports=t:this.d3=t}()},{}],9:[function(t,e,n){(function(i,r){!function(t,i){"object"==typeof n&&void 0!==e?e.exports=i():t.ES6Promise=i()}(this,function(){"use strict";function e(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=0,o=void 0,s=void 0,l=function(t,e){v[a]=t,v[a+1]=e,2===(a+=2)&&(s?s(g):b())},c="undefined"!=typeof window?window:void 0,u=c||{},h=u.MutationObserver||u.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==i&&"[object process]"==={}.toString.call(i),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(g,1)}}var v=new Array(1e3);function g(){for(var t=0;t<a;t+=2)(0,v[t])(v[t+1]),v[t]=void 0,v[t+1]=void 0;a=0}var m,y,_,x,b=void 0;function w(t,e){var n=arguments,i=this,r=new this.constructor(M);void 0===r[T]&&$(r);var a,o=i._state;return o?(a=n[o-1],l(function(){return j(o,r,a,i._result)})):R(i,r,t,e),r}function k(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(M);return P(e,t),e}d?b=function(){return i.nextTick(g)}:h?(y=0,_=new h(g),x=document.createTextNode(""),_.observe(x,{characterData:!0}),b=function(){x.data=y=++y%2}):f?((m=new MessageChannel).port1.onmessage=g,b=function(){return m.port2.postMessage(0)}):b=void 0===c&&"function"==typeof t?function(){try{var e=t("vertx");return o=e.runOnLoop||e.runOnContext,function(){o(g)}}catch(t){return p()}}():p();var T=Math.random().toString(36).substring(16);function M(){}var A=void 0,C=1,L=2,S=new N;function E(t){try{return t.then}catch(t){return S.error=t,S}}function O(t,n,i){n.constructor===t.constructor&&i===w&&n.constructor.resolve===k?function(t,e){e._state===C?z(t,e._result):e._state===L?I(t,e._result):R(e,void 0,function(e){return P(t,e)},function(e){return I(t,e)})}(t,n):i===S?I(t,S.error):void 0===i?z(t,n):e(i)?function(t,e,n){l(function(t){var i=!1,r=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(n,e,function(n){i||(i=!0,e!==n?P(t,n):z(t,n))},function(e){i||(i=!0,I(t,e))});!i&&r&&(i=!0,I(t,r))},t)}(t,n,i):z(t,n)}function P(t,e){var n;t===e?I(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=e)||"object"==typeof n&&null!==n?O(t,e,E(e)):z(t,e)}function D(t){t._onerror&&t._onerror(t._result),B(t)}function z(t,e){t._state===A&&(t._result=e,t._state=C,0!==t._subscribers.length&&l(B,t))}function I(t,e){t._state===A&&(t._state=L,t._result=e,l(D,t))}function R(t,e,n,i){var r=t._subscribers,a=r.length;t._onerror=null,r[a]=e,r[a+C]=n,r[a+L]=i,0===a&&t._state&&l(B,t)}function B(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,a=t._result,o=0;o<e.length;o+=3)r=e[o+n],(i=e[o])?j(n,i,r,a):r(a);t._subscribers.length=0}}function N(){this.error=null}var F=new N;function j(t,n,i,r){var a=e(i),o=void 0,s=void 0,l=void 0,c=void 0;if(a){if((o=function(t,e){try{return t(e)}catch(t){return F.error=t,F}}(i,r))===F?(c=!0,s=o.error,o=null):l=!0,n===o)return void I(n,new TypeError("A promises callback cannot return that same promise."))}else o=r,l=!0;n._state!==A||(a&&l?P(n,o):c?I(n,s):t===C?z(n,o):t===L&&I(n,o))}var H=0;function $(t){t[T]=H++,t._state=void 0,t._result=void 0,t._subscribers=[]}function q(t,e){this._instanceConstructor=t,this.promise=new t(M),this.promise[T]||$(this.promise),n(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?z(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&z(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}function Z(t){this[T]=H++,this._result=this._state=void 0,this._subscribers=[],M!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Z?function(t,e){try{e(function(e){P(t,e)},function(e){I(t,e)})}catch(e){I(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function V(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=Z}return q.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===A&&n<t;n++)this._eachEntry(e[n],n)},q.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===k){var r=E(t);if(r===w&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===Z){var a=new n(M);O(a,t,r),this._willSettleAt(a,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},q.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===A&&(this._remaining--,t===L?I(i,n):this._result[e]=n),0===this._remaining&&z(i,this._result)},q.prototype._willSettleAt=function(t,e){var n=this;R(t,void 0,function(t){return n._settledAt(C,e,t)},function(t){return n._settledAt(L,e,t)})},Z.all=function(t){return new q(this,t).promise},Z.race=function(t){var e=this;return n(t)?new e(function(n,i){for(var r=t.length,a=0;a<r;a++)e.resolve(t[a]).then(n,i)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},Z.resolve=k,Z.reject=function(t){var e=new this(M);return I(e,t),e},Z._setScheduler=function(t){s=t},Z._setAsap=function(t){l=t},Z._asap=l,Z.prototype={constructor:Z,then:w,catch:function(t){return this.then(null,t)}},V(),Z.polyfill=V,Z.Promise=Z,Z})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],10:[function(t,e,n){"use strict";var i=t("is-string-blank");e.exports=function(t){var e=typeof t;if("string"===e){var n=t;if(0==(t=+t)&&i(n))return!1}else if("number"!==e)return!1;return t-t<1}},{"is-string-blank":15}],11:[function(t,e,n){e.exports=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n+n,s=i+i,l=r+r,c=n*o,u=i*o,h=i*s,d=r*o,f=r*s,p=r*l,v=a*o,g=a*s,m=a*l;return t[0]=1-h-p,t[1]=u+m,t[2]=d-g,t[3]=0,t[4]=u-m,t[5]=1-c-p,t[6]=f+v,t[7]=0,t[8]=d+g,t[9]=f-v,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],12:[function(t,e,n){(function(n){"use strict";var i,r=t("is-browser");i="function"==typeof n.matchMedia?!n.matchMedia("(hover: none)").matches:r,e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":14}],13:[function(t,e,n){"use strict";var i=t("is-browser");e.exports=i&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":14}],14:[function(t,e,n){e.exports=!0},{}],15:[function(t,e,n){"use strict";e.exports=function(t){for(var e,n=t.length,i=0;i<n;i++)if(((e=t.charCodeAt(i))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},{}],16:[function(t,e,n){var i={left:0,top:0};e.exports=function(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r,a=t.clientX||0,o=t.clientY||0,s=(r=e)===window||r===document||r===document.body?i:r.getBoundingClientRect();return n[0]=a-s.left,n[1]=o-s.top,n}},{}],17:[function(t,e,n){var i,r=t("./lib/build-log"),a=t("./lib/epsilon"),o=t("./lib/intersecter"),s=t("./lib/segment-chainer"),l=t("./lib/segment-selector"),c=t("./lib/geojson"),u=!1,h=a();function d(t,e,n){var r=i.segments(t),a=i.segments(e),o=n(i.combine(r,a));return i.polygon(o)}i={buildLog:function(t){return!0===t?u=r():!1===t&&(u=!1),!1!==u&&u.list},epsilon:function(t){return h.epsilon(t)},segments:function(t){var e=o(!0,h,u);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:o(!1,h,u).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:l.union(t.combined,u),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:l.intersect(t.combined,u),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:l.difference(t.combined,u),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:l.differenceRev(t.combined,u),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:l.xor(t.combined,u),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:s(t.segments,h,u),inverted:t.inverted}},polygonFromGeoJSON:function(t){return c.toPolygon(i,t)},polygonToGeoJSON:function(t){return c.fromPolygon(i,h,t)},union:function(t,e){return d(t,e,i.selectUnion)},intersect:function(t,e){return d(t,e,i.selectIntersect)},difference:function(t,e){return d(t,e,i.selectDifference)},differenceRev:function(t,e){return d(t,e,i.selectDifferenceRev)},xor:function(t,e){return d(t,e,i.selectXor)}},"object"==typeof window&&(window.PolyBool=i),e.exports=i},{"./lib/build-log":18,"./lib/epsilon":19,"./lib/geojson":20,"./lib/intersecter":21,"./lib/segment-chainer":23,"./lib/segment-selector":24}],18:[function(t,e,n){e.exports=function(){var t,e=0,n=!1;function i(e,n){return t.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return i("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return i("div_seg",{seg:t,pt:e}),i("chop",{seg:t,pt:e})},statusRemove:function(t){return i("pop_seg",{seg:t})},segmentUpdate:function(t){return i("seg_update",{seg:t})},segmentNew:function(t,e){return i("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return i("rem_seg",{seg:t})},tempStatus:function(t,e,n){return i("temp_status",{seg:t,above:e,below:n})},rewind:function(t){return i("rewind",{seg:t})},status:function(t,e,n){return i("status",{seg:t,above:e,below:n})},vert:function(e){return e===n?t:(n=e,i("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),i("log",{txt:t})},reset:function(){return i("reset")},selected:function(t){return i("selected",{segs:t})},chainStart:function(t){return i("chain_start",{seg:t})},chainRemoveHead:function(t,e){return i("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return i("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return i("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return i("chain_match",{index:t})},chainClose:function(t){return i("chain_close",{index:t})},chainAddHead:function(t,e){return i("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return i("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return i("chain_con",{index1:t,index2:e})},chainReverse:function(t){return i("chain_rev",{index:t})},chainJoin:function(t,e){return i("chain_join",{index1:t,index2:e})},done:function(){return i("done")}}}},{}],19:[function(t,e,n){e.exports=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,n,i){var r=n[0],a=n[1];return(i[0]-r)*(e[1]-a)-(i[1]-a)*(e[0]-r)>=-t},pointBetween:function(e,n,i){var r=i[0]-n[0],a=i[1]-n[1],o=(e[0]-n[0])*r+(e[1]-n[1])*a;return!(o<t||o-(r*r+a*a)>-t)},pointsSameX:function(e,n){return Math.abs(e[0]-n[0])<t},pointsSameY:function(e,n){return Math.abs(e[1]-n[1])<t},pointsSame:function(t,n){return e.pointsSameX(t,n)&&e.pointsSameY(t,n)},pointsCompare:function(t,n){return e.pointsSameX(t,n)?e.pointsSameY(t,n)?0:t[1]<n[1]?-1:1:t[0]<n[0]?-1:1},pointsCollinear:function(e,n,i){return Math.abs((e[0]-n[0])*(n[1]-i[1])-(n[0]-i[0])*(e[1]-n[1]))<t},linesIntersect:function(e,n,i,r){var a=n[0]-e[0],o=n[1]-e[1],s=r[0]-i[0],l=r[1]-i[1],c=a*l-o*s;if(Math.abs(c)<t)return!1;var u=e[0]-i[0],h=e[1]-i[1],d=(s*h-l*u)/c,f=(a*h-o*u)/c,p={alongA:0,alongB:0,pt:[e[0]+d*a,e[1]+d*o]};return p.alongA=d<=-t?-2:d<t?-1:d-1<=-t?0:d-1<t?1:2,p.alongB=f<=-t?-2:f<t?-1:f-1<=-t?0:f-1<t?1:2,p},pointInsideRegion:function(e,n){for(var i=e[0],r=e[1],a=n[n.length-1][0],o=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var c=n[l][0],u=n[l][1];u-r>t!=o-r>t&&(a-c)*(r-u)/(o-u)+c-i>t&&(s=!s),a=c,o=u}return s}};return e}},{}],20:[function(t,e,n){var i={toPolygon:function(t,e){function n(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function n(e){var n=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[n]})}for(var i=n(e[0]),r=1;r<e.length;r++)i=t.selectDifference(t.combine(i,n(e[r])));return i}if("Polygon"===e.type)return t.polygon(n(e.coordinates));if("MultiPolygon"===e.type){for(var i=t.segments({inverted:!1,regions:[]}),r=0;r<e.coordinates.length;r++)i=t.selectUnion(t.combine(i,n(e.coordinates[r])));return t.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,n){function i(t,n){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],n)}function r(t){return{region:t,children:[]}}n=t.polygon(t.segments(n));var a=r(null);function o(t,e){for(var n=0;n<t.children.length;n++)if(i(e,(s=t.children[n]).region))return void o(s,e);var a=r(e);for(n=0;n<t.children.length;n++){var s;i((s=t.children[n]).region,e)&&(a.children.push(s),t.children.splice(n,1),n--)}t.children.push(a)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||o(a,l)}function c(t,e){for(var n=0,i=t[t.length-1][0],r=t[t.length-1][1],a=[],o=0;o<t.length;o++){var s=t[o][0],l=t[o][1];a.push([s,l]),n+=l*i-s*r,i=s,r=l}return n<0!==e&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var u=[];function h(t){var e=[c(t.region,!1)];u.push(e);for(var n=0;n<t.children.length;n++)e.push(d(t.children[n]))}function d(t){for(var e=0;e<t.children.length;e++)h(t.children[e]);return c(t.region,!0)}for(s=0;s<a.children.length;s++)h(a.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}};e.exports=i},{}],21:[function(t,e,n){var i=t("./linked-list");e.exports=function(t,e,n){function r(t,e,i){return{id:n?n.segmentId():-1,start:t,end:e,myFill:{above:i.myFill.above,below:i.myFill.below},otherFill:null}}var a=i.create();function o(t,n){a.insertBefore(t,function(i){return function(t,n,i,r,a,o){var s=e.pointsCompare(n,a);return 0!==s?s:e.pointsSame(i,o)?0:t!==r?t?1:-1:e.pointAboveOrOnLine(i,r?a:o,r?o:a)?1:-1}(t.isStart,t.pt,n,i.isStart,i.pt,i.other.pt)<0})}function s(t,e){var n=function(t,e){var n=i.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return o(n,t.end),n}(t,e);return function(t,e,n){var r=i.node({isStart:!1,pt:e.end,seg:e,primary:n,other:t,status:null});t.other=r,o(r,t.pt)}(n,t,e),n}function l(t,e){var i=r(e,t.seg.end,t.seg);return function(t,e){n&&n.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,o(t.other,t.pt)}(t,e),s(i,t.primary)}function c(r,o){var s=i.create();function c(t){return s.findTransition(function(n){var i,r,a,o,s,l;return o=(i=t).seg.end,(e.pointsCollinear(a=i.seg.start,s=(r=n.ev).seg.start,l=r.seg.end)?e.pointsCollinear(o,s,l)?1:e.pointAboveOrOnLine(o,s,l)?1:-1:e.pointAboveOrOnLine(a,s,l)?1:-1)>0})}function u(t,i){var r=t.seg,a=i.seg,o=r.start,s=r.end,c=a.start,u=a.end;n&&n.checkIntersection(r,a);var h=e.linesIntersect(o,s,c,u);if(!1===h){if(!e.pointsCollinear(o,s,c))return!1;if(e.pointsSame(o,u)||e.pointsSame(s,c))return!1;var d=e.pointsSame(o,c),f=e.pointsSame(s,u);if(d&&f)return i;var p=!d&&e.pointBetween(o,c,u),v=!f&&e.pointBetween(s,c,u);if(d)return v?l(i,s):l(t,u),i;p&&(f||(v?l(i,s):l(t,u)),l(i,o))}else 0===h.alongA&&(-1===h.alongB?l(t,c):0===h.alongB?l(t,h.pt):1===h.alongB&&l(t,u)),0===h.alongB&&(-1===h.alongA?l(i,o):0===h.alongA?l(i,h.pt):1===h.alongA&&l(i,s));return!1}for(var h=[];!a.isEmpty();){var d=a.getHead();if(n&&n.vert(d.pt[0]),d.isStart){n&&n.segmentNew(d.seg,d.primary);var f=c(d),p=f.before?f.before.ev:null,v=f.after?f.after.ev:null;function g(){if(p){var t=u(d,p);if(t)return t}return!!v&&u(d,v)}n&&n.tempStatus(d.seg,!!p&&p.seg,!!v&&v.seg);var m,y,_=g();if(_&&(t?(y=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=d.seg.myFill,n&&n.segmentUpdate(_.seg),d.other.remove(),d.remove()),a.getHead()!==d){n&&n.rewind(d.seg);continue}t?(y=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=v?v.seg.myFill.above:r,d.seg.myFill.above=y?!d.seg.myFill.below:d.seg.myFill.below):null===d.seg.otherFill&&(d.seg.otherFill={above:m=v?d.primary===v.primary?v.seg.otherFill.above:v.seg.myFill.above:d.primary?o:r,below:m}),n&&n.status(d.seg,!!p&&p.seg,!!v&&v.seg),d.other.status=f.insert(i.node({ev:d}))}else{var x=d.status;if(null===x)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(x.prev)&&s.exists(x.next)&&u(x.prev.ev,x.next.ev),n&&n.statusRemove(x.ev.seg),x.remove(),!d.primary){var b=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=b}h.push(d.seg)}a.getHead().remove()}return n&&n.done(),h}return t?{addRegion:function(t){for(var i,r,a,o=t[t.length-1],l=0;l<t.length;l++){var c=e.pointsCompare(i=o,o=t[l]);0!==c&&s((r=c<0?i:o,a=c<0?o:i,{id:n?n.segmentId():-1,start:r,end:a,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return c(t,!1)}}:{calculate:function(t,e,n,i){return t.forEach(function(t){s(r(t.start,t.end,t),!0)}),n.forEach(function(t){s(r(t.start,t.end,t),!1)}),c(e,i)}}}},{"./linked-list":22}],22:[function(t,e,n){e.exports={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,n){for(var i=t.root,r=t.root.next;null!==r;){if(n(r))return e.prev=r.prev,e.next=r,r.prev.next=e,void(r.prev=e);i=r,r=r.next}i.next=e,e.prev=i,e.next=null},findTransition:function(e){for(var n=t.root,i=t.root.next;null!==i&&!e(i);)n=i,i=i.next;return{before:n===t.root?null:n,after:i,insert:function(t){return t.prev=n,t.next=i,n.next=t,null!==i&&(i.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}}},{}],23:[function(t,e,n){e.exports=function(t,e,n){var i=[],r=[];return t.forEach(function(t){var a=t.start,o=t.end;if(e.pointsSame(a,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(t);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<i.length;u++){var h=(g=i[u])[0],d=g[g.length-1];if(e.pointsSame(h,a)){if(T(u,!0,!0))break}else if(e.pointsSame(h,o)){if(T(u,!0,!1))break}else if(e.pointsSame(d,a)){if(T(u,!1,!0))break}else if(e.pointsSame(d,o)&&T(u,!1,!1))break}if(c===s)return i.push([a,o]),void(n&&n.chainNew(a,o));if(c===l){n&&n.chainMatch(s.index);var f=s.index,p=s.matches_pt1?o:a,v=s.matches_head,g=i[f],m=v?g[0]:g[g.length-1],y=v?g[1]:g[g.length-2],_=v?g[g.length-1]:g[0],x=v?g[g.length-2]:g[1];return e.pointsCollinear(y,m,p)&&(v?(n&&n.chainRemoveHead(s.index,p),g.shift()):(n&&n.chainRemoveTail(s.index,p),g.pop()),m=y),e.pointsSame(_,p)?(i.splice(f,1),e.pointsCollinear(x,_,m)&&(v?(n&&n.chainRemoveTail(s.index,m),g.pop()):(n&&n.chainRemoveHead(s.index,m),g.shift())),n&&n.chainClose(s.index),void r.push(g)):void(v?(n&&n.chainAddHead(s.index,p),g.unshift(p)):(n&&n.chainAddTail(s.index,p),g.push(p)))}var b=s.index,w=l.index;n&&n.chainConnect(b,w);var k=i[b].length<i[w].length;s.matches_head?l.matches_head?k?(M(b),A(b,w)):(M(w),A(w,b)):A(w,b):l.matches_head?A(b,w):k?(M(b),A(w,b)):(M(w),A(b,w))}function T(t,e,n){return c.index=t,c.matches_head=e,c.matches_pt1=n,c===s?(c=l,!1):(c=null,!0)}function M(t){n&&n.chainReverse(t),i[t].reverse()}function A(t,r){var a=i[t],o=i[r],s=a[a.length-1],l=a[a.length-2],c=o[0],u=o[1];e.pointsCollinear(l,s,c)&&(n&&n.chainRemoveTail(t,s),a.pop(),s=l),e.pointsCollinear(s,c,u)&&(n&&n.chainRemoveHead(r,c),o.shift()),n&&n.chainJoin(t,r),i[t]=a.concat(o),i.splice(r,1)}}),r}},{}],24:[function(t,e,n){function i(t,e,n){var i=[];return t.forEach(function(t){var r=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[r]&&i.push({id:n?n.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[r],below:2===e[r]},otherFill:null})}),n&&n.selected(i),i}e.exports={union:function(t,e){return i(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return i(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return i(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return i(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return i(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}}},{}],25:[function(t,e,n){var i,r,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],h=!1,d=-1;function f(){h&&c&&(h=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!h){var t=l(f);h=!0;for(var e=u.length;e;){for(c=u,u=[];++d<e;)c&&c[d].run();d=-1,e=u.length}c=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function g(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new v(t,e)),1!==u.length||h||l(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],26:[function(t,e,n){!function(t){var n=/^\s+/,i=/\s+$/,r=0,a=t.round,o=t.min,s=t.max,l=t.random;function c(e,l){if(l=l||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,l);var u=function(e){var r,a,l={r:0,g:0,b:0},c=1,u=null,h=null,d=null,f=!1,p=!1;return"string"==typeof e&&(e=function(t){t=t.replace(n,"").replace(i,"").toLowerCase();var e,r=!1;if(C[t])t=C[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=j.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=j.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=j.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=j.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=j.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=j.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=j.hex8.exec(t))?{r:P(e[1]),g:P(e[2]),b:P(e[3]),a:R(e[4]),format:r?"name":"hex8"}:(e=j.hex6.exec(t))?{r:P(e[1]),g:P(e[2]),b:P(e[3]),format:r?"name":"hex"}:(e=j.hex4.exec(t))?{r:P(e[1]+""+e[1]),g:P(e[2]+""+e[2]),b:P(e[3]+""+e[3]),a:R(e[4]+""+e[4]),format:r?"name":"hex8"}:!!(e=j.hex3.exec(t))&&{r:P(e[1]+""+e[1]),g:P(e[2]+""+e[2]),b:P(e[3]+""+e[3]),format:r?"name":"hex"}}(e)),"object"==typeof e&&(H(e.r)&&H(e.g)&&H(e.b)?(r=e.g,a=e.b,l={r:255*E(e.r,255),g:255*E(r,255),b:255*E(a,255)},f=!0,p="%"===String(e.r).substr(-1)?"prgb":"rgb"):H(e.h)&&H(e.s)&&H(e.v)?(u=z(e.s),h=z(e.v),l=function(e,n,i){e=6*E(e,360),n=E(n,100),i=E(i,100);var r=t.floor(e),a=e-r,o=i*(1-n),s=i*(1-a*n),l=i*(1-(1-a)*n),c=r%6;return{r:255*[i,s,o,o,l,i][c],g:255*[l,i,i,s,o,o][c],b:255*[o,o,l,i,i,s][c]}}(e.h,u,h),f=!0,p="hsv"):H(e.h)&&H(e.s)&&H(e.l)&&(u=z(e.s),d=z(e.l),l=function(t,e,n){var i,r,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=E(t,360),e=E(e,100),n=E(n,100),0===e)i=r=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=o(l,s,t+1/3),r=o(l,s,t),a=o(l,s,t-1/3)}return{r:255*i,g:255*r,b:255*a}}(e.h,u,d),f=!0,p="hsl"),e.hasOwnProperty("a")&&(c=e.a)),c=S(c),{ok:f,format:e.format||p,r:o(255,s(l.r,0)),g:o(255,s(l.g,0)),b:o(255,s(l.b,0)),a:c}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=a(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=u.ok,this._tc_id=r++}function u(t,e,n){t=E(t,255),e=E(e,255),n=E(n,255);var i,r,a=s(t,e,n),l=o(t,e,n),c=(a+l)/2;if(a==l)i=r=0;else{var u=a-l;switch(r=c>.5?u/(2-a-l):u/(a+l),a){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,l:c}}function h(t,e,n){t=E(t,255),e=E(e,255),n=E(n,255);var i,r,a=s(t,e,n),l=o(t,e,n),c=a,u=a-l;if(r=0===a?0:u/a,a==l)i=0;else{switch(a){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,v:c}}function d(t,e,n,i){var r=[D(a(t).toString(16)),D(a(e).toString(16)),D(a(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function f(t,e,n,i){return[D(I(i)),D(a(t).toString(16)),D(a(e).toString(16)),D(a(n).toString(16))].join("")}function p(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.s-=e/100,n.s=O(n.s),c(n)}function v(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.s+=e/100,n.s=O(n.s),c(n)}function g(t){return c(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.l+=e/100,n.l=O(n.l),c(n)}function y(t,e){e=0===e?0:e||10;var n=c(t).toRgb();return n.r=s(0,o(255,n.r-a(-e/100*255))),n.g=s(0,o(255,n.g-a(-e/100*255))),n.b=s(0,o(255,n.b-a(-e/100*255))),c(n)}function _(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.l-=e/100,n.l=O(n.l),c(n)}function x(t,e){var n=c(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,c(n)}function b(t){var e=c(t).toHsl();return e.h=(e.h+180)%360,c(e)}function w(t){var e=c(t).toHsl(),n=e.h;return[c(t),c({h:(n+120)%360,s:e.s,l:e.l}),c({h:(n+240)%360,s:e.s,l:e.l})]}function k(t){var e=c(t).toHsl(),n=e.h;return[c(t),c({h:(n+90)%360,s:e.s,l:e.l}),c({h:(n+180)%360,s:e.s,l:e.l}),c({h:(n+270)%360,s:e.s,l:e.l})]}function T(t){var e=c(t).toHsl(),n=e.h;return[c(t),c({h:(n+72)%360,s:e.s,l:e.l}),c({h:(n+216)%360,s:e.s,l:e.l})]}function M(t,e,n){e=e||6,n=n||30;var i=c(t).toHsl(),r=360/n,a=[c(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,a.push(c(i));return a}function A(t,e){e=e||6;for(var n=c(t).toHsv(),i=n.h,r=n.s,a=n.v,o=[],s=1/e;e--;)o.push(c({h:i,s:r,v:a})),a=(a+s)%1;return o}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,n,i,r=this.toRgb();return n=r.g/255,i=r.b/255,.2126*((e=r.r/255)<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:t.pow((i+.055)/1.055,2.4))},setAlpha:function(t){return this._a=S(t),this._roundA=a(100*this._a)/100,this},toHsv:function(){var t=h(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=h(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),i=a(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),i=a(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return d(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,i,r){var o=[D(a(t).toString(16)),D(a(e).toString(16)),D(a(n).toString(16)),D(I(i))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*E(this._r,255))+"%",g:a(100*E(this._g,255))+"%",b:a(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*E(this._r,255))+"%, "+a(100*E(this._g,255))+"%, "+a(100*E(this._b,255))+"%)":"rgba("+a(100*E(this._r,255))+"%, "+a(100*E(this._g,255))+"%, "+a(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(L[d(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=c(t);n="#"+f(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1;return e||!(this._a<1&&this._a>=0)||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},c.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:z(t[i]));t=n}return c(t,e)},c.equals=function(t,e){return!(!t||!e)&&c(t).toRgbString()==c(e).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(t,e,n){n=0===n?0:n||50;var i=c(t).toRgb(),r=c(e).toRgb(),a=n/100;return c({r:(r.r-i.r)*a+i.r,g:(r.g-i.g)*a+i.g,b:(r.b-i.b)*a+i.b,a:(r.a-i.a)*a+i.a})},c.readability=function(e,n){var i=c(e),r=c(n);return(t.max(i.getLuminance(),r.getLuminance())+.05)/(t.min(i.getLuminance(),r.getLuminance())+.05)},c.isReadable=function(t,e,n){var i,r,a=c.readability(t,e);switch(r=!1,(i=function(t){var e,n;return"AA"!==(e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==e&&(e="AA"),"small"!==(n=(t.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:e,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7}return r},c.mostReadable=function(t,e,n){var i,r,a,o,s=null,l=0;r=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var u=0;u<e.length;u++)(i=c.readability(t,e[u]))>l&&(l=i,s=c(e[u]));return c.isReadable(t,s,{level:a,size:o})||!r?s:(n.includeFallbackColors=!1,c.mostReadable(t,["#fff","#000"],n))};var C=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=c.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(C);function S(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function E(e,n){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(e)&&(e="100%");var i="string"==typeof e&&-1!=e.indexOf("%");return e=o(n,s(0,parseFloat(e))),i&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function O(t){return o(1,s(0,t))}function P(t){return parseInt(t,16)}function D(t){return 1==t.length?"0"+t:""+t}function z(t){return t<=1&&(t=100*t+"%"),t}function I(e){return t.round(255*parseFloat(e)).toString(16)}function R(t){return P(t)/255}var B,N,F,j=(N="[\\s|\\(]+("+(B="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",F="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",{CSS_UNIT:new RegExp(B),rgb:new RegExp("rgb"+N),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+N),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+N),hsva:new RegExp("hsva"+F),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(t){return!!j.CSS_UNIT.exec(t)}void 0!==e&&e.exports?e.exports=c:window.tinycolor=c}(Math)},{}],27:[function(t,e,n){"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],28:[function(t,e,n){"use strict";var i=t("./arrow_paths"),r=t("../../plots/font_attributes"),a=t("../../plots/cartesian/constants"),o=t("../../plot_api/plot_template").templatedArray;e.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:r({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:i.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:i.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:r({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":193,"../../plots/cartesian/constants":209,"../../plots/font_attributes":229,"./arrow_paths":27}],29:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plots/cartesian/axes"),a=t("./draw").draw;function o(t){i.filterVisible(t._fullLayout.annotations).forEach(function(e){var n=r.getFromId(t,e.xref),i=r.getFromId(t,e.yref);e._extremes={},n&&s(e,n),i&&s(e,i)})}function s(t,e){var n,i=e._id,a=i.charAt(0),o=t[a],s=t["a"+a],l=t["_"+a+"padplus"],c=t["_"+a+"padminus"],u={x:1,y:-1}[a]*t[a+"shift"],h=3*t.arrowsize*t.arrowwidth||0,d=h+u,f=h-u,p=3*t.startarrowsize*t.arrowwidth||0,v=p+u,g=p-u;if(t["a"+a+"ref"]===t[a+"ref"]){var m=r.findExtremes(e,[e.r2c(o)],{ppadplus:d,ppadminus:f}),y=r.findExtremes(e,[e.r2c(s)],{ppadplus:Math.max(l,v),ppadminus:Math.max(c,g)});n={min:[m.min[0],y.min[0]],max:[m.max[0],y.max[0]]}}else v=s?v+s:v,g=s?g-s:g,n=r.findExtremes(e,[e.r2c(o)],{ppadplus:Math.max(l,d,v),ppadminus:Math.max(c,f,g)});t._extremes[i]=n}e.exports=function(t){if(i.filterVisible(t._fullLayout.annotations).length&&t._fullData.length)return i.syncOrAsync([a,o],t)}},{"../../lib":159,"../../plots/cartesian/axes":203,"./draw":34}],30:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../registry"),a=t("../../plot_api/plot_template").arrayEditor;function o(t,e){var n,i,r,a,o,l,c,u=t._fullLayout.annotations,h=[],d=[],f=[],p=(e||[]).length;for(n=0;n<u.length;n++)if(a=(r=u[n]).clicktoshow){for(i=0;i<p;i++)if(l=(o=e[i]).xaxis,c=o.yaxis,l._id===r.xref&&c._id===r.yref&&l.d2r(o.x)===s(r._xclick,l)&&c.d2r(o.y)===s(r._yclick,c)){(r.visible?"onout"===a?d:f:h).push(n);break}i===p&&r.visible&&"onout"===a&&d.push(n)}return{on:h,off:d,explicitOff:f}}function s(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}e.exports={hasClickToShow:function(t,e){var n=o(t,e);return n.on.length>0||n.explicitOff.length>0},onClick:function(t,e){var n,s,l=o(t,e),c=l.on,u=l.off.concat(l.explicitOff),h={},d=t._fullLayout.annotations;if(c.length||u.length){for(n=0;n<c.length;n++)(s=a(t.layout,"annotations",d[c[n]])).modifyItem("visible",!0),i.extendFlat(h,s.getUpdateObj());for(n=0;n<u.length;n++)(s=a(t.layout,"annotations",d[u[n]])).modifyItem("visible",!1),i.extendFlat(h,s.getUpdateObj());return r.call("update",t,{},h)}}}},{"../../lib":159,"../../plot_api/plot_template":193,"../../registry":242}],31:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../color");e.exports=function(t,e,n,a){a("opacity");var o=a("bgcolor"),s=a("bordercolor"),l=r.opacity(s);a("borderpad");var c=a("borderwidth"),u=a("showarrow");if(a("text",u?" ":n._dfltTitle.annotation),a("textangle"),i.coerceFont(a,"font",n.font),a("width"),a("align"),a("height")&&a("valign"),u){var h,d,f=a("arrowside");-1!==f.indexOf("end")&&(h=a("arrowhead"),d=a("arrowsize")),-1!==f.indexOf("start")&&(a("startarrowhead",h),a("startarrowsize",d)),a("arrowcolor",l?e.bordercolor:r.defaultLine),a("arrowwidth",2*(l&&c||1)),a("standoff"),a("startstandoff")}var p=a("hovertext"),v=n.hoverlabel||{};if(p){var g=a("hoverlabel.bgcolor",v.bgcolor||(r.opacity(o)?r.rgb(o):r.defaultLine)),m=a("hoverlabel.bordercolor",v.bordercolor||r.contrast(g));i.coerceFont(a,"hoverlabel.font",{family:v.font.family,size:v.font.size,color:v.font.color||m})}a("captureevents",!!p)}},{"../../lib":159,"../color":43}],32:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib/to_log_range");e.exports=function(t,e,n,a){e=e||{};var o="log"===n&&"linear"===e.type;if(o||"linear"===n&&"log"===e.type)for(var s,l,c=t._fullLayout.annotations,u=e._id.charAt(0),h=0;h<c.length;h++)l="annotations["+h+"].",(s=c[h])[u+"ref"]===e._id&&d(u),s["a"+u+"ref"]===e._id&&d("a"+u);function d(t){var n=s[t],c=null;c=o?r(n,e.range):Math.pow(10,n),i(c)||(c=null),a(l+t,c)}}},{"../../lib/to_log_range":182,"fast-isnumeric":10}],33:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("./common_defaults"),s=t("./attributes");function l(t,e,n){function a(n,r){return i.coerce(t,e,s,n,r)}var l=a("visible"),c=a("clicktoshow");if(l||c){o(t,e,n,a);for(var u=e.showarrow,h=["x","y"],d=[-10,-30],f={_fullLayout:n},p=0;p<2;p++){var v=h[p],g=r.coerceRef(t,e,f,v,"","paper");if("paper"!==g&&r.getFromId(f,g)._annIndices.push(e._index),r.coercePosition(e,f,a,g,v,.5),u){var m="a"+v,y=r.coerceRef(t,e,f,m,"pixel");"pixel"!==y&&y!==g&&(y=e[m]="pixel"),r.coercePosition(e,f,a,y,m,"pixel"===y?d[p]:.4)}a(v+"anchor"),a(v+"shift")}if(i.noneOrAll(t,e,["x","y"]),u&&i.noneOrAll(t,e,["ax","ay"]),c){var _=a("xclick"),x=a("yclick");e._xclick=void 0===_?e.x:r.cleanPosition(_,f,e.xref),e._yclick=void 0===x?e.y:r.cleanPosition(x,f,e.yref)}}}e.exports=function(t,e){a(t,e,{name:"annotations",handleItemDefaults:l})}},{"../../lib":159,"../../plots/array_container_defaults":199,"../../plots/cartesian/axes":203,"./attributes":28,"./common_defaults":31}],34:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../registry"),a=t("../../plots/plots"),o=t("../../lib"),s=t("../../plots/cartesian/axes"),l=t("../color"),c=t("../drawing"),u=t("../fx"),h=t("../../lib/svg_text_utils"),d=t("../../lib/setcursor"),f=t("../dragelement"),p=t("../../plot_api/plot_template").arrayEditor,v=t("./draw_arrow_head");function g(t,e){var n=t._fullLayout.annotations[e]||{},i=s.getFromId(t,n.xref),r=s.getFromId(t,n.yref);i&&i.setScale(),r&&r.setScale(),m(t,n,e,!1,i,r)}function m(t,e,n,a,s,g){var m,y,_=t._fullLayout,x=t._fullLayout._size,b=t._context.edits;a?(m="annotation-"+a,y=a+".annotations"):(m="annotation",y="annotations");var w=p(t.layout,y,e),k=w.modifyBase,T=w.modifyItem,M=w.getUpdateObj;_._infolayer.selectAll("."+m+'[data-index="'+n+'"]').remove();var A="clip"+_._uid+"_ann"+n;if(e._input&&!1!==e.visible){var C={x:{},y:{}},L=+e.textangle||0,S=_._infolayer.append("g").classed(m,!0).attr("data-index",String(n)).style("opacity",e.opacity),E=S.append("g").classed("annotation-text-g",!0),O=b[e.showarrow?"annotationTail":"annotationPosition"],P=e.captureevents||b.annotationText||O,D=E.append("g").style("pointer-events",P?"all":null).call(d,"pointer").on("click",function(){t._dragging=!1;var r={index:n,annotation:e._input,fullAnnotation:e,event:i.event};a&&(r.subplotId=a),t.emit("plotly_clickannotation",r)});e.hovertext&&D.on("mouseover",function(){var n=e.hoverlabel,i=n.font,r=this.getBoundingClientRect(),a=t.getBoundingClientRect();u.loneHover({x0:r.left-a.left,x1:r.right-a.left,y:(r.top+r.bottom)/2-a.top,text:e.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:i.family,fontSize:i.size,fontColor:i.color},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:t})}).on("mouseout",function(){u.loneUnhover(_._hoverlayer.node())});var z=e.borderwidth,I=z+e.borderpad,R=D.append("rect").attr("class","bg").style("stroke-width",z+"px").call(l.stroke,e.bordercolor).call(l.fill,e.bgcolor),B=e.width||e.height,N=_._topclips.selectAll("#"+A).data(B?[0]:[]);N.enter().append("clipPath").classed("annclip",!0).attr("id",A).append("rect"),N.exit().remove();var F=e.font,j=_.meta?o.templateString(e.text,{meta:_.meta}):e.text,H=D.append("text").classed("annotation-text",!0).text(j);b.annotationText?H.call(h.makeEditable,{delegate:D,gd:t}).call($).on("edit",function(n){e.text=n,this.call($),T("text",n),s&&s.autorange&&k(s._name+".autorange",!0),g&&g.autorange&&k(g._name+".autorange",!0),r.call("_guiRelayout",t,M())}):H.call($)}else i.selectAll("#"+A).remove();function $(n){return n.call(c.font,F).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),h.convertToTspans(n,t,q),n}function q(){var n=H.selectAll("a");1===n.size()&&n.text()===H.text()&&D.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(R.node());var i=D.select(".annotation-text-math-group"),u=!i.empty(),p=c.bBox((u?i:H).node()),m=p.width,y=p.height,w=e.width||m,P=e.height||y,F=Math.round(w+2*I),j=Math.round(P+2*I);function $(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}for(var q=!1,Z=["x","y"],V=0;V<Z.length;V++){var W,U,G,X,Y,Q=Z[V],K=e[Q+"ref"]||Q,J=e["a"+Q+"ref"],tt={x:s,y:g}[Q],et=(L+("x"===Q?0:-90))*Math.PI/180,nt=F*Math.cos(et),it=j*Math.sin(et),rt=Math.abs(nt)+Math.abs(it),at=e[Q+"anchor"],ot=e[Q+"shift"]*("x"===Q?1:-1),st=C[Q];if(tt){var lt=tt.r2fraction(e[Q]);(lt<0||lt>1)&&(J===K?((lt=tt.r2fraction(e["a"+Q]))<0||lt>1)&&(q=!0):q=!0),W=tt._offset+tt.r2p(e[Q]),X=.5}else W="x"===Q?x.l+x.w*(G=e[Q]):x.t+x.h*(G=1-e[Q]),X=e.showarrow?.5:G;if(e.showarrow){st.head=W;var ct=e["a"+Q];Y=nt*$(.5,e.xanchor)-it*$(.5,e.yanchor),J===K?(st.tail=tt._offset+tt.r2p(ct),U=Y):(st.tail=W+ct,U=Y+ct),st.text=st.tail+Y;var ut=_["x"===Q?"width":"height"];if("paper"===K&&(st.head=o.constrain(st.head,1,ut-1)),"pixel"===J){var ht=-Math.max(st.tail-3,st.text),dt=Math.min(st.tail+3,st.text)-ut;ht>0?(st.tail+=ht,st.text+=ht):dt>0&&(st.tail-=dt,st.text-=dt)}st.tail+=ot,st.head+=ot}else U=Y=rt*$(X,at),st.text=W+Y;st.text+=ot,Y+=ot,e["_"+Q+"padplus"]=rt/2+(U+=ot),e["_"+Q+"padminus"]=rt/2-U,e["_"+Q+"size"]=rt,e["_"+Q+"shift"]=Y}if(t._dragging||!q){var ft=0,pt=0;"left"!==e.align&&(ft=(w-m)*("center"===e.align?.5:1)),"top"!==e.valign&&(pt=(P-y)*("middle"===e.valign?.5:1)),u?i.select("svg").attr({x:I+ft-1,y:I+pt}).call(c.setClipUrl,B?A:null,t):H.call(h.positionText,I+ft-p.left,I+pt-p.top).call(c.setClipUrl,B?A:null,t),N.select("rect").call(c.setRect,I,I,w,P),R.call(c.setRect,z/2,z/2,F-z,j-z),D.call(c.setTranslate,Math.round(C.x.text-F/2),Math.round(C.y.text-j/2)),E.attr({transform:"rotate("+L+","+C.x.text+","+C.y.text+")"});var vt,gt=function(n,i){S.selectAll(".annotation-arrow-g").remove();var u=C.x.head,h=C.y.head,d=C.x.tail+n,p=C.y.tail+i,m=C.x.text+n,y=C.y.text+i,_=o.rotationXYMatrix(L,m,y),w=o.apply2DTransform(_),A=o.apply2DTransform2(_),O=+R.attr("width"),P=+R.attr("height"),z=m-.5*O,I=z+O,B=y-.5*P,N=B+P,F=[[z,B,z,N],[z,N,I,N],[I,N,I,B],[I,B,z,B]].map(A);if(!F.reduce(function(t,e){return t^!!o.segmentsIntersect(u,h,u+1e6,h+1e6,e[0],e[1],e[2],e[3])},!1)){F.forEach(function(t){var e=o.segmentsIntersect(d,p,u,h,t[0],t[1],t[2],t[3]);e&&(d=e.x,p=e.y)});var j=e.arrowwidth,H=e.arrowcolor,$=e.arrowside,q=S.append("g").style({opacity:l.opacity(H)}).classed("annotation-arrow-g",!0),Z=q.append("path").attr("d","M"+d+","+p+"L"+u+","+h).style("stroke-width",j+"px").call(l.stroke,l.rgb(H));if(v(Z,$,e),b.annotationPosition&&Z.node().parentNode&&!a){var V=u,W=h;if(e.standoff){var U=Math.sqrt(Math.pow(u-d,2)+Math.pow(h-p,2));V+=e.standoff*(d-u)/U,W+=e.standoff*(p-h)/U}var G,X,Y=q.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-V)+","+(p-W),transform:"translate("+V+","+W+")"}).style("stroke-width",j+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");f.init({element:Y.node(),gd:t,prepFn:function(){var t=c.getTranslate(D);G=t.x,X=t.y,s&&s.autorange&&k(s._name+".autorange",!0),g&&g.autorange&&k(g._name+".autorange",!0)},moveFn:function(t,n){var i=w(G,X),r=i[0]+t,a=i[1]+n;D.call(c.setTranslate,r,a),T("x",s?s.p2r(s.r2p(e.x)+t):e.x+t/x.w),T("y",g?g.p2r(g.r2p(e.y)+n):e.y-n/x.h),e.axref===e.xref&&T("ax",s.p2r(s.r2p(e.ax)+t)),e.ayref===e.yref&&T("ay",g.p2r(g.r2p(e.ay)+n)),q.attr("transform","translate("+t+","+n+")"),E.attr({transform:"rotate("+L+","+r+","+a+")"})},doneFn:function(){r.call("_guiRelayout",t,M());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};e.showarrow&&gt(0,0),O&&f.init({element:D.node(),gd:t,prepFn:function(){vt=E.attr("transform")},moveFn:function(t,n){var i="pointer";if(e.showarrow)T("ax",e.axref===e.xref?s.p2r(s.r2p(e.ax)+t):e.ax+t),T("ay",e.ayref===e.yref?g.p2r(g.r2p(e.ay)+n):e.ay+n),gt(t,n);else{if(a)return;var r,o;if(s)r=s.p2r(s.r2p(e.x)+t);else{var l=e._xsize/x.w;r=f.align(e.x+(e._xshift-e.xshift)/x.w-l/2+t/x.w,l,0,1,e.xanchor)}if(g)o=g.p2r(g.r2p(e.y)+n);else{var c=e._ysize/x.h;o=f.align(e.y-(e._yshift+e.yshift)/x.h-c/2-n/x.h,c,0,1,e.yanchor)}T("x",r),T("y",o),s&&g||(i=f.getCursor(s?.5:r,g?.5:o,e.xanchor,e.yanchor))}E.attr({transform:"translate("+t+","+n+")"+vt}),d(D,i)},doneFn:function(){d(D),r.call("_guiRelayout",t,M());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}else D.remove()}}e.exports={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var n=0;n<e.annotations.length;n++)e.annotations[n].visible&&g(t,n);return a.previousPromises(t)},drawOne:g,drawRaw:m}},{"../../lib":159,"../../lib/setcursor":178,"../../lib/svg_text_utils":180,"../../plot_api/plot_template":193,"../../plots/cartesian/axes":203,"../../plots/plots":235,"../../registry":242,"../color":43,"../dragelement":61,"../drawing":64,"../fx":82,"./draw_arrow_head":35,d3:8}],35:[function(t,e,n){"use strict";var i=t("d3"),r=t("../color"),a=t("./arrow_paths");e.exports=function(t,e,n){var o,s,l,c,u=t.node(),h=a[n.arrowhead||0],d=a[n.startarrowhead||0],f=(n.arrowwidth||1)*(n.arrowsize||1),p=(n.arrowwidth||1)*(n.startarrowsize||1),v=e.indexOf("start")>=0,g=e.indexOf("end")>=0,m=h.backoff*f+n.standoff,y=d.backoff*p+n.startstandoff;if("line"===u.nodeName){o={x:+t.attr("x1"),y:+t.attr("y1")},s={x:+t.attr("x2"),y:+t.attr("y2")};var _=o.x-s.x,x=o.y-s.y;if(c=(l=Math.atan2(x,_))+Math.PI,m&&y&&m+y>Math.sqrt(_*_+x*x))return void O();if(m){if(m*m>_*_+x*x)return void O();var b=m*Math.cos(l),w=m*Math.sin(l);s.x+=b,s.y+=w,t.attr({x2:s.x,y2:s.y})}if(y){if(y*y>_*_+x*x)return void O();var k=y*Math.cos(l),T=y*Math.sin(l);o.x-=k,o.y-=T,t.attr({x1:o.x,y1:o.y})}}else if("path"===u.nodeName){var M=u.getTotalLength(),A="";if(M<m+y)return void O();var C=u.getPointAtLength(0),L=u.getPointAtLength(.1);l=Math.atan2(C.y-L.y,C.x-L.x),o=u.getPointAtLength(Math.min(y,M)),A="0px,"+y+"px,";var S=u.getPointAtLength(M),E=u.getPointAtLength(M-.1);c=Math.atan2(S.y-E.y,S.x-E.x),s=u.getPointAtLength(Math.max(0,M-m)),t.style("stroke-dasharray",A+=M-(A?y+m:m)+"px,"+M+"px")}function O(){t.style("stroke-dasharray","0px,100px")}function P(e,a,o,s){e.path&&(e.noRotate&&(o=0),i.select(u.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:"translate("+a.x+","+a.y+")"+(o?"rotate("+180*o/Math.PI+")":"")+"scale("+s+")"}).style({fill:r.rgb(n.arrowcolor),"stroke-width":0}))}v&&P(d,o,l,p),g&&P(h,s,c,f)}},{"../color":43,"./arrow_paths":27,d3:8}],36:[function(t,e,n){"use strict";var i=t("./draw"),r=t("./click");e.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:i.draw,drawOne:i.drawOne,drawRaw:i.drawRaw,hasClickToShow:r.hasClickToShow,onClick:r.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":213,"./attributes":28,"./calc_autorange":29,"./click":30,"./convert_coords":32,"./defaults":33,"./draw":34}],37:[function(t,e,n){"use strict";var i=t("../annotations/attributes"),r=t("../../plot_api/edit_types").overrideAll,a=t("../../plot_api/plot_template").templatedArray;e.exports=r(a("annotation",{visible:i.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:i.xanchor,xshift:i.xshift,yanchor:i.yanchor,yshift:i.yshift,text:i.text,textangle:i.textangle,font:i.font,width:i.width,height:i.height,opacity:i.opacity,align:i.align,valign:i.valign,bgcolor:i.bgcolor,bordercolor:i.bordercolor,borderpad:i.borderpad,borderwidth:i.borderwidth,showarrow:i.showarrow,arrowcolor:i.arrowcolor,arrowhead:i.arrowhead,startarrowhead:i.startarrowhead,arrowside:i.arrowside,arrowsize:i.arrowsize,startarrowsize:i.startarrowsize,arrowwidth:i.arrowwidth,standoff:i.standoff,startstandoff:i.startstandoff,hovertext:i.hovertext,hoverlabel:i.hoverlabel,captureevents:i.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":186,"../../plot_api/plot_template":193,"../annotations/attributes":28}],38:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plots/cartesian/axes");function a(t,e){var n=e.fullSceneLayout.domain,a=e.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},i.extendFlat(t._xa,o),r.setConvert(t._xa),t._xa._offset=a.l+n.x[0]*a.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*a.w*(n.x[1]-n.x[0])},t._ya={},i.extendFlat(t._ya,o),r.setConvert(t._ya),t._ya._offset=a.t+(1-n.y[1])*a.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*a.h*(n.y[1]-n.y[0])}}e.exports=function(t){for(var e=t.fullSceneLayout.annotations,n=0;n<e.length;n++)a(e[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()}},{"../../lib":159,"../../plots/cartesian/axes":203}],39:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("../annotations/common_defaults"),s=t("./attributes");function l(t,e,n,a){function l(n,r){return i.coerce(t,e,s,n,r)}function c(t){var i=t+"axis",a={_fullLayout:{}};return a._fullLayout[i]=n[i],r.coercePosition(e,a,l,t,t,.5)}l("visible")&&(o(t,e,a.fullLayout,l),c("x"),c("y"),c("z"),i.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",l("ax",-10),l("ay",-30),i.noneOrAll(t,e,["ax","ay"])))}e.exports=function(t,e,n){a(t,e,{name:"annotations",handleItemDefaults:l,fullLayout:n.fullLayout})}},{"../../lib":159,"../../plots/array_container_defaults":199,"../../plots/cartesian/axes":203,"../annotations/common_defaults":31,"./attributes":37}],40:[function(t,e,n){"use strict";var i=t("../annotations/draw").drawRaw,r=t("../../plots/gl3d/project"),a=["x","y","z"];e.exports=function(t){for(var e=t.fullSceneLayout,n=t.dataScale,o=e.annotations,s=0;s<o.length;s++){for(var l=o[s],c=!1,u=0;u<3;u++){var h=a[u],d=e[h+"axis"].r2fraction(l[h]);if(d<0||d>1){c=!0;break}}c?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove():(l._pdata=r(t.glplot.cameraParams,[e.xaxis.r2l(l.x)*n[0],e.yaxis.r2l(l.y)*n[1],e.zaxis.r2l(l.z)*n[2]]),i(t.graphDiv,l,s,t.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":232,"../annotations/draw":34}],41:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("../../lib");e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:function(t,e){var n=i.subplotsRegistry.gl3d;if(n)for(var a=n.attrRegex,o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];a.test(l)&&(t[l].annotations||[]).length&&(r.pushUnique(e._basePlotModules,n),r.pushUnique(e._subplots.gl3d,l))}},convert:t("./convert"),draw:t("./draw")}},{"../../lib":159,"../../registry":242,"./attributes":37,"./convert":38,"./defaults":39,"./draw":40}],42:[function(t,e,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],43:[function(t,e,n){"use strict";var i=t("tinycolor2"),r=t("fast-isnumeric"),a=e.exports={},o=t("./attributes");a.defaults=o.defaults;var s=a.defaultLine=o.defaultLine;a.lightLine=o.lightLine;var l=a.background=o.background;function c(t){if(r(t)||"string"!=typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var n=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return t;var i=n[1].trim().split(/\s*[\s,]\s*/),a="a"===e.charAt(3)&&4===i.length;if(!a&&3!==i.length)return t;for(var o=0;o<i.length;o++){if(!i[o].length)return t;if(i[o]=Number(i[o]),!(i[o]>=0))return t;if(3===o)i[o]>1&&(i[o]=1);else if(i[o]>=1)return t}var s=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return a?"rgba("+s+", "+i[3]+")":"rgb("+s+")"}a.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},a.rgb=function(t){return a.tinyRGB(i(t))},a.opacity=function(t){return t?i(t).getAlpha():0},a.addOpacity=function(t,e){var n=i(t).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+e+")"},a.combine=function(t,e){var n=i(t).toRgb();if(1===n.a)return i(t).toRgbString();var r=i(e||l).toRgb(),a=1===r.a?r:{r:255*(1-r.a)+r.r*r.a,g:255*(1-r.a)+r.g*r.a,b:255*(1-r.a)+r.b*r.a};return i({r:a.r*(1-n.a)+n.r*n.a,g:a.g*(1-n.a)+n.g*n.a,b:a.b*(1-n.a)+n.b*n.a}).toRgbString()},a.contrast=function(t,e,n){var r=i(t);return 1!==r.getAlpha()&&(r=i(a.combine(t,l))),(r.isDark()?e?r.lighten(e):l:n?r.darken(n):s).toString()},a.stroke=function(t,e){var n=i(e);t.style({stroke:a.tinyRGB(n),"stroke-opacity":n.getAlpha()})},a.fill=function(t,e){var n=i(e);t.style({fill:a.tinyRGB(n),"fill-opacity":n.getAlpha()})},a.clean=function(t){if(t&&"object"==typeof t){var e,n,i,r,o=Object.keys(t);for(e=0;e<o.length;e++)if(r=t[i=o[e]],"color"===i.substr(i.length-5))if(Array.isArray(r))for(n=0;n<r.length;n++)r[n]=c(r[n]);else t[i]=c(r);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(r))for(n=0;n<r.length;n++)Array.isArray(r[n])&&(r[n][1]=c(r[n][1]));else if(Array.isArray(r)){var s=r[0];if(!Array.isArray(s)&&s&&"object"==typeof s)for(n=0;n<r.length;n++)a.clean(r[n])}else r&&"object"==typeof r&&a.clean(r)}}},{"./attributes":42,"fast-isnumeric":10,tinycolor2:26}],44:[function(t,e,n){"use strict";var i=t("../../plots/cartesian/layout_attributes"),r=t("../../plots/font_attributes"),a=t("../../lib/extend").extendFlat,o=t("../../plot_api/edit_types").overrideAll;e.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:i.linecolor,outlinewidth:i.linewidth,bordercolor:i.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:a({},i.ticks,{dflt:""}),ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,tickfont:r({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,showexponent:i.showexponent,title:{text:{valType:"string"},font:r({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:r({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":153,"../../plot_api/edit_types":186,"../../plots/cartesian/layout_attributes":215,"../../plots/font_attributes":229}],45:[function(t,e,n){"use strict";var i=t("./draw"),r=t("../colorscale/helpers").flipScale;e.exports=function(t,e,n){if("function"==typeof n)return n(t,e);var a=e[0].trace,o="cb"+a.uid;n=Array.isArray(n)?n:[n];for(var s=0;s<n.length;s++){var l=n[s].container,c=l?a[l]:a;if(t._fullLayout._infolayer.selectAll("."+o).remove(),c&&c.showscale){var u=e[0].t.cb=i(t,o),h=c.reversescale?r(c.colorscale):c.colorscale;return void u.fillgradient(h).zrange([c[n[s].min],c[n[s].max]]).options(c.colorbar)()}}}},{"../colorscale/helpers":54,"./draw":48}],46:[function(t,e,n){"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],47:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plot_api/plot_template"),a=t("../../plots/cartesian/tick_value_defaults"),o=t("../../plots/cartesian/tick_mark_defaults"),s=t("../../plots/cartesian/tick_label_defaults"),l=t("./attributes");e.exports=function(t,e,n){var c=r.newContainer(e,"colorbar"),u=t.colorbar||{};function h(t,e){return i.coerce(u,c,l,t,e)}var d=h("thicknessmode");h("thickness","fraction"===d?30/(n.width-n.margin.l-n.margin.r):30);var f=h("lenmode");h("len","fraction"===f?1:n.height-n.margin.t-n.margin.b),h("x"),h("xanchor"),h("xpad"),h("y"),h("yanchor"),h("ypad"),i.noneOrAll(u,c,["x","y"]),h("outlinecolor"),h("outlinewidth"),h("bordercolor"),h("borderwidth"),h("bgcolor"),a(u,c,h,"linear");var p={outerTicks:!1,font:n.font};s(u,c,h,"linear",p),o(u,c,h,"linear",p),h("title.text",n._dfltTitle.colorbar),i.coerceFont(h,"title.font",n.font),h("title.side")}},{"../../lib":159,"../../plot_api/plot_template":193,"../../plots/cartesian/tick_label_defaults":222,"../../plots/cartesian/tick_mark_defaults":223,"../../plots/cartesian/tick_value_defaults":224,"./attributes":44}],48:[function(t,e,n){"use strict";var i=t("d3"),r=t("tinycolor2"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../plots/cartesian/axes"),l=t("../dragelement"),c=t("../../lib"),u=t("../../lib/extend").extendFlat,h=t("../../lib/setcursor"),d=t("../drawing"),f=t("../color"),p=t("../titles"),v=t("../../lib/svg_text_utils"),g=t("../../constants/alignment"),m=g.LINE_SPACING,y=g.FROM_TL,_=g.FROM_BR,x=t("../../plots/cartesian/axis_defaults"),b=t("../../plots/cartesian/position_defaults"),w=t("../../plots/cartesian/layout_attributes"),k=t("./attributes"),T=t("./constants").cn;e.exports=function(t,e){var n={};for(var g in k)n[g]=null;function M(){var g=t._fullLayout,k=g._size;if("function"==typeof n.fillcolor||"function"==typeof n.line.color||n.fillgradient){var L,S,E=n.zrange||i.extent(("function"==typeof n.fillcolor?n.fillcolor:n.line.color).domain()),O=[],P=[],D="function"==typeof n.line.color?n.line.color:function(){return n.line.color},z="function"==typeof n.fillcolor?n.fillcolor:function(){return n.fillcolor},I=n.levels.end+n.levels.size/100,R=n.levels.size,B=1.001*E[0]-.001*E[1],N=1.001*E[1]-.001*E[0];for(S=0;S<1e5&&(L=n.levels.start+S*R,!(R>0?L>=I:L<=I));S++)L>B&&L<N&&O.push(L);if(n.fillgradient)P=[0];else if("function"==typeof n.fillcolor)if(n.filllevels)for(I=n.filllevels.end+n.filllevels.size/100,R=n.filllevels.size,S=0;S<1e5&&(L=n.filllevels.start+S*R,!(R>0?L>=I:L<=I));S++)L>E[0]&&L<E[1]&&P.push(L);else(P=O.map(function(t){return t-n.levels.size/2})).push(P[P.length-1]+n.levels.size);else n.fillcolor&&"string"==typeof n.fillcolor&&(P=[0]);n.levels.size<0&&(O.reverse(),P.reverse());var F,j=k.h,H=Math.round(n.thickness*("fraction"===n.thicknessmode?k.w:1)),$=H/k.w,q=Math.round(n.len*("fraction"===n.lenmode?j:1)),Z=q/k.h,V=n.xpad/k.w,W=(n.borderwidth+n.outlinewidth)/2,U=n.ypad/k.h,G=Math.round(n.x*k.w+n.xpad),X=n.x-$*({middle:.5,right:1}[n.xanchor]||0),Y=n.y+Z*(({top:-.5,bottom:.5}[n.yanchor]||0)-.5),Q=Math.round(k.h*(1-Y)),K=Q-q,J={type:"linear",range:E,tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,exponentformat:n.exponentformat,separatethousands:n.separatethousands,showexponent:n.showexponent,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,title:n.title,showline:!0,anchor:"free",side:"right",position:1},tt={type:"linear",_id:"y"+e},et={letter:"y",font:g.font,noHover:!0,noTickson:!0,calendar:g.calendar};if(x(J,tt,vt,et,g),b(J,tt,vt,et),tt.position=n.x+V+$,M.axis=tt,-1!==["top","bottom"].indexOf(n.title.side)&&(tt.title.side=n.title.side,tt.titlex=n.x+V,tt.titley=Y+("top"===n.title.side?Z-U:U)),n.line.color&&"auto"===n.tickmode){tt.tickmode="linear",tt.tick0=n.levels.start;var nt=n.levels.size,it=c.constrain((Q-K)/50,4,15)+1,rt=(E[1]-E[0])/((n.nticks||it)*nt);if(rt>1){var at=Math.pow(10,Math.floor(Math.log(rt)/Math.LN10));nt*=at*c.roundUp(rt/at,[2,5,10]),(Math.abs(n.levels.start)/n.levels.size+1e-6)%1<2e-6&&(tt.tick0=0)}tt.dtick=nt}tt.domain=[Y+U,Y+Z-U],tt.setScale();var ot=c.ensureSingle(g._infolayer,"g",e,function(t){t.classed(T.colorbar,!0).each(function(){var t=i.select(this);t.append("rect").classed(T.cbbg,!0),t.append("g").classed(T.cbfills,!0),t.append("g").classed(T.cblines,!0),t.append("g").classed(T.cbaxis,!0).classed(T.crisp,!0),t.append("g").classed(T.cbtitleunshift,!0).append("g").classed(T.cbtitle,!0),t.append("rect").classed(T.cboutline,!0),t.select(".cbtitle").datum(0)})});ot.attr("transform","translate("+Math.round(k.l)+","+Math.round(k.t)+")");var st=ot.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(k.l)+",-"+Math.round(k.t)+")"),lt=ot.select(".cbaxis"),ct=0;if(-1!==["top","bottom"].indexOf(n.title.side)){var ut=tt.title.font.size;gt(tt._id+"title",{attributes:{x:k.l+(n.x+V)*k.w,y:"top"===n.title.side?(1-(Y+Z-U))*k.h+k.t+3+.75*ut:(1-(Y+U))*k.h+k.t-3-.25*ut,"text-anchor":"start"}})}var ht,dt,ft,pt=c.syncOrAsync([a.previousPromises,function(){if(-1!==["top","bottom"].indexOf(n.title.side)){var a=ot.select(".cbtitle"),o=a.select("text"),l=[-n.outlinewidth/2,n.outlinewidth/2],u=a.select(".h"+tt._id+"title-math-group").node(),h=15.6;if(o.node()&&(h=parseInt(o.node().style.fontSize,10)*m),u?(ct=d.bBox(u).height)>h&&(l[1]-=(ct-h)/2):o.node()&&!o.classed(T.jsPlaceholder)&&(ct=d.bBox(o.node()).height),ct){if(ct+=5,"top"===n.title.side)tt.domain[1]-=ct/k.h,l[1]*=-1;else{tt.domain[0]+=ct/k.h;var f=v.lineCount(o);l[1]+=(1-f)*h}a.attr("transform","translate("+l+")"),tt.setScale()}}ot.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(k.h*(1-tt.domain[1]))+")"),lt.attr("transform","translate(0,"+Math.round(-k.t)+")");var p=ot.select(".cbfills").selectAll("rect.cbfill").data(P);p.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),p.exit().remove();var y=E.map(tt.c2p).map(Math.round).sort(function(t,e){return t-e});p.each(function(a,o){var s=[0===o?E[0]:(P[o]+P[o-1])/2,o===P.length-1?E[1]:(P[o]+P[o+1])/2].map(tt.c2p).map(Math.round);s[1]=c.constrain(s[1]+(s[1]>s[0])?1:-1,y[0],y[1]);var l=i.select(this).attr({x:G,width:Math.max(H,2),y:i.min(s),height:Math.max(i.max(s)-i.min(s),2)});if(n.fillgradient)d.gradient(l,t,e,"vertical",n.fillgradient,"fill");else{var u=z(a).replace("e-","");l.attr("fill",r(u).toHexString())}});var _=ot.select(".cblines").selectAll("path.cbline").data(n.line.color&&n.line.width?O:[]);return _.enter().append("path").classed(T.cbline,!0),_.exit().remove(),_.each(function(t){i.select(this).attr("d","M"+G+","+(Math.round(tt.c2p(t))+n.line.width/2%1)+"h"+H).call(d.lineGroupStyle,n.line.width,D(t),n.line.dash)}),lt.selectAll("g."+tt._id+"tick,path").remove(),c.syncOrAsync([function(){var e=G+H+(n.outlinewidth||0)/2-("outside"===n.ticks?1:0),i=s.calcTicks(tt),r=s.makeTransFn(tt),a=s.getTickSigns(tt)[2];return s.drawTicks(t,tt,{vals:"inside"===tt.ticks?s.clipEnds(tt,i):i,layer:lt,path:s.makeTickPath(tt,e,a),transFn:r}),s.drawLabels(t,tt,{vals:i,layer:lt,transFn:r,labelFns:s.makeLabelFns(tt,e)})},function(){if(-1===["top","bottom"].indexOf(n.title.side)){var e=tt.title.font.size,r=tt._offset+tt._length/2,a=k.l+(tt.position||0)*k.w+("right"===tt.side?10+e*(tt.showticklabels?1:.5):-10-e*(tt.showticklabels?.5:0));gt("h"+tt._id+"title",{avoid:{selection:i.select(t).selectAll("g."+tt._id+"tick"),side:n.title.side,offsetLeft:k.l,offsetTop:0,maxShift:g.width},attributes:{x:a,y:r,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},a.previousPromises,function(){var i=H+n.outlinewidth/2+d.bBox(lt.node()).width;if((F=st.select("text")).node()&&!F.classed(T.jsPlaceholder)){var r,o=st.select(".h"+tt._id+"title-math-group").node();r=o&&-1!==["top","bottom"].indexOf(n.title.side)?d.bBox(o).width:d.bBox(st.node()).right-G-k.l,i=Math.max(i,r)}var s=2*n.xpad+i+n.borderwidth+n.outlinewidth/2,l=Q-K;ot.select(".cbbg").attr({x:G-n.xpad-(n.borderwidth+n.outlinewidth)/2,y:K-W,width:Math.max(s,2),height:Math.max(l+2*W,2)}).call(f.fill,n.bgcolor).call(f.stroke,n.bordercolor).style({"stroke-width":n.borderwidth}),ot.selectAll(".cboutline").attr({x:G,y:K+n.ypad+("top"===n.title.side?ct:0),width:Math.max(H,2),height:Math.max(l-2*n.ypad-ct,2)}).call(f.stroke,n.outlinecolor).style({fill:"None","stroke-width":n.outlinewidth}),ot.attr("transform","translate("+(k.l-({center:.5,right:1}[n.xanchor]||0)*s)+","+k.t+")");var c={},u=y[n.yanchor],h=_[n.yanchor];"pixels"===n.lenmode?(c.y=n.y,c.t=l*u,c.b=l*h):(c.t=c.b=0,c.yt=n.y+n.len*u,c.yb=n.y-n.len*h);var p=y[n.xanchor],v=_[n.xanchor];if("pixels"===n.thicknessmode)c.x=n.x,c.l=s*p,c.r=s*v;else{var g=s-H;c.l=g*p,c.r=g*v,c.xl=n.x-n.thickness*p,c.xr=n.x+n.thickness*v}a.autoMargin(t,e,c)}],t);return pt&&pt.then&&(t._promises||[]).push(pt),t._context.edits.colorbarPosition&&l.init({element:ot.node(),gd:t,prepFn:function(){ht=ot.attr("transform"),h(ot)},moveFn:function(t,e){ot.attr("transform",ht+" translate("+t+","+e+")"),dt=l.align(X+t/k.w,$,0,1,n.xanchor),ft=l.align(Y-e/k.h,Z,0,1,n.yanchor);var i=l.getCursor(dt,ft,n.xanchor,n.yanchor);h(ot,i)},doneFn:function(){if(h(ot),void 0!==dt&&void 0!==ft){var e={};e[C("x")]=dt,e[C("y")]=ft,o.call("_guiRestyle",t,e,A().index)}}}),pt}function vt(t,e){return c.coerce(J,tt,w,t,e)}function gt(e,n){var i={propContainer:tt,propName:C("title"),traceIndex:A().index,placeholder:g._dfltTitle.colorbar,containerGroup:ot.select(".cbtitle")},r="h"===e.charAt(0)?e.substr(1):"h"+e;ot.selectAll("."+r+",."+r+"-math-group").remove(),p.draw(t,e,u(i,n||{}))}g._infolayer.selectAll("g."+e).remove()}function A(){for(var n=e.substr(2),i=0;i<t._fullData.length;i++){var r=t._fullData[i];if(r.uid===n)return r}}function C(t){var e="colorbar.",n=A()._module.colorbar.container;return n&&(e=n+"."+e),e+t}return n.fillcolor=null,n.line={color:null,width:null,dash:null},n.levels={start:null,end:null,size:null},n.filllevels=null,n.fillgradient=null,n.zrange=null,Object.keys(n).forEach(function(t){M[t]=function(e){return arguments.length?(n[t]=c.isPlainObject(n[t])?c.extendFlat(n[t],e):e,M):n[t]}}),M.options=function(t){for(var e in t)"function"==typeof M[e]&&M[e](t[e]);return M},M._opts=n,M}},{"../../constants/alignment":138,"../../lib":159,"../../lib/extend":153,"../../lib/setcursor":178,"../../lib/svg_text_utils":180,"../../plots/cartesian/axes":203,"../../plots/cartesian/axis_defaults":205,"../../plots/cartesian/layout_attributes":215,"../../plots/cartesian/position_defaults":218,"../../plots/plots":235,"../../registry":242,"../color":43,"../dragelement":61,"../drawing":64,"../titles":131,"./attributes":44,"./constants":46,d3:8,tinycolor2:26}],49:[function(t,e,n){"use strict";var i=t("../../lib");e.exports=function(t){return i.isPlainObject(t.colorbar)}},{"../../lib":159}],50:[function(t,e,n){"use strict";var i=t("./scales.js").scales;function r(t){return"`"+t+"`"}Object.keys(i),e.exports=function(t,e){t=t||"";var n,a=(e=e||{}).cLetter||"c",o=("onlyIfNumerical"in e||Boolean(t),"noScale"in e?e.noScale:"marker.line"===t),s="showScaleDflt"in e?e.showScaleDflt:"z"===a,l="string"==typeof e.colorscaleDflt?i[e.colorscaleDflt]:null,c=e.editTypeOverride||"",u=t?t+".":"";"colorAttr"in e?n=e.colorAttr:r(u+(n={z:"z",c:"color"}[a]));var h=a+"auto",d=a+"min",f=a+"max",p=a+"mid",v=(r(u+h),r(u+d),r(u+f),{});v[d]=v[f]=void 0;var g={};g[h]=!1;var m={};return"color"===n&&(m.color={valType:"color",arrayOk:!0,editType:c||"style"},e.anim&&(m.color.anim=!0)),m[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:v},m[d]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:g},m[f]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:g},m[p]={valType:"number",dflt:null,editType:"calc",impliedEdits:v},m.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}},m.autocolorscale={valType:"boolean",dflt:!1!==e.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},m.reversescale={valType:"boolean",dflt:!1,editType:"plot"},o||(m.showscale={valType:"boolean",dflt:s,editType:"calc"}),m}},{"./scales.js":58}],51:[function(t,e,n){"use strict";var i=t("../../lib");e.exports=function(t,e,n){var r=t._fullLayout,a=n.vals,o=n.containerStr,s=n.cLetter,l=o?i.nestedProperty(e,o).get():e,c=s+"min",u=s+"max",h=l[s+"auto"],d=l[c],f=l[u],p=l[s+"mid"];!1===h&&void 0!==d||(d=i.aggNums(Math.min,null,a)),!1===h&&void 0!==f||(f=i.aggNums(Math.max,null,a)),!1!==h&&void 0!==p&&(f-p>p-d?d=p-(f-p):f-p<p-d&&(f=p+(p-d))),d===f&&(d-=.5,f+=.5),l["_"+c]=l[c]=d,l["_"+u]=l[u]=f,l.autocolorscale&&(l._colorscale=l.colorscale=d*f<0?r.colorscale.diverging:d>=0?r.colorscale.sequential:r.colorscale.sequentialminus)}},{"../../lib":159}],52:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./helpers").hasColorscale;e.exports=function(t){function e(t,e){var n=t["_"+e];void 0!==n&&(t[e]=n)}function n(t,n){var r=n.container?i.nestedProperty(t,n.container).get():t;if(r){var a=r.zauto||r.cauto,o=n.min,s=n.max;(a||void 0===r[o])&&e(r,o),(a||void 0===r[s])&&e(r,s),r.autocolorscale&&e(r,"colorscale")}}for(var a=0;a<t.length;a++){var o=t[a],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)n(o,s[l]);else n(o,s);r(o,"marker.line")&&n(o,{container:"marker.line",min:"cmin",max:"cmax"}),r(o,"line")&&n(o,{container:"line",min:"cmin",max:"cmax"})}}},{"../../lib":159,"./helpers":54}],53:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib"),a=t("../colorbar/has_colorbar"),o=t("../colorbar/defaults"),s=t("./scales").isValid;function l(t,e){var n=e.slice(0,e.length-1);return e?r.nestedProperty(t,n).get()||{}:t}e.exports=function(t,e,n,r,c){var u=c.prefix,h=c.cLetter,d=l(t,u),f=l(e,u),p=l(e._template||{},u)||{},v=d[h+"min"],g=d[h+"max"];r(u+h+"auto",!(i(v)&&i(g)&&v<g))?r(u+h+"mid"):(r(u+h+"min"),r(u+h+"max"));var m,y,_=d.colorscale,x=p.colorscale;void 0!==_&&(m=!s(_)),void 0!==x&&(m=!s(x)),r(u+"autocolorscale",m),r(u+"colorscale"),r(u+"reversescale"),c.noScale||"marker.line."===u||(u&&(y=a(d)),r(u+"showscale",y)&&o(d,f,n))}},{"../../lib":159,"../colorbar/defaults":47,"../colorbar/has_colorbar":49,"./scales":58,"fast-isnumeric":10}],54:[function(t,e,n){"use strict";var i=t("d3"),r=t("tinycolor2"),a=t("fast-isnumeric"),o=t("../../lib"),s=t("../color"),l=t("./scales").isValid;function c(t){for(var e=t.length,n=new Array(e),i=e-1,r=0;i>=0;i--,r++){var a=t[i];n[r]=[1-a[0],a[1]]}return n}function u(t){return r({r:t[0],g:t[1],b:t[2],a:t[3]}).toRgbString()}e.exports={hasColorscale:function(t,e){var n=e?o.nestedProperty(t,e).get()||{}:t,i=n.color,r=!1;if(o.isArrayOrTypedArray(i))for(var s=0;s<i.length;s++)if(a(i[s])){r=!0;break}return o.isPlainObject(n)&&(r||!0===n.showscale||a(n.cmin)&&a(n.cmax)||l(n.colorscale)||o.isPlainObject(n.colorbar))},extractScale:function(t,e){for(var n=e.cLetter,i=t.reversescale?c(t.colorscale):t.colorscale,r=t[n+"min"],a=t[n+"max"],o=i.length,s=new Array(o),l=new Array(o),u=0;u<o;u++){var h=i[u];s[u]=r+h[0]*(a-r),l[u]=h[1]}return{domain:s,range:l}},flipScale:c,makeColorScaleFunc:function(t,e){e=e||{};for(var n=t.domain,o=t.range,l=o.length,c=new Array(l),h=0;h<l;h++){var d=r(o[h]).toRgb();c[h]=[d.r,d.g,d.b,d.a]}var f,p=i.scale.linear().domain(n).range(c).clamp(!0),v=e.noNumericCheck,g=e.returnArray;return(f=v&&g?p:v?function(t){return u(p(t))}:g?function(t){return a(t)?p(t):r(t).isValid()?t:s.defaultLine}:function(t){return a(t)?u(p(t)):r(t).isValid()?t:s.defaultLine}).domain=p.domain,f.range=function(){return o},f}}},{"../../lib":159,"../color":43,"./scales":58,d3:8,"fast-isnumeric":10,tinycolor2:26}],55:[function(t,e,n){"use strict";var i=t("./scales"),r=t("./helpers");e.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:i.scales,defaultScale:i.defaultScale,getScale:i.get,isValidScale:i.isValid,hasColorscale:r.hasColorscale,flipScale:r.flipScale,extractScale:r.extractScale,makeColorScaleFunc:r.makeColorScaleFunc}},{"./attributes":50,"./calc":51,"./cross_trace_defaults":52,"./defaults":53,"./helpers":54,"./layout_attributes":56,"./layout_defaults":57,"./scales":58}],56:[function(t,e,n){"use strict";var i=t("./scales").scales;e.exports={editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}}},{"./scales":58}],57:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./layout_attributes"),a=t("../../plot_api/plot_template");e.exports=function(t,e){var n=t.colorscale,o=a.newContainer(e,"colorscale");function s(t,e){return i.coerce(n,o,r,t,e)}s("sequential"),s("sequentialminus"),s("diverging")}},{"../../lib":159,"../../plot_api/plot_template":193,"./layout_attributes":56}],58:[function(t,e,n){"use strict";var i=t("tinycolor2"),r={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=r.RdBu;function o(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var n=0;n<t.length;n++){var r=t[n];if(2!==r.length||+r[0]<e||!i(r[1]).isValid())return!1;e=+r[0]}return!0}e.exports={scales:r,defaultScale:a,get:function(t,e){if(e||(e=a),!t)return e;function n(){try{t=r[t]||JSON.parse(t)}catch(n){t=e}}return"string"==typeof t&&(n(),"string"==typeof t&&n()),o(t)?t:e},isValid:function(t){return void 0!==r[t]||o(t)}}},{tinycolor2:26}],59:[function(t,e,n){"use strict";e.exports=function(t,e,n,i,r){var a=(t-n)/(i-n),o=a+e/(i-n),s=(a+o)/2;return"left"===r||"bottom"===r?a:"center"===r||"middle"===r?s:"right"===r||"top"===r?o:a<2/3-s?a:o>4/3-s?o:s}},{}],60:[function(t,e,n){"use strict";var i=t("../../lib"),r=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(t,e,n,a){return t="left"===n?0:"center"===n?1:"right"===n?2:i.constrain(Math.floor(3*t),0,2),e="bottom"===a?0:"middle"===a?1:"top"===a?2:i.constrain(Math.floor(3*e),0,2),r[e][t]}},{"../../lib":159}],61:[function(t,e,n){"use strict";var i=t("mouse-event-offset"),r=t("has-hover"),a=t("has-passive-events"),o=t("../../registry"),s=t("../../lib"),l=t("../../plots/cartesian/constants"),c=t("../../constants/interactions"),u=e.exports={};u.align=t("./align"),u.getCursor=t("./cursor");var h=t("./unhover");function d(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function f(t){return i(t.changedTouches?t.changedTouches[0]:t,document.body)}u.unhover=h.wrapped,u.unhoverRaw=h.raw,u.init=function(t){var e,n,i,h,p,v,g,m,y=t.gd,_=1,x=c.DBLCLICKDELAY,b=t.element;y._mouseDownTime||(y._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=k,a?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=k,b.addEventListener("touchstart",k,{passive:!1})):b.ontouchstart=k;var w=t.clampFn||function(t,e,n){return Math.abs(t)<n&&(t=0),Math.abs(e)<n&&(e=0),[t,e]};function k(a){y._dragged=!1,y._dragging=!0;var o=f(a);e=o[0],n=o[1],g=a.target,v=a,m=2===a.buttons||a.ctrlKey,void 0===a.clientX&&void 0===a.clientY&&(a.clientX=e,a.clientY=n),(i=(new Date).getTime())-y._mouseDownTime<x?_+=1:(_=1,y._mouseDownTime=i),t.prepFn&&t.prepFn(a,e,n),r&&!m?(p=d()).style.cursor=window.getComputedStyle(b).cursor:r||(p=document,h=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",M),document.addEventListener("touchend",M),!1!==t.dragmode&&(a.preventDefault(),document.addEventListener("mousemove",T),document.addEventListener("touchmove",T))}function T(i){i.preventDefault();var r=f(i),a=w(r[0]-e,r[1]-n,t.minDrag||l.MINDRAG),o=a[0],s=a[1];(o||s)&&(y._dragged=!0,u.unhover(y)),y._dragged&&t.moveFn&&!m&&t.moveFn(o,s)}function M(e){if(!1!==t.dragmode&&(e.preventDefault(),document.removeEventListener("mousemove",T),document.removeEventListener("touchmove",T)),document.removeEventListener("mouseup",M),document.removeEventListener("touchend",M),r?s.removeElement(p):h&&(p.documentElement.style.cursor=h,h=null),y._dragging){if(y._dragging=!1,(new Date).getTime()-y._mouseDownTime>x&&(_=Math.max(_-1,1)),y._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(_,v),!m){var n;try{n=new MouseEvent("click",e)}catch(t){var i=f(e);(n=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,i[0],i[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}g.dispatchEvent(n)}!function(t){t._dragging=!1,t._replotPending&&o.call("plot",t)}(y),y._dragged=!1}else y._dragged=!1}},u.coverSlip=d},{"../../constants/interactions":139,"../../lib":159,"../../plots/cartesian/constants":209,"../../registry":242,"./align":59,"./cursor":60,"./unhover":62,"has-hover":12,"has-passive-events":13,"mouse-event-offset":16}],62:[function(t,e,n){"use strict";var i=t("../../lib/events"),r=t("../../lib/throttle"),a=t("../../lib/get_graph_div"),o=t("../fx/constants"),s=e.exports={};s.wrapped=function(t,e,n){(t=a(t))._fullLayout&&r.clear(t._fullLayout._uid+o.HOVERID),s.raw(t,e,n)},s.raw=function(t,e){var n=t._fullLayout,r=t._hoverdata;e||(e={}),e.target&&!1===i.triggerHandler(t,"plotly_beforehover",e)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&r&&t.emit("plotly_unhover",{event:e,points:r}))}},{"../../lib/events":152,"../../lib/get_graph_div":157,"../../lib/throttle":181,"../fx/constants":76}],63:[function(t,e,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],64:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("tinycolor2"),o=t("../../registry"),s=t("../color"),l=t("../colorscale"),c=t("../../lib"),u=t("../../lib/svg_text_utils"),h=t("../../constants/xmlns_namespaces"),d=t("../../constants/alignment").LINE_SPACING,f=t("../../constants/interactions").DESELECTDIM,p=t("../../traces/scatter/subtypes"),v=t("../../traces/scatter/make_bubble_size_func"),g=e.exports={};g.font=function(t,e,n,i){c.isPlainObject(e)&&(i=e.color,n=e.size,e=e.family),e&&t.style("font-family",e),n+1&&t.style("font-size",n+"px"),i&&t.call(s.fill,i)},g.setPosition=function(t,e,n){t.attr("x",e).attr("y",n)},g.setSize=function(t,e,n){t.attr("width",e).attr("height",n)},g.setRect=function(t,e,n,i,r){t.call(g.setPosition,e,n).call(g.setSize,i,r)},g.translatePoint=function(t,e,n,i){var a=n.c2p(t.x),o=i.c2p(t.y);return!!(r(a)&&r(o)&&e.node())&&("text"===e.node().nodeName?e.attr("x",a).attr("y",o):e.attr("transform","translate("+a+","+o+")"),!0)},g.translatePoints=function(t,e,n){t.each(function(t){var r=i.select(this);g.translatePoint(t,r,e,n)})},g.hideOutsideRangePoint=function(t,e,n,i,r,a){e.attr("display",n.isPtWithinRange(t,r)&&i.isPtWithinRange(t,a)?null:"none")},g.hideOutsideRangePoints=function(t,e){if(e._hasClipOnAxisFalse){var n=e.xaxis,r=e.yaxis;t.each(function(e){var a=e[0].trace,o=a.xcalendar,s=a.ycalendar;t.selectAll("bar"===a.type?".bartext":".point,.textpoint").each(function(t){g.hideOutsideRangePoint(t,i.select(this),n,r,o,s)})})}},g.crispRound=function(t,e,n){return e&&r(e)?t._context.staticPlot?e:e<1?1:Math.round(e):n||0},g.singleLineStyle=function(t,e,n,i,r){e.style("fill","none");var a=(((t||[])[0]||{}).trace||{}).line||{},o=n||a.width||0,l=r||a.dash||"";s.stroke(e,i||a.color),g.dashLine(e,l,o)},g.lineGroupStyle=function(t,e,n,r){t.style("fill","none").each(function(t){var a=(((t||[])[0]||{}).trace||{}).line||{},o=e||a.width||0,l=r||a.dash||"";i.select(this).call(s.stroke,n||a.color).call(g.dashLine,l,o)})},g.dashLine=function(t,e,n){e=g.dashStyle(e,n=+n||0),t.style({"stroke-dasharray":e,"stroke-width":n+"px"})},g.dashStyle=function(t,e){e=+e||1;var n=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=n+"px,"+n+"px":"dash"===t?t=3*n+"px,"+3*n+"px":"longdash"===t?t=5*n+"px,"+5*n+"px":"dashdot"===t?t=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===t&&(t=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),t},g.singleFillStyle=function(t){var e=(((i.select(t.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;e&&t.call(s.fill,e)},g.fillGroupStyle=function(t){t.style("stroke-width",0).each(function(t){var e=i.select(this);t[0].trace&&e.call(s.fill,t[0].trace.fillcolor)})};var m=t("./symbol_defs");g.symbolNames=[],g.symbolFuncs=[],g.symbolNeedLines={},g.symbolNoDot={},g.symbolNoFill={},g.symbolList=[],Object.keys(m).forEach(function(t){var e=m[t];g.symbolList=g.symbolList.concat([e.n,t,e.n+100,t+"-open"]),g.symbolNames[e.n]=t,g.symbolFuncs[e.n]=e.f,e.needLine&&(g.symbolNeedLines[e.n]=!0),e.noDot?g.symbolNoDot[e.n]=!0:g.symbolList=g.symbolList.concat([e.n+200,t+"-dot",e.n+300,t+"-open-dot"]),e.noFill&&(g.symbolNoFill[e.n]=!0)});var y=g.symbolNames.length,_="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function x(t,e){return g.symbolFuncs[t%100](e)+(t>=200?_:"")}g.symbolNumber=function(t){if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=g.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=y||t>=400?0:Math.floor(Math.max(t,0))};var b={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},k=i.format("~.1f"),T={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};g.gradient=function(t,e,n,r,o,l){for(var u=o.length,h=T[r],d=new Array(u),f=0;f<u;f++)h.reversed?d[u-1-f]=[k(100*(1-o[f][0])),o[f][1]]:d[f]=[k(100*o[f][0]),o[f][1]];var p="g"+e._fullLayout._uid+"-"+n,v=e._fullLayout._defs.select(".gradients").selectAll("#"+p).data([r+d.join(";")],c.identity);v.exit().remove(),v.enter().append(h.node).each(function(){var t=i.select(this);h.attrs&&t.attr(h.attrs),t.attr("id",p);var e=t.selectAll("stop").data(d);e.exit().remove(),e.enter().append("stop"),e.each(function(t){var e=a(t[1]);i.select(this).attr({offset:t[0]+"%","stop-color":s.tinyRGB(e),"stop-opacity":e.getAlpha()})})}),t.style(l,"url(#"+p+")").style(l+"-opacity",null)},g.initGradients=function(t){c.ensureSingle(t._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove()},g.pointStyle=function(t,e,n){if(t.size()){var r=g.makePointStyleFns(e);t.each(function(t){g.singlePointStyle(t,i.select(this),e,r,n)})}},g.singlePointStyle=function(t,e,n,i,r){var a=n.marker,o=a.line;if(e.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(t):void 0===t.mo?a.opacity:t.mo),i.ms2mrc){var l;l="various"===t.ms||"various"===a.size?3:i.ms2mrc(t.ms),t.mrc=l,i.selectedSizeFn&&(l=t.mrc=i.selectedSizeFn(t));var u=g.symbolNumber(t.mx||a.symbol)||0;t.om=u%200>=100,e.attr("d",x(u,l))}var h,d,f,p=!1;if(t.so?(f=o.outlierwidth,d=o.outliercolor,h=a.outliercolor):(f=(t.mlw+1||(o||{}).width+1||(t.trace?(t.trace.marker.line||{}).width:0)+1)-1||0,d="mlc"in t?t.mlcc=i.lineScale(t.mlc):c.isArrayOrTypedArray(o.color)?s.defaultLine:o.color,c.isArrayOrTypedArray(a.color)&&(h=s.defaultLine,p=!0),h="mc"in t?t.mcc=i.markerScale(t.mc):a.color||"rgba(0,0,0,0)",i.selectedColorFn&&(h=i.selectedColorFn(t))),t.om)e.call(s.stroke,h).style({"stroke-width":(f||1)+"px",fill:"none"});else{e.style("stroke-width",f+"px");var v=a.gradient,m=t.mgt;if(m?p=!0:m=v&&v.type,Array.isArray(m)&&(T[m=m[0]]||(m=0)),m&&"none"!==m){var y=t.mgc;y?p=!0:y=v.color;var _=n.uid;p&&(_+="-"+t.i),g.gradient(e,r,_,m,[[0,y],[1,h]],"fill")}else s.fill(e,h);f&&s.stroke(e,d)}},g.makePointStyleFns=function(t){var e={},n=t.marker;return e.markerScale=g.tryColorscale(n,""),e.lineScale=g.tryColorscale(n,"line"),o.traceIs(t,"symbols")&&(e.ms2mrc=p.isBubble(t)?v(t):function(){return(n.size||6)/2}),t.selectedpoints&&c.extendFlat(e,g.makeSelectedPointStyleFns(t)),e},g.makeSelectedPointStyleFns=function(t){var e={},n=t.marker||{},i=(t.selected||{}).marker||{},r=(t.unselected||{}).marker||{},a=i.opacity,s=r.opacity,l=void 0!==a,u=void 0!==s;(c.isArrayOrTypedArray(n.opacity)||l||u)&&(e.selectedOpacityFn=function(t){var e=void 0===t.mo?n.opacity:t.mo;return t.selected?l?a:e:u?s:f*e});var h=n.color,d=i.color,p=r.color;(d||p)&&(e.selectedColorFn=function(t){var e=t.mcc||h;return t.selected?d||e:p||e});var v=n.size,g=i.size,m=r.size,y=void 0!==g,_=void 0!==m;return o.traceIs(t,"symbols")&&(y||_)&&(e.selectedSizeFn=function(t){var e=t.mrc||v/2;return t.selected?y?g/2:e:_?m/2:e}),e},g.makeSelectedTextStyleFns=function(t){var e={},n=(t.textfont||{}).color,i=((t.selected||{}).textfont||{}).color,r=((t.unselected||{}).textfont||{}).color;return e.selectedTextColorFn=function(t){var e=t.tc||n;return t.selected?i||e:r||(i?e:s.addOpacity(e,f))},e},g.selectedPointStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=g.makeSelectedPointStyleFns(e),r=e.marker||{},a=[];n.selectedOpacityFn&&a.push(function(t,e){t.style("opacity",n.selectedOpacityFn(e))}),n.selectedColorFn&&a.push(function(t,e){s.fill(t,n.selectedColorFn(e))}),n.selectedSizeFn&&a.push(function(t,e){var i=e.mx||r.symbol||0,a=n.selectedSizeFn(e);t.attr("d",x(g.symbolNumber(i),a)),e.mrc2=a}),a.length&&t.each(function(t){for(var e=i.select(this),n=0;n<a.length;n++)a[n](e,t)})}},g.tryColorscale=function(t,e){var n=e?c.nestedProperty(t,e).get():t;return n&&n.colorscale&&c.isArrayOrTypedArray(n.color)?l.makeColorScaleFunc(l.extractScale(n,{cLetter:"c"})):c.identity};var M={start:1,end:-1,middle:0,bottom:1,top:-1};function A(t,e,n,r){var a=i.select(t.node().parentNode),o=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",s=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",l=r?r/.8+1:0,c=(u.lineCount(t)-1)*d+1,h=M[s]*l,f=.75*n+M[o]*l+(M[o]-1)*c*n/2;t.attr("text-anchor",s),a.attr("transform","translate("+h+","+f+")")}function C(t,e){var n=t.ts||e.textfont.size;return r(n)&&n>0?n:0}g.textPointStyle=function(t,e,n){if(t.size()){var r;if(e.selectedpoints){var a=g.makeSelectedTextStyleFns(e);r=a.selectedTextColorFn}t.each(function(t){var a=i.select(this),o=c.extractOption(t,e,"tx","text");if(o||0===o){var s=t.tp||e.textposition,l=C(t,e),h=r?r(t):t.tc||e.textfont.color;a.call(g.font,t.tf||e.textfont.family,l,h).text(o).call(u.convertToTspans,n).call(A,s,l,t.mrc)}else a.remove()})}},g.selectedTextStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=g.makeSelectedTextStyleFns(e);t.each(function(t){var r=i.select(this),a=n.selectedTextColorFn(t),o=t.tp||e.textposition,l=C(t,e);s.fill(r,a),A(r,o,l,t.mrc2||t.mrc)})}};var L=.5;function S(t,e,n,r){var a=t[0]-e[0],o=t[1]-e[1],s=n[0]-e[0],l=n[1]-e[1],c=Math.pow(a*a+o*o,L/2),u=Math.pow(s*s+l*l,L/2),h=(u*u*a-c*c*s)*r,d=(u*u*o-c*c*l)*r,f=3*u*(c+u),p=3*c*(c+u);return[[i.round(e[0]+(f&&h/f),2),i.round(e[1]+(f&&d/f),2)],[i.round(e[0]-(p&&h/p),2),i.round(e[1]-(p&&d/p),2)]]}g.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var n,i="M"+t[0],r=[];for(n=1;n<t.length-1;n++)r.push(S(t[n-1],t[n],t[n+1],e));for(i+="Q"+r[0][0]+" "+t[1],n=2;n<t.length-1;n++)i+="C"+r[n-2][1]+" "+r[n-1][0]+" "+t[n];return i+"Q"+r[t.length-3][1]+" "+t[t.length-1]},g.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var n,i="M"+t[0],r=t.length-1,a=[S(t[r],t[0],t[1],e)];for(n=1;n<r;n++)a.push(S(t[n-1],t[n],t[n+1],e));for(a.push(S(t[r-1],t[r],t[0],e)),n=1;n<=r;n++)i+="C"+a[n-1][1]+" "+a[n][0]+" "+t[n];return i+"C"+a[r][1]+" "+a[0][0]+" "+t[0]+"Z"};var E={hv:function(t,e){return"H"+i.round(e[0],2)+"V"+i.round(e[1],2)},vh:function(t,e){return"V"+i.round(e[1],2)+"H"+i.round(e[0],2)},hvh:function(t,e){return"H"+i.round((t[0]+e[0])/2,2)+"V"+i.round(e[1],2)+"H"+i.round(e[0],2)},vhv:function(t,e){return"V"+i.round((t[1]+e[1])/2,2)+"H"+i.round(e[0],2)+"V"+i.round(e[1],2)}},O=function(t,e){return"L"+i.round(e[0],2)+","+i.round(e[1],2)};g.steps=function(t){var e=E[t]||O;return function(t){for(var n="M"+i.round(t[0][0],2)+","+i.round(t[0][1],2),r=1;r<t.length;r++)n+=e(t[r-1],t[r]);return n}},g.makeTester=function(){var t=c.ensureSingleById(i.select("body"),"svg","js-plotly-tester",function(t){t.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),e=c.ensureSingle(t,"path","js-reference-point",function(t){t.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});g.tester=t,g.testref=e},g.savedBBoxes={};var P=0;function D(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}g.bBox=function(t,e,n){var r,a,o;if(n||(n=D(t)),n){if(r=g.savedBBoxes[n])return c.extendFlat({},r)}else if(1===t.childNodes.length){var s=t.childNodes[0];if(n=D(s)){var l=+s.getAttribute("x")||0,h=+s.getAttribute("y")||0,d=s.getAttribute("transform");if(!d){var f=g.bBox(s,!1,n);return l&&(f.left+=l,f.right+=l),h&&(f.top+=h,f.bottom+=h),f}if(r=g.savedBBoxes[n+="~"+l+"~"+h+"~"+d])return c.extendFlat({},r)}}e?a=t:(o=g.tester.node(),a=t.cloneNode(!0),o.appendChild(a)),i.select(a).attr("transform",null).call(u.positionText,0,0);var p=a.getBoundingClientRect(),v=g.testref.node().getBoundingClientRect();e||o.removeChild(a);var m={height:p.height,width:p.width,left:p.left-v.left,top:p.top-v.top,right:p.right-v.left,bottom:p.bottom-v.top};return P>=1e4&&(g.savedBBoxes={},P=0),n&&(g.savedBBoxes[n]=m),P++,c.extendFlat({},m)},g.setClipUrl=function(t,e,n){if(e){var i=n._context;t.attr("clip-path","url("+(i._exportedPlot?"":i._baseUrl||"")+"#"+e+")")}else t.attr("clip-path",null)},g.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},g.setTranslate=function(t,e,n){var i=t.attr?"attr":"setAttribute",r=t[t.attr?"attr":"getAttribute"]("transform")||"";return e=e||0,n=n||0,r=r.replace(/(\btranslate\(.*?\);?)/,"").trim(),r=(r+=" translate("+e+", "+n+")").trim(),t[i]("transform",r),r},g.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},g.setScale=function(t,e,n){var i=t.attr?"attr":"setAttribute",r=t[t.attr?"attr":"getAttribute"]("transform")||"";return e=e||1,n=n||1,r=r.replace(/(\bscale\(.*?\);?)/,"").trim(),r=(r+=" scale("+e+", "+n+")").trim(),t[i]("transform",r),r};var z=/\s*sc.*/;g.setPointGroupScale=function(t,e,n){if(e=e||1,n=n||1,t){var i=1===e&&1===n?"":" scale("+e+","+n+")";t.each(function(){var t=(this.getAttribute("transform")||"").replace(z,"");t=(t+=i).trim(),this.setAttribute("transform",t)})}};var I=/translate\([^)]*\)\s*$/;g.setTextPointsScale=function(t,e,n){t&&t.each(function(){var t,r=i.select(this),a=r.select("text");if(a.node()){var o=parseFloat(a.attr("x")||0),s=parseFloat(a.attr("y")||0),l=(r.attr("transform")||"").match(I);t=1===e&&1===n?[]:["translate("+o+","+s+")","scale("+e+","+n+")","translate("+-o+","+-s+")"],l&&t.push(l),r.attr("transform",t.join(" "))}})}},{"../../constants/alignment":138,"../../constants/interactions":139,"../../constants/xmlns_namespaces":141,"../../lib":159,"../../lib/svg_text_utils":180,"../../registry":242,"../../traces/scatter/make_bubble_size_func":297,"../../traces/scatter/subtypes":304,"../color":43,"../colorscale":55,"./symbol_defs":65,d3:8,"fast-isnumeric":10,tinycolor2:26}],65:[function(t,e,n){"use strict";var i=t("d3");e.exports={circle:{n:0,f:function(t){var e=i.round(t,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(t){var e=i.round(t,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(t){var e=i.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(t){var e=i.round(.4*t,2),n=i.round(1.2*t,2);return"M"+n+","+e+"H"+e+"V"+n+"H-"+e+"V"+e+"H-"+n+"V-"+e+"H-"+e+"V-"+n+"H"+e+"V-"+e+"H"+n+"Z"}},x:{n:4,f:function(t){var e=i.round(.8*t/Math.sqrt(2),2),n="l"+e+","+e,r="l"+e+",-"+e,a="l-"+e+",-"+e,o="l-"+e+","+e;return"M0,"+e+n+r+a+r+a+o+a+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(t){var e=i.round(2*t/Math.sqrt(3),2);return"M-"+e+","+i.round(t/2,2)+"H"+e+"L0,-"+i.round(t,2)+"Z"}},"triangle-down":{n:6,f:function(t){var e=i.round(2*t/Math.sqrt(3),2);return"M-"+e+",-"+i.round(t/2,2)+"H"+e+"L0,"+i.round(t,2)+"Z"}},"triangle-left":{n:7,f:function(t){var e=i.round(2*t/Math.sqrt(3),2);return"M"+i.round(t/2,2)+",-"+e+"V"+e+"L-"+i.round(t,2)+",0Z"}},"triangle-right":{n:8,f:function(t){var e=i.round(2*t/Math.sqrt(3),2);return"M-"+i.round(t/2,2)+",-"+e+"V"+e+"L"+i.round(t,2)+",0Z"}},"triangle-ne":{n:9,f:function(t){var e=i.round(.6*t,2),n=i.round(1.2*t,2);return"M-"+n+",-"+e+"H"+e+"V"+n+"Z"}},"triangle-se":{n:10,f:function(t){var e=i.round(.6*t,2),n=i.round(1.2*t,2);return"M"+e+",-"+n+"V"+e+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(t){var e=i.round(.6*t,2),n=i.round(1.2*t,2);return"M"+n+","+e+"H-"+e+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(t){var e=i.round(.6*t,2),n=i.round(1.2*t,2);return"M-"+e+","+n+"V-"+e+"H"+n+"Z"}},pentagon:{n:13,f:function(t){var e=i.round(.951*t,2),n=i.round(.588*t,2),r=i.round(-t,2),a=i.round(-.309*t,2);return"M"+e+","+a+"L"+n+","+i.round(.809*t,2)+"H-"+n+"L-"+e+","+a+"L0,"+r+"Z"}},hexagon:{n:14,f:function(t){var e=i.round(t,2),n=i.round(t/2,2),r=i.round(t*Math.sqrt(3)/2,2);return"M"+r+",-"+n+"V"+n+"L0,"+e+"L-"+r+","+n+"V-"+n+"L0,-"+e+"Z"}},hexagon2:{n:15,f:function(t){var e=i.round(t,2),n=i.round(t/2,2),r=i.round(t*Math.sqrt(3)/2,2);return"M-"+n+","+r+"H"+n+"L"+e+",0L"+n+",-"+r+"H-"+n+"L-"+e+",0Z"}},octagon:{n:16,f:function(t){var e=i.round(.924*t,2),n=i.round(.383*t,2);return"M-"+n+",-"+e+"H"+n+"L"+e+",-"+n+"V"+n+"L"+n+","+e+"H-"+n+"L-"+e+","+n+"V-"+n+"Z"}},star:{n:17,f:function(t){var e=1.4*t,n=i.round(.225*e,2),r=i.round(.951*e,2),a=i.round(.363*e,2),o=i.round(.588*e,2),s=i.round(-e,2),l=i.round(-.309*e,2),c=i.round(.118*e,2),u=i.round(.809*e,2);return"M"+n+","+l+"H"+r+"L"+a+","+c+"L"+o+","+u+"L0,"+i.round(.382*e,2)+"L-"+o+","+u+"L-"+a+","+c+"L-"+r+","+l+"H-"+n+"L0,"+s+"Z"}},hexagram:{n:18,f:function(t){var e=i.round(.66*t,2),n=i.round(.38*t,2),r=i.round(.76*t,2);return"M-"+r+",0l-"+n+",-"+e+"h"+r+"l"+n+",-"+e+"l"+n+","+e+"h"+r+"l-"+n+","+e+"l"+n+","+e+"h-"+r+"l-"+n+","+e+"l-"+n+",-"+e+"h-"+r+"Z"}},"star-triangle-up":{n:19,f:function(t){var e=i.round(t*Math.sqrt(3)*.8,2),n=i.round(.8*t,2),r=i.round(1.6*t,2),a=i.round(4*t,2),o="A "+a+","+a+" 0 0 1 ";return"M-"+e+","+n+o+e+","+n+o+"0,-"+r+o+"-"+e+","+n+"Z"}},"star-triangle-down":{n:20,f:function(t){var e=i.round(t*Math.sqrt(3)*.8,2),n=i.round(.8*t,2),r=i.round(1.6*t,2),a=i.round(4*t,2),o="A "+a+","+a+" 0 0 1 ";return"M"+e+",-"+n+o+"-"+e+",-"+n+o+"0,"+r+o+e+",-"+n+"Z"}},"star-square":{n:21,f:function(t){var e=i.round(1.1*t,2),n=i.round(2*t,2),r="A "+n+","+n+" 0 0 1 ";return"M-"+e+",-"+e+r+"-"+e+","+e+r+e+","+e+r+e+",-"+e+r+"-"+e+",-"+e+"Z"}},"star-diamond":{n:22,f:function(t){var e=i.round(1.4*t,2),n=i.round(1.9*t,2),r="A "+n+","+n+" 0 0 1 ";return"M-"+e+",0"+r+"0,"+e+r+e+",0"+r+"0,-"+e+r+"-"+e+",0Z"}},"diamond-tall":{n:23,f:function(t){var e=i.round(.7*t,2),n=i.round(1.4*t,2);return"M0,"+n+"L"+e+",0L0,-"+n+"L-"+e+",0Z"}},"diamond-wide":{n:24,f:function(t){var e=i.round(1.4*t,2),n=i.round(.7*t,2);return"M0,"+n+"L"+e+",0L0,-"+n+"L-"+e+",0Z"}},hourglass:{n:25,f:function(t){var e=i.round(t,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(t){var e=i.round(t,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(t){var e=i.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t){var e=i.round(t,2),n=i.round(t/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t){var e=i.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t){var e=i.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t){var e=i.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t){var e=i.round(1.3*t,2),n=i.round(.65*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t){var e=i.round(1.4*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t){var e=i.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t){var e=i.round(1.2*t,2),n=i.round(.85*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t){var e=i.round(t/2,2),n=i.round(t,2);return"M"+e+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+e+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t){var e=i.round(1.2*t,2),n=i.round(1.6*t,2),r=i.round(.8*t,2);return"M-"+e+","+r+"L0,0M"+e+","+r+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t){var e=i.round(1.2*t,2),n=i.round(1.6*t,2),r=i.round(.8*t,2);return"M-"+e+",-"+r+"L0,0M"+e+",-"+r+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t){var e=i.round(1.2*t,2),n=i.round(1.6*t,2),r=i.round(.8*t,2);return"M"+r+","+e+"L0,0M"+r+",-"+e+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t){var e=i.round(1.2*t,2),n=i.round(1.6*t,2),r=i.round(.8*t,2);return"M-"+r+","+e+"L0,0M-"+r+",-"+e+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t){var e=i.round(1.4*t,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t){var e=i.round(1.4*t,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t){var e=i.round(t,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t){var e=i.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0}}},{d3:8}],66:[function(t,e,n){"use strict";e.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],67:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../registry"),a=t("../../plots/cartesian/axes"),o=t("../../lib"),s=t("./compute_error");function l(t,e,n,r){var l=e["error_"+r]||{},c=[];if(l.visible&&-1!==["linear","log"].indexOf(n.type)){for(var u=s(l),h=0;h<t.length;h++){var d=t[h],f=d.i;if(void 0===f)f=h;else if(null===f)continue;var p=d[r];if(i(n.c2l(p))){var v=u(p,f);if(i(v[0])&&i(v[1])){var g=d[r+"s"]=p-v[0],m=d[r+"h"]=p+v[1];c.push(g,m)}}}var y=e._extremes[n._id],_=a.findExtremes(n,c,o.extendFlat({tozero:y.opts.tozero},{padded:!0}));y.min=y.min.concat(_.min),y.max=y.max.concat(_.max)}}e.exports=function(t){for(var e=t.calcdata,n=0;n<e.length;n++){var i=e[n],o=i[0].trace;if(!0===o.visible&&r.traceIs(o,"errorBarsOK")){var s=a.getFromId(t,o.xaxis),c=a.getFromId(t,o.yaxis);l(i,o,s,"x"),l(i,o,c,"y")}}}},{"../../lib":159,"../../plots/cartesian/axes":203,"../../registry":242,"./compute_error":68,"fast-isnumeric":10}],68:[function(t,e,n){"use strict";function i(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}e.exports=function(t){var e=t.type,n=t.symmetric;if("data"===e){var r=t.array||[];if(n)return function(t,e){var n=+r[e];return[n,n]};var a=t.arrayminus||[];return function(t,e){var n=+r[e],i=+a[e];return isNaN(n)&&isNaN(i)?[NaN,NaN]:[i||0,n||0]}}var o=i(e,t.value),s=i(e,t.valueminus);return n||void 0===t.valueminus?function(t){var e=o(t);return[e,e]}:function(t){return[s(t),o(t)]}}},{}],69:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../registry"),a=t("../../lib"),o=t("../../plot_api/plot_template"),s=t("./attributes");e.exports=function(t,e,n,l){var c="error_"+l.axis,u=o.newContainer(e,c),h=t[c]||{};function d(t,e){return a.coerce(h,u,s,t,e)}if(!1!==d("visible",void 0!==h.array||void 0!==h.value||"sqrt"===h.type)){var f=d("type","array"in h?"data":"percent"),p=!0;"sqrt"!==f&&(p=d("symmetric",!(("data"===f?"arrayminus":"valueminus")in h))),"data"===f?(d("array"),d("traceref"),p||(d("arrayminus"),d("tracerefminus"))):"percent"!==f&&"constant"!==f||(d("value"),p||d("valueminus"));var v="copy_"+l.inherit+"style";l.inherit&&(e["error_"+l.inherit]||{}).visible&&d(v,!(h.color||i(h.thickness)||i(h.width))),l.inherit&&u[v]||(d("color",n),d("thickness"),d("width",r.traceIs(e,"gl3d")?0:4))}}},{"../../lib":159,"../../plot_api/plot_template":193,"../../registry":242,"./attributes":66,"fast-isnumeric":10}],70:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plot_api/edit_types").overrideAll,a=t("./attributes"),o={error_x:i.extendFlat({},a),error_y:i.extendFlat({},a)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;var s={error_x:i.extendFlat({},a),error_y:i.extendFlat({},a),error_z:i.extendFlat({},a)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,e.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:r(s,"calc","nested"),scattergl:r(o,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:function(t,e,n){(e.error_y||{}).visible&&(n.yerr=t.yh-t.y,e.error_y.symmetric||(n.yerrneg=t.y-t.ys)),(e.error_x||{}).visible&&(n.xerr=t.xh-t.x,e.error_x.symmetric||(n.xerrneg=t.x-t.xs))}}},{"../../lib":159,"../../plot_api/edit_types":186,"./attributes":66,"./calc":67,"./compute_error":68,"./defaults":69,"./plot":71,"./style":72}],71:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("../drawing"),o=t("../../traces/scatter/subtypes");e.exports=function(t,e,n,s){var l=n.xaxis,c=n.yaxis,u=s&&s.duration>0;e.each(function(e){var h,d=e[0].trace,f=d.error_x||{},p=d.error_y||{};d.ids&&(h=function(t){return t.id});var v=o.hasMarkers(d)&&d.marker.maxdisplayed>0;p.visible||f.visible||(e=[]);var g=i.select(this).selectAll("g.errorbar").data(e,h);if(g.exit().remove(),e.length){f.visible||g.selectAll("path.xerror").remove(),p.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var m=g.enter().append("g").classed("errorbar",!0);u&&m.style("opacity",0).transition().duration(s.duration).style("opacity",1),a.setClipUrl(g,n.layerClipId,t),g.each(function(t){var e=i.select(this),n=function(t,e,n){var i={x:e.c2p(t.x),y:n.c2p(t.y)};return void 0!==t.yh&&(i.yh=n.c2p(t.yh),i.ys=n.c2p(t.ys),r(i.ys)||(i.noYS=!0,i.ys=n.c2p(t.ys,!0))),void 0!==t.xh&&(i.xh=e.c2p(t.xh),i.xs=e.c2p(t.xs),r(i.xs)||(i.noXS=!0,i.xs=e.c2p(t.xs,!0))),i}(t,l,c);if(!v||t.vis){var a,o=e.select("path.yerror");if(p.visible&&r(n.x)&&r(n.yh)&&r(n.ys)){var h=p.width;a="M"+(n.x-h)+","+n.yh+"h"+2*h+"m-"+h+",0V"+n.ys,n.noYS||(a+="m-"+h+",0h"+2*h),o.size()?u&&(o=o.transition().duration(s.duration).ease(s.easing)):o=e.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),o.attr("d",a)}else o.remove();var d=e.select("path.xerror");if(f.visible&&r(n.y)&&r(n.xh)&&r(n.xs)){var g=(f.copy_ystyle?p:f).width;a="M"+n.xh+","+(n.y-g)+"v"+2*g+"m0,-"+g+"H"+n.xs,n.noXS||(a+="m0,-"+g+"v"+2*g),d.size()?u&&(d=d.transition().duration(s.duration).ease(s.easing)):d=e.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),d.attr("d",a)}else d.remove()}})}})}},{"../../traces/scatter/subtypes":304,"../drawing":64,d3:8,"fast-isnumeric":10}],72:[function(t,e,n){"use strict";var i=t("d3"),r=t("../color");e.exports=function(t){t.each(function(t){var e=t[0].trace,n=e.error_y||{},a=e.error_x||{},o=i.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(r.stroke,n.color),a.copy_ystyle&&(a=n),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(r.stroke,a.color)})}},{"../color":43,d3:8}],73:[function(t,e,n){"use strict";var i=t("../../plots/font_attributes");e.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,editType:"none"},font:i({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":229}],74:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../registry");function a(t,e,n,r){r=r||i.identity,Array.isArray(t)&&(e[0][n]=r(t))}e.exports=function(t){var e=t.calcdata,n=t._fullLayout;function o(t){return function(e){return i.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}for(var s=0;s<e.length;s++){var l=e[s],c=l[0].trace;if(!r.traceIs(c,"pie")){var u=r.traceIs(c,"2dMap")?a:i.fillArray;u(c.hoverinfo,l,"hi",o(c)),c.hovertemplate&&u(c.hovertemplate,l,"ht"),c.hoverlabel&&(u(c.hoverlabel.bgcolor,l,"hbg"),u(c.hoverlabel.bordercolor,l,"hbc"),u(c.hoverlabel.font.size,l,"hts"),u(c.hoverlabel.font.color,l,"htc"),u(c.hoverlabel.font.family,l,"htf"),u(c.hoverlabel.namelength,l,"hnl"))}}}},{"../../lib":159,"../../registry":242}],75:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("./hover").hover;e.exports=function(t,e,n){var a=i.getComponentMethod("annotations","onClick")(t,t._hoverdata);function o(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==n&&r(t,e,n,!0),t._hoverdata&&e&&e.target&&(a&&a.then?a.then(o):o(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":242,"./hover":79}],76:[function(t,e,n){"use strict";e.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],77:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./attributes"),a=t("./hoverlabel_defaults");e.exports=function(t,e,n,o){a(t,e,function(n,a){return i.coerce(t,e,r,n,a)},o.hoverlabel)}},{"../../lib":159,"./attributes":73,"./hoverlabel_defaults":80}],78:[function(t,e,n){"use strict";var i=t("../../lib");n.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},n.isTraceInSubplots=function(t,e){if("splom"===t.type){for(var i=t.xaxes||[],r=t.yaxes||[],a=0;a<i.length;a++)for(var o=0;o<r.length;o++)if(-1!==e.indexOf(i[a]+r[o]))return!0;return!1}return-1!==e.indexOf(n.getSubplot(t))},n.flat=function(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)n[i]=e;return n},n.p2c=function(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)n[i]=t[i].p2c(e);return n},n.getDistanceFunction=function(t,e,i,r){return"closest"===t?r||n.quadrature(e,i):"x"===t?e:i},n.getClosest=function(t,e,n){if(!1!==n.index)n.index>=0&&n.index<t.length?n.distance=0:n.index=!1;else for(var i=0;i<t.length;i++){var r=e(t[i]);r<=n.distance&&(n.index=i,n.distance=r)}return n},n.inbox=function(t,e,n){return t*e<0||0===t?n:1/0},n.quadrature=function(t,e){return function(n){var i=t(n),r=e(n);return Math.sqrt(i*i+r*r)}},n.makeEventData=function(t,e,i){var r="index"in t?t.index:t.pointNumber,a={data:e._input,fullData:e,curveNumber:e.index,pointNumber:r};if(e._indexToPoints){var o=e._indexToPoints[r];1===o.length?a.pointIndex=o[0]:a.pointIndices=o}else a.pointIndex=r;return e._module.eventData?a=e._module.eventData(a,t,e,i,r):("xVal"in t?a.x=t.xVal:"x"in t&&(a.x=t.x),"yVal"in t?a.y=t.yVal:"y"in t&&(a.y=t.y),t.xa&&(a.xaxis=t.xa),t.ya&&(a.yaxis=t.ya),void 0!==t.zLabelVal&&(a.z=t.zLabelVal)),n.appendArrayPointValue(a,e,r),a},n.appendArrayPointValue=function(t,e,n){var r=e._arrayAttrs;if(r)for(var s=0;s<r.length;s++){var l=r[s],c=a(l);if(void 0===t[c]){var u=o(i.nestedProperty(e,l).get(),n);void 0!==u&&(t[c]=u)}}},n.appendArrayMultiPointValues=function(t,e,n){var r=e._arrayAttrs;if(r)for(var s=0;s<r.length;s++){var l=r[s],c=a(l);if(void 0===t[c]){for(var u=i.nestedProperty(e,l).get(),h=new Array(n.length),d=0;d<n.length;d++)h[d]=o(u,n[d]);t[c]=h}}};var r={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function a(t){return r[t]||t}function o(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}},{"../../lib":159}],79:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("tinycolor2"),o=t("../../lib"),s=t("../../lib/events"),l=t("../../lib/svg_text_utils"),c=t("../../lib/override_cursor"),u=t("../drawing"),h=t("../color"),d=t("../dragelement"),f=t("../../plots/cartesian/axes"),p=t("../../registry"),v=t("./helpers"),g=t("./constants"),m=g.YANGLE,y=Math.PI*m/180,_=1/Math.sin(y),x=Math.cos(y),b=Math.sin(y),w=g.HOVERARROWSIZE,k=g.HOVERTEXTPAD;n.hover=function(t,e,n,a){t=o.getGraphDiv(t),o.throttle(t._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){!function(t,e,n,a){n||(n="xy");var l=Array.isArray(n)?n:[n],u=t._fullLayout,g=u._plots||[],m=g[n],y=u._has("cartesian");if(m){var x=m.overlays.map(function(t){return t.id});l=l.concat(x)}for(var b=l.length,w=new Array(b),k=new Array(b),T=!1,E=0;E<b;E++){var O=l[E],P=g[O];if(P)T=!0,w[E]=f.getFromId(t,P.xaxis._id),k[E]=f.getFromId(t,P.yaxis._id);else{var D=u[O]._subplot;w[E]=D.xaxis,k[E]=D.yaxis}}var z=e.hovermode||u.hovermode;if(z&&!T&&(z="closest"),-1===["x","y","closest"].indexOf(z)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return d.unhoverRaw(t,e);var I,R,B,N,F,j,H,$,q,Z,V,W,U,G=-1===u.hoverdistance?1/0:u.hoverdistance,X=-1===u.spikedistance?1/0:u.spikedistance,Y=[],Q=[],K={hLinePoint:null,vLinePoint:null},J=!1;if(Array.isArray(e))for(z="array",B=0;B<e.length;B++)(F=t.calcdata[e[B].curveNumber||0])&&(j=F[0].trace,"skip"!==F[0].trace.hoverinfo&&(Q.push(F),"h"===j.orientation&&(J=!0)));else{for(N=0;N<t.calcdata.length;N++)"skip"!==(j=(F=t.calcdata[N])[0].trace).hoverinfo&&v.isTraceInSubplots(j,l)&&(Q.push(F),"h"===j.orientation&&(J=!0));var tt,et;if(e.target){if(!1===s.triggerHandler(t,"plotly_beforehover",e))return;var nt=e.target.getBoundingClientRect();if(et=e.clientY-nt.top,(tt=e.clientX-nt.left)<0||tt>w[0]._length||et<0||et>k[0]._length)return d.unhoverRaw(t,e)}else tt="xpx"in e?e.xpx:w[0]._length/2,et="ypx"in e?e.ypx:k[0]._length/2;if(e.pointerX=tt+w[0]._offset,e.pointerY=et+k[0]._offset,I="xval"in e?v.flat(l,e.xval):v.p2c(w,tt),R="yval"in e?v.flat(l,e.yval):v.p2c(k,et),!r(I[0])||!r(R[0]))return o.warn("Fx.hover failed",e,t),d.unhoverRaw(t,e)}var it=1/0;for(N=0;N<Q.length;N++)if((F=Q[N])&&F[0]&&F[0].trace&&!0===F[0].trace.visible&&-1===["carpet","contourcarpet"].indexOf((j=F[0].trace)._module.name)){if("splom"===j.type?H=l[$=0]:(H=v.getSubplot(j),$=l.indexOf(H)),q=z,W={cd:F,trace:j,xa:w[$],ya:k[$],maxHoverDistance:G,maxSpikeDistance:X,index:!1,distance:Math.min(it,G),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:h.defaultLine,name:j.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[H]&&(W.subplot=u[H]._subplot),u._splomScenes&&u._splomScenes[j.uid]&&(W.scene=u._splomScenes[j.uid]),U=Y.length,"array"===q){var rt=e[N];"pointNumber"in rt?(W.index=rt.pointNumber,q="closest"):(q="","xval"in rt&&(Z=rt.xval,q="x"),"yval"in rt&&(V=rt.yval,q=q?"closest":"y"))}else Z=I[$],V=R[$];if(0!==G)if(j._module&&j._module.hoverPoints){var at=j._module.hoverPoints(W,Z,V,q,u._hoverlayer);if(at)for(var ot,st=0;st<at.length;st++)r((ot=at[st]).x0)&&r(ot.y0)&&Y.push(C(ot,z))}else o.log("Unrecognized trace type in hover:",j);if("closest"===z&&Y.length>U&&(Y.splice(0,U),it=Y[0].distance),y&&0!==X&&0===Y.length){W.distance=X,W.index=!1;var lt=j._module.hoverPoints(W,Z,V,"closest",u._hoverlayer);if(lt&&(lt=lt.filter(function(t){return t.spikeDistance<=X})),lt&&lt.length){var ct,ut=lt.filter(function(t){return t.xa.showspikes});if(ut.length){var ht=ut[0];r(ht.x0)&&r(ht.y0)&&(ct=vt(ht),(!K.vLinePoint||K.vLinePoint.spikeDistance>ct.spikeDistance)&&(K.vLinePoint=ct))}var dt=lt.filter(function(t){return t.ya.showspikes});if(dt.length){var ft=dt[0];r(ft.x0)&&r(ft.y0)&&(ct=vt(ft),(!K.hLinePoint||K.hLinePoint.spikeDistance>ct.spikeDistance)&&(K.hLinePoint=ct))}}}}function pt(t,e){for(var n,i=null,r=1/0,a=0;a<t.length;a++)(n=t[a].spikeDistance)<r&&n<=e&&(i=t[a],r=n);return i}function vt(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}var gt={fullLayout:u,container:u._hoverlayer,outerContainer:u._paperdiv,event:e},mt=t._spikepoints;if(t._spikepoints={vLinePoint:K.vLinePoint,hLinePoint:K.hLinePoint},y&&0!==X&&0!==Y.length){var yt=pt(Y.filter(function(t){return t.ya.showspikes}),X);K.hLinePoint=vt(yt);var _t=pt(Y.filter(function(t){return t.xa.showspikes}),X);K.vLinePoint=vt(_t)}if(0===Y.length){var xt=d.unhoverRaw(t,e);return!y||null===K.hLinePoint&&null===K.vLinePoint||S(mt)&&L(K,gt),xt}y&&S(mt)&&L(K,gt),Y.sort(function(t,e){return t.distance-e.distance});var bt=t._hoverdata,wt=[];for(B=0;B<Y.length;B++){var kt=Y[B],Tt=v.makeEventData(kt,kt.trace,kt.cd),Mt=!1;kt.cd[kt.index]&&kt.cd[kt.index].ht&&(Mt=kt.cd[kt.index].ht),Y[B].hovertemplate=Mt||kt.trace.hovertemplate||!1,Y[B].eventData=[Tt],wt.push(Tt)}t._hoverdata=wt;var At="y"===z&&(Q.length>1||Y.length>1)||"closest"===z&&J&&Y.length>1,Ct=M(Y,{hovermode:z,rotateLabels:At,bgColor:h.combine(u.plot_bgcolor||h.background,u.paper_bgcolor),container:u._hoverlayer,outerContainer:u._paperdiv,commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance},t);if(function(t,e,n){var i,r,a,o,s,l,c,u=0,h=1,d=t.size(),f=new Array(d);function p(t){var e=t[0],n=t[t.length-1];if(a=n.pos+n.dp+n.size-e.pmax,(r=e.pmin-e.pos-e.dp+e.size)>.01){for(s=t.length-1;s>=0;s--)t[s].dp+=r;i=!1}if(!(a<.01)){if(r<-.01){for(s=t.length-1;s>=0;s--)t[s].dp-=a;i=!1}if(i){var c=0;for(o=0;o<t.length;o++)(l=t[o]).pos+l.dp+l.size>e.pmax&&c++;for(o=t.length-1;o>=0&&!(c<=0);o--)(l=t[o]).pos>e.pmax-1&&(l.del=!0,c--);for(o=0;o<t.length&&!(c<=0);o++)if((l=t[o]).pos<e.pmin+1)for(l.del=!0,c--,a=2*l.size,s=t.length-1;s>=0;s--)t[s].dp-=a;for(o=t.length-1;o>=0&&!(c<=0);o--)(l=t[o]).pos+l.dp+l.size>e.pmax&&(l.del=!0,c--)}}}for(t.each(function(t,i){var r=t[e],a="x"===r._id.charAt(0),o=r.range;!i&&o&&o[0]>o[1]!==a&&(h=-1),f[i]=[{datum:t,i:i,traceIndex:t.trace.index,dp:0,pos:t.pos,posref:t.posref,size:t.by*(a?_:1)/2,pmin:0,pmax:a?n.width:n.height}]}),f.sort(function(t,e){return t[0].posref-e[0].posref||h*(e[0].traceIndex-t[0].traceIndex)});!i&&u<=d;){for(u++,i=!0,o=0;o<f.length-1;){var v=f[o],g=f[o+1],m=v[v.length-1],y=g[0];if((r=m.pos+m.dp+m.size-y.pos-y.dp+y.size)>.01&&m.pmin===y.pmin&&m.pmax===y.pmax){for(s=g.length-1;s>=0;s--)g[s].dp+=r;for(v.push.apply(v,g),f.splice(o+1,1),c=0,s=v.length-1;s>=0;s--)c+=v[s].dp;for(a=c/v.length,s=v.length-1;s>=0;s--)v[s].dp-=a;i=!1}else o++}f.forEach(p)}for(o=f.length-1;o>=0;o--){var x=f[o];for(s=x.length-1;s>=0;s--){var b=x[s],w=b.datum;w.offset=b.dp,w.del=b.del}}}(Ct,At?"xa":"ya",u),A(Ct,At),e.target&&e.target.tagName){var Lt=p.getComponentMethod("annotations","hasClickToShow")(t,wt);c(i.select(e.target),Lt?"pointer":"")}e.target&&!a&&function(t,e,n){if(!n||n.length!==t._hoverdata.length)return!0;for(var i=n.length-1;i>=0;i--){var r=n[i],a=t._hoverdata[i];if(r.curveNumber!==a.curveNumber||String(r.pointNumber)!==String(a.pointNumber)||String(r.pointNumbers)!==String(a.pointNumbers))return!0}return!1}(t,0,bt)&&(bt&&t.emit("plotly_unhover",{event:e,points:bt}),t.emit("plotly_hover",{event:e,points:t._hoverdata,xaxes:w,yaxes:k,xvals:I,yvals:R}))}(t,e,n,a)})},n.loneHover=function(t,e){var n={color:t.color||h.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,trace:t.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:t.hovertemplate||!1,eventData:t.eventData||!1,hovertemplateLabels:t.hovertemplateLabels||!1},r=i.select(e.container),a=e.outerContainer?i.select(e.outerContainer):r,o={hovermode:"closest",rotateLabels:!1,bgColor:e.bgColor||h.background,container:r,outerContainer:a},s=M([n],o,e.gd);return A(s,o.rotateLabels),s.node()},n.multiHovers=function(t,e){Array.isArray(t)||(t=[t]);var n=t.map(function(t){return{color:t.color||h.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,trace:t.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:t.hovertemplate||!1,eventData:t.eventData||!1,hovertemplateLabels:t.hovertemplateLabels||!1}}),r=i.select(e.container),a=e.outerContainer?i.select(e.outerContainer):r,o={hovermode:"closest",rotateLabels:!1,bgColor:e.bgColor||h.background,container:r,outerContainer:a},s=M(n,o,e.gd),l=0;return s.sort(function(t,e){return t.y0-e.y0}).each(function(t){var e=t.y0-t.by/2;t.offset=e-5<l?l-e+5:0,l=e+t.by+t.offset}),A(s,o.rotateLabels),s.node()};var T=/<extra>([\s\S]*)<\/extra>/;function M(t,e,n){var r=n._fullLayout,a=e.hovermode,s=e.rotateLabels,c=e.bgColor,d=e.container,f=e.outerContainer,p=e.commonLabelOpts||{},v=e.fontFamily||g.HOVERFONT,y=e.fontSize||g.HOVERFONTSIZE,_=t[0],x=_.xa,b=_.ya,M="y"===a?"yLabel":"xLabel",A=_[M],C=(String(A)||"").split(" ")[0],L=f.node().getBoundingClientRect(),S=L.top,E=L.width,O=L.height,P=void 0!==A&&_.distance<=e.hoverdistance&&("x"===a||"y"===a);if(P){var D,z,I=!0;for(D=0;D<t.length;D++)if(I&&void 0===t[D].zLabel&&(I=!1),z=t[D].hoverinfo||t[D].trace.hoverinfo){var R=Array.isArray(z)?z:z.split("+");if(-1===R.indexOf("all")&&-1===R.indexOf(a)){P=!1;break}}I&&(P=!1)}var B=d.selectAll("g.axistext").data(P?[0]:[]);B.enter().append("g").classed("axistext",!0),B.exit().remove(),B.each(function(){var e=i.select(this),r=o.ensureSingle(e,"path","",function(t){t.style({"stroke-width":"1px"})}),s=o.ensureSingle(e,"text","",function(t){t.attr("data-notex",1)}),c=p.bgcolor||h.defaultLine,d=p.bordercolor||h.contrast(c),f=h.contrast(c);r.style({fill:c,stroke:d}),s.text(A).call(u.font,p.font.family||v,p.font.size||y,p.font.color||f).call(l.positionText,0,0).call(l.convertToTspans,n),e.attr("transform","");var g=s.node().getBoundingClientRect();if("x"===a){s.attr("text-anchor","middle").call(l.positionText,0,"top"===x.side?S-g.bottom-w-k:S-g.top+w+k);var m="top"===x.side?"-":"";r.attr("d","M0,0L"+w+","+m+w+"H"+(k+g.width/2)+"v"+m+(2*k+g.height)+"H-"+(k+g.width/2)+"V"+m+w+"H-"+w+"Z"),e.attr("transform","translate("+(x._offset+(_.x0+_.x1)/2)+","+(b._offset+("top"===x.side?0:b._length))+")")}else{s.attr("text-anchor","right"===b.side?"start":"end").call(l.positionText,("right"===b.side?1:-1)*(k+w),S-g.top-g.height/2);var T="right"===b.side?"":"-";r.attr("d","M0,0L"+T+w+","+w+"V"+(k+g.height/2)+"h"+T+(2*k+g.width)+"V-"+(k+g.height/2)+"H"+T+w+"V-"+w+"Z"),e.attr("transform","translate("+(x._offset+("right"===b.side?x._length:0))+","+(b._offset+(_.y0+_.y1)/2)+")")}t=t.filter(function(t){return void 0!==t.zLabelVal||(t[M]||"").split(" ")[0]===C})});var N=d.selectAll("g.hovertext").data(t,function(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa,t.ya||""].join(",")});return N.enter().append("g").classed("hovertext",!0).each(function(){var t=i.select(this);t.append("rect").call(h.fill,h.addOpacity(c,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(u.font,v,y)}),N.exit().remove(),N.each(function(t){var e=i.select(this).attr("transform",""),d="",f="",p=t.bgcolor||t.color,g=h.combine(h.opacity(p)?p:h.defaultLine,c),_=h.combine(h.opacity(t.color)?t.color:h.defaultLine,c),x=t.borderColor||h.contrast(g);void 0!==t.nameOverride&&(t.name=t.nameOverride),t.name&&(r.meta&&(t.name=o.templateString(t.name,{meta:r.meta})),d=l.plainText(t.name||"",{len:t.nameLength,allowedTags:["br","sub","sup","b","i","em"]})),void 0!==t.zLabel?(void 0!==t.xLabel&&(f+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(f+="y: "+t.yLabel+"<br>"),f+=(f?"z: ":"")+t.zLabel):P&&t[a+"Label"]===A?f=t[("x"===a?"y":"x")+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&"scattercarpet"!==t.trace.type&&(f=t.yLabel):f=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",!t.text&&0!==t.text||Array.isArray(t.text)||(f+=(f?"<br>":"")+t.text),void 0!==t.extraText&&(f+=(f?"<br>":"")+t.extraText),""!==f||t.hovertemplate||(""===d&&e.remove(),f=d);var b=t.hovertemplate||!1;b&&(f=(f=o.hovertemplateString(b,t.hovertemplateLabels||t,n._fullLayout._d3locale,t.eventData[0]||{},{meta:r.meta})).replace(T,function(t,e){return d=e,""}));var M=e.select("text.nums").call(u.font,t.fontFamily||v,t.fontSize||y,t.fontColor||x).text(f).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,n),C=e.select("text.name"),L=0,D=0;if(d&&d!==f){C.call(u.font,t.fontFamily||v,t.fontSize||y,_).text(d).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,n);var z=C.node().getBoundingClientRect();L=z.width+2*k,D=z.height+2*k}else C.remove(),e.select("rect").remove();e.select("path").style({fill:g,stroke:x});var I,R,B=M.node().getBoundingClientRect(),N=t.xa._offset+(t.x0+t.x1)/2,F=t.ya._offset+(t.y0+t.y1)/2,j=Math.abs(t.x1-t.x0),H=Math.abs(t.y1-t.y0),$=B.width+w+k+L;t.ty0=S-B.top,t.bx=B.width+2*k,t.by=Math.max(B.height+2*k,D),t.anchor="start",t.txwidth=B.width,t.tx2width=L,t.offset=0,s?(t.pos=N,I=F+H/2+$<=O,R=F-H/2-$>=0,"top"!==t.idealAlign&&I||!R?I?(F+=H/2,t.anchor="start"):t.anchor="middle":(F-=H/2,t.anchor="end")):(t.pos=F,I=N+j/2+$<=E,R=N-j/2-$>=0,"left"!==t.idealAlign&&I||!R?I?(N+=j/2,t.anchor="start"):t.anchor="middle":(N-=j/2,t.anchor="end")),M.attr("text-anchor",t.anchor),L&&C.attr("text-anchor",t.anchor),e.attr("transform","translate("+N+","+F+")"+(s?"rotate("+m+")":""))}),N}function A(t,e){t.each(function(t){var n=i.select(this);if(t.del)n.remove();else{var r="end"===t.anchor?-1:1,a=n.select("text.nums"),o={start:1,end:-1,middle:0}[t.anchor],s=o*(w+k),c=s+o*(t.txwidth+k),h=0,d=t.offset;"middle"===t.anchor&&(s-=t.tx2width/2,c+=t.txwidth/2+k),e&&(d*=-b,h=t.offset*x),n.select("path").attr("d","middle"===t.anchor?"M-"+(t.bx/2+t.tx2width/2)+","+(d-t.by/2)+"h"+t.bx+"v"+t.by+"h-"+t.bx+"Z":"M0,0L"+(r*w+h)+","+(w+d)+"v"+(t.by/2-w)+"h"+r*t.bx+"v-"+t.by+"H"+(r*w+h)+"V"+(d-w)+"Z"),a.call(l.positionText,s+h,d+t.ty0-t.by/2+k),t.tx2width&&(n.select("text.name").call(l.positionText,c+o*k+h,d+t.ty0-t.by/2+k),n.select("rect").call(u.setRect,c+(o-1)*t.tx2width/2+h,d-t.by/2-1,t.tx2width,t.by+2))}})}function C(t,e){var n=t.index,i=t.trace||{},r=t.cd[0],a=t.cd[n]||{},s=Array.isArray(n)?function(t,e){return o.castOption(r,n,t)||o.extractOption({},i,"",e)}:function(t,e){return o.extractOption(a,i,t,e)};function l(e,n,i){var r=s(n,i);r&&(t[e]=r)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),t.posref="y"===e||"closest"===e&&"h"===i.orientation?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=o.constrain(t.x0,0,t.xa._length),t.x1=o.constrain(t.x1,0,t.xa._length),t.y0=o.constrain(t.y0,0,t.ya._length),t.y1=o.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:f.hoverLabelText(t.xa,t.xLabelVal),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:f.hoverLabelText(t.ya,t.yLabelVal),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var c=f.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;t.xLabel+=void 0!==t.xerrneg?" +"+c+" / -"+f.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:" \xb1 "+c,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var u=f.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;t.yLabel+=void 0!==t.yerrneg?" +"+u+" / -"+f.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:" \xb1 "+u,"y"===e&&(t.distance+=1)}var h=t.hoverinfo||t.trace.hoverinfo;return h&&"all"!==h&&(-1===(h=Array.isArray(h)?h:h.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===h.indexOf("y")&&(t.yLabel=void 0),-1===h.indexOf("z")&&(t.zLabel=void 0),-1===h.indexOf("text")&&(t.text=void 0),-1===h.indexOf("name")&&(t.name=void 0)),t}function L(t,e){var n,i,r=e.container,o=e.fullLayout,s=e.event,l=!!t.hLinePoint,c=!!t.vLinePoint;if(r.selectAll(".spikeline").remove(),c||l){var d=h.combine(o.plot_bgcolor,o.paper_bgcolor);if(l){var f,p,v=t.hLinePoint;n=v&&v.xa,"cursor"===(i=v&&v.ya).spikesnap?(f=s.pointerX,p=s.pointerY):(f=n._offset+v.x,p=i._offset+v.y);var g,m,y=a.readability(v.color,d)<1.5?h.contrast(d):v.color,_=i.spikemode,x=i.spikethickness,b=i.spikecolor||y,w=i._boundingBox,k=(w.left+w.right)/2<f?w.right:w.left;-1===_.indexOf("toaxis")&&-1===_.indexOf("across")||(-1!==_.indexOf("toaxis")&&(g=k,m=f),-1!==_.indexOf("across")&&(g=i._counterSpan[0],m=i._counterSpan[1]),r.insert("line",":first-child").attr({x1:g,x2:m,y1:p,y2:p,"stroke-width":x,stroke:b,"stroke-dasharray":u.dashStyle(i.spikedash,x)}).classed("spikeline",!0).classed("crisp",!0),r.insert("line",":first-child").attr({x1:g,x2:m,y1:p,y2:p,"stroke-width":x+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)),-1!==_.indexOf("marker")&&r.insert("circle",":first-child").attr({cx:k+("right"!==i.side?x:-x),cy:p,r:x,fill:b}).classed("spikeline",!0)}if(c){var T,M,A=t.vLinePoint;i=A&&A.ya,"cursor"===(n=A&&A.xa).spikesnap?(T=s.pointerX,M=s.pointerY):(T=n._offset+A.x,M=i._offset+A.y);var C,L,S=a.readability(A.color,d)<1.5?h.contrast(d):A.color,E=n.spikemode,O=n.spikethickness,P=n.spikecolor||S,D=n._boundingBox,z=(D.top+D.bottom)/2<M?D.bottom:D.top;-1===E.indexOf("toaxis")&&-1===E.indexOf("across")||(-1!==E.indexOf("toaxis")&&(C=z,L=M),-1!==E.indexOf("across")&&(C=n._counterSpan[0],L=n._counterSpan[1]),r.insert("line",":first-child").attr({x1:T,x2:T,y1:C,y2:L,"stroke-width":O,stroke:P,"stroke-dasharray":u.dashStyle(n.spikedash,O)}).classed("spikeline",!0).classed("crisp",!0),r.insert("line",":first-child").attr({x1:T,x2:T,y1:C,y2:L,"stroke-width":O+2,stroke:d}).classed("spikeline",!0).classed("crisp",!0)),-1!==E.indexOf("marker")&&r.insert("circle",":first-child").attr({cx:T,cy:z-("top"!==n.side?O:-O),r:O,fill:P}).classed("spikeline",!0)}}}function S(t,e){return!e||e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint}},{"../../lib":159,"../../lib/events":152,"../../lib/override_cursor":170,"../../lib/svg_text_utils":180,"../../plots/cartesian/axes":203,"../../registry":242,"../color":43,"../dragelement":61,"../drawing":64,"./constants":76,"./helpers":78,d3:8,"fast-isnumeric":10,tinycolor2:26}],80:[function(t,e,n){"use strict";var i=t("../../lib");e.exports=function(t,e,n,r){n("hoverlabel.bgcolor",(r=r||{}).bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),i.coerceFont(n,"hoverlabel.font",r.font)}},{"../../lib":159}],81:[function(t,e,n){"use strict";e.exports=function(t,e){t=t||{};var n=(e=e||{}).keys||[];if(n.length>0){for(var i=[],r=0;r<n.length;r++)i[r]="`"+n[r]+"`";1===n.length||(i.slice(0,-1).join(", "),i.slice(-1))}var a={valType:"string",dflt:"",editType:t.editType||"none"};return!1!==t.arrayOk&&(a.arrayOk=!0),a}},{}],82:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../lib"),a=t("../dragelement"),o=t("./helpers"),s=t("./layout_attributes"),l=t("./hover");e.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:s},attributes:t("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(t,e,n){return r.castOption(t,e,"hoverlabel."+n)},castHoverinfo:function(t,e,n){return r.castOption(t,n,"hoverinfo",function(n){return r.coerceHoverinfo({hoverinfo:n},{_module:t._module},e)})},hover:l.hover,unhover:a.unhover,loneHover:l.loneHover,multiHovers:l.multiHovers,loneUnhover:function(t){var e=r.isD3Selection(t)?t:i.select(t);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:t("./click")}},{"../../lib":159,"../dragelement":61,"./attributes":73,"./calc":74,"./click":75,"./constants":76,"./defaults":77,"./helpers":78,"./hover":79,"./layout_attributes":83,"./layout_defaults":84,"./layout_global_defaults":85,d3:8}],83:[function(t,e,n){"use strict";var i=t("./constants"),r=t("../../plots/font_attributes")({editType:"none"});r.family.dflt=i.HOVERFONT,r.size.dflt=i.HOVERFONTSIZE,e.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:r,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":229,"./constants":76}],84:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./layout_attributes");e.exports=function(t,e,n){function a(n,a){return i.coerce(t,e,r,n,a)}var o,s=a("clickmode");"select"===a("dragmode")&&a("selectdirection"),e._has("cartesian")?s.indexOf("select")>-1?o="closest":(e._isHoriz=function(t,e){for(var n=e._scatterStackOpts||{},i=0;i<t.length;i++){var r=t[i];if("h"!==r.orientation&&"h"!==((n[r.xaxis+r.yaxis]||{})[r.stackgroup]||{}).orientation)return!1}return!0}(n,e),o=e._isHoriz?"y":"x"):o="closest",a("hovermode",o)&&(a("hoverdistance"),a("spikedistance"));var l=e._has("mapbox"),c=e._has("geo"),u=e._basePlotModules.length;"zoom"===e.dragmode&&((l||c)&&1===u||l&&c&&2===u)&&(e.dragmode="pan")}},{"../../lib":159,"./layout_attributes":83}],85:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./hoverlabel_defaults"),a=t("./layout_attributes");e.exports=function(t,e){r(t,e,function(n,r){return i.coerce(t,e,a,n,r)})}},{"../../lib":159,"./hoverlabel_defaults":80,"./layout_attributes":83}],86:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../lib/regex").counter,a=t("../../plots/domain").attributes,o=t("../../plots/cartesian/constants").idRegex,s=t("../../plot_api/plot_template"),l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[r("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function c(t,e,n){var i=e[n+"axes"],r=Object.keys((t._splomAxes||{})[n]||{});return Array.isArray(i)?i:r.length?r:void 0}function u(t,e,n,i,r,a){var o=e(t+"gap",n),s=e("domain."+t);e(t+"side",i);for(var l=new Array(r),c=s[0],u=(s[1]-c)/(r-o),h=u*(1-o),d=0;d<r;d++){var f=c+u*d;l[a?r-1-d:d]=[f,f+h]}return l}function h(t,e,n,i,r){var a,o=new Array(n);function s(t,n){-1!==e.indexOf(n)&&void 0===i[n]?(o[t]=n,i[n]=t):o[t]=""}if(Array.isArray(t))for(a=0;a<n;a++)s(a,t[a]);else for(s(0,r),a=1;a<n;a++)s(a,r+(a+1));return o}e.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(t,e){var n=t.grid||{},r=c(e,n,"x"),a=c(e,n,"y");if(t.grid||r||a){var o,h,d=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),f=Array.isArray(r),p=Array.isArray(a),v=f&&r!==n.xaxes&&p&&a!==n.yaxes;d?(o=n.subplots.length,h=n.subplots[0].length):(p&&(o=a.length),f&&(h=r.length));var g=s.newContainer(e,"grid"),m=k("rows",o),y=k("columns",h);if(m*y>1){d||f||p||"independent"===k("pattern")&&(d=!0),g._hasSubplotGrid=d;var _,x,b="top to bottom"===k("roworder"),w=d?.3:.1;v&&e._splomGridDflt&&(_=e._splomGridDflt.xside,x=e._splomGridDflt.yside),g._domains={x:u("x",k,d?.2:.1,_,y),y:u("y",k,w,x,m,b)}}else delete e.grid}function k(t,e){return i.coerce(n,g,l,t,e)}},contentDefaults:function(t,e){var n=e.grid;if(n&&n._domains){var i,r,a,o,s,l,u,d=t.grid||{},f=e._subplots,p=n._hasSubplotGrid,v=n.rows,g=n.columns,m="independent"===n.pattern,y=n._axisMap={};if(p){var _=d.subplots||[];l=n.subplots=new Array(v);var x=1;for(i=0;i<v;i++){var b=l[i]=new Array(g),w=_[i]||[];for(r=0;r<g;r++)if(m?(s=1===x?"xy":"x"+x+"y"+x,x++):s=w[r],b[r]="",-1!==f.cartesian.indexOf(s)){if(u=s.indexOf("y"),a=s.slice(0,u),o=s.slice(u),void 0!==y[a]&&y[a]!==r||void 0!==y[o]&&y[o]!==i)continue;b[r]=s,y[a]=r,y[o]=i}}}else{var k=c(e,d,"x"),T=c(e,d,"y");n.xaxes=h(k,f.xaxis,g,y,"x"),n.yaxes=h(T,f.yaxis,v,y,"y")}var M=n._anchors={},A="top to bottom"===n.roworder;for(var C in y){var L,S,E,O=C.charAt(0),P=n[O+"side"];if(P.length<8)M[C]="free";else if("x"===O){if("t"===P.charAt(0)===A?(L=0,S=1,E=v):(L=v-1,S=-1,E=-1),p){var D=y[C];for(i=L;i!==E;i+=S)if((s=l[i][D])&&(u=s.indexOf("y"),s.slice(0,u)===C)){M[C]=s.slice(u);break}}else for(i=L;i!==E;i+=S)if(-1!==f.cartesian.indexOf(C+(o=n.yaxes[i]))){M[C]=o;break}}else if("l"===P.charAt(0)?(L=0,S=1,E=g):(L=g-1,S=-1,E=-1),p){var z=y[C];for(i=L;i!==E;i+=S)if((s=l[z][i])&&(u=s.indexOf("y"),s.slice(u)===C)){M[C]=s.slice(0,u);break}}else for(i=L;i!==E;i+=S)if(-1!==f.cartesian.indexOf((a=n.xaxes[i])+C)){M[C]=a;break}}}}}},{"../../lib":159,"../../lib/regex":174,"../../plot_api/plot_template":193,"../../plots/cartesian/constants":209,"../../plots/domain":228}],87:[function(t,e,n){"use strict";var i=t("../../plots/cartesian/constants"),r=t("../../plot_api/plot_template").templatedArray;e.exports=r("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":193,"../../plots/cartesian/constants":209}],88:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib/to_log_range");e.exports=function(t,e,n,a){e=e||{};var o="log"===n&&"linear"===e.type;if(o||"linear"===n&&"log"===e.type)for(var s,l,c=t._fullLayout.images,u=e._id.charAt(0),h=0;h<c.length;h++)if(l="images["+h+"].",(s=c[h])[u+"ref"]===e._id){var d=s[u],f=s["size"+u],p=null,v=null;if(o){p=r(d,e.range);var g=f/Math.pow(10,p)/2;v=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else v=(p=Math.pow(10,d))*(Math.pow(10,f/2)-Math.pow(10,-f/2));i(p)?i(v)||(v=null):(p=null,v=null),a(l+u,p),a(l+"size"+u,v)}}},{"../../lib/to_log_range":182,"fast-isnumeric":10}],89:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("./attributes");function s(t,e,n){function a(n,r){return i.coerce(t,e,o,n,r)}var s=a("source");if(!a("visible",!!s))return e;a("layer"),a("xanchor"),a("yanchor"),a("sizex"),a("sizey"),a("sizing"),a("opacity");for(var l={_fullLayout:n},c=["x","y"],u=0;u<2;u++){var h=c[u],d=r.coerceRef(t,e,l,h,"paper");"paper"!==d&&r.getFromId(l,d)._imgIndices.push(e._index),r.coercePosition(e,l,a,d,h,0)}return e}e.exports=function(t,e){a(t,e,{name:"images",handleItemDefaults:s})}},{"../../lib":159,"../../plots/array_container_defaults":199,"../../plots/cartesian/axes":203,"./attributes":87}],90:[function(t,e,n){"use strict";var i=t("d3"),r=t("../drawing"),a=t("../../plots/cartesian/axes"),o=t("../../constants/xmlns_namespaces");e.exports=function(t){var e,n,s=t._fullLayout,l=[],c={},u=[];for(n=0;n<s.images.length;n++){var h=s.images[n];if(h.visible)if("below"===h.layer&&"paper"!==h.xref&&"paper"!==h.yref){var d=s._plots[e=h.xref+h.yref];if(!d){u.push(h);continue}d.mainplot&&(e=d.mainplot.id),c[e]||(c[e]=[]),c[e].push(h)}else"above"===h.layer?l.push(h):u.push(h)}var f={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function p(e){var n=i.select(this);if(!this.img||this.img.src!==e.source){n.attr("xmlns",o.svg);var r=new Promise((function(t){var i=new Image;function r(){n.remove(),t()}this.img=i,i.setAttribute("crossOrigin","anonymous"),i.onerror=r,i.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var i=e.toDataURL("image/png");n.attr("xlink:href",i),t()},n.on("error",r),i.src=e.source}).bind(this));t._promises.push(r)}}function v(e){var n=i.select(this),o=a.getFromId(t,e.xref),l=a.getFromId(t,e.yref),c=s._size,u=o?Math.abs(o.l2p(e.sizex)-o.l2p(0)):e.sizex*c.w,h=l?Math.abs(l.l2p(e.sizey)-l.l2p(0)):e.sizey*c.h,d=u*f.x[e.xanchor].offset,p=h*f.y[e.yanchor].offset,v=f.x[e.xanchor].sizing+f.y[e.yanchor].sizing,g=(o?o.r2p(e.x)+o._offset:e.x*c.w+c.l)+d,m=(l?l.r2p(e.y)+l._offset:c.h-e.y*c.h+c.t)+p;switch(e.sizing){case"fill":v+=" slice";break;case"stretch":v="none"}n.attr({x:g,y:m,width:u,height:h,preserveAspectRatio:v,opacity:e.opacity});var y=(o?o._id:"")+(l?l._id:"");r.setClipUrl(n,y?"clip"+s._uid+y:null,t)}var g=s._imageLowerLayer.selectAll("image").data(u),m=s._imageUpperLayer.selectAll("image").data(l);g.enter().append("image"),m.enter().append("image"),g.exit().remove(),m.exit().remove(),g.each(function(t){p.bind(this)(t),v.bind(this)(t)}),m.each(function(t){p.bind(this)(t),v.bind(this)(t)});var y=Object.keys(s._plots);for(n=0;n<y.length;n++){var _=s._plots[e=y[n]];if(_.imagelayer){var x=_.imagelayer.selectAll("image").data(c[e]||[]);x.enter().append("image"),x.exit().remove(),x.each(function(t){p.bind(this)(t),v.bind(this)(t)})}}}},{"../../constants/xmlns_namespaces":141,"../../plots/cartesian/axes":203,"../drawing":64,d3:8}],91:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":213,"./attributes":87,"./convert_coords":88,"./defaults":89,"./draw":90}],92:[function(t,e,n){"use strict";var i=t("../../plots/font_attributes"),r=t("../color/attributes");e.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:i({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":229,"../color/attributes":42}],93:[function(t,e,n){"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,textOffsetX:40}},{}],94:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("../../lib"),a=t("../../plot_api/plot_template"),o=t("./attributes"),s=t("../../plots/layout_attributes"),l=t("./helpers");e.exports=function(t,e,n){for(var c,u,h,d,f=t.legend||{},p=0,v=!1,g="normal",m=0;m<n.length;m++){var y=n[m];y.visible&&((y.showlegend||y._dfltShowLegend)&&(p++,y.showlegend&&(v=!0,(i.traceIs(y,"pie")||!0===y._input.showlegend)&&p++)),(i.traceIs(y,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(y.fill))&&(g=l.isGrouped({traceorder:g})?"grouped+reversed":"reversed"),void 0!==y.legendgroup&&""!==y.legendgroup&&(g=l.isReversed({traceorder:g})?"reversed+grouped":"grouped"))}var _=r.coerce(t,e,s,"showlegend",v&&p>1);if(!1!==_||f.uirevision){var x=a.newContainer(e,"legend");if(w("uirevision",e.uirevision),!1!==_){if(w("bgcolor",e.paper_bgcolor),w("bordercolor"),w("borderwidth"),r.coerceFont(w,"font",e.font),w("orientation"),"h"===x.orientation){var b=t.xaxis;i.getComponentMethod("rangeslider","isVisible")(b)?(c=0,h="left",u=1.1,d="bottom"):(c=0,h="left",u=-.1,d="top")}w("traceorder",g),l.isGrouped(e.legend)&&w("tracegroupgap"),w("x",c),w("xanchor",h),w("y",u),w("yanchor",d),w("valign"),r.noneOrAll(f,x,["x","y"])}}function w(t,e){return r.coerce(f,x,o,t,e)}}},{"../../lib":159,"../../plot_api/plot_template":193,"../../plots/layout_attributes":233,"../../registry":242,"./attributes":92,"./helpers":98}],95:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../lib"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../lib/events"),l=t("../dragelement"),c=t("../drawing"),u=t("../color"),h=t("../../lib/svg_text_utils"),d=t("./handle_click"),f=t("./constants"),p=t("../../constants/interactions"),v=t("../../constants/alignment"),g=v.LINE_SPACING,m=v.FROM_TL,y=v.FROM_BR,_=t("./get_legend_data"),x=t("./style"),b=t("./helpers"),w=p.DBLCLICKDELAY;function k(t,e,n,i,r){var a=n.data()[0][0].trace,o={event:r,node:n.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:t.data,layout:t.layout,frames:t._transitionData._frames,config:t._context,fullData:t._fullData,fullLayout:t._fullLayout};a._group&&(o.group=a._group),"pie"===a.type&&(o.label=n.datum()[0].label),!1!==s.triggerHandler(t,"plotly_legendclick",o)&&(1===i?e._clickTimeout=setTimeout(function(){d(n,t,i)},w):2===i&&(e._clickTimeout&&clearTimeout(e._clickTimeout),t._legendMouseDownTime=0,!1!==s.triggerHandler(t,"plotly_legenddoubleclick",o)&&d(n,t,i)))}function T(t,e,n){var i=t.data()[0][0],a=e._fullLayout,s=i.trace,l=o.traceIs(s,"pie"),u=s.index,d=e._context.edits.legendText&&!l,p=l?i.label:s.name;a.meta&&(p=r.templateString(p,{meta:a.meta}));var v=r.ensureSingle(t,"text","legendtext");function m(n){h.convertToTspans(n,e,function(){!function(t,e){var n=t.data()[0][0];if(n.trace.showlegend){var i,r,a=t.select("g[class*=math-group]"),o=a.node(),s=e._fullLayout.legend.font.size*g;if(o){var l=c.bBox(o);r=l.width,c.setTranslate(a,0,(i=l.height)/4)}else{var u=t.select(".legendtext"),d=h.lineCount(u),p=u.node();i=s*d,r=p?c.bBox(p).width:0,h.positionText(u,f.textOffsetX,s*(.3+(1-d)/2))}n.lineHeight=s,n.height=Math.max(i,16)+3,n.width=r}else t.remove()}(t,e)})}v.attr("text-anchor","start").classed("user-select-none",!0).call(c.font,a.legend.font).text(d?M(p,n):p),h.positionText(v,f.textOffsetX,0),d?v.call(h.makeEditable,{gd:e,text:p}).call(m).on("edit",function(t){this.text(M(t,n)).call(m);var a=i.trace._fullInput||{},s={};if(o.hasTransform(a,"groupby")){var l=o.getTransformIndices(a,"groupby"),c=r.keyedContainer(a,"transforms["+l[l.length-1]+"].styles","target","value.name");c.set(i.trace._group,t),s=c.constructUpdate()}else s.name=t;return o.call("_guiRestyle",e,s,u)}):m(v)}function M(t,e){var n=Math.max(4,e);if(t&&t.trim().length>=n/2)return t;for(var i=n-(t=t||"").length;i>0;i--)t+=" ";return t}function A(t,e){var n,a=1,o=r.ensureSingle(t,"rect","legendtoggle",function(t){t.style("cursor","pointer").attr("pointer-events","all").call(u.fill,"rgba(0,0,0,0)")});o.on("mousedown",function(){(n=(new Date).getTime())-e._legendMouseDownTime<w?a+=1:(a=1,e._legendMouseDownTime=n)}),o.on("mouseup",function(){if(!e._dragged&&!e._editing){var n=e._fullLayout.legend;(new Date).getTime()-e._legendMouseDownTime>w&&(a=Math.max(a-1,1)),k(e,n,t,a,i.event)}})}function C(t,e,n){var r=t._fullLayout,a=r.legend,o=a.borderwidth,s=b.isGrouped(a),l=0;if(a._width=0,a._height=0,b.isVertical(a))s&&e.each(function(t,e){c.setTranslate(this,0,e*a.tracegroupgap)}),n.each(function(t){var e=t[0],n=e.height,i=e.width;c.setTranslate(this,o,5+o+a._height+n/2),a._height+=n,a._width=Math.max(a._width,i)}),a._width+=45+2*o,a._height+=10+2*o,s&&(a._height+=(a._lgroupsLength-1)*a.tracegroupgap),l=40;else if(s){for(var u=[a._width],h=e.data(),d=0,f=h.length;d<f;d++){var p=h[d].map(function(t){return t[0].width}),v=40+Math.max.apply(null,p);a._width+=a.tracegroupgap+v,u.push(a._width)}e.each(function(t,e){c.setTranslate(this,u[e],0)}),e.each(function(){var t=i.select(this).selectAll("g.traces"),e=0;t.each(function(t){var n=t[0].height;c.setTranslate(this,0,5+o+e+n/2),e+=n}),a._height=Math.max(a._height,e)}),a._height+=10+2*o,a._width+=2*o}else{var g=0,m=0,y=0,_=0,x=0,w=a.tracegroupgap||5;n.each(function(t){y=Math.max(40+t[0].width,y),x+=40+t[0].width+w});var k=r._size.w>o+x-w;n.each(function(t){var e=t[0],n=k?40+t[0].width:y;o+_+w+n>r._size.w&&(_=0,g+=m,a._height+=m,m=0),c.setTranslate(this,o+_,5+o+e.height/2+g),a._width+=w+n,_+=w+n,m=Math.max(e.height,m)}),k?a._height=m:a._height+=m,a._width+=2*o,a._height+=10+2*o}a._width=Math.ceil(a._width),a._height=Math.ceil(a._height);var T=t._context.edits.legendText||t._context.edits.legendPosition;n.each(function(t){var e=t[0],n=i.select(this).select(".legendtoggle");c.setRect(n,0,-e.height/2,(T?0:a._width)+l,e.height)})}function L(t){var e=t._fullLayout.legend,n="left";r.isRightAnchor(e)?n="right":r.isCenterAnchor(e)&&(n="center");var i="top";r.isBottomAnchor(e)?i="bottom":r.isMiddleAnchor(e)&&(i="middle"),a.autoMargin(t,"legend",{x:e.x,y:e.y,l:e._width*m[n],r:e._width*y[n],b:e._height*y[i],t:e._height*m[i]})}e.exports=function(t){var e=t._fullLayout,n="legend"+e._uid;if(e._infolayer&&t.calcdata){t._legendMouseDownTime||(t._legendMouseDownTime=0);var s=e.legend,h=e.showlegend&&_(t.calcdata,s),d=e.hiddenlabels||[];if(!e.showlegend||!h.length)return e._infolayer.selectAll(".legend").remove(),e._topdefs.select("#"+n).remove(),void a.autoMargin(t,"legend");for(var p=0,v=0;v<h.length;v++)for(var g=0;g<h[v].length;g++){var b=h[v][g][0],w=b.trace,M=o.traceIs(w,"pie")?b.label:w.name;p=Math.max(p,M&&M.length||0)}var S=!1,E=r.ensureSingle(e._infolayer,"g","legend",function(t){t.attr("pointer-events","all"),S=!0}),O=r.ensureSingleById(e._topdefs,"clipPath",n,function(t){t.append("rect")}),P=r.ensureSingle(E,"rect","bg",function(t){t.attr("shape-rendering","crispEdges")});P.call(u.stroke,s.bordercolor).call(u.fill,s.bgcolor).style("stroke-width",s.borderwidth+"px");var D=r.ensureSingle(E,"g","scrollbox"),z=r.ensureSingle(E,"rect","scrollbar",function(t){t.attr({rx:20,ry:3,width:0,height:0}).call(u.fill,"#808BA4")}),I=D.selectAll("g.groups").data(h);I.enter().append("g").attr("class","groups"),I.exit().remove();var R=I.selectAll("g.traces").data(r.identity);R.enter().append("g").attr("class","traces"),R.exit().remove(),R.style("opacity",function(t){var e=t[0].trace;return o.traceIs(e,"pie")?-1!==d.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1}).each(function(){i.select(this).call(T,t,p)}).call(x,t).each(function(){i.select(this).call(A,t)}),r.syncOrAsync([a.previousPromises,function(){S&&(C(t,I,R),L(t));var u=e.width,h=e.height;C(t,I,R),s._height>h?function(t){var e=t._fullLayout.legend,n="left";r.isRightAnchor(e)?n="right":r.isCenterAnchor(e)&&(n="center"),a.autoMargin(t,"legend",{x:e.x,y:.5,l:e._width*m[n],r:e._width*y[n],b:0,t:0})}(t):L(t);var d=e._size,p=d.l+d.w*s.x,v=d.t+d.h*(1-s.y);r.isRightAnchor(s)?p-=s._width:r.isCenterAnchor(s)&&(p-=s._width/2),r.isBottomAnchor(s)?v-=s._height:r.isMiddleAnchor(s)&&(v-=s._height/2);var g=s._width,_=d.w;g>_?(p=d.l,g=_):(p+g>u&&(p=u-g),p<0&&(p=0),g=Math.min(u-p,s._width));var x,b,w,T,M=s._height,A=d.h;if(M>A?(v=d.t,M=A):(v+M>h&&(v=h-M),v<0&&(v=0),M=Math.min(h-v,s._height)),c.setTranslate(E,p,v),z.on(".drag",null),E.on("wheel",null),s._height<=M||t._context.staticPlot)P.attr({width:g-s.borderwidth,height:M-s.borderwidth,x:s.borderwidth/2,y:s.borderwidth/2}),c.setTranslate(D,0,0),O.select("rect").attr({width:g-2*s.borderwidth,height:M-2*s.borderwidth,x:s.borderwidth,y:s.borderwidth}),c.setClipUrl(D,n,t),c.setRect(z,0,0,0,0),delete s._scrollY;else{var B,N,F=Math.max(f.scrollBarMinHeight,M*M/s._height),j=M-F-2*f.scrollBarMargin,H=s._height-M,$=j/H,q=Math.min(s._scrollY||0,H);P.attr({width:g-2*s.borderwidth+f.scrollBarWidth+f.scrollBarMargin,height:M-s.borderwidth,x:s.borderwidth/2,y:s.borderwidth/2}),O.select("rect").attr({width:g-2*s.borderwidth+f.scrollBarWidth+f.scrollBarMargin,height:M-2*s.borderwidth,x:s.borderwidth,y:s.borderwidth+q}),c.setClipUrl(D,n,t),V(q,F,$),E.on("wheel",function(){V(q=r.constrain(s._scrollY+i.event.deltaY/j*H,0,H),F,$),0!==q&&q!==H&&i.event.preventDefault()});var Z=i.behavior.drag().on("dragstart",function(){B=i.event.sourceEvent.clientY,N=q}).on("drag",function(){var t=i.event.sourceEvent;2===t.buttons||t.ctrlKey||V(q=r.constrain((t.clientY-B)/$+N,0,H),F,$)});z.call(Z)}function V(e,n,i){s._scrollY=t._fullLayout.legend._scrollY=e,c.setTranslate(D,0,-e),c.setRect(z,g,f.scrollBarMargin+e*i,f.scrollBarWidth,n),O.select("rect").attr({y:s.borderwidth+e})}t._context.edits.legendPosition&&(E.classed("cursor-move",!0),l.init({element:E.node(),gd:t,prepFn:function(){var t=c.getTranslate(E);w=t.x,T=t.y},moveFn:function(t,e){var n=w+t,i=T+e;c.setTranslate(E,n,i),x=l.align(n,0,d.l,d.l+d.w,s.xanchor),b=l.align(i,0,d.t+d.h,d.t,s.yanchor)},doneFn:function(){void 0!==x&&void 0!==b&&o.call("_guiRelayout",t,{"legend.x":x,"legend.y":b})},clickFn:function(n,i){var r=e._infolayer.selectAll("g.traces").filter(function(){var t=this.getBoundingClientRect();return i.clientX>=t.left&&i.clientX<=t.right&&i.clientY>=t.top&&i.clientY<=t.bottom});r.size()>0&&k(t,E,r,n,i)}}))}],t)}}},{"../../constants/alignment":138,"../../constants/interactions":139,"../../lib":159,"../../lib/events":152,"../../lib/svg_text_utils":180,"../../plots/plots":235,"../../registry":242,"../color":43,"../dragelement":61,"../drawing":64,"./constants":93,"./get_legend_data":96,"./handle_click":97,"./helpers":98,"./style":100,d3:8}],96:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("./helpers");e.exports=function(t,e){var n,a,o={},s=[],l=!1,c={},u=0;function h(t,n){if(""!==t&&r.isGrouped(e))-1===s.indexOf(t)?(s.push(t),l=!0,o[t]=[[n]]):o[t].push([n]);else{var i="~~i"+u;s.push(i),o[i]=[[n]],u++}}for(n=0;n<t.length;n++){var d=t[n],f=d[0],p=f.trace,v=p.legendgroup;if(p.visible&&p.showlegend)if(i.traceIs(p,"pie"))for(c[v]||(c[v]={}),a=0;a<d.length;a++){var g=d[a].label;c[v][g]||(h(v,{label:g,color:d[a].color,i:d[a].i,trace:p,pts:d[a].pts}),c[v][g]=!0)}else h(v,f)}if(!s.length)return[];var m,y,_=s.length;if(l&&r.isGrouped(e))for(y=new Array(_),n=0;n<_;n++)m=o[s[n]],y[n]=r.isReversed(e)?m.reverse():m;else{for(y=[new Array(_)],n=0;n<_;n++)m=o[s[n]][0],y[0][r.isReversed(e)?_-n-1:n]=m;_=1}return e._lgroupsLength=_,y}},{"../../registry":242,"./helpers":98}],97:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../registry"),a=!0;e.exports=function(t,e,n){if(!e._dragged&&!e._editing){var o,s,l,c,u,h=e._fullLayout.hiddenlabels?e._fullLayout.hiddenlabels.slice():[],d=t.data()[0][0],f=e._fullData,p=d.trace,v=p.legendgroup,g={},m=[],y=[],_=[];if(1===n&&a&&e.data&&e._context.showTips?(i.notifier(i._(e,"Double-click on legend to isolate one trace"),"long"),a=!1):a=!1,r.traceIs(p,"pie")){var x=d.label,b=h.indexOf(x);1===n?-1===b?h.push(x):h.splice(b,1):2===n&&(h=[],e.calcdata[0].forEach(function(t){x!==t.label&&h.push(t.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===h.length&&-1===b&&(h=[])),r.call("_guiRelayout",e,"hiddenlabels",h)}else{var w,k=v&&v.length,T=[];if(k)for(o=0;o<f.length;o++)(w=f[o]).visible&&w.legendgroup===v&&T.push(o);if(1===n){var M;switch(p.visible){case!0:M="legendonly";break;case!1:M=!1;break;case"legendonly":M=!0}if(k)for(o=0;o<f.length;o++)!1!==f[o].visible&&f[o].legendgroup===v&&E(f[o],M);else E(p,M)}else if(2===n){var A=!0;for(o=0;o<f.length;o++)if(!(f[o]===p||k&&f[o].legendgroup===v||!0!==f[o].visible||r.traceIs(f[o],"notLegendIsolatable"))){A=!1;break}for(o=0;o<f.length;o++)if(!1!==f[o].visible&&!r.traceIs(f[o],"notLegendIsolatable"))switch(p.visible){case"legendonly":E(f[o],!0);break;case!0:E(f[o],!!(f[o]===p||k&&f[o].legendgroup===v)||!!A||"legendonly")}}for(o=0;o<y.length;o++)if(l=y[o]){var C=l.constructUpdate(),L=Object.keys(C);for(s=0;s<L.length;s++)(g[c=L[s]]=g[c]||[])[_[o]]=C[c]}for(u=Object.keys(g),o=0;o<u.length;o++)for(c=u[o],s=0;s<m.length;s++)g[c].hasOwnProperty(s)||(g[c][s]=void 0);r.call("_guiRestyle",e,g,m)}}function S(t,e,n){var i=m.indexOf(t),r=g[e];return r||(r=g[e]=[]),-1===m.indexOf(t)&&(m.push(t),i=m.length-1),r[i]=n,i}function E(t,e){var n=t._fullInput;if(r.hasTransform(n,"groupby")){var a=y[n.index];if(!a){var o=r.getTransformIndices(n,"groupby");a=i.keyedContainer(n,"transforms["+o[o.length-1]+"].styles","target","value.visible"),y[n.index]=a}var s=a.get(t._group);void 0===s&&(s=!0),!1!==s&&a.set(t._group,e),_[n.index]=S(n.index,"visible",!1!==n.visible)}else S(n.index,"visible",!1!==n.visible&&e)}}},{"../../lib":159,"../../registry":242}],98:[function(t,e,n){"use strict";n.isGrouped=function(t){return-1!==(t.traceorder||"").indexOf("grouped")},n.isVertical=function(t){return"h"!==t.orientation},n.isReversed=function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},{}],99:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":92,"./defaults":94,"./draw":95,"./style":100}],100:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../registry"),a=t("../../lib"),o=t("../drawing"),s=t("../color"),l=t("../../traces/scatter/subtypes"),c=t("../../traces/pie/style_one");e.exports=function(t,e){t.each(function(t){var n=i.select(this),r=a.ensureSingle(n,"g","layers");r.style("opacity",t[0].trace.opacity);var o=e._fullLayout.legend.valign,s=t[0].lineHeight,l=t[0].height;r.attr("transform","middle"!==o&&s&&l?"translate(0,"+{top:1,bottom:-1}[o]*(.5*(s-l+3))+")":null),r.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0),r.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",!0);var c=r.selectAll("g.legendsymbols").data([t]);c.enter().append("g").classed("legendsymbols",!0),c.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)}).each(function(t){var e=t[0].trace,n=e.marker||{},a=n.line||{},o=i.select(this).select("g.legendpoints").selectAll("path.legendbar").data(r.traceIs(e,"bar")?[t]:[]);o.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),o.exit().remove(),o.each(function(t){var e=i.select(this),r=t[0],o=(r.mlw+1||a.width+1)-1;e.style("stroke-width",o+"px").call(s.fill,r.mc||n.color),o&&e.call(s.stroke,r.mlc||a.color)})}).each(function(t){var e=t[0].trace,n=i.select(this).select("g.legendpoints").selectAll("path.legendbox").data(r.traceIs(e,"box-violin")&&e.visible?[t]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(){var t=e.line.width,n=i.select(this);n.style("stroke-width",t+"px").call(s.fill,e.fillcolor),t&&s.stroke(n,e.line.color)})}).each(function(t){var e=t[0].trace,n=i.select(this).select("g.legendpoints").selectAll("path.legendpie").data(r.traceIs(e,"pie")&&e.visible?[t]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(c,t[0],e)}).each(function(t){var n=t[0].trace,r=n.visible&&n.fill&&"none"!==n.fill,a=l.hasLines(n),s=n.contours,c=!1,u=!1;if(s){var h=s.coloring;"lines"===h?c=!0:a="none"===h||"heatmap"===h||s.showlines,"constraint"===s.type?r="="!==s._operation:"fill"!==h&&"heatmap"!==h||(u=!0)}var d=l.hasMarkers(n)||l.hasText(n)||!r&&!u?"M5,0":a||c?"M5,-2":"M5,-3",f=i.select(this),p=f.select(".legendfill").selectAll("path").data(r||u?[t]:[]);p.enter().append("path").classed("js-fill",!0),p.exit().remove(),p.attr("d",d+"h30v6h-30z").call(r?o.fillGroupStyle:function(t){t.size()&&o.gradient(t,e,"legendfill-"+n.uid,"horizontalreversed",n.colorscale,"fill")});var v=f.select(".legendlines").selectAll("path").data(a||c?[t]:[]);v.enter().append("path").classed("js-line",!0),v.exit().remove(),v.attr("d",d+(c?"l30,0.0001":"h30")).call(a?o.lineGroupStyle:function(t){if(t.size()){var i="legendline-"+n.uid;o.lineGroupStyle(t),o.gradient(t,e,i,"horizontalreversed",n.colorscale,"stroke")}})}).each(function(t){var n,r,s=t[0],c=s.trace,u=l.hasMarkers(c),h=l.hasText(c),d=l.hasLines(c);function f(t,e,n){var i=a.nestedProperty(c,t).get(),r=a.isArrayOrTypedArray(i)&&e?e(i):i;if(n){if(r<n[0])return n[0];if(r>n[1])return n[1]}return r}function p(t){return t[0]}if(u||h||d){var v={},g={};if(u){v.mc=f("marker.color",p),v.mx=f("marker.symbol",p),v.mo=f("marker.opacity",a.mean,[.2,1]),v.mlc=f("marker.line.color",p),v.mlw=f("marker.line.width",a.mean,[0,5]),g.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var m=f("marker.size",a.mean,[2,16]);v.ms=m,g.marker.size=m}d&&(g.line={width:f("line.width",p,[0,10])}),h&&(v.tx="Aa",v.tp=f("textposition",p),v.ts=10,v.tc=f("textfont.color",p),v.tf=f("textfont.family",p)),n=[a.minExtend(s,v)],(r=a.minExtend(c,g)).selectedpoints=null}var y=i.select(this).select("g.legendpoints"),_=y.selectAll("path.scatterpts").data(u?n:[]);_.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)"),_.exit().remove(),_.call(o.pointStyle,r,e),u&&(n[0].mrc=3);var x=y.selectAll("g.pointtext").data(h?n:[]);x.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),x.exit().remove(),x.selectAll("text").call(o.textPointStyle,r,e)}).each(function(t){var e=t[0].trace,n=i.select(this).select("g.legendpoints").selectAll("path.legendcandle").data("candlestick"===e.type&&e.visible?[t,t]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",function(t,e){return e?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),n.exit().remove(),n.each(function(t,n){var r=e[n?"increasing":"decreasing"],a=r.line.width,o=i.select(this);o.style("stroke-width",a+"px").call(s.fill,r.fillcolor),a&&s.stroke(o,r.line.color)})}).each(function(t){var e=t[0].trace,n=i.select(this).select("g.legendpoints").selectAll("path.legendohlc").data("ohlc"===e.type&&e.visible?[t,t]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",function(t,e){return e?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),n.exit().remove(),n.each(function(t,n){var r=e[n?"increasing":"decreasing"],a=r.line.width,l=i.select(this);l.style("fill","none").call(o.dashLine,r.line.dash,a),a&&s.stroke(l,r.line.color)})})}},{"../../lib":159,"../../registry":242,"../../traces/pie/style_one":278,"../../traces/scatter/subtypes":304,"../color":43,"../drawing":64,d3:8}],101:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("../../plots/plots"),a=t("../../plots/cartesian/axis_ids"),o=t("../../lib"),s=t("../../../build/ploticon"),l=o._,c=e.exports={};function u(t,e){var n,r,o=e.currentTarget,s=o.getAttribute("data-attr"),l=o.getAttribute("data-val")||!0,c=t._fullLayout,u={},h=a.list(t,null,!0),d="on";if("zoom"===s){var f,p="in"===l?.5:2,v=(1+p)/2,g=(1-p)/2;for(r=0;r<h.length;r++)if(!(n=h[r]).fixedrange)if(f=n._name,"auto"===l)u[f+".autorange"]=!0;else if("reset"===l){if(void 0===n._rangeInitial)u[f+".autorange"]=!0;else{var m=n._rangeInitial.slice();u[f+".range[0]"]=m[0],u[f+".range[1]"]=m[1]}void 0!==n._showSpikeInitial&&(u[f+".showspikes"]=n._showSpikeInitial,"on"!==d||n._showSpikeInitial||(d="off"))}else{var y=[n.r2l(n.range[0]),n.r2l(n.range[1])],_=[v*y[0]+g*y[1],v*y[1]+g*y[0]];u[f+".range[0]"]=n.l2r(_[0]),u[f+".range[1]"]=n.l2r(_[1])}c._cartesianSpikesEnabled=d}else{if("hovermode"!==s||"x"!==l&&"y"!==l){if("hovermode"===s&&"closest"===l){for(r=0;r<h.length;r++)n=h[r],"on"!==d||n.showspikes||(d="off");c._cartesianSpikesEnabled=d}}else o.setAttribute("data-val",l=c._isHoriz?"y":"x");u[s]=l}i.call("_guiRelayout",t,u)}function h(t,e){for(var n=e.currentTarget,r=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=t._fullLayout._subplots.gl3d,s={},l=r.split("."),c=0;c<o.length;c++)s[o[c]+"."+l[1]]=a;s.dragmode="pan"===a?a:"zoom",i.call("_guiRelayout",t,s)}function d(t,e){for(var n=e.currentTarget.getAttribute("data-attr"),r=t._fullLayout,a=r._subplots.gl3d,o={},s=0;s<a.length;s++){var l=a[s],c=l+".camera",u=r[l]._scene;"resetLastSave"===n?(o[c+".up"]=u.viewInitial.up,o[c+".eye"]=u.viewInitial.eye,o[c+".center"]=u.viewInitial.center):"resetDefault"===n&&(o[c+".up"]=null,o[c+".eye"]=null,o[c+".center"]=null)}i.call("_guiRelayout",t,o)}function f(t,e){var n=e.currentTarget,i=n._previousVal,r=t._fullLayout,a=r._subplots.gl3d,o=["xaxis","yaxis","zaxis"],s={},l={};if(i)l=i,n._previousVal=null;else{for(var c=0;c<a.length;c++){var u=a[c],h=r[u],d=u+".hovermode";s[d]=h.hovermode,l[d]=!1;for(var f=0;f<3;f++){var p=o[f],v=u+"."+p+".showspikes";l[v]=!1,s[v]=h[p].showspikes}}n._previousVal=s}return l}function p(t,e){for(var n=e.currentTarget,r=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=t._fullLayout,s=o._subplots.geo,l=0;l<s.length;l++){var c=s[l];if("zoom"===r){var u=o[c].projection.scale;i.call("_guiRelayout",t,c+".projection.scale","in"===a?2*u:.5*u)}else"reset"===r&&m(t,"geo")}}function v(t){var e=t._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function g(t){var e=v(t);i.call("_guiRelayout",t,"hovermode",e)}function m(t,e){for(var n=t._fullLayout,r=n._subplots[e],a={},o=0;o<r.length;o++)for(var s=r[o],l=n[s]._subplot.viewInitial,c=Object.keys(l),u=0;u<c.length;u++){var h=c[u];a[s+"."+h]=l[h]}i.call("_guiRelayout",t,a)}c.toImage={name:"toImage",title:function(t){return l(t,"png"===((t._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:s.camera,click:function(t){var e=t._context.toImageButtonOptions,n={format:e.format||"png"};o.notifier(l(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&o.isIE()&&(o.notifier(l(t,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach(function(t){e[t]&&(n[t]=e[t])}),i.call("downloadImage",t,n).then(function(e){o.notifier(l(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(l(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},c.sendDataToCloud={name:"sendDataToCloud",title:function(t){return l(t,"Edit in Chart Studio")},icon:s.disk,click:function(t){r.sendDataToCloud(t)}},c.zoom2d={name:"zoom2d",title:function(t){return l(t,"Zoom")},attr:"dragmode",val:"zoom",icon:s.zoombox,click:u},c.pan2d={name:"pan2d",title:function(t){return l(t,"Pan")},attr:"dragmode",val:"pan",icon:s.pan,click:u},c.select2d={name:"select2d",title:function(t){return l(t,"Box Select")},attr:"dragmode",val:"select",icon:s.selectbox,click:u},c.lasso2d={name:"lasso2d",title:function(t){return l(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:s.lasso,click:u},c.zoomIn2d={name:"zoomIn2d",title:function(t){return l(t,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:u},c.zoomOut2d={name:"zoomOut2d",title:function(t){return l(t,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:u},c.autoScale2d={name:"autoScale2d",title:function(t){return l(t,"Autoscale")},attr:"zoom",val:"auto",icon:s.autoscale,click:u},c.resetScale2d={name:"resetScale2d",title:function(t){return l(t,"Reset axes")},attr:"zoom",val:"reset",icon:s.home,click:u},c.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(t){return l(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:u},c.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(t){return l(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:s.tooltip_compare,gravity:"ne",click:u},c.zoom3d={name:"zoom3d",title:function(t){return l(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:s.zoombox,click:h},c.pan3d={name:"pan3d",title:function(t){return l(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:s.pan,click:h},c.orbitRotation={name:"orbitRotation",title:function(t){return l(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:s["3d_rotate"],click:h},c.tableRotation={name:"tableRotation",title:function(t){return l(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:s["z-axis"],click:h},c.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(t){return l(t,"Reset camera to default")},attr:"resetDefault",icon:s.home,click:d},c.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(t){return l(t,"Reset camera to last save")},attr:"resetLastSave",icon:s.movie,click:d},c.hoverClosest3d={name:"hoverClosest3d",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:function(t,e){var n=f(t,e);i.call("_guiRelayout",t,n)}},c.zoomInGeo={name:"zoomInGeo",title:function(t){return l(t,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:p},c.zoomOutGeo={name:"zoomOutGeo",title:function(t){return l(t,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:p},c.resetGeo={name:"resetGeo",title:function(t){return l(t,"Reset")},attr:"reset",val:null,icon:s.autoscale,click:p},c.hoverClosestGeo={name:"hoverClosestGeo",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:g},c.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:g},c.hoverClosestPie={name:"hoverClosestPie",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:g},c.toggleHover={name:"toggleHover",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:function(t,e){var n=f(t,e);n.hovermode=v(t),i.call("_guiRelayout",t,n)}},c.resetViews={name:"resetViews",title:function(t){return l(t,"Reset views")},icon:s.home,click:function(t,e){var n=e.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),u(t,e),n.setAttribute("data-attr","resetLastSave"),d(t,e),m(t,"geo"),m(t,"mapbox")}},c.toggleSpikelines={name:"toggleSpikelines",title:function(t){return l(t,"Toggle Spike Lines")},icon:s.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout;e._cartesianSpikesEnabled="on"===e._cartesianSpikesEnabled?"off":"on";var n=function(t){for(var e,n=t._fullLayout,i=a.list(t,null,!0),r={},o=0;o<i.length;o++)r[(e=i[o])._name+".showspikes"]="on"===n._cartesianSpikesEnabled||e._showSpikeInitial;return r}(t);i.call("_guiRelayout",t,n)}},c.resetViewMapbox={name:"resetViewMapbox",title:function(t){return l(t,"Reset view")},attr:"reset",icon:s.home,click:function(t){m(t,"mapbox")}}},{"../../../build/ploticon":2,"../../lib":159,"../../plots/cartesian/axis_ids":206,"../../plots/plots":235,"../../registry":242}],102:[function(t,e,n){"use strict";n.manage=t("./manage")},{"./manage":103}],103:[function(t,e,n){"use strict";var i=t("../../plots/cartesian/axis_ids"),r=t("../../traces/scatter/subtypes"),a=t("../../registry"),o=t("./modebar"),s=t("./buttons");e.exports=function(t){var e=t._fullLayout,n=t._context,l=e._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var c,u=n.modeBarButtons;c=Array.isArray(u)&&u.length?function(t){for(var e=0;e<t.length;e++)for(var n=t[e],i=0;i<n.length;i++){var r=n[i];if("string"==typeof r){if(void 0===s[r])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][i]=s[r]}}return t}(u):!n.displayModeBar&&n.watermark?[]:function(t,e,n,o){var l=t._fullLayout,c=t._fullData,u=l._has("cartesian"),h=l._has("gl3d"),d=l._has("geo"),f=l._has("pie"),p=l._has("gl2d"),v=l._has("ternary"),g=l._has("mapbox"),m=l._has("polar"),y=function(t){for(var e=i.list({_fullLayout:l},null,!0),n=0;n<e.length;n++)if(!e[n].fixedrange)return!1;return!0}(),_=[];function x(t){if(t.length){for(var n=[],i=0;i<t.length;i++){var r=t[i];-1===e.indexOf(r)&&n.push(s[r])}_.push(n)}}var b=["toImage"];o&&b.push("sendDataToCloud"),x(b);var w=[],k=[],T=[],M=[];return(u||p||f||v)+d+h+g+m>1?(k=["toggleHover"],T=["resetViews"]):d?(w=["zoomInGeo","zoomOutGeo"],k=["hoverClosestGeo"],T=["resetGeo"]):h?(k=["hoverClosest3d"],T=["resetCameraDefault3d","resetCameraLastSave3d"]):g?(k=["toggleHover"],T=["resetViewMapbox"]):k=p?["hoverClosestGl2d"]:f?["hoverClosestPie"]:["toggleHover"],u&&(k=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),!u&&!p||y||(w=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==T[0]&&(T=["resetScale2d"])),h?M=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||p)&&!y||v?M=["zoom2d","pan2d"]:g||d?M=["pan2d"]:m&&(M=["zoom2d"]),function(t){for(var e=!1,n=0;n<t.length&&!e;n++){var i=t[n];i._module&&i._module.selectPoints&&(a.traceIs(i,"scatter-like")?(r.hasMarkers(i)||r.hasText(i))&&(e=!0):a.traceIs(i,"box-violin")&&"all"!==i.boxpoints&&"all"!==i.points||(e=!0))}return e}(c)&&M.push("select2d","lasso2d"),x(M),x(w.concat(T)),x(k),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t}(_,n)}(t,n.modeBarButtonsToRemove,n.modeBarButtonsToAdd,n.showSendToCloud),l?l.update(t,c):e._modeBar=o(t,c)}else l&&(l.destroy(),delete e._modeBar)}},{"../../plots/cartesian/axis_ids":206,"../../registry":242,"../../traces/scatter/subtypes":304,"./buttons":101,"./modebar":104}],104:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("../../lib"),o=t("../../../build/ploticon"),s=new DOMParser;function l(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var c=l.prototype;c.update=function(t,e){this.graphInfo=t;var n=this.graphInfo._context,i=this.graphInfo._fullLayout,r="modebar-"+i._uid;this.element.setAttribute("id",r),this._uid=r,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===i.modebar.orientation&&(this.element.className+=" vertical",e=e.reverse());var o=i.modebar,s="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";a.deleteRelatedStyleRule(r),a.addRelatedStyleRule(r,s+"#"+r+" .modebar-group","background-color: "+o.bgcolor),a.addRelatedStyleRule(r,"#"+r+" .modebar-btn .icon path","fill: "+o.color),a.addRelatedStyleRule(r,"#"+r+" .modebar-btn:hover .icon path","fill: "+o.activecolor),a.addRelatedStyleRule(r,"#"+r+" .modebar-btn.active .icon path","fill: "+o.activecolor);var l=!this.hasButtons(e),c=this.hasLogo!==n.displaylogo,u=this.locale!==n.locale;if(this.locale=n.locale,(l||c||u)&&(this.removeAllButtons(),this.updateButtons(e),n.watermark||n.displaylogo)){var h=this.getLogo();n.watermark&&(h.className=h.className+" watermark"),"v"===i.modebar.orientation?this.element.insertBefore(h,this.element.childNodes[0]):this.element.appendChild(h),this.hasLogo=!0}this.updateActiveButton()},c.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(t){var n=e.createGroup();t.forEach(function(t){var i=t.name;if(!i)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(i))throw new Error("button name '"+i+"' is taken");e.buttonsNames.push(i);var r=e.createButton(t);e.buttonElements.push(r),n.appendChild(r)}),e.element.appendChild(n)})},c.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},c.createButton=function(t){var e=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var r=t.title;void 0===r?r=t.name:"function"==typeof r&&(r=r(this.graphInfo)),(r||0===r)&&n.setAttribute("data-title",r),void 0!==t.attr&&n.setAttribute("data-attr",t.attr);var a=t.val;if(void 0!==a&&("function"==typeof a&&(a=a(this.graphInfo)),n.setAttribute("data-val",a)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(n){t.click(e.graphInfo,n),e.updateActiveButton(n.currentTarget)}),n.setAttribute("data-toggle",t.toggle||!1),t.toggle&&i.select(n).classed("active",!0);var s=t.icon;return n.appendChild("function"==typeof s?s():this.createIcon(s||o.question)),n.setAttribute("data-gravity",t.gravity||"n"),n},c.createIcon=function(t){var e,n=r(t.height)?Number(t.height):t.ascent-t.descent,i="http://www.w3.org/2000/svg";if(t.path){(e=document.createElementNS(i,"svg")).setAttribute("viewBox",[0,0,t.width,n].join(" ")),e.setAttribute("class","icon");var a=document.createElementNS(i,"path");a.setAttribute("d",t.path),t.transform?a.setAttribute("transform",t.transform):void 0!==t.ascent&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),e.appendChild(a)}return t.svg&&(e=s.parseFromString(t.svg,"application/xml").childNodes[0]),e.setAttribute("height","1em"),e.setAttribute("width","1em"),e},c.updateActiveButton=function(t){var e=this.graphInfo._fullLayout,n=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(t){var r=t.getAttribute("data-val")||!0,o=t.getAttribute("data-attr"),s="true"===t.getAttribute("data-toggle"),l=i.select(t);if(s)o===n&&l.classed("active",!l.classed("active"));else{var c=null===o?o:a.nestedProperty(e,o).get();l.classed("active",c===r)}})},c.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n){if(t[n].length!==e[n].length)return!1;for(var i=0;i<t[n].length;i++)if(t[n][i].name!==e[n][i].name)return!1}return!0},c.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plot.ly/",e.target="_blank",e.setAttribute("data-title",a._(this.graphInfo,"Produced with Plotly")),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(o.newplotlylogo)),t.appendChild(e),t},c.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},c.destroy=function(){a.removeElement(this.container.querySelector(".modebar")),a.deleteRelatedStyleRule(this._uid)},e.exports=function(t,e){var n=t._fullLayout,r=new l({graphInfo:t,container:n._modebardiv.node(),buttons:e});return n._privateplot&&i.select(r.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),r}},{"../../../build/ploticon":2,"../../lib":159,d3:8,"fast-isnumeric":10}],105:[function(t,e,n){"use strict";var i=t("../../plots/font_attributes"),r=t("../color/attributes"),a=(0,t("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});e.exports={visible:{valType:"boolean",editType:"plot"},buttons:a,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:i({editType:"plot"}),bgcolor:{valType:"color",dflt:r.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":193,"../../plots/font_attributes":229,"../color/attributes":42}],106:[function(t,e,n){"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],107:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../color"),a=t("../../plot_api/plot_template"),o=t("../../plots/array_container_defaults"),s=t("./attributes"),l=t("./constants");function c(t,e,n,r){var a=r.calendar;function o(n,r){return i.coerce(t,e,s.buttons,n,r)}if(o("visible")){var l=o("step");"all"!==l&&(!a||"gregorian"===a||"month"!==l&&"year"!==l?o("stepmode"):e.stepmode="backward",o("count")),o("label")}}e.exports=function(t,e,n,u,h){var d=t.rangeselector||{},f=a.newContainer(e,"rangeselector");function p(t,e){return i.coerce(d,f,s,t,e)}if(p("visible",o(d,f,{name:"buttons",handleItemDefaults:c,calendar:h}).length>0)){var v=function(t,e,n){for(var i=u.filter(function(n){return e[n].anchor===t._id}),r=0,a=0;a<i.length;a++){var o=e[i[a]].domain;o&&(r=Math.max(o[1],r))}return[t.domain[0],r+l.yPad]}(e,n);p("x",v[0]),p("y",v[1]),i.noneOrAll(t,e,["x","y"]),p("xanchor"),p("yanchor"),i.coerceFont(p,"font",n.font);var g=p("bgcolor");p("activecolor",r.contrast(g,l.lightAmount,l.darkAmount)),p("bordercolor"),p("borderwidth")}}},{"../../lib":159,"../../plot_api/plot_template":193,"../../plots/array_container_defaults":199,"../color":43,"./attributes":105,"./constants":106}],108:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../registry"),a=t("../../plots/plots"),o=t("../color"),s=t("../drawing"),l=t("../../lib"),c=t("../../lib/svg_text_utils"),u=t("../../plots/cartesian/axis_ids"),h=t("../../constants/alignment"),d=h.LINE_SPACING,f=h.FROM_TL,p=h.FROM_BR,v=t("./constants"),g=t("./get_update_object");function m(t){return t._id}function y(t,e,n){var i=l.ensureSingle(t,"rect","selector-rect",function(t){t.attr("shape-rendering","crispEdges")});i.attr({rx:v.rx,ry:v.ry}),i.call(o.stroke,e.bordercolor).call(o.fill,function(t,e){return n._isActive||n._isHovered?t.activecolor:t.bgcolor}(e)).style("stroke-width",e.borderwidth+"px")}function _(t,e,n,i){l.ensureSingle(t,"text","selector-text",function(t){t.classed("user-select-none",!0).attr("text-anchor","middle")}).call(s.font,e.font).text(function(t,e){return t.label?e?l.templateString(t.label,{meta:e}):t.label:"all"===t.step?"all":t.count+t.step.charAt(0)}(n,i._fullLayout.meta)).call(function(t){c.convertToTspans(t,i)})}e.exports=function(t){var e=t._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=u.list(t,"x",!0),n=[],i=0;i<e.length;i++){var r=e[i];r.rangeselector&&r.rangeselector.visible&&n.push(r)}return n}(t),m);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var n=i.select(this),o=e,u=o.rangeselector,h=n.selectAll("g.button").data(l.filterVisible(u.buttons));h.enter().append("g").classed("button",!0),h.exit().remove(),h.each(function(e){var n=i.select(this),a=g(o,e);e._isActive=function(t,e,n){if("all"===e.step)return!0===t.autorange;var i=Object.keys(n);return t.range[0]===n[i[0]]&&t.range[1]===n[i[1]]}(o,e,a),n.call(y,u,e),n.call(_,u,e,t),n.on("click",function(){t._dragged||r.call("_guiRelayout",t,a)}),n.on("mouseover",function(){e._isHovered=!0,n.call(y,u,e)}),n.on("mouseout",function(){e._isHovered=!1,n.call(y,u,e)})}),function(t,e,n,r,o){var u=0,h=0,g=n.borderwidth;e.each(function(){var t=i.select(this).select(".selector-text"),e=Math.max(n.font.size*d*c.lineCount(t),16)+3;h=Math.max(h,e)}),e.each(function(){var t=i.select(this),e=t.select(".selector-rect"),r=t.select(".selector-text"),a=r.node()&&s.bBox(r.node()).width,o=n.font.size*d,l=c.lineCount(r),f=Math.max(a+10,v.minButtonWidth);t.attr("transform","translate("+(g+u)+","+g+")"),e.attr({x:0,y:0,width:f,height:h}),c.positionText(r,f/2,h/2-(l-1)*o/2+3),u+=f+5});var m=t._fullLayout._size,y=m.l+m.w*n.x,_=m.t+m.h*(1-n.y),x="left";l.isRightAnchor(n)&&(y-=u,x="right"),l.isCenterAnchor(n)&&(y-=u/2,x="center");var b="top";l.isBottomAnchor(n)&&(_-=h,b="bottom"),l.isMiddleAnchor(n)&&(_-=h/2,b="middle"),u=Math.ceil(u),h=Math.ceil(h),y=Math.round(y),_=Math.round(_),a.autoMargin(t,r+"-range-selector",{x:n.x,y:n.y,l:u*f[x],r:u*p[x],b:h*p[b],t:h*f[b]}),o.attr("transform","translate("+y+","+_+")")}(t,h,u,o._name,n)})}},{"../../constants/alignment":138,"../../lib":159,"../../lib/svg_text_utils":180,"../../plots/cartesian/axis_ids":206,"../../plots/plots":235,"../../registry":242,"../color":43,"../drawing":64,"./constants":106,"./get_update_object":109,d3:8}],109:[function(t,e,n){"use strict";var i=t("d3");e.exports=function(t,e){var n=t._name,r={};if("all"===e.step)r[n+".autorange"]=!0;else{var a=function(t,e){var n,r=t.range,a=new Date(t.r2l(r[1])),o=e.step,s=e.count;switch(e.stepmode){case"backward":n=t.l2r(+i.time[o].utc.offset(a,-s));break;case"todate":var l=i.time[o].utc.offset(a,-s);n=t.l2r(+i.time[o].utc.ceil(l))}return[n,r[1]]}(t,e);r[n+".range[0]"]=a[0],r[n+".range[1]"]=a[1]}return r}},{d3:8}],110:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":105,"./defaults":107,"./draw":108}],111:[function(t,e,n){"use strict";var i=t("../color/attributes");e.exports={bgcolor:{valType:"color",dflt:i.background,editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":42}],112:[function(t,e,n){"use strict";var i=t("../../plots/cartesian/axis_ids").list,r=t("../../plots/cartesian/autorange").getAutoRange,a=t("./constants");e.exports=function(t){for(var e=i(t,"x",!0),n=0;n<e.length;n++){var o=e[n],s=o[a.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=r(t,o))}}},{"../../plots/cartesian/autorange":202,"../../plots/cartesian/axis_ids":206,"./constants":113}],113:[function(t,e,n){"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],114:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plot_api/plot_template"),a=t("../../plots/cartesian/axis_ids"),o=t("./attributes"),s=t("./oppaxis_attributes");e.exports=function(t,e,n){var l=t[n],c=e[n];if(l.rangeslider||e._requestRangeslider[c._id]){i.isPlainObject(l.rangeslider)||(l.rangeslider={});var u,h,d=l.rangeslider,f=r.newContainer(c,"rangeslider");if(b("visible")){b("bgcolor",e.plot_bgcolor),b("bordercolor"),b("borderwidth"),b("thickness"),b("autorange",!c.isValidRange(d.range)),b("range");var p=e._subplots;if(p)for(var v=p.cartesian.filter(function(t){return t.substr(0,t.indexOf("y"))===a.name2id(n)}).map(function(t){return t.substr(t.indexOf("y"),t.length)}),g=i.simpleMap(v,a.id2name),m=0;m<g.length;m++){var y=g[m];u=d[y]||{},h=r.newContainer(f,y,"yaxis");var _,x=e[y];u.range&&x.isValidRange(u.range)&&(_="fixed"),"match"!==w("rangemode",_)&&w("range",x.range.slice())}f._input=d}}function b(t,e){return i.coerce(d,f,o,t,e)}function w(t,e){return i.coerce(u,h,s,t,e)}}},{"../../lib":159,"../../plot_api/plot_template":193,"../../plots/cartesian/axis_ids":206,"./attributes":111,"./oppaxis_attributes":118}],115:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../registry"),a=t("../../plots/plots"),o=t("../../lib"),s=t("../drawing"),l=t("../color"),c=t("../titles"),u=t("../../plots/cartesian"),h=t("../../plots/cartesian/axis_ids"),d=t("../dragelement"),f=t("../../lib/setcursor"),p=t("./constants");function v(t,e,n,i){var r=o.ensureSingle(t,"rect",p.bgClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=i.borderwidth%2==0?i.borderwidth:i.borderwidth-1,l=-i._offsetShift,c=s.crispRound(e,i.borderwidth);r.attr({width:i._width+a,height:i._height+a,transform:"translate("+l+","+l+")",fill:i.bgcolor,stroke:i.bordercolor,"stroke-width":c})}function g(t,e,n,i){o.ensureSingleById(e._fullLayout._topdefs,"clipPath",i._clipId,function(t){t.append("rect").attr({x:0,y:0})}).select("rect").attr({width:i._width,height:i._height})}function m(t,e,n,r){var l,c=e.calcdata,d=t.selectAll("g."+p.rangePlotClassName).data(n._subplotsWith,o.identity);d.enter().append("g").attr("class",function(t){return p.rangePlotClassName+" "+t}).call(s.setClipUrl,r._clipId,e),d.order(),d.exit().remove(),d.each(function(t,o){var s=i.select(this),d=0===o,f=h.getFromId(e,t,"y"),p=f._name,v=r[p],g={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:r.range.slice(),calendar:n.calendar},width:r._width,height:r._height,margin:{t:0,b:0,l:0,r:0}},_context:e._context};g.layout[p]={type:f.type,domain:[0,1],range:"match"!==v.rangemode?v.range.slice():f.range.slice(),calendar:f.calendar},a.supplyDefaults(g);var m=g._fullLayout.xaxis,y=g._fullLayout[p];m.clearCalc(),m.setScale(),y.clearCalc(),y.setScale();var _={id:t,plotgroup:s,xaxis:m,yaxis:y,isRangePlot:!0};d?l=_:(_.mainplot="xy",_.mainplotinfo=l),u.rangePlot(e,_,function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],a=r[0].trace;a.xaxis+a.yaxis===e&&n.push(r)}return n}(c,t))})}function y(t,e,n,i,r){o.ensureSingle(t,"rect",p.maskMinClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",i._height).call(l.fill,p.maskColor),o.ensureSingle(t,"rect",p.maskMaxClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",i._height).call(l.fill,p.maskColor),"match"!==r.rangemode&&(o.ensureSingle(t,"rect",p.maskMinOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",i._width).call(l.fill,p.maskOppAxisColor),o.ensureSingle(t,"rect",p.maskMaxOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",i._width).style("border-top",p.maskOppBorder).call(l.fill,p.maskOppAxisColor))}function _(t,e,n,i){e._context.staticPlot||o.ensureSingle(t,"rect",p.slideBoxClassName,function(t){t.attr({y:0,cursor:p.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:i._height,fill:p.slideBoxFill})}function x(t,e,n,i){var r=o.ensureSingle(t,"g",p.grabberMinClassName),a=o.ensureSingle(t,"g",p.grabberMaxClassName),s={x:0,width:p.handleWidth,rx:p.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":p.handleStrokeWidth,"shape-rendering":"crispEdges"},c={y:Math.round(i._height/4),height:Math.round(i._height/2)};if(o.ensureSingle(r,"rect",p.handleMinClassName,function(t){t.attr(s)}).attr(c),o.ensureSingle(a,"rect",p.handleMaxClassName,function(t){t.attr(s)}).attr(c),!e._context.staticPlot){var u={width:p.grabAreaWidth,x:0,y:0,fill:p.grabAreaFill,cursor:p.grabAreaCursor};o.ensureSingle(r,"rect",p.grabAreaMinClassName,function(t){t.attr(u)}).attr("height",i._height),o.ensureSingle(a,"rect",p.grabAreaMaxClassName,function(t){t.attr(u)}).attr("height",i._height)}}e.exports=function(t){for(var e=t._fullLayout,n=e._rangeSliderData,a=0;a<n.length;a++){var s=n[a][p.name];s._clipId=s._id+"-"+e._uid}var l=e._infolayer.selectAll("g."+p.containerClassName).data(n,function(t){return t._name});l.exit().each(function(t){e._topdefs.select("#"+t[p.name]._clipId).remove()}).remove(),0!==n.length&&(l.enter().append("g").classed(p.containerClassName,!0).attr("pointer-events","all"),l.each(function(n){var a=i.select(this),s=n[p.name],l=e[h.id2name(n.anchor)],u=s[h.id2name(n.anchor)];if(s.range){var b,w=o.simpleMap(s.range,n.r2l),k=o.simpleMap(n.range,n.r2l);b=k[0]<k[1]?[Math.min(w[0],k[0]),Math.max(w[1],k[1])]:[Math.max(w[0],k[0]),Math.min(w[1],k[1])],s.range=s._input.range=o.simpleMap(b,n.l2r)}n.cleanRange("rangeslider.range");var T=e.margin,M=e._size,A=n.domain,C=s._tickHeight,L=s._oppBottom;s._width=M.w*(A[1]-A[0]);var S=Math.round(T.l+M.w*A[0]),E=Math.round(M.t+M.h*(1-L)+C+s._offsetShift+p.extraPad);a.attr("transform","translate("+S+","+E+")");var O=n.r2l(s.range[0]),P=n.r2l(s.range[1]),D=P-O;if(s.p2d=function(t){return t/s._width*D+O},s.d2p=function(t){return(t-O)/D*s._width},s._rl=[O,P],"match"!==u.rangemode){var z=l.r2l(u.range[0]),I=l.r2l(u.range[1])-z;s.d2pOppAxis=function(t){return(t-z)/I*s._height}}a.call(v,t,n,s).call(g,t,n,s).call(m,t,n,s).call(y,t,n,s,u).call(_,t,n,s).call(x,t,n,s),function(t,e,n,a){var s=t.select("rect."+p.slideBoxClassName).node(),l=t.select("rect."+p.grabAreaMinClassName).node(),c=t.select("rect."+p.grabAreaMaxClassName).node();t.on("mousedown",function(){var u=i.event,h=u.target,p=u.clientX,v=p-t.node().getBoundingClientRect().left,g=a.d2p(n._rl[0]),m=a.d2p(n._rl[1]),y=d.coverSlip();function _(t){var u,d,_,x=+t.clientX-p;switch(h){case s:_="ew-resize",u=g+x,d=m+x;break;case l:_="col-resize",u=g+x,d=m;break;case c:_="col-resize",u=g,d=m+x;break;default:_="ew-resize",u=v,d=v+x}if(d<u){var b=d;d=u,u=b}a._pixelMin=u,a._pixelMax=d,f(i.select(y),_),function(t,e,n,i){function a(t){return n.l2r(o.constrain(t,i._rl[0],i._rl[1]))}var s=a(i.p2d(i._pixelMin)),l=a(i.p2d(i._pixelMax));window.requestAnimationFrame(function(){r.call("_guiRelayout",e,n._name+".range",[s,l])})}(0,e,n,a)}y.addEventListener("mousemove",_),y.addEventListener("mouseup",function t(){y.removeEventListener("mousemove",_),y.removeEventListener("mouseup",t),o.removeElement(y)})})}(a,t,n,s),function(t,e,n,i,r,a){var s=p.handleWidth/2;function l(t){return o.constrain(t,0,i._width)}function c(t){return o.constrain(t,0,i._height)}function u(t){return o.constrain(t,-s,i._width+s)}var h=l(i.d2p(n._rl[0])),d=l(i.d2p(n._rl[1]));if(t.select("rect."+p.slideBoxClassName).attr("x",h).attr("width",d-h),t.select("rect."+p.maskMinClassName).attr("width",h),t.select("rect."+p.maskMaxClassName).attr("x",d).attr("width",i._width-d),"match"!==a.rangemode){var f=i._height-c(i.d2pOppAxis(r._rl[1])),v=i._height-c(i.d2pOppAxis(r._rl[0]));t.select("rect."+p.maskMinOppAxisClassName).attr("x",h).attr("height",f).attr("width",d-h),t.select("rect."+p.maskMaxOppAxisClassName).attr("x",h).attr("y",v).attr("height",i._height-v).attr("width",d-h),t.select("rect."+p.slideBoxClassName).attr("y",f).attr("height",v-f)}var g=Math.round(u(h-s))-.5,m=Math.round(u(d-s))+.5;t.select("g."+p.grabberMinClassName).attr("transform","translate("+g+",0.5)"),t.select("g."+p.grabberMaxClassName).attr("transform","translate("+m+",0.5)")}(a,0,n,s,l,u),"bottom"===n.side&&c.draw(t,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:e._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:E+s._height+s._offsetShift+10+1.5*n.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":159,"../../lib/setcursor":178,"../../plots/cartesian":214,"../../plots/cartesian/axis_ids":206,"../../plots/plots":235,"../../registry":242,"../color":43,"../dragelement":61,"../drawing":64,"../titles":131,"./constants":113,d3:8}],116:[function(t,e,n){"use strict";var i=t("../../plots/cartesian/axis_ids"),r=t("./constants"),a=r.name;function o(t){var e=t&&t[a];return e&&e.visible}n.isVisible=o,n.makeData=function(t){var e=i.list({_fullLayout:t},"x",!0),n=t.margin,r=[];if(!t._has("gl2d"))for(var s=0;s<e.length;s++){var l=e[s];if(o(l)){r.push(l);var c=l[a];c._id=a+l._id,c._height=(t.height-n.b-n.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}t._rangeSliderData=r},n.autoMarginOpts=function(t,e){for(var n=e[a],o=1/0,s=e._counterAxes,l=0;l<s.length;l++){var c=i.getFromId(t,s[l]);o=Math.min(o,c.domain[0])}n._oppBottom=o;var u="bottom"===e.side&&e._boundingBox.height||0;return n._tickHeight=u,{x:0,y:o,l:0,r:0,t:0,b:n._height+t._fullLayout.margin.b+u,pad:r.extraPad+2*n._offsetShift}}},{"../../plots/cartesian/axis_ids":206,"./constants":113}],117:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./attributes"),a=t("./oppaxis_attributes"),o=t("./helpers");e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:i.extendFlat({},r,{yaxis:a})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":159,"./attributes":111,"./calc_autorange":112,"./defaults":114,"./draw":115,"./helpers":116,"./oppaxis_attributes":118}],118:[function(t,e,n){"use strict";e.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],119:[function(t,e,n){"use strict";var i=t("../annotations/attributes"),r=t("../../traces/scatter/attributes").line,a=t("../drawing/attributes").dash,o=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray;e.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},i.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},i.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},r.color,{editType:"arraydraw"}),width:o({},r.width,{editType:"calc+arraydraw"}),dash:o({},a,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":153,"../../plot_api/plot_template":193,"../../traces/scatter/attributes":280,"../annotations/attributes":28,"../drawing/attributes":63}],120:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plots/cartesian/axes"),a=t("./constants"),o=t("./helpers");function s(t){return c(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function l(t){return c(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function c(t,e,n,r,s,l){var c=t/2,u=l;if("pixel"===e){var h=s?o.extractPathCoords(s,l?a.paramIsY:a.paramIsX):[n,r],d=i.aggNums(Math.max,null,h),f=i.aggNums(Math.min,null,h),p=f<0?Math.abs(f)+c:c,v=d>0?d+c:c;return{ppad:c,ppadplus:u?p:v,ppadminus:u?v:p}}return{ppad:c}}function u(t,e,n,i,r){var s="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==e)return[s(e),s(n)];if(i){var l,c,u,h,d=1/0,f=-1/0,p=i.match(a.segmentRE);for("date"===t.type&&(s=o.decodeDate(s)),l=0;l<p.length;l++)void 0!==(c=r[p[l].charAt(0)].drawn)&&(!(u=p[l].substr(1).match(a.paramRE))||u.length<c||((h=s(u[c]))<d&&(d=h),h>f&&(f=h)));return f>=d?[d,f]:void 0}}e.exports=function(t){var e=i.filterVisible(t._fullLayout.shapes);if(e.length&&t._fullData.length)for(var n=0;n<e.length;n++){var o,c,h=e[n];if(h._extremes={},"paper"!==h.xref){var d="pixel"===h.xsizemode?h.xanchor:h.x0,f="pixel"===h.xsizemode?h.xanchor:h.x1;(c=u(o=r.getFromId(t,h.xref),d,f,h.path,a.paramIsX))&&(h._extremes[o._id]=r.findExtremes(o,c,s(h)))}if("paper"!==h.yref){var p="pixel"===h.ysizemode?h.yanchor:h.y0,v="pixel"===h.ysizemode?h.yanchor:h.y1;(c=u(o=r.getFromId(t,h.yref),p,v,h.path,a.paramIsY))&&(h._extremes[o._id]=r.findExtremes(o,c,l(h)))}}}},{"../../lib":159,"../../plots/cartesian/axes":203,"./constants":121,"./helpers":124}],121:[function(t,e,n){"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],122:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("./attributes"),s=t("./helpers");function l(t,e,n){function a(n,r){return i.coerce(t,e,o,n,r)}if(a("visible")){a("layer"),a("opacity"),a("fillcolor"),a("line.color"),a("line.width"),a("line.dash");for(var l=a("type",t.path?"path":"rect"),c=a("xsizemode"),u=a("ysizemode"),h=["x","y"],d=0;d<2;d++){var f,p,v,g=h[d],m=g+"anchor",y="x"===g?c:u,_={_fullLayout:n},x=r.coerceRef(t,e,_,g,"","paper");if("paper"!==x?((f=r.getFromId(_,x))._shapeIndices.push(e._index),v=s.rangeToShapePosition(f),p=s.shapePositionToRange(f)):p=v=i.identity,"path"!==l){var b=g+"0",w=g+"1",k=t[b],T=t[w];t[b]=p(t[b],!0),t[w]=p(t[w],!0),"pixel"===y?(a(b,0),a(w,10)):(r.coercePosition(e,_,a,x,b,.25),r.coercePosition(e,_,a,x,w,.75)),e[b]=v(e[b]),e[w]=v(e[w]),t[b]=k,t[w]=T}if("pixel"===y){var M=t[m];t[m]=p(t[m],!0),r.coercePosition(e,_,a,x,m,.25),e[m]=v(e[m]),t[m]=M}}"path"===l?a("path"):i.noneOrAll(t,e,["x0","x1","y0","y1"])}}e.exports=function(t,e){a(t,e,{name:"shapes",handleItemDefaults:l})}},{"../../lib":159,"../../plots/array_container_defaults":199,"../../plots/cartesian/axes":203,"./attributes":119,"./helpers":124}],123:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("../../lib"),a=t("../../plots/cartesian/axes"),o=t("../color"),s=t("../drawing"),l=t("../../plot_api/plot_template").arrayEditor,c=t("../dragelement"),u=t("../../lib/setcursor"),h=t("./constants"),d=t("./helpers");function f(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var n=t._fullLayout.shapes[e]||{};if(n._input&&!1!==n.visible)if("below"!==n.layer)m(t._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)m(t._fullLayout._shapeLowerLayer);else{var f=t._fullLayout._plots[n.xref+n.yref];m(f?(f.mainplotinfo||f).shapelayer:t._fullLayout._shapeLowerLayer)}function m(f){var m={"data-index":e,"fill-rule":"evenodd",d:v(t,n)},y=n.line.width?n.line.color:"rgba(0,0,0,0)",_=f.append("path").attr(m).style("opacity",n.opacity).call(o.stroke,y).call(o.fill,n.fillcolor).call(s.dashLine,n.line.dash,n.line.width);p(_,t,n),t._context.edits.shapePosition&&function(t,e,n,o,f){var m,y,_,x,b,w,k,T,M,A,C,L,S,E,O,P,D=10,z=10,I="pixel"===n.xsizemode,R="pixel"===n.ysizemode,B="line"===n.type,N="path"===n.type,F=l(t.layout,"shapes",n),j=F.modifyItem,H=a.getFromId(t,n.xref),$=a.getFromId(t,n.yref),q=d.getDataToPixel(t,H),Z=d.getDataToPixel(t,$,!0),V=d.getPixelToData(t,H),W=d.getPixelToData(t,$,!0),U=B?function(){var t=Math.max(n.line.width,10),i=f.append("g").attr("data-index",o);i.append("path").attr("d",e.attr("d")).style({cursor:"move","stroke-width":t,"stroke-opacity":"0"});var r={"fill-opacity":"0"},a=t/2>10?t/2:10;return i.append("circle").attr({"data-line-point":"start-point",cx:I?q(n.xanchor)+n.x0:q(n.x0),cy:R?Z(n.yanchor)-n.y0:Z(n.y0),r:a}).style(r).classed("cursor-grab",!0),i.append("circle").attr({"data-line-point":"end-point",cx:I?q(n.xanchor)+n.x1:q(n.x1),cy:R?Z(n.yanchor)-n.y1:Z(n.y1),r:a}).style(r).classed("cursor-grab",!0),i}():e,G={element:U.node(),gd:t,prepFn:function(i){I&&(b=q(n.xanchor)),R&&(w=Z(n.yanchor)),"path"===n.type?O=n.path:(m=I?n.x0:q(n.x0),y=R?n.y0:Z(n.y0),_=I?n.x1:q(n.x1),x=R?n.y1:Z(n.y1)),m<_?(M=m,S="x0",A=_,E="x1"):(M=_,S="x1",A=m,E="x0"),!R&&y<x||R&&y>x?(k=y,C="y0",T=x,L="y1"):(k=x,C="y1",T=y,L="y0"),X(i),K(f,n),function(t,e,n){var i=e.xref,r=e.yref,o=a.getFromId(n,i),l=a.getFromId(n,r),c="";"paper"===i||o.autorange||(c+=i),"paper"===r||l.autorange||(c+=r),s.setClipUrl(t,c?"clip"+n._fullLayout._uid+c:null,n)}(e,n,t),G.moveFn="move"===P?Y:Q},doneFn:function(){u(e),J(f),p(e,t,n),i.call("_guiRelayout",t,F.getUpdateObj())},clickFn:function(){J(f)}};function X(t){if(B)P="path"===t.target.tagName?"move":"start-point"===t.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var n=G.element.getBoundingClientRect(),i=n.right-n.left,r=n.bottom-n.top,a=!N&&i>D&&r>z&&!t.shiftKey?c.getCursor((t.clientX-n.left)/i,1-(t.clientY-n.top)/r):"move";u(e,a),P=a.split("-")[0]}}function Y(i,r){if("path"===n.type){var a=function(t){return t},o=a,s=a;I?j("xanchor",n.xanchor=V(b+i)):(o=function(t){return V(q(t)+i)},H&&"date"===H.type&&(o=d.encodeDate(o))),R?j("yanchor",n.yanchor=W(w+r)):(s=function(t){return W(Z(t)+r)},$&&"date"===$.type&&(s=d.encodeDate(s))),j("path",n.path=g(O,o,s))}else I?j("xanchor",n.xanchor=V(b+i)):(j("x0",n.x0=V(m+i)),j("x1",n.x1=V(_+i))),R?j("yanchor",n.yanchor=W(w+r)):(j("y0",n.y0=W(y+r)),j("y1",n.y1=W(x+r)));e.attr("d",v(t,n)),K(f,n)}function Q(i,r){if(N){var a=function(t){return t},o=a,s=a;I?j("xanchor",n.xanchor=V(b+i)):(o=function(t){return V(q(t)+i)},H&&"date"===H.type&&(o=d.encodeDate(o))),R?j("yanchor",n.yanchor=W(w+r)):(s=function(t){return W(Z(t)+r)},$&&"date"===$.type&&(s=d.encodeDate(s))),j("path",n.path=g(O,o,s))}else if(B){if("resize-over-start-point"===P){var l=m+i,c=R?y-r:y+r;j("x0",n.x0=I?l:V(l)),j("y0",n.y0=R?c:W(c))}else if("resize-over-end-point"===P){var u=_+i,h=R?x-r:x+r;j("x1",n.x1=I?u:V(u)),j("y1",n.y1=R?h:W(h))}}else{var p=~P.indexOf("n")?k+r:k,F=~P.indexOf("s")?T+r:T,U=~P.indexOf("w")?M+i:M,G=~P.indexOf("e")?A+i:A;~P.indexOf("n")&&R&&(p=k-r),~P.indexOf("s")&&R&&(F=T-r),(!R&&F-p>z||R&&p-F>z)&&(j(C,n[C]=R?p:W(p)),j(L,n[L]=R?F:W(F))),G-U>D&&(j(S,n[S]=I?U:V(U)),j(E,n[E]=I?G:V(G)))}e.attr("d",v(t,n)),K(f,n)}function K(t,e){(I||R)&&function(){var n="path"!==e.type,i=t.selectAll(".visual-cue").data([0]);i.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var a=q(I?e.xanchor:r.midRange(n?[e.x0,e.x1]:d.extractPathCoords(e.path,h.paramIsX))),o=Z(R?e.yanchor:r.midRange(n?[e.y0,e.y1]:d.extractPathCoords(e.path,h.paramIsY)));a=d.roundPositionForSharpStrokeRendering(a,1),o=d.roundPositionForSharpStrokeRendering(o,1),i.attr("d",I&&R?"M"+(a-1-1)+","+(o-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":I?"M"+(a-1-1)+","+(o-9-1)+"v18 h2 v-18 Z":"M"+(a-9-1)+","+(o-1-1)+"h18 v2 h-18 Z")}()}function J(t){t.selectAll(".visual-cue").remove()}c.init(G),U.node().onmousemove=X}(t,_,n,e,f)}}function p(t,e,n){var i=(n.xref+n.yref).replace(/paper/g,"");s.setClipUrl(t,i?"clip"+e._fullLayout._uid+i:null,e)}function v(t,e){var n,i,o,s,l,c,u,f,p=e.type,v=a.getFromId(t,e.xref),g=a.getFromId(t,e.yref),m=t._fullLayout._size;if(v?(n=d.shapePositionToRange(v),i=function(t){return v._offset+v.r2p(n(t,!0))}):i=function(t){return m.l+m.w*t},g?(o=d.shapePositionToRange(g),s=function(t){return g._offset+g.r2p(o(t,!0))}):s=function(t){return m.t+m.h*(1-t)},"path"===p)return v&&"date"===v.type&&(i=d.decodeDate(i)),g&&"date"===g.type&&(s=d.decodeDate(s)),function(t,e,n){var i=t.xsizemode,a=t.ysizemode,o=t.xanchor,s=t.yanchor;return t.path.replace(h.segmentRE,function(t){var l=0,c=t.charAt(0),u=h.paramIsX[c],d=h.paramIsY[c],f=h.numParams[c],p=t.substr(1).replace(h.paramRE,function(t){return u[l]?t="pixel"===i?e(o)+Number(t):e(t):d[l]&&(t="pixel"===a?n(s)-Number(t):n(t)),++l>f&&(t="X"),t});return l>f&&(p=p.replace(/[\s,]*X.*/,""),r.log("Ignoring extra params in segment "+t)),c+p})}(e,i,s);if("pixel"===e.xsizemode){var y=i(e.xanchor);l=y+e.x0,c=y+e.x1}else l=i(e.x0),c=i(e.x1);if("pixel"===e.ysizemode){var _=s(e.yanchor);u=_-e.y0,f=_-e.y1}else u=s(e.y0),f=s(e.y1);if("line"===p)return"M"+l+","+u+"L"+c+","+f;if("rect"===p)return"M"+l+","+u+"H"+c+"V"+f+"H"+l+"Z";var x=(l+c)/2,b=(u+f)/2,w=Math.abs(x-l),k=Math.abs(b-u),T="A"+w+","+k,M=x+w+","+b;return"M"+M+T+" 0 1,1 "+x+","+(b-k)+T+" 0 0,1 "+M+"Z"}function g(t,e,n){return t.replace(h.segmentRE,function(t){var i=0,r=t.charAt(0),a=h.paramIsX[r],o=h.paramIsY[r],s=h.numParams[r];return r+t.substr(1).replace(h.paramRE,function(t){return i>=s?t:(a[i]?t=e(t):o[i]&&(t=n(t)),i++,t)})})}e.exports={draw:function(t){var e=t._fullLayout;for(var n in e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._plots){var i=e._plots[n].shapelayer;i&&i.selectAll("path").remove()}for(var r=0;r<e.shapes.length;r++)e.shapes[r].visible&&f(t,r)},drawOne:f}},{"../../lib":159,"../../lib/setcursor":178,"../../plot_api/plot_template":193,"../../plots/cartesian/axes":203,"../../registry":242,"../color":43,"../dragelement":61,"../drawing":64,"./constants":121,"./helpers":124}],124:[function(t,e,n){"use strict";var i=t("./constants"),r=t("../../lib");n.rangeToShapePosition=function(t){return"log"===t.type?t.r2d:function(t){return t}},n.shapePositionToRange=function(t){return"log"===t.type?t.d2r:function(t){return t}},n.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},n.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},n.extractPathCoords=function(t,e){var n=[];return t.match(i.segmentRE).forEach(function(t){var a=e[t.charAt(0)].drawn;if(void 0!==a){var o=t.substr(1).match(i.paramRE);!o||o.length<a||n.push(r.cleanNumber(o[a]))}}),n},n.getDataToPixel=function(t,e,i){var r,a=t._fullLayout._size;if(e){var o=n.shapePositionToRange(e);r=function(t){return e._offset+e.r2p(o(t,!0))},"date"===e.type&&(r=n.decodeDate(r))}else r=i?function(t){return a.t+a.h*(1-t)}:function(t){return a.l+a.w*t};return r},n.getPixelToData=function(t,e,i){var r,a=t._fullLayout._size;if(e){var o=n.rangeToShapePosition(e);r=function(t){return o(e.p2r(t-e._offset))}}else r=i?function(t){return 1-(t-a.t)/a.h}:function(t){return(t-a.l)/a.w};return r},n.roundPositionForSharpStrokeRendering=function(t,e){var n=1===Math.round(e%2),i=Math.round(t);return n?i+.5:i}},{"../../lib":159,"./constants":121}],125:[function(t,e,n){"use strict";var i=t("./draw");e.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:i.draw,drawOne:i.drawOne}},{"../../plots/cartesian/include_components":213,"./attributes":119,"./calc_autorange":120,"./defaults":122,"./draw":123}],126:[function(t,e,n){"use strict";var i=t("../../plots/font_attributes"),r=t("../../plots/pad_attributes"),a=t("../../lib/extend").extendDeepAll,o=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/animation_attributes"),l=t("../../plot_api/plot_template").templatedArray,c=t("./constants"),u=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});e.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:u,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:a(r({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:i({})},font:i({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":153,"../../plot_api/edit_types":186,"../../plot_api/plot_template":193,"../../plots/animation_attributes":198,"../../plots/font_attributes":229,"../../plots/pad_attributes":234,"./constants":127}],127:[function(t,e,n){"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],128:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plots/array_container_defaults"),a=t("./attributes"),o=t("./constants").name,s=a.steps;function l(t,e,n){function o(n,r){return i.coerce(t,e,a,n,r)}for(var s=r(t,e,{name:"steps",handleItemDefaults:c}),l=0,u=0;u<s.length;u++)s[u].visible&&l++;if(l<2?e.visible=!1:o("visible")){e._stepCount=l;var h=e._visibleSteps=i.filterVisible(s);(s[o("active")]||{}).visible||(e.active=h[0]._index),o("x"),o("y"),i.noneOrAll(t,e,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),i.coerceFont(o,"font",n.font),o("currentvalue.visible")&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),i.coerceFont(o,"currentvalue.font",e.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function c(t,e){function n(n,r){return i.coerce(t,e,s,n,r)}if("skip"===t.method||Array.isArray(t.args)?n("visible"):e.visible=!1){n("method"),n("args");var r=n("label","step-"+e._index);n("value",r),n("execute")}}e.exports=function(t,e){r(t,e,{name:o,handleItemDefaults:l})}},{"../../lib":159,"../../plots/array_container_defaults":199,"./attributes":126,"./constants":127}],129:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../plots/plots"),a=t("../color"),o=t("../drawing"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),c=t("../../plot_api/plot_template").arrayEditor,u=t("./constants"),h=t("../../constants/alignment"),d=h.LINE_SPACING,f=h.FROM_TL,p=h.FROM_BR;function v(t){return u.autoMarginIdRoot+t._index}function g(t){return t._index}function m(t,e){var n=o.tester.selectAll("g."+u.labelGroupClass).data(e._visibleSteps);n.enter().append("g").classed(u.labelGroupClass,!0);var a=0,c=0;n.each(function(t){var n=x(i.select(this),{step:t},e).node();if(n){var r=o.bBox(n);c=Math.max(c,r.height),a=Math.max(a,r.width)}}),n.remove();var h=e._dims={};h.inputAreaWidth=Math.max(u.railWidth,u.gripHeight);var d=t._fullLayout._size;if(h.lx=d.l+d.w*e.x,h.ly=d.t+d.h*(1-e.y),h.outerLength="fraction"===e.lenmode?Math.round(d.w*e.len):e.len,h.inputAreaStart=0,h.inputAreaLength=Math.round(h.outerLength-e.pad.l-e.pad.r),h.labelStride=Math.max(1,Math.ceil((a+u.labelPadding)/((h.inputAreaLength-2*u.stepInset)/(e._stepCount-1)))),h.labelHeight=c,h.currentValueMaxWidth=0,h.currentValueHeight=0,h.currentValueTotalHeight=0,h.currentValueMaxLines=1,e.currentvalue.visible){var g=o.tester.append("g");n.each(function(t){var n=y(g,e,t.label),i=n.node()&&o.bBox(n.node())||{width:0,height:0},r=l.lineCount(n);h.currentValueMaxWidth=Math.max(h.currentValueMaxWidth,Math.ceil(i.width)),h.currentValueHeight=Math.max(h.currentValueHeight,Math.ceil(i.height)),h.currentValueMaxLines=Math.max(h.currentValueMaxLines,r)}),h.currentValueTotalHeight=h.currentValueHeight+e.currentvalue.offset,g.remove()}h.height=h.currentValueTotalHeight+u.tickOffset+e.ticklen+u.labelOffset+h.labelHeight+e.pad.t+e.pad.b;var m="left";s.isRightAnchor(e)&&(h.lx-=h.outerLength,m="right"),s.isCenterAnchor(e)&&(h.lx-=h.outerLength/2,m="center");var _="top";s.isBottomAnchor(e)&&(h.ly-=h.height,_="bottom"),s.isMiddleAnchor(e)&&(h.ly-=h.height/2,_="middle"),h.outerLength=Math.ceil(h.outerLength),h.height=Math.ceil(h.height),h.lx=Math.round(h.lx),h.ly=Math.round(h.ly);var b={y:e.y,b:h.height*p[_],t:h.height*f[_]};"fraction"===e.lenmode?(b.l=0,b.xl=e.x-e.len*f[m],b.r=0,b.xr=e.x+e.len*p[m]):(b.x=e.x,b.l=h.outerLength*f[m],b.r=h.outerLength*p[m]),r.autoMargin(t,v(e),b)}function y(t,e,n){if(e.currentvalue.visible){var i,r,a=e._dims;switch(e.currentvalue.xanchor){case"right":i=a.inputAreaLength-u.currentValueInset-a.currentValueMaxWidth,r="left";break;case"center":i=.5*a.inputAreaLength,r="middle";break;default:i=u.currentValueInset,r="left"}var c=s.ensureSingle(t,"text",u.labelClass,function(t){t.classed("user-select-none",!0).attr({"text-anchor":r,"data-notex":1})}),h=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof n)h+=n;else{var f=e.steps[e.active].label,p=e._gd._fullLayout.meta;p&&(f=s.templateString(f,{meta:p})),h+=f}e.currentvalue.suffix&&(h+=e.currentvalue.suffix),c.call(o.font,e.currentvalue.font).text(h).call(l.convertToTspans,e._gd);var v=l.lineCount(c);return l.positionText(c,i,(a.currentValueMaxLines+1-v)*e.currentvalue.font.size*d),c}}function _(t,e,n){s.ensureSingle(t,"rect",u.gripRectClass,function(i){i.call(T,e,t,n).style("pointer-events","all")}).attr({width:u.gripWidth,height:u.gripHeight,rx:u.gripRadius,ry:u.gripRadius}).call(a.stroke,n.bordercolor).call(a.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function x(t,e,n){var i=s.ensureSingle(t,"text",u.labelClass,function(t){t.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})}),r=e.step.label,a=n._gd._fullLayout.meta;return a&&(r=s.templateString(r,{meta:a})),i.call(o.font,n.font).text(r).call(l.convertToTspans,n._gd),i}function b(t,e){var n=s.ensureSingle(t,"g",u.labelsClass),r=e._dims,a=n.selectAll("g."+u.labelGroupClass).data(r.labelSteps);a.enter().append("g").classed(u.labelGroupClass,!0),a.exit().remove(),a.each(function(t){var n=i.select(this);n.call(x,t,e),o.setTranslate(n,C(e,t.fraction),u.tickOffset+e.ticklen+e.font.size*d+u.labelOffset+r.currentValueTotalHeight)})}function w(t,e,n,i,r){var a=Math.round(i*(n._stepCount-1)),o=n._visibleSteps[a]._index;o!==n.active&&k(t,e,n,o,!0,r)}function k(t,e,n,i,a,o){var s=n.active;n.active=i,c(t.layout,u.name,n).applyUpdate("active",i);var l=n.steps[n.active];e.call(A,n,o),e.call(y,n),t.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:a,previousActive:s}),l&&l.method&&a&&(e._nextMethod?(e._nextMethod.step=l,e._nextMethod.doCallback=a,e._nextMethod.doTransition=o):(e._nextMethod={step:l,doCallback:a,doTransition:o},e._nextMethodRaf=window.requestAnimationFrame(function(){var n=e._nextMethod.step;n.method&&(n.execute&&r.executeAPICommand(t,n.method,n.args),e._nextMethod=null,e._nextMethodRaf=null)})))}function T(t,e,n){var r=n.node(),o=i.select(e);function s(){return n.data()[0]}t.on("mousedown",function(){var t=s();e.emit("plotly_sliderstart",{slider:t});var l=n.select("."+u.gripRectClass);i.event.stopPropagation(),i.event.preventDefault(),l.call(a.fill,t.activebgcolor);var c=L(t,i.mouse(r)[0]);w(e,n,t,c,!0),t._dragging=!0,o.on("mousemove",function(){var t=s(),a=L(t,i.mouse(r)[0]);w(e,n,t,a,!1)}),o.on("mouseup",function(){var t=s();t._dragging=!1,l.call(a.fill,t.bgcolor),o.on("mouseup",null),o.on("mousemove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})})})}function M(t,e){var n=t.selectAll("rect."+u.tickRectClass).data(e._visibleSteps),r=e._dims;n.enter().append("rect").classed(u.tickRectClass,!0),n.exit().remove(),n.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(t,n){var s=n%r.labelStride==0,l=i.select(this);l.attr({height:s?e.ticklen:e.minorticklen}).call(a.fill,e.tickcolor),o.setTranslate(l,C(e,n/(e._stepCount-1))-.5*e.tickwidth,(s?u.tickOffset:u.minorTickOffset)+r.currentValueTotalHeight)})}function A(t,e,n){for(var i=t.select("rect."+u.gripRectClass),r=0,a=0;a<e._stepCount;a++)if(e._visibleSteps[a]._index===e.active){r=a;break}var o=C(e,r/(e._stepCount-1));if(!e._invokingCommand){var s=i;n&&e.transition.duration>0&&(s=s.transition().duration(e.transition.duration).ease(e.transition.easing)),s.attr("transform","translate("+(o-.5*u.gripWidth)+","+e._dims.currentValueTotalHeight+")")}}function C(t,e){var n=t._dims;return n.inputAreaStart+u.stepInset+(n.inputAreaLength-2*u.stepInset)*Math.min(1,Math.max(0,e))}function L(t,e){var n=t._dims;return Math.min(1,Math.max(0,(e-u.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*u.stepInset-2*n.inputAreaStart)))}function S(t,e,n){var i=n._dims,r=s.ensureSingle(t,"rect",u.railTouchRectClass,function(i){i.call(T,e,t,n).style("pointer-events","all")});r.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,u.tickOffset+n.ticklen+i.labelHeight)}).call(a.fill,n.bgcolor).attr("opacity",0),o.setTranslate(r,0,i.currentValueTotalHeight)}function E(t,e){var n=e._dims,i=n.inputAreaLength-2*u.railInset,r=s.ensureSingle(t,"rect",u.railRectClass);r.attr({width:i,height:u.railWidth,rx:u.railRadius,ry:u.railRadius,"shape-rendering":"crispEdges"}).call(a.stroke,e.bordercolor).call(a.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),o.setTranslate(r,u.railInset,.5*(n.inputAreaWidth-u.railWidth)+n.currentValueTotalHeight)}e.exports=function(t){var e=t._fullLayout,n=function(t,e){for(var n=t[u.name],i=[],r=0;r<n.length;r++){var a=n[r];a.visible&&(a._gd=e,i.push(a))}return i}(e,t),a=e._infolayer.selectAll("g."+u.containerClassName).data(n.length>0?[0]:[]);function s(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),r.autoMargin(t,v(e))}if(a.enter().append("g").classed(u.containerClassName,!0).style("cursor","ew-resize"),a.exit().each(function(){i.select(this).selectAll("g."+u.groupClassName).each(s)}).remove(),0!==n.length){var l=a.selectAll("g."+u.groupClassName).data(n,g);l.enter().append("g").classed(u.groupClassName,!0),l.exit().each(s).remove();for(var c=0;c<n.length;c++)m(t,n[c]);l.each(function(e){var n=i.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var n=t._stepCount,i=0;i<n;i+=e.labelStride)e.labelSteps.push({fraction:i/(n-1),step:t._visibleSteps[i]})}(e),r.manageCommandObserver(t,e,e._visibleSteps,function(e){var i=n.data()[0];i.active!==e.index&&(i._dragging||k(t,n,i,e.index,!1,!0))}),function(t,e,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index),e.call(y,n).call(E,n).call(b,n).call(M,n).call(S,t,n).call(_,t,n);var i=n._dims;o.setTranslate(e,i.lx+n.pad.l,i.ly+n.pad.t),e.call(A,n,!1),e.call(y,n)}(t,i.select(this),e)})}}},{"../../constants/alignment":138,"../../lib":159,"../../lib/svg_text_utils":180,"../../plot_api/plot_template":193,"../../plots/plots":235,"../color":43,"../drawing":64,"./constants":127,d3:8}],130:[function(t,e,n){"use strict";var i=t("./constants");e.exports={moduleType:"component",name:i.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":126,"./constants":127,"./defaults":128,"./draw":129}],131:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../lib"),l=t("../drawing"),c=t("../color"),u=t("../../lib/svg_text_utils"),h=t("../../constants/interactions");e.exports={draw:function(t,e,n){var f,p=n.propName,v=n.placeholder,g=n.traceIndex,m=n.avoid||{},y=n.attributes,_=n.transform,x=n.containerGroup,b=t._fullLayout,w=1,k=!1,T=n.propContainer.title,M=(T&&T.text?T.text:"").trim(),A=T&&T.font?T.font:{},C=A.family,L=A.size,S=A.color;"title.text"===p?f="titleText":-1!==p.indexOf("axis")?f="axisTitleText":p.indexOf(!0)&&(f="colorbarTitleText");var E=t._context.edits[f];""===M?w=0:M.replace(d," % ")===v.replace(d," % ")&&(w=.2,k=!0,E||(M="")),b.meta&&(M=s.templateString(M,{meta:b.meta}));var O=M||E;x||(x=s.ensureSingle(b._infolayer,"g","g-"+e));var P=x.selectAll("text").data(O?[0]:[]);if(P.enter().append("text"),P.text(M).attr("class",e),P.exit().remove(),!O)return x;function D(t){s.syncOrAsync([z,I],t)}function z(e){var n;return _?(n="",_.rotate&&(n+="rotate("+[_.rotate,y.x,y.y]+")"),_.offset&&(n+="translate(0, "+_.offset+")")):n=null,e.attr("transform",n),e.style({"font-family":C,"font-size":i.round(L,2)+"px",fill:c.rgb(S),opacity:w*c.opacity(S),"font-weight":a.fontWeight}).attr(y).call(u.convertToTspans,t),a.previousPromises(t)}function I(t){var e=i.select(t.node().parentNode);if(m&&m.selection&&m.side&&M){e.attr("transform",null);var n=0,a={left:"right",right:"left",top:"bottom",bottom:"top"}[m.side],o=-1!==["left","top"].indexOf(m.side)?-1:1,c=r(m.pad)?m.pad:2,u=l.bBox(e.node()),h=m.maxShift||({left:0,top:0,right:b.width,bottom:b.height}[m.side]-u[m.side])*("left"===m.side||"top"===m.side?-1:1);if(h<0)n=h;else{var d=m.offsetLeft||0,f=m.offsetTop||0;u.left-=d,u.right-=d,u.top-=f,u.bottom-=f,m.selection.each(function(){var t=l.bBox(this);s.bBoxIntersect(u,t,c)&&(n=Math.max(n,o*(t[m.side]-u[a])+c))}),n=Math.min(h,n)}(n>0||h<0)&&e.attr("transform","translate("+{left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[m.side]+")")}}return P.call(D),E&&(M?P.on(".opacity",null):(w=0,k=!0,P.text(v).on("mouseover.opacity",function(){i.select(this).transition().duration(h.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){i.select(this).transition().duration(h.HIDE_PLACEHOLDER).style("opacity",0)})),P.call(u.makeEditable,{gd:t}).on("edit",function(e){void 0!==g?o.call("_guiRestyle",t,p,e,g):o.call("_guiRelayout",t,p,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(D)}).on("input",function(t){this.text(t||" ").call(u.positionText,y.x,y.y)})),P.classed("js-placeholder",k),x}};var d=/ [XY][0-9]* /},{"../../constants/interactions":139,"../../lib":159,"../../lib/svg_text_utils":180,"../../plots/plots":235,"../../registry":242,"../color":43,"../drawing":64,d3:8,"fast-isnumeric":10}],132:[function(t,e,n){"use strict";var i=t("../../plots/font_attributes"),r=t("../color/attributes"),a=t("../../lib/extend").extendFlat,o=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/pad_attributes"),l=t("../../plot_api/plot_template").templatedArray,c=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});e.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:c,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(s({editType:"arraydraw"}),{}),font:i({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:r.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":153,"../../plot_api/edit_types":186,"../../plot_api/plot_template":193,"../../plots/font_attributes":229,"../../plots/pad_attributes":234,"../color/attributes":42}],133:[function(t,e,n){"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],134:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../plots/array_container_defaults"),a=t("./attributes"),o=t("./constants").name,s=a.buttons;function l(t,e,n){function o(n,r){return i.coerce(t,e,a,n,r)}o("visible",r(t,e,{name:"buttons",handleItemDefaults:c}).length>0)&&(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),i.noneOrAll(t,e,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),i.coerceFont(o,"font",n.font),o("bgcolor",n.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function c(t,e){function n(n,r){return i.coerce(t,e,s,n,r)}n("visible","skip"===t.method||Array.isArray(t.args))&&(n("method"),n("args"),n("label"),n("execute"))}e.exports=function(t,e){r(t,e,{name:o,handleItemDefaults:l})}},{"../../lib":159,"../../plots/array_container_defaults":199,"./attributes":132,"./constants":133}],135:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../plots/plots"),a=t("../color"),o=t("../drawing"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),c=t("../../plot_api/plot_template").arrayEditor,u=t("../../constants/alignment").LINE_SPACING,h=t("./constants"),d=t("./scrollbox");function f(t){return t._index}function p(t,e){return+t.attr(h.menuIndexAttrName)===e._index}function v(t,e,n,i,r,a,o,s){e.active=o,c(t.layout,h.name,e).applyUpdate("active",o),"buttons"===e.type?m(t,i,null,null,e):"dropdown"===e.type&&(r.attr(h.menuIndexAttrName,"-1"),g(t,i,r,a,e),s||m(t,i,r,a,e))}function g(t,e,n,i,r){var a=s.ensureSingle(e,"g",h.headerClassName,function(t){t.style("pointer-events","all")}),l=r._dims,c={y:r.pad.t,yPad:0,x:r.pad.l,xPad:0,index:0},u={width:l.headerWidth,height:l.headerHeight};a.call(y,r,r.buttons[r.active]||h.blankHeaderOpts,t).call(A,r,c,u),s.ensureSingle(e,"text",h.headerArrowClassName,function(t){t.classed("user-select-none",!0).attr("text-anchor","end").call(o.font,r.font).text(h.arrowSymbol[r.direction])}).attr({x:l.headerWidth-h.arrowOffsetX+r.pad.l,y:l.headerHeight/2+h.textOffsetY+r.pad.t}),a.on("click",function(){n.call(C,String(p(n,r)?-1:r._index)),m(t,e,n,i,r)}),a.on("mouseover",function(){a.call(w)}),a.on("mouseout",function(){a.call(k,r)}),o.setTranslate(e,l.lx,l.ly)}function m(t,e,n,a,o){n||(n=e).attr("pointer-events","all");var l=-1==+n.attr(h.menuIndexAttrName)&&"buttons"!==o.type?[]:o.buttons,c="dropdown"===o.type?h.dropdownButtonClassName:h.buttonClassName,u=n.selectAll("g."+c).data(s.filterVisible(l)),d=u.enter().append("g").classed(c,!0),f=u.exit();"dropdown"===o.type?(d.attr("opacity","0").transition().attr("opacity","1"),f.transition().attr("opacity","0").remove()):f.remove();var p=0,g=0,m=o._dims,_=-1!==["up","down"].indexOf(o.direction);"dropdown"===o.type&&(_?g=m.headerHeight+h.gapButtonHeader:p=m.headerWidth+h.gapButtonHeader),"dropdown"===o.type&&"up"===o.direction&&(g=-h.gapButtonHeader+h.gapButton-m.openHeight),"dropdown"===o.type&&"left"===o.direction&&(p=-h.gapButtonHeader+h.gapButton-m.openWidth);var x={x:m.lx+p+o.pad.l,y:m.ly+g+o.pad.t,yPad:h.gapButton,xPad:h.gapButton,index:0},T={l:x.x+o.borderwidth,t:x.y+o.borderwidth};u.each(function(s,l){var c=i.select(this);c.call(y,o,s,t).call(A,o,x),c.on("click",function(){i.event.defaultPrevented||(v(t,o,0,e,n,a,l),s.execute&&r.executeAPICommand(t,s.method,s.args),t.emit("plotly_buttonclicked",{menu:o,button:s,active:o.active}))}),c.on("mouseover",function(){c.call(w)}),c.on("mouseout",function(){c.call(k,o),u.call(b,o)})}),u.call(b,o),_?(T.w=Math.max(m.openWidth,m.headerWidth),T.h=x.y-T.t):(T.w=x.x-T.l,T.h=Math.max(m.openHeight,m.headerHeight)),T.direction=o.direction,a&&(u.size()?function(t,e,n,i,r,a){var o,s,l,c=r.direction,u=r._dims,d=r.active;if("up"===c||"down"===c)for(s=0,l=0;l<d;l++)s+=u.heights[l]+h.gapButton;else for(o=0,l=0;l<d;l++)o+=u.widths[l]+h.gapButton;i.enable(a,o,s),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1"),i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,a,o,T):function(t){var e=!!t.hbar,n=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",function(){e=!1,n||t.disable()}),n&&t.vbar.transition().attr("opacity","0").each("end",function(){n=!1,e||t.disable()})}(a))}function y(t,e,n,i){t.call(_,e).call(x,e,n,i)}function _(t,e){s.ensureSingle(t,"rect",h.itemRectClassName,function(t){t.attr({rx:h.rx,ry:h.ry,"shape-rendering":"crispEdges"})}).call(a.stroke,e.bordercolor).call(a.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function x(t,e,n,i){var r=s.ensureSingle(t,"text",h.itemTextClassName,function(t){t.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})}),a=n.label,c=i._fullLayout.meta;c&&(a=s.templateString(a,{meta:c})),r.call(o.font,e.font).text(a).call(l.convertToTspans,i)}function b(t,e){var n=e.active;t.each(function(t,r){var o=i.select(this);r===n&&e.showactive&&o.select("rect."+h.itemRectClassName).call(a.fill,h.activeColor)})}function w(t){t.select("rect."+h.itemRectClassName).call(a.fill,h.hoverColor)}function k(t,e){t.select("rect."+h.itemRectClassName).call(a.fill,e.bgcolor)}function T(t,e){var n=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},a=o.tester.selectAll("g."+h.dropdownButtonClassName).data(s.filterVisible(e.buttons));a.enter().append("g").classed(h.dropdownButtonClassName,!0);var c=-1!==["up","down"].indexOf(e.direction);a.each(function(r,a){var s=i.select(this);s.call(y,e,r,t);var d=s.select("."+h.itemTextClassName),f=d.node()&&o.bBox(d.node()).width,p=Math.max(f+h.textPadX,h.minWidth),v=e.font.size*u,g=l.lineCount(d),m=Math.max(v*g,h.minHeight)+h.textOffsetY;m=Math.ceil(m),p=Math.ceil(p),n.widths[a]=p,n.heights[a]=m,n.height1=Math.max(n.height1,m),n.width1=Math.max(n.width1,p),c?(n.totalWidth=Math.max(n.totalWidth,p),n.openWidth=n.totalWidth,n.totalHeight+=m+h.gapButton,n.openHeight+=m+h.gapButton):(n.totalWidth+=p+h.gapButton,n.openWidth+=p+h.gapButton,n.totalHeight=Math.max(n.totalHeight,m),n.openHeight=n.totalHeight)}),c?n.totalHeight-=h.gapButton:n.totalWidth-=h.gapButton,n.headerWidth=n.width1+h.arrowPadX,n.headerHeight=n.height1,"dropdown"===e.type&&(c?(n.width1+=h.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=h.arrowPadX),a.remove();var d=n.totalWidth+e.pad.l+e.pad.r,f=n.totalHeight+e.pad.t+e.pad.b,p=t._fullLayout._size;n.lx=p.l+p.w*e.x,n.ly=p.t+p.h*(1-e.y);var v="left";s.isRightAnchor(e)&&(n.lx-=d,v="right"),s.isCenterAnchor(e)&&(n.lx-=d/2,v="center");var g="top";s.isBottomAnchor(e)&&(n.ly-=f,g="bottom"),s.isMiddleAnchor(e)&&(n.ly-=f/2,g="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),r.autoMargin(t,M(e),{x:e.x,y:e.y,l:d*({right:1,center:.5}[v]||0),r:d*({left:1,center:.5}[v]||0),b:f*({top:1,middle:.5}[g]||0),t:f*({bottom:1,middle:.5}[g]||0)})}function M(t){return h.autoMarginIdRoot+t._index}function A(t,e,n,i){i=i||{};var r=t.select("."+h.itemRectClassName),a=t.select("."+h.itemTextClassName),s=e.borderwidth,c=n.index,d=e._dims;o.setTranslate(t,s+n.x,s+n.y);var f=-1!==["up","down"].indexOf(e.direction),p=i.height||(f?d.heights[c]:d.height1);r.attr({x:0,y:0,width:i.width||(f?d.width1:d.widths[c]),height:p});var v=e.font.size*u,g=(l.lineCount(a)-1)*v/2;l.positionText(a,h.textOffsetX,p/2-g+h.textOffsetY),f?n.y+=d.heights[c]+n.yPad:n.x+=d.widths[c]+n.xPad,n.index++}function C(t,e){t.attr(h.menuIndexAttrName,e||"-1").selectAll("g."+h.dropdownButtonClassName).remove()}e.exports=function(t){var e=t._fullLayout,n=s.filterVisible(e[h.name]);function a(e){r.autoMargin(t,M(e))}var o=e._menulayer.selectAll("g."+h.containerClassName).data(n.length>0?[0]:[]);if(o.enter().append("g").classed(h.containerClassName,!0).style("cursor","pointer"),o.exit().each(function(){i.select(this).selectAll("g."+h.headerGroupClassName).each(a)}).remove(),0!==n.length){var l=o.selectAll("g."+h.headerGroupClassName).data(n,f);l.enter().append("g").classed(h.headerGroupClassName,!0);for(var c=s.ensureSingle(o,"g",h.dropdownButtonGroupClassName,function(t){t.style("pointer-events","all")}),u=0;u<n.length;u++)T(t,n[u]);var y=new d(t,c,"updatemenus"+e._uid);l.enter().size()&&(c.node().parentNode.appendChild(c.node()),c.call(C)),l.exit().each(function(t){c.call(C),a(t)}).remove(),l.each(function(e){var n=i.select(this),a="dropdown"===e.type?c:null;r.manageCommandObserver(t,e,e.buttons,function(i){v(t,e,0,n,a,y,i.index,!0)}),"dropdown"===e.type?(g(t,n,c,y,e),p(c,e)&&m(t,n,c,y,e)):m(t,n,null,null,e)})}}},{"../../constants/alignment":138,"../../lib":159,"../../lib/svg_text_utils":180,"../../plot_api/plot_template":193,"../../plots/plots":235,"../color":43,"../drawing":64,"./constants":133,"./scrollbox":137,d3:8}],136:[function(t,e,n){arguments[4][130][0].apply(n,arguments)},{"./attributes":132,"./constants":133,"./defaults":134,"./draw":135,dup:130}],137:[function(t,e,n){"use strict";e.exports=s;var i=t("d3"),r=t("../color"),a=t("../drawing"),o=t("../../lib");function s(t,e,n){this.gd=t,this.container=e,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(t,e,n){var o=this.gd._fullLayout,l=o.width,c=o.height;this.position=t;var u,h,d,f,p=this.position.l,v=this.position.w,g=this.position.t,m=this.position.h,y=this.position.direction,_="down"===y,x="left"===y,b="up"===y,w=v,k=m;_||x||"right"===y||b||(this.position.direction="down",_=!0),_||b?(h=(u=p)+w,_?(d=g,k=(f=Math.min(d+k,c))-d):k=(f=g+k)-(d=Math.max(f-k,0))):(f=(d=g)+k,x?w=(h=p+w)-(u=Math.max(h-w,0)):(u=p,w=(h=Math.min(u+w,l))-u)),this._box={l:u,t:d,w:w,h:k};var T=v>w,M=s.barLength+2*s.barPad,A=s.barWidth+2*s.barPad,C=p,L=g+m;L+A>c&&(L=c-A);var S=this.container.selectAll("rect.scrollbar-horizontal").data(T?[0]:[]);S.exit().on(".drag",null).remove(),S.enter().append("rect").classed("scrollbar-horizontal",!0).call(r.fill,s.barColor),T?(this.hbar=S.attr({rx:s.barRadius,ry:s.barRadius,x:C,y:L,width:M,height:A}),this._hbarXMin=C+M/2,this._hbarTranslateMax=w-M):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var E=m>k,O=s.barWidth+2*s.barPad,P=s.barLength+2*s.barPad,D=p+v,z=g;D+O>l&&(D=l-O);var I=this.container.selectAll("rect.scrollbar-vertical").data(E?[0]:[]);I.exit().on(".drag",null).remove(),I.enter().append("rect").classed("scrollbar-vertical",!0).call(r.fill,s.barColor),E?(this.vbar=I.attr({rx:s.barRadius,ry:s.barRadius,x:D,y:z,width:O,height:P}),this._vbarYMin=z+P/2,this._vbarTranslateMax=k-P):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var R=this.id,B=u-.5,N=E?h+O+.5:h+.5,F=d-.5,j=T?f+A+.5:f+.5,H=o._topdefs.selectAll("#"+R).data(T||E?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",R).append("rect"),T||E?(this._clipRect=H.select("rect").attr({x:Math.floor(B),y:Math.floor(F),width:Math.ceil(N)-Math.floor(B),height:Math.ceil(j)-Math.floor(F)}),this.container.call(a.setClipUrl,R,this.gd),this.bg.attr({x:p,y:g,width:v,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),T||E){var $=i.behavior.drag().on("dragstart",function(){i.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call($);var q=i.behavior.drag().on("dragstart",function(){i.event.sourceEvent.preventDefault(),i.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));T&&this.hbar.on(".drag",null).call(q),E&&this.vbar.on(".drag",null).call(q)}this.setTranslate(e,n)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=i.event.dx),this.vbar&&(e-=i.event.dy),this.setTranslate(t,e)},s.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=i.event.deltaY),this.vbar&&(e+=i.event.deltaY),this.setTranslate(t,e)},s.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var n=t+this._hbarXMin,r=n+this._hbarTranslateMax;t=(o.constrain(i.event.x,n,r)-n)/(r-n)*(this.position.w-this._box.w)}if(this.vbar){var a=e+this._vbarYMin,s=a+this._vbarTranslateMax;e=(o.constrain(i.event.y,a,s)-a)/(s-a)*(this.position.h-this._box.h)}this.setTranslate(t,e)},s.prototype.setTranslate=function(t,e){var n=this.position.w-this._box.w,i=this.position.h-this._box.h;t=o.constrain(t||0,0,n),e=o.constrain(e||0,0,i),this.translateX=t,this.translateY=e,this.container.call(a.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar&&this.hbar.call(a.setTranslate,t+t/n*this._hbarTranslateMax,e),this.vbar&&this.vbar.call(a.setTranslate,t,e+e/i*this._vbarTranslateMax)}},{"../../lib":159,"../color":43,"../drawing":64,d3:8}],138:[function(t,e,n){"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],139:[function(t,e,n){"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],140:[function(t,e,n){"use strict";e.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],141:[function(t,e,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],142:[function(t,e,n){"use strict";n.version="1.45.3",t("es6-promise").polyfill(),t("../build/plotcss"),t("./fonts/mathjax_config")();for(var i=t("./registry"),r=n.register=i.register,a=t("./plot_api"),o=Object.keys(a),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(n[l]=a[l]),r({moduleType:"apiMethod",name:l,fn:a[l]})}r(t("./traces/scatter")),r([t("./components/fx"),t("./components/legend"),t("./components/annotations"),t("./components/annotations3d"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale")]),r([t("./locale-en"),t("./locale-en-us")]),n.Icons=t("../build/ploticon"),n.Plots=t("./plots/plots"),n.Fx=t("./components/fx"),n.Snapshot=t("./snapshot"),n.PlotSchema=t("./plot_api/plot_schema"),n.Queue=t("./lib/queue"),n.d3=t("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":36,"./components/annotations3d":41,"./components/colorscale":55,"./components/errorbars":70,"./components/fx":82,"./components/grid":86,"./components/images":91,"./components/legend":99,"./components/rangeselector":110,"./components/rangeslider":117,"./components/shapes":125,"./components/sliders":130,"./components/updatemenus":136,"./fonts/mathjax_config":143,"./lib/queue":173,"./locale-en":184,"./locale-en-us":183,"./plot_api":188,"./plot_api/plot_schema":192,"./plots/plots":235,"./registry":242,"./snapshot":247,"./traces/scatter":292,d3:8,"es6-promise":9}],143:[function(t,e,n){"use strict";e.exports=function(){"undefined"!=typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],144:[function(t,e,n){"use strict";n.isLeftAnchor=function(t){return"left"===t.xanchor||"auto"===t.xanchor&&t.x<=1/3},n.isCenterAnchor=function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},n.isRightAnchor=function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},n.isTopAnchor=function(t){return"top"===t.yanchor||"auto"===t.yanchor&&t.y>=2/3},n.isMiddleAnchor=function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3},n.isBottomAnchor=function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3}},{}],145:[function(t,e,n){"use strict";var i=t("./mod"),r=i.mod,a=i.modHalf,o=Math.PI,s=2*o;function l(t){return Math.abs(t[1]-t[0])>s-1e-15}function c(t,e){return a(e-t,s)}function u(t,e){if(l(e))return!0;var n,i;e[0]<e[1]?(n=e[0],i=e[1]):(n=e[1],i=e[0]),(n=r(n,s))>(i=r(i,s))&&(i+=s);var a=r(t,s),o=a+s;return a>=n&&a<=i||o>=n&&o<=i}function h(t,e,n,i,r,a,c){r=r||0,a=a||0;var u,h,d,f,p,v=l([n,i]);function g(t,e){return[t*Math.cos(e)+r,a-t*Math.sin(e)]}v?(u=0,h=o,d=s):n<i?(u=n,d=i):(u=i,d=n),t<e?(f=t,p=e):(f=e,p=t);var m,y=Math.abs(d-u)<=o?0:1;function _(t,e,n){return"A"+[t,t]+" "+[0,y,n]+" "+g(t,e)}return v?m=null===f?"M"+g(p,u)+_(p,h,0)+_(p,d,0)+"Z":"M"+g(f,u)+_(f,h,0)+_(f,d,0)+"ZM"+g(p,u)+_(p,h,1)+_(p,d,1)+"Z":null===f?(m="M"+g(p,u)+_(p,d,0),c&&(m+="L0,0Z")):m="M"+g(f,u)+"L"+g(p,u)+_(p,d,0)+"L"+g(f,d)+_(f,u,1)+"Z",m}e.exports={deg2rad:function(t){return t/180*o},rad2deg:function(t){return t/o*180},angleDelta:c,angleDist:function(t,e){return Math.abs(c(t,e))},isFullCircle:l,isAngleInsideSector:u,isPtInsideSector:function(t,e,n,i){return!!u(e,i)&&(n[0]<n[1]?(r=n[0],a=n[1]):(r=n[1],a=n[0]),t>=r&&t<=a);var r,a},pathArc:function(t,e,n,i,r){return h(null,t,e,n,i,r,0)},pathSector:function(t,e,n,i,r){return h(null,t,e,n,i,r,1)},pathAnnulus:function(t,e,n,i,r,a){return h(t,e,n,i,r,a,1)}}},{"./mod":166}],146:[function(t,e,n){"use strict";var i=Array.isArray,r="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},a="undefined"==typeof DataView?function(){}:DataView;function o(t){return r.isView(t)&&!(t instanceof a)}function s(t){return i(t)||o(t)}function l(t,e,n){if(s(t)){if(s(t[0])){for(var i=n,r=0;r<t.length;r++)i=e(i,t[r].length);return i}return t.length}return 0}n.isTypedArray=o,n.isArrayOrTypedArray=s,n.isArray1D=function(t){return!s(t[0])},n.ensureArray=function(t,e){return i(t)||(t=[]),t.length=e,t},n.concat=function(){var t,e,n,r,a,o,s,l,c=[],u=!0,h=0;for(n=0;n<arguments.length;n++)(o=(r=arguments[n]).length)&&(e?c.push(r):(e=r,a=o),i(r)?t=!1:(u=!1,h?t!==r.constructor&&(t=!1):t=r.constructor),h+=o);if(!h)return[];if(!c.length)return e;if(u)return e.concat.apply(e,c);if(t){for((s=new t(h)).set(e),n=0;n<c.length;n++)s.set(r=c[n],a),a+=r.length;return s}for(s=new Array(h),l=0;l<e.length;l++)s[l]=e[l];for(n=0;n<c.length;n++){for(r=c[n],l=0;l<r.length;l++)s[a+l]=r[l];a+=l}return s},n.maxRowLength=function(t){return l(t,Math.max,0)},n.minRowLength=function(t){return l(t,Math.min,1/0)}},{}],147:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../constants/numerical").BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function(t){return"string"==typeof t&&(t=t.replace(a,"")),i(t)?Number(t):r}},{"../constants/numerical":140,"fast-isnumeric":10}],148:[function(t,e,n){"use strict";e.exports=function(t){var e=t._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0,depth:!0})})}},{}],149:[function(t,e,n){"use strict";e.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}},{}],150:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("tinycolor2"),a=t("../plots/attributes"),o=t("../components/colorscale/scales"),s=t("../constants/interactions").DESELECTDIM,l=t("./nested_property"),c=t("./regex").counter,u=t("./mod").modHalf,h=t("./array").isArrayOrTypedArray;function d(t,e){var i=n.valObjectMeta[e.valType];if(e.arrayOk&&h(t))return!0;if(i.validateFunction)return i.validateFunction(t,e);var r={},a=r;return i.coerceFunction(t,{set:function(t){a=t}},r,e),a!==r}n.valObjectMeta={data_array:{coerceFunction:function(t,e,n){h(t)?e.set(t):void 0!==n&&e.set(n)}},enumerated:{coerceFunction:function(t,e,n,i){i.coerceNumber&&(t=+t),-1===i.values.indexOf(t)?e.set(n):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var n=e.values,i=0;i<n.length;i++){var r=String(n[i]);if("/"===r.charAt(0)&&"/"===r.charAt(r.length-1)){if(new RegExp(r.substr(1,r.length-2)).test(t))return!0}else if(t===n[i])return!0}return!1}},boolean:{coerceFunction:function(t,e,n){e.set(!0===t||!1===t?t:n)}},number:{coerceFunction:function(t,e,n,r){!i(t)||void 0!==r.min&&t<r.min||void 0!==r.max&&t>r.max?e.set(n):e.set(+t)}},integer:{coerceFunction:function(t,e,n,r){t%1||!i(t)||void 0!==r.min&&t<r.min||void 0!==r.max&&t>r.max?e.set(n):e.set(+t)}},string:{coerceFunction:function(t,e,n,i){e.set("string"!=typeof t?!0!==i.strict&&"number"==typeof t?String(t):n:i.noBlank&&!t?n:t)}},color:{coerceFunction:function(t,e,n){r(t).isValid()?e.set(t):e.set(n)}},colorlist:{coerceFunction:function(t,e,n){Array.isArray(t)&&t.length&&t.every(function(t){return r(t).isValid()})?e.set(t):e.set(n)}},colorscale:{coerceFunction:function(t,e,n){e.set(o.get(t,n))}},angle:{coerceFunction:function(t,e,n){"auto"===t?e.set("auto"):i(t)?e.set(u(+t,360)):e.set(n)}},subplotid:{coerceFunction:function(t,e,n,i){var r=i.regex||c(n);"string"==typeof t&&r.test(t)?e.set(t):e.set(n)},validateFunction:function(t,e){var n=e.dflt;return t===n||"string"==typeof t&&!!c(n).test(t)}},flaglist:{coerceFunction:function(t,e,n,i){if("string"==typeof t)if(-1===(i.extras||[]).indexOf(t)){for(var r=t.split("+"),a=0;a<r.length;){var o=r[a];-1===i.flags.indexOf(o)||r.indexOf(o)<a?r.splice(a,1):a++}e.set(r.length?r.join("+"):n)}else e.set(t);else e.set(n)}},any:{coerceFunction:function(t,e,n){e.set(void 0===t?n:t)}},info_array:{coerceFunction:function(t,e,i,r){function a(t,e,i){var r;return void 0===i&&(i=e.dflt),n.valObjectMeta[e.valType].coerceFunction(t,{set:function(t){r=t}},i,e),r}var o=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var s,l,c,u,h,d=r.items,f=[],p=Array.isArray(d),v=p&&o&&Array.isArray(d[0]),g=o&&p&&!v,m=p&&!g?d.length:t.length;if(i=Array.isArray(i)?i:[],o)for(s=0;s<m;s++)for(f[s]=[],c=Array.isArray(t[s])?t[s]:[],u=g?d.length:p?d[s].length:c.length,l=0;l<u;l++)void 0!==(h=a(c[l],g?d[l]:p?d[s][l]:d,(i[s]||[])[l]))&&(f[s][l]=h);else for(s=0;s<m;s++)void 0!==(h=a(t[s],p?d[s]:d,i[s]))&&(f[s]=h);e.set(f)}else e.set(i)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var n=e.items,i=Array.isArray(n),r=2===e.dimensions;if(!e.freeLength&&t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(r){if(!Array.isArray(t[a])||!e.freeLength&&t[a].length!==n[a].length)return!1;for(var o=0;o<t[a].length;o++)if(!d(t[a][o],i?n[a][o]:n))return!1}else if(!d(t[a],i?n[a]:n))return!1;return!0}}},n.coerce=function(t,e,i,r,a){var o=l(i,r).get(),s=l(t,r),c=l(e,r),u=s.get(),f=e._template;if(void 0===u&&f&&(u=l(f,r).get(),f=0),void 0===a&&(a=o.dflt),o.arrayOk&&h(u))return c.set(u),u;var p=n.valObjectMeta[o.valType].coerceFunction;p(u,c,a,o);var v=c.get();return f&&v===a&&!d(u,o)&&(p(u=l(f,r).get(),c,a,o),v=c.get()),v},n.coerce2=function(t,e,i,r,a){var o=l(t,r),s=n.coerce(t,e,i,r,a);return null!=o.get()&&s},n.coerceFont=function(t,e,n){var i={};return i.family=t(e+".family",(n=n||{}).family),i.size=t(e+".size",n.size),i.color=t(e+".color",n.color),i},n.coerceHoverinfo=function(t,e,i){var r,o=e._module.attributes,s=o.hoverinfo?o:a,l=s.hoverinfo;if(1===i._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),r=c.join("+")}return n.coerce(t,e,s,"hoverinfo",r)},n.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var n,i,r=t.marker.opacity;void 0!==r&&(h(r)||t.selected||t.unselected||(n=r,i=s*r),e("selected.marker.opacity",n),e("unselected.marker.opacity",i))}},n.validate=d},{"../components/colorscale/scales":58,"../constants/interactions":139,"../plots/attributes":200,"./array":146,"./mod":166,"./nested_property":167,"./regex":174,"fast-isnumeric":10,tinycolor2:26}],151:[function(t,e,n){"use strict";var i,r,a=t("d3"),o=t("fast-isnumeric"),s=t("./loggers"),l=t("./mod").mod,c=t("../constants/numerical"),u=c.BADNUM,h=c.ONEDAY,d=c.ONEHOUR,f=c.ONEMIN,p=c.ONESEC,v=c.EPOCHJD,g=t("../registry"),m=a.time.format.utc,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,_=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,x=(new Date).getFullYear()-70;function b(t){return t&&g.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function w(t,e){return String(t+Math.pow(10,e)).substr(1)}n.dateTick0=function(t,e){return b(t)?e?g.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:g.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"},n.dfltRange=function(t){return b(t)?g.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},n.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},n.dateTime2ms=function(t,e){if(n.isJSDate(t)){var a=t.getTimezoneOffset()*f,o=(t.getUTCMinutes()-t.getMinutes())*f+(t.getUTCSeconds()-t.getSeconds())*p+(t.getUTCMilliseconds()-t.getMilliseconds());if(o){var s=3*f;a=a-s/2+l(o-a+s/2,s)}return(t=Number(t)-a)>=i&&t<=r?t:u}if("string"!=typeof t&&"number"!=typeof t)return u;t=String(t);var c=b(e),m=t.charAt(0);!c||"G"!==m&&"g"!==m||(t=t.substr(1),e="");var w=c&&"chinese"===e.substr(0,7),k=t.match(w?_:y);if(!k)return u;var T=k[1],M=k[3]||"1",A=Number(k[5]||1),C=Number(k[7]||0),L=Number(k[9]||0),S=Number(k[11]||0);if(c){if(2===T.length)return u;var E;T=Number(T);try{var O=g.getComponentMethod("calendars","getCal")(e);if(w){var P="i"===M.charAt(M.length-1);M=parseInt(M,10),E=O.newDate(T,O.toMonthIndex(T,M,P),A)}else E=O.newDate(T,Number(M),A)}catch(t){return u}return E?(E.toJD()-v)*h+C*d+L*f+S*p:u}T=2===T.length?(Number(T)+2e3-x)%100+x:Number(T),M-=1;var D=new Date(Date.UTC(2e3,M,A,C,L));return D.setUTCFullYear(T),D.getUTCMonth()!==M?u:D.getUTCDate()!==A?u:D.getTime()+S*p},i=n.MIN_MS=n.dateTime2ms("-9999"),r=n.MAX_MS=n.dateTime2ms("9999-12-31 23:59:59.9999"),n.isDateTime=function(t,e){return n.dateTime2ms(t,e)!==u};var k=90*h,T=3*d,M=5*f;function A(t,e,n,i,r){if((e||n||i||r)&&(t+=" "+w(e,2)+":"+w(n,2),(i||r)&&(t+=":"+w(i,2),r))){for(var a=4;r%10==0;)a-=1,r/=10;t+="."+w(r,a)}return t}n.ms2DateTime=function(t,e,n){if("number"!=typeof t||!(t>=i&&t<=r))return u;e||(e=0);var a,o,s,c,y,_,x=Math.floor(10*l(t+.05,1)),w=Math.round(t-x/10);if(b(n)){var C=Math.floor(w/h)+v,L=Math.floor(l(t,h));try{a=g.getComponentMethod("calendars","getCal")(n).fromJD(C).formatDate("yyyy-mm-dd")}catch(t){a=m("G%Y-%m-%d")(new Date(w))}if("-"===a.charAt(0))for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;o=e<k?Math.floor(L/d):0,s=e<k?Math.floor(L%d/f):0,c=e<T?Math.floor(L%f/p):0,y=e<M?L%p*10+x:0}else _=new Date(w),a=m("%Y-%m-%d")(_),o=e<k?_.getUTCHours():0,s=e<k?_.getUTCMinutes():0,c=e<T?_.getUTCSeconds():0,y=e<M?10*_.getUTCMilliseconds()+x:0;return A(a,o,s,c,y)},n.ms2DateTimeLocal=function(t){if(!(t>=i+h&&t<=r-h))return u;var e=Math.floor(10*l(t+.05,1)),n=new Date(Math.round(t-e/10));return A(a.time.format("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+e)},n.cleanDate=function(t,e,i){if(t===u)return e;if(n.isJSDate(t)||"number"==typeof t&&isFinite(t)){if(b(i))return s.error("JS Dates and milliseconds are incompatible with world calendars",t),e;if(!(t=n.ms2DateTimeLocal(+t))&&void 0!==e)return e}else if(!n.isDateTime(t,i))return s.error("unrecognized date",t),e;return t};var C=/%\d?f/g;function L(t,e,n,i){t=t.replace(C,function(t){var n=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"});var r=new Date(Math.floor(e+.05));if(b(i))try{t=g.getComponentMethod("calendars","worldCalFmt")(t,e,i)}catch(t){return"Invalid"}return n(t)(r)}var S=[59,59.9,59.99,59.999,59.9999];n.formatDate=function(t,e,n,i,r,a){if(r=b(r)&&r,!e)if("y"===n)e=a.year;else if("m"===n)e=a.month;else{if("d"!==n)return function(t,e){var n=l(t+.05,h),i=w(Math.floor(n/d),2)+":"+w(l(Math.floor(n/f),60),2);if("M"!==e){o(e)||(e=0);var r=(100+Math.min(l(t/p,60),S[e])).toFixed(e).substr(1);e>0&&(r=r.replace(/0+$/,"").replace(/[\.]$/,"")),i+=":"+r}return i}(t,n)+"\n"+L(a.dayMonthYear,t,i,r);e=a.dayMonth+"\n"+a.year}return L(e,t,i,r)};var E=3*h;n.incrementMonth=function(t,e,n){n=b(n)&&n;var i=l(t,h);if(t=Math.round(t-i),n)try{var r=Math.round(t/h)+v,a=g.getComponentMethod("calendars","getCal")(n),o=a.fromJD(r);return e%12?a.add(o,e,"m"):a.add(o,e/12,"y"),(o.toJD()-v)*h+i}catch(e){s.error("invalid ms "+t+" in calendar "+n)}var c=new Date(t+E);return c.setUTCMonth(c.getUTCMonth()+e)+i-E},n.findExactDates=function(t,e){for(var n,i,r=0,a=0,s=0,l=0,c=b(e)&&g.getComponentMethod("calendars","getCal")(e),u=0;u<t.length;u++)if(o(i=t[u])){if(!(i%h))if(c)try{1===(n=c.fromJD(i/h+v)).day()?1===n.month()?r++:a++:s++}catch(t){}else 1===(n=new Date(i)).getUTCDate()?0===n.getUTCMonth()?r++:a++:s++}else l++;s+=a+=r;var d=t.length-l;return{exactYears:r/d,exactMonths:a/d,exactDays:s/d}}},{"../constants/numerical":140,"../registry":242,"./loggers":163,"./mod":166,d3:8,"fast-isnumeric":10}],152:[function(t,e,n){"use strict";var i=t("events").EventEmitter,r={init:function(t){if(t._ev instanceof i)return t;var e=new i,n=new i;return t._ev=e,t._internalEv=n,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=n.on.bind(n),t._internalOnce=n.once.bind(n),t._removeInternalListener=n.removeListener.bind(n),t._removeAllInternalListeners=n.removeAllListeners.bind(n),t.emit=function(i,r){"undefined"!=typeof jQuery&&jQuery(t).trigger(i,r),e.emit(i,r),n.emit(i,r)},t},triggerHandler:function(t,e,n){var i,r;"undefined"!=typeof jQuery&&(i=jQuery(t).triggerHandler(e,n));var a=t._ev;if(!a)return i;var o,s=a._events[e];if(!s)return i;function l(t){return t.listener?(a.removeListener(e,t.listener),t.fired?void 0:(t.fired=!0,t.listener.apply(a,[n]))):t.apply(a,[n])}for(s=Array.isArray(s)?s:[s],o=0;o<s.length-1;o++)l(s[o]);return r=l(s[o]),void 0!==i?i:r},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}};e.exports=r},{events:7}],153:[function(t,e,n){"use strict";var i=t("./is_plain_object.js"),r=Array.isArray;function a(t,e,n,o){var s,l,c,u,h,d,f=t[0],p=t.length;if(2===p&&r(f)&&r(t[1])&&0===f.length){if(function(t,e){var n,i;for(n=0;n<t.length;n++){if(null!==(i=t[n])&&"object"==typeof i)return!1;void 0!==i&&(e[n]=i)}return!0}(t[1],f))return f;f.splice(0,f.length)}for(var v=1;v<p;v++)for(l in s=t[v])c=f[l],u=s[l],o&&r(u)?f[l]=u:e&&u&&(i(u)||(h=r(u)))?(h?(h=!1,d=c&&r(c)?c:[]):d=c&&i(c)?c:{},f[l]=a([d,u],e,n,o)):(void 0!==u||n)&&(f[l]=u);return f}n.extendFlat=function(){return a(arguments,!1,!1,!1)},n.extendDeep=function(){return a(arguments,!0,!1,!1)},n.extendDeepAll=function(){return a(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return a(arguments,!0,!1,!0)}},{"./is_plain_object.js":160}],154:[function(t,e,n){"use strict";e.exports=function(t){for(var e={},n=[],i=0,r=0;r<t.length;r++){var a=t[r];1!==e[a]&&(e[a]=1,n[i++]=a)}return n}},{}],155:[function(t,e,n){"use strict";function i(t){return!0===t.visible}function r(t){return!0===t[0].trace.visible}e.exports=function(t){for(var e,n=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?r:i),a=[],o=0;o<t.length;o++){var s=t[o];n(s)&&a.push(s)}return a}},{}],156:[function(t,e,n){"use strict";var i,r,a,o=t("./mod").mod;function s(t,e,n,i,r,a,o,s){var l=n-t,c=r-t,u=o-r,h=i-e,d=a-e,f=s-a,p=l*f-u*h;if(0===p)return null;var v=(c*f-u*d)/p,g=(c*h-l*d)/p;return g<0||g>1||v<0||v>1?null:{x:t+l*v,y:e+h*v}}function l(t,e,n,i,r){var a=i*t+r*e;if(a<0)return i*i+r*r;if(a>n){var o=i-t,s=r-e;return o*o+s*s}var l=i*e-r*t;return l*l/n}n.segmentsIntersect=s,n.segmentDistance=function(t,e,n,i,r,a,o,c){if(s(t,e,n,i,r,a,o,c))return 0;var u=n-t,h=i-e,d=o-r,f=c-a,p=u*u+h*h,v=d*d+f*f,g=Math.min(l(u,h,p,r-t,a-e),l(u,h,p,o-t,c-e),l(d,f,v,t-r,e-a),l(d,f,v,n-r,i-a));return Math.sqrt(g)},n.getTextLocation=function(t,e,n,s){if(t===r&&s===a||(i={},r=t,a=s),i[n])return i[n];var l=t.getPointAtLength(o(n-s/2,e)),c=t.getPointAtLength(o(n+s/2,e)),u=Math.atan((c.y-l.y)/(c.x-l.x)),h=t.getPointAtLength(o(n,e)),d={x:(4*h.x+l.x+c.x)/6,y:(4*h.y+l.y+c.y)/6,theta:u};return i[n]=d,d},n.clearLocationCache=function(){r=null},n.getVisibleSegment=function(t,e,n){var i,r,a=e.left,o=e.right,s=e.top,l=e.bottom,c=0,u=t.getTotalLength(),h=u;function d(e){var n=t.getPointAtLength(e);0===e?i=n:e===u&&(r=n);var c=n.x<a?a-n.x:n.x>o?n.x-o:0,h=n.y<s?s-n.y:n.y>l?n.y-l:0;return Math.sqrt(c*c+h*h)}for(var f=d(c);f;){if((c+=f+n)>h)return;f=d(c)}for(f=d(h);f;){if(c>(h-=f+n))return;f=d(h)}return{min:c,max:h,len:h-c,total:u,isClosed:0===c&&h===u&&Math.abs(i.x-r.x)<.1&&Math.abs(i.y-r.y)<.1}},n.findPointOnPath=function(t,e,n,i){for(var r,a,o,s=(i=i||{}).pathLength||t.getTotalLength(),l=i.tolerance||.001,c=i.iterationLimit||30,u=t.getPointAtLength(0)[n]>t.getPointAtLength(s)[n]?-1:1,h=0,d=0,f=s;h<c;){if(o=(a=t.getPointAtLength(r=(d+f)/2))[n]-e,Math.abs(o)<l)return a;u*o>0?f=r:d=r,h++}return a}},{"./mod":166}],157:[function(t,e,n){"use strict";e.exports=function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null==t)throw new Error("DOM element provided is null or undefined");return t}},{}],158:[function(t,e,n){"use strict";e.exports=function(t){return t}},{}],159:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("../constants/numerical"),o=a.FP_SAFE,s=a.BADNUM,l=e.exports={};l.nestedProperty=t("./nested_property"),l.keyedContainer=t("./keyed_container"),l.relativeAttr=t("./relative_attr"),l.isPlainObject=t("./is_plain_object"),l.toLogRange=t("./to_log_range"),l.relinkPrivateKeys=t("./relink_private");var c=t("./array");l.isTypedArray=c.isTypedArray,l.isArrayOrTypedArray=c.isArrayOrTypedArray,l.isArray1D=c.isArray1D,l.ensureArray=c.ensureArray,l.concat=c.concat,l.maxRowLength=c.maxRowLength,l.minRowLength=c.minRowLength;var u=t("./mod");l.mod=u.mod,l.modHalf=u.modHalf;var h=t("./coerce");l.valObjectMeta=h.valObjectMeta,l.coerce=h.coerce,l.coerce2=h.coerce2,l.coerceFont=h.coerceFont,l.coerceHoverinfo=h.coerceHoverinfo,l.coerceSelectionMarkerOpacity=h.coerceSelectionMarkerOpacity,l.validate=h.validate;var d=t("./dates");l.dateTime2ms=d.dateTime2ms,l.isDateTime=d.isDateTime,l.ms2DateTime=d.ms2DateTime,l.ms2DateTimeLocal=d.ms2DateTimeLocal,l.cleanDate=d.cleanDate,l.isJSDate=d.isJSDate,l.formatDate=d.formatDate,l.incrementMonth=d.incrementMonth,l.dateTick0=d.dateTick0,l.dfltRange=d.dfltRange,l.findExactDates=d.findExactDates,l.MIN_MS=d.MIN_MS,l.MAX_MS=d.MAX_MS;var f=t("./search");l.findBin=f.findBin,l.sorterAsc=f.sorterAsc,l.sorterDes=f.sorterDes,l.distinctVals=f.distinctVals,l.roundUp=f.roundUp,l.sort=f.sort,l.findIndexOfMin=f.findIndexOfMin;var p=t("./stats");l.aggNums=p.aggNums,l.len=p.len,l.mean=p.mean,l.midRange=p.midRange,l.variance=p.variance,l.stdev=p.stdev,l.interp=p.interp;var v=t("./matrix");l.init2dArray=v.init2dArray,l.transposeRagged=v.transposeRagged,l.dot=v.dot,l.translationMatrix=v.translationMatrix,l.rotationMatrix=v.rotationMatrix,l.rotationXYMatrix=v.rotationXYMatrix,l.apply2DTransform=v.apply2DTransform,l.apply2DTransform2=v.apply2DTransform2;var g=t("./angles");l.deg2rad=g.deg2rad,l.rad2deg=g.rad2deg,l.angleDelta=g.angleDelta,l.angleDist=g.angleDist,l.isFullCircle=g.isFullCircle,l.isAngleInsideSector=g.isAngleInsideSector,l.isPtInsideSector=g.isPtInsideSector,l.pathArc=g.pathArc,l.pathSector=g.pathSector,l.pathAnnulus=g.pathAnnulus;var m=t("./anchor_utils");l.isLeftAnchor=m.isLeftAnchor,l.isCenterAnchor=m.isCenterAnchor,l.isRightAnchor=m.isRightAnchor,l.isTopAnchor=m.isTopAnchor,l.isMiddleAnchor=m.isMiddleAnchor,l.isBottomAnchor=m.isBottomAnchor;var y=t("./geometry2d");l.segmentsIntersect=y.segmentsIntersect,l.segmentDistance=y.segmentDistance,l.getTextLocation=y.getTextLocation,l.clearLocationCache=y.clearLocationCache,l.getVisibleSegment=y.getVisibleSegment,l.findPointOnPath=y.findPointOnPath;var _=t("./extend");l.extendFlat=_.extendFlat,l.extendDeep=_.extendDeep,l.extendDeepAll=_.extendDeepAll,l.extendDeepNoArrays=_.extendDeepNoArrays;var x=t("./loggers");l.log=x.log,l.warn=x.warn,l.error=x.error;var b=t("./regex");l.counterRegex=b.counter;var w=t("./throttle");function k(t){var e={};for(var n in t)for(var i=t[n],r=0;r<i.length;r++)e[i[r]]=+n;return e}l.throttle=w.throttle,l.throttleDone=w.done,l.clearThrottle=w.clear,l.getGraphDiv=t("./get_graph_div"),l.clearResponsive=t("./clear_responsive"),l.makeTraceGroups=t("./make_trace_groups"),l._=t("./localize"),l.notifier=t("./notifier"),l.filterUnique=t("./filter_unique"),l.filterVisible=t("./filter_visible"),l.pushUnique=t("./push_unique"),l.cleanNumber=t("./clean_number"),l.ensureNumber=function(t){return r(t)?(t=Number(t))<-o||t>o?s:r(t)?Number(t):s:s},l.isIndex=function(t,e){return!(void 0!==e&&t>=e)&&r(t)&&t>=0&&t%1==0},l.noop=t("./noop"),l.identity=t("./identity"),l.repeat=function(t,e){for(var n=new Array(e),i=0;i<e;i++)n[i]=t;return n},l.swapAttrs=function(t,e,n,i){n||(n="x"),i||(i="y");for(var r=0;r<e.length;r++){var a=e[r],o=l.nestedProperty(t,a.replace("?",n)),s=l.nestedProperty(t,a.replace("?",i)),c=o.get();o.set(s.get()),s.set(c)}},l.raiseToTop=function(t){t.parentNode.appendChild(t)},l.cancelTransition=function(t){return t.transition().duration(0)},l.constrain=function(t,e,n){return e>n?Math.max(n,Math.min(e,t)):Math.max(e,Math.min(n,t))},l.bBoxIntersect=function(t,e,n){return t.left<=e.right+(n=n||0)&&e.left<=t.right+n&&t.top<=e.bottom+n&&e.top<=t.bottom+n},l.simpleMap=function(t,e,n,i){for(var r=t.length,a=new Array(r),o=0;o<r;o++)a[o]=e(t[o],n,i);return a},l.randstr=function t(e,n,i,r){if(i||(i=16),void 0===n&&(n=24),n<=0)return"0";var a,o,s=Math.log(Math.pow(2,n))/Math.log(i),c="";for(a=2;s===1/0;a*=2)s=Math.log(Math.pow(2,n/a))/Math.log(i)*a;var u=s-Math.floor(s);for(a=0;a<Math.floor(s);a++)c=Math.floor(Math.random()*i).toString(i)+c;u&&(o=Math.pow(i,u),c=Math.floor(Math.random()*o).toString(i)+c);var h=parseInt(c,i);return e&&e[c]||h!==1/0&&h>=Math.pow(2,n)?r>10?(l.warn("randstr failed uniqueness"),c):t(e,n,i,(r||0)+1):c},l.OptionControl=function(t,e){t||(t={}),e||(e="opt");var n={optionList:[],_newoption:function(i){i[e]=t,n[i.name]=i,n.optionList.push(i)}};return n["_"+e]=t,n},l.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var n,i,r,a,o=t.length,s=2*o,l=2*e-1,c=new Array(l),u=new Array(o);for(n=0;n<l;n++)c[n]=(1-Math.cos(Math.PI*(n+1)/e))/(2*e);for(n=0;n<o;n++){for(a=0,i=0;i<l;i++)(r=n+i+1-e)<-o?r-=s*Math.round(r/s):r>=s&&(r-=s*Math.floor(r/s)),r<0?r=-1-r:r>=o&&(r=s-1-r),a+=t[r]*c[i];u[n]=a}return u},l.syncOrAsync=function(t,e,n){var i;function r(){return l.syncOrAsync(t,e,n)}for(;t.length;)if((i=(0,t.splice(0,1)[0])(e))&&i.then)return i.then(r).then(void 0,l.promiseError);return n&&n(e)},l.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},l.noneOrAll=function(t,e,n){if(t){var i,r=!1,a=!0;for(i=0;i<n.length;i++)null!=t[n[i]]?r=!0:a=!1;if(r&&!a)for(i=0;i<n.length;i++)t[n[i]]=e[n[i]]}},l.mergeArray=function(t,e,n){if(l.isArrayOrTypedArray(t))for(var i=Math.min(t.length,e.length),r=0;r<i;r++)e[r][n]=t[r]},l.fillArray=function(t,e,n,i){if(i=i||l.identity,l.isArrayOrTypedArray(t))for(var r=0;r<e.length;r++)e[r][n]=i(t[r])},l.castOption=function(t,e,n,i){i=i||l.identity;var r=l.nestedProperty(t,n).get();return l.isArrayOrTypedArray(r)?Array.isArray(e)&&l.isArrayOrTypedArray(r[e[0]])?i(r[e[0]][e[1]]):i(r[e]):r},l.extractOption=function(t,e,n,i){if(n in t)return t[n];var r=l.nestedProperty(e,i).get();return Array.isArray(r)?void 0:r},l.tagSelected=function(t,e,n){var i,r,a=e.selectedpoints,o=e._indexToPoints;o&&(i=k(o));for(var s=0;s<a.length;s++){var c=a[s];if(l.isIndex(c)){var u=i?i[c]:c,h=n?n[u]:u;void 0!==(r=h)&&r<t.length&&(t[h].selected=1)}}},l.selIndices2selPoints=function(t){var e=t.selectedpoints,n=t._indexToPoints;if(n){for(var i=k(n),r=[],a=0;a<e.length;a++){var o=e[a];if(l.isIndex(o)){var s=i[o];l.isIndex(s)&&r.push(s)}}return r}return e},l.getTargetArray=function(t,e){var n=e.target;if("string"==typeof n&&n){var i=l.nestedProperty(t,n).get();return!!Array.isArray(i)&&i}return!!Array.isArray(n)&&n},l.minExtend=function(t,e){var n={};"object"!=typeof e&&(e={});var i,r,a,o=Object.keys(t);for(i=0;i<o.length;i++)a=t[r=o[i]],"_"!==r.charAt(0)&&"function"!=typeof a&&(n[r]="module"===r?a:Array.isArray(a)?"colorscale"===r?a.slice():a.slice(0,3):a&&"object"==typeof a?l.minExtend(t[r],e[r]):a);for(o=Object.keys(e),i=0;i<o.length;i++)"object"==typeof(a=e[r=o[i]])&&r in n&&"object"==typeof n[r]||(n[r]=a);return n},l.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},l.containsAny=function(t,e){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1},l.isPlotDiv=function(t){var e=i.select(t);return e.node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},l.removeElement=function(t){var e=t&&t.parentNode;e&&e.removeChild(t)},l.addStyleRule=function(t,e){l.addRelatedStyleRule("global",t,e)},l.addRelatedStyleRule=function(t,e,n){var i="plotly.js-style-"+t,r=document.getElementById(i);r||((r=document.createElement("style")).setAttribute("id",i),r.appendChild(document.createTextNode("")),document.head.appendChild(r));var a=r.sheet;a.insertRule?a.insertRule(e+"{"+n+"}",0):a.addRule?a.addRule(e,n,0):l.warn("addStyleRule failed")},l.deleteRelatedStyleRule=function(t){var e=document.getElementById("plotly.js-style-"+t);e&&l.removeElement(e)},l.isIE=function(){return void 0!==window.navigator.msSaveBlob},l.isD3Selection=function(t){return t&&"function"==typeof t.classed},l.ensureSingle=function(t,e,n,i){var r=t.select(e+(n?"."+n:""));if(r.size())return r;var a=t.append(e);return n&&a.classed(n,!0),i&&a.call(i),a},l.ensureSingleById=function(t,e,n,i){var r=t.select(e+"#"+n);if(r.size())return r;var a=t.append(e).attr("id",n);return i&&a.call(i),a},l.objectFromPath=function(t,e){for(var n,i=t.split("."),r=n={},a=0;a<i.length;a++){var o=i[a],s=null,l=i[a].match(/(.*)\[([0-9]+)\]/);l?(s=l[2],(n=n[o=l[1]]=[])[s]=a===i.length-1?e:{},n=n[s]):(n[o]=a===i.length-1?e:{},n=n[o])}return r};var T=/^([^\[\.]+)\.(.+)?/,M=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;l.expandObjectPaths=function(t){var e,n,i,r,a,o,s;if("object"==typeof t&&!Array.isArray(t))for(n in t)t.hasOwnProperty(n)&&((e=n.match(T))?(r=t[n],i=e[1],delete t[n],t[i]=l.extendDeepNoArrays(t[i]||{},l.objectFromPath(n,l.expandObjectPaths(r))[i])):(e=n.match(M))?(r=t[n],i=e[1],a=parseInt(e[2]),delete t[n],t[i]=t[i]||[],"."===e[3]?(s=e[4],o=t[i][a]=t[i][a]||{},l.extendDeepNoArrays(o,l.objectFromPath(s,l.expandObjectPaths(r)))):t[i][a]=l.expandObjectPaths(r)):t[n]=l.expandObjectPaths(t[n]));return t},l.numSeparate=function(t,e,n){if(n||(n=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var i=/(\d+)(\d{3})/,r=e.charAt(0),a=e.charAt(1),o=t.split("."),s=o[0],l=o.length>1?r+o[1]:"";if(a&&(o.length>1||s.length>4||n))for(;i.test(s);)s=s.replace(i,"$1"+a+"$2");return s+l},l.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)(:[^}]*)?}/g;var A=/^\w*$/;l.templateString=function(t,e){var n={};return t.replace(l.TEMPLATE_STRING_REGEX,function(t,i){return A.test(i)?e[i]||"":(n[i]=n[i]||l.nestedProperty(e,i).get,n[i]()||"")})};var C=/^:/,L=0;l.hovertemplateString=function(t,e,n){var r=arguments,a={};return t.replace(l.TEMPLATE_STRING_REGEX,function(t,o,s){var c,u,h;for(h=3;h<r.length;h++){if((c=r[h]).hasOwnProperty(o)){u=c[o];break}if(A.test(o)||(u=a[o]||l.nestedProperty(c,o).get())&&(a[o]=u),void 0!==u)break}return void 0===u&&(L<10&&(l.warn("Variable '"+o+"' in hovertemplate could not be found!"),u=t),10===L&&l.warn("Too many hovertemplate warnings - additional warnings will be suppressed"),L++),s?u=(n?n.numberFormat:i.format)(s.replace(C,""))(u):e.hasOwnProperty(o+"Label")&&(u=e[o+"Label"]),u})},l.subplotSort=function(t,e){for(var n=Math.min(t.length,e.length)+1,i=0,r=0,a=0;a<n;a++){var o=t.charCodeAt(a)||0,s=e.charCodeAt(a)||0,l=o>=48&&o<=57,c=s>=48&&s<=57;if(l&&(i=10*i+o-48),c&&(r=10*r+s-48),!l||!c){if(i!==r)return i-r;if(o!==s)return o-s}}return r-i};var S=2e9;l.seedPseudoRandom=function(){S=2e9},l.pseudoRandom=function(){var t=S;return S=(69069*S+1)%4294967296,Math.abs(S-t)<429496729?l.pseudoRandom():S/4294967296}},{"../constants/numerical":140,"./anchor_utils":144,"./angles":145,"./array":146,"./clean_number":147,"./clear_responsive":149,"./coerce":150,"./dates":151,"./extend":153,"./filter_unique":154,"./filter_visible":155,"./geometry2d":156,"./get_graph_div":157,"./identity":158,"./is_plain_object":160,"./keyed_container":161,"./localize":162,"./loggers":163,"./make_trace_groups":164,"./matrix":165,"./mod":166,"./nested_property":167,"./noop":168,"./notifier":169,"./push_unique":172,"./regex":174,"./relative_attr":175,"./relink_private":176,"./search":177,"./stats":179,"./throttle":181,"./to_log_range":182,d3:8,"fast-isnumeric":10}],160:[function(t,e,n){"use strict";e.exports=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t)===Object.prototype}},{}],161:[function(t,e,n){"use strict";var i=t("./nested_property"),r=/^\w*$/;e.exports=function(t,e,n,a){var o,s,l;n=n||"name",a=a||"value";var c={};e&&e.length?(l=i(t,e),s=l.get()):s=t,e=e||"";var u={};if(s)for(o=0;o<s.length;o++)u[s[o][n]]=o;var h=r.test(a),d={set:function(t,e){var r=null===e?4:0;if(!s){if(!l||4===r)return;l.set(s=[])}var o=u[t];if(void 0===o){if(4===r)return;r|=3,u[t]=o=s.length}else e!==(h?s[o][a]:i(s[o],a).get())&&(r|=2);var f=s[o]=s[o]||{};return f[n]=t,h?f[a]=e:i(f,a).set(e),null!==e&&(r&=-5),c[o]=c[o]|r,d},get:function(t){if(s){var e=u[t];return void 0===e?void 0:h?s[e][a]:i(s[e],a).get()}},rename:function(t,e){var i=u[t];return void 0===i?d:(c[i]=1|c[i],u[e]=i,delete u[t],s[i][n]=e,d)},remove:function(t){var e=u[t];if(void 0===e)return d;var r=s[e];if(Object.keys(r).length>2)return c[e]=2|c[e],d.set(t,null);if(h){for(o=e;o<s.length;o++)c[o]=3|c[o];for(o=e;o<s.length;o++)u[s[o][n]]--;s.splice(e,1),delete u[t]}else i(r,a).set(null),c[e]=6|c[e];return d},constructUpdate:function(){for(var t,r,o={},l=Object.keys(c),u=0;u<l.length;u++)t=e+"["+(r=l[u])+"]",s[r]?(1&c[r]&&(o[t+"."+n]=s[r][n]),2&c[r]&&(o[t+"."+a]=h?4&c[r]?null:s[r][a]:4&c[r]?null:i(s[r],a).get())):o[t]=null;return o}};return d}},{"./nested_property":167}],162:[function(t,e,n){"use strict";var i=t("../registry");e.exports=function(t,e){for(var n=t._context.locale,r=0;r<2;r++){for(var a=t._context.locales,o=0;o<2;o++){var s=(a[n]||{}).dictionary;if(s){var l=s[e];if(l)return l}a=i.localeRegistry}var c=n.split("-")[0];if(c===n)break;n=c}return e}},{"../registry":242}],163:[function(t,e,n){"use strict";var i=t("../plot_api/plot_config").dfltConfig,r=e.exports={};function a(t,e){if(t&&t.apply)try{return void t.apply(console,e)}catch(t){}for(var n=0;n<e.length;n++)try{t(e[n])}catch(t){console.log(e[n])}}r.log=function(){if(i.logging>1){for(var t=["LOG:"],e=0;e<arguments.length;e++)t.push(arguments[e]);a(console.trace||console.log,t)}},r.warn=function(){if(i.logging>0){for(var t=["WARN:"],e=0;e<arguments.length;e++)t.push(arguments[e]);a(console.trace||console.log,t)}},r.error=function(){if(i.logging>0){for(var t=["ERROR:"],e=0;e<arguments.length;e++)t.push(arguments[e]);a(console.error,t)}}},{"../plot_api/plot_config":191}],164:[function(t,e,n){"use strict";e.exports=function(t,e,n){var i=t.selectAll("g."+n.replace(/\s/g,".")).data(e,function(t){return t[0].trace.uid});return i.exit().remove(),i.enter().append("g").attr("class",n),i.order(),i}},{}],165:[function(t,e,n){"use strict";n.init2dArray=function(t,e){for(var n=new Array(t),i=0;i<t;i++)n[i]=new Array(e);return n},n.transposeRagged=function(t){var e,n,i=0,r=t.length;for(e=0;e<r;e++)i=Math.max(i,t[e].length);var a=new Array(i);for(e=0;e<i;e++)for(a[e]=new Array(r),n=0;n<r;n++)a[e][n]=t[n][e];return a},n.dot=function(t,e){if(!t.length||!e.length||t.length!==e.length)return null;var i,r,a=t.length;if(t[0].length)for(i=new Array(a),r=0;r<a;r++)i[r]=n.dot(t[r],e);else if(e[0].length){var o=n.transposeRagged(e);for(i=new Array(o.length),r=0;r<o.length;r++)i[r]=n.dot(t,o[r])}else for(i=0,r=0;r<a;r++)i+=t[r]*e[r];return i},n.translationMatrix=function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},n.rotationMatrix=function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},n.rotationXYMatrix=function(t,e,i){return n.dot(n.dot(n.translationMatrix(e,i),n.rotationMatrix(t)),n.translationMatrix(-e,-i))},n.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);var i=1===arguments.length?e[0]:[e[0],e[1]];return n.dot(t,[i[0],i[1],1]).slice(0,2)}},n.apply2DTransform2=function(t){var e=n.apply2DTransform(t);return function(t){return e(t.slice(0,2)).concat(e(t.slice(2,4)))}}},{}],166:[function(t,e,n){"use strict";e.exports={mod:function(t,e){var n=t%e;return n<0?n+e:n},modHalf:function(t,e){return Math.abs(t)>e/2?t-Math.round(t/e)*e:t}}},{}],167:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("./array").isArrayOrTypedArray;e.exports=function(t,e){if(i(e))e=String(e);else if("string"!=typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";for(var n,a,o,l=0,c=e.split(".");l<c.length;){if(n=String(c[l]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])c[l]=n[1];else{if(0!==l)throw"bad property string";c.splice(0,1)}for(a=n[2].substr(1,n[2].length-2).split("]["),o=0;o<a.length;o++)c.splice(++l,0,Number(a[o]))}l++}return"object"!=typeof t?function(t,e,n){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:c,obj:t}}(t,e):{set:s(t,c,e),get:function t(e,n){return function(){var i,a,o,s,l,c=e;for(s=0;s<n.length-1;s++){if(-1===(i=n[s])){for(a=!0,o=[],l=0;l<c.length;l++)o[l]=t(c[l],n.slice(s+1))(),o[l]!==o[0]&&(a=!1);return a?o[0]:o}if("number"==typeof i&&!r(c))return;if("object"!=typeof(c=c[i])||null===c)return}if("object"==typeof c&&null!==c&&null!==(o=c[n[s]]))return o}}(t,c),astr:e,parts:c,obj:t}};var a=/(^|\.)args\[/;function o(t,e){return void 0===t||null===t&&!e.match(a)}function s(t,e,n){return function(i){var a,s,h=t,d="",f=[[t,d]],p=o(i,n);for(s=0;s<e.length-1;s++){if("number"==typeof(a=e[s])&&!r(h))throw"array index but container is not an array";if(-1===a){if(p=!c(h,e.slice(s+1),i,n))break;return}if(!u(h,a,e[s+1],p))break;if("object"!=typeof(h=h[a])||null===h)throw"container is not an object";d=l(d,a),f.push([h,d])}if(p){if(s===e.length-1&&(delete h[e[s]],Array.isArray(h)&&+e[s]==h.length-1))for(;h.length&&void 0===h[h.length-1];)h.pop()}else h[e[s]]=i}}function l(t,e){var n=e;return i(e)?n="["+e+"]":t&&(n="."+e),t+n}function c(t,e,n,i){var a,l=r(n),c=!0,h=n,d=i.replace("-1",0),f=!l&&o(n,d),p=e[0];for(a=0;a<t.length;a++)d=i.replace("-1",a),l&&(f=o(h=n[a%n.length],d)),f&&(c=!1),u(t,a,p,f)&&s(t[a],e,i.replace("-1",a))(h);return c}function u(t,e,n,i){if(void 0===t[e]){if(i)return!1;t[e]="number"==typeof n?[]:{}}return!0}},{"./array":146,"fast-isnumeric":10}],168:[function(t,e,n){"use strict";e.exports=function(){}},{}],169:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=[];e.exports=function(t,e){if(-1===a.indexOf(t)){a.push(t);var n=1e3;r(e)?n=e:"long"===e&&(n=3e3);var o=i.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0),o.selectAll(".notifier-note").data(a).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var e=i.select(this);e.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){e.transition().call(s)});for(var r=e.append("p"),a=t.split(/<br\s*\/?>/g),o=0;o<a.length;o++)o&&r.append("br"),r.append("span").text(a[o]);e.transition().duration(700).style("opacity",1).transition().delay(n).call(s)})}function s(t){t.duration(700).style("opacity",0).each("end",function(t){var e=a.indexOf(t);-1!==e&&a.splice(e,1),i.select(this).remove()})}}},{d3:8,"fast-isnumeric":10}],170:[function(t,e,n){"use strict";var i=t("./setcursor"),r="data-savedcursor";e.exports=function(t,e){var n=t.attr(r);if(e){if(!n){for(var a=(t.attr("class")||"").split(" "),o=0;o<a.length;o++){var s=a[o];0===s.indexOf("cursor-")&&t.attr(r,s.substr(7)).classed(s,!1)}t.attr(r)||t.attr(r,"!!")}i(t,e)}else n&&(t.attr(r,null),"!!"===n?i(t):i(t,n))}},{"./setcursor":178}],171:[function(t,e,n){"use strict";var i=t("./matrix").dot,r=t("../constants/numerical").BADNUM,a=e.exports={};a.tester=function(t){var e,n=t.slice(),i=n[0][0],a=i,o=n[0][1],s=o;for(n.push(n[0]),e=1;e<n.length;e++)i=Math.min(i,n[e][0]),a=Math.max(a,n[e][0]),o=Math.min(o,n[e][1]),s=Math.max(s,n[e][1]);var l,c=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(c=!0,l=function(t){return t[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(c=!0,l=function(t){return t[1]===n[0][1]}));var u=!0,h=n[0];for(e=1;e<n.length;e++)if(h[0]!==n[e][0]||h[1]!==n[e][1]){u=!1;break}return{xmin:i,xmax:a,ymin:o,ymax:s,pts:n,contains:c?function(t,e){var n=t[0],c=t[1];return!(n===r||n<i||n>a||c===r||c<o||c>s||e&&l(t))}:function(t,e){var l=t[0],c=t[1];if(l===r||l<i||l>a||c===r||c<o||c>s)return!1;var u,h,d,f,p,v=n.length,g=n[0][0],m=n[0][1],y=0;for(u=1;u<v;u++)if(h=g,d=m,g=n[u][0],m=n[u][1],!(l<(f=Math.min(h,g))||l>Math.max(h,g)||c>Math.max(d,m)))if(c<Math.min(d,m))l!==f&&y++;else{if(c===(p=g===h?c:d+(l-h)*(m-d)/(g-h)))return 1!==u||!e;c<=p&&l!==f&&y++}return y%2==1},isRect:c,degenerate:u}};var o=a.isSegmentBent=function(t,e,n,r){var a,o,s,l=t[e],c=[t[n][0]-l[0],t[n][1]-l[1]],u=i(c,c),h=Math.sqrt(u),d=[-c[1]/h,c[0]/h];for(a=e+1;a<n;a++)if((s=i(o=[t[a][0]-l[0],t[a][1]-l[1]],c))<0||s>u||Math.abs(i(o,d))>r)return!0;return!1};a.filter=function(t,e){var n=[t[0]],i=0,r=0;function a(a){t.push(a);var s=n.length,l=i;n.splice(r+1);for(var c=l+1;c<t.length;c++)(c===t.length-1||o(t,l,c+1,e))&&(n.push(t[c]),n.length<s-2&&(i=c,r=n.length-1),l=c)}return t.length>1&&a(t.pop()),{addPt:a,raw:t,filtered:n}}},{"../constants/numerical":140,"./matrix":165}],172:[function(t,e,n){"use strict";e.exports=function(t,e){if(e instanceof RegExp){for(var n=e.toString(),i=0;i<t.length;i++)if(t[i]instanceof RegExp&&t[i].toString()===n)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t}},{}],173:[function(t,e,n){"use strict";var i=t("../lib"),r=t("../plot_api/plot_config").dfltConfig,a={add:function(t,e,n,i,a){var o,s;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},s=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(t.undoQueue.queue.splice(s,t.undoQueue.queue.length-s,o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),t.undoQueue.index+=1):o=t.undoQueue.queue[s-1],t.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(e),o.undo.args.unshift(n),o.redo.calls.push(i),o.redo.args.push(a)),t.undoQueue.queue.length>r.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)a.plotDo(t,e.undo.calls[n],e.undo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)a.plotDo(t,e.redo.calls[n],e.redo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}},plotDo:function(t,e,n){t.autoplay=!0,n=function(t,e){for(var n,r=[],a=0;a<e.length;a++)r[a]=(n=e[a])===t?n:"object"==typeof n?Array.isArray(n)?i.extendDeep([],n):i.extendDeepAll({},n):n;return r}(t,n),e.apply(null,n)}};e.exports=a},{"../lib":159,"../plot_api/plot_config":191}],174:[function(t,e,n){"use strict";n.counter=function(t,e,n,i){var r=(e||"")+(n?"":"$"),a=!1===i?"":"^";return"xy"===t?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+r):new RegExp(a+t+"([2-9]|[1-9][0-9]+)?"+r)}},{}],175:[function(t,e,n){"use strict";var i=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,r=/^[^\.\[\]]+$/;e.exports=function(t,e){for(;e;){var n=t.match(i);if(n)t=n[1];else{if(!t.match(r))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e}},{}],176:[function(t,e,n){"use strict";var i=t("./array").isArrayOrTypedArray,r=t("./is_plain_object");e.exports=function t(e,n){for(var a in n){var o=n[a],s=e[a];if(s!==o)if("_"===a.charAt(0)||"function"==typeof o){if(a in e)continue;e[a]=o}else if(i(o)&&i(s)&&r(o[0])){if("customdata"===a||"ids"===a)continue;for(var l=Math.min(o.length,s.length),c=0;c<l;c++)s[c]!==o[c]&&r(o[c])&&r(s[c])&&t(s[c],o[c])}else r(o)&&r(s)&&(t(s,o),Object.keys(s).length||delete e[a])}}},{"./array":146,"./is_plain_object":160}],177:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("./loggers"),a=t("./identity");function o(t,e){return t<e}function s(t,e){return t<=e}function l(t,e){return t>e}function c(t,e){return t>=e}n.findBin=function(t,e,n){if(i(e.start))return n?Math.ceil((t-e.start)/e.size-1e-9)-1:Math.floor((t-e.start)/e.size+1e-9);var a,u,h=0,d=e.length,f=0,p=d>1?(e[d-1]-e[0])/(d-1):1;for(u=p>=0?n?o:s:n?c:l,t+=1e-9*p*(n?-1:1)*(p>=0?1:-1);h<d&&f++<100;)u(e[a=Math.floor((h+d)/2)],t)?h=a+1:d=a;return f>90&&r.log("Long binary search..."),h-1},n.sorterAsc=function(t,e){return t-e},n.sorterDes=function(t,e){return e-t},n.distinctVals=function(t){var e=t.slice();e.sort(n.sorterAsc);for(var i=e.length-1,r=e[i]-e[0]||1,a=r/(i||1)/1e4,o=[e[0]],s=0;s<i;s++)e[s+1]>e[s]+a&&(r=Math.min(r,e[s+1]-e[s]),o.push(e[s+1]));return{vals:o,minDiff:r}},n.roundUp=function(t,e,n){for(var i,r=0,a=e.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;r<a&&o++<100;)e[i=c((r+a)/2)]<=t?r=i+s:a=i-l;return e[r]},n.sort=function(t,e){for(var n=0,i=0,r=1;r<t.length;r++){var a=e(t[r],t[r-1]);if(a<0?n=1:a>0&&(i=1),n&&i)return t.sort(e)}return i?t:t.reverse()},n.findIndexOfMin=function(t,e){e=e||a;for(var n,i=1/0,r=0;r<t.length;r++){var o=e(t[r]);o<i&&(i=o,n=r)}return n}},{"./identity":158,"./loggers":163,"fast-isnumeric":10}],178:[function(t,e,n){"use strict";e.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],179:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("./array").isArrayOrTypedArray;n.aggNums=function(t,e,a,o){var s,l;if((!o||o>a.length)&&(o=a.length),i(e)||(e=!1),r(a[0])){for(l=new Array(o),s=0;s<o;s++)l[s]=n.aggNums(t,e,a[s]);a=l}for(s=0;s<o;s++)i(e)?i(a[s])&&(e=t(+e,+a[s])):e=a[s];return e},n.len=function(t){return n.aggNums(function(t){return t+1},0,t)},n.mean=function(t,e){return e||(e=n.len(t)),n.aggNums(function(t,e){return t+e},0,t)/e},n.midRange=function(t){if(void 0!==t&&0!==t.length)return(n.aggNums(Math.max,null,t)+n.aggNums(Math.min,null,t))/2},n.variance=function(t,e,r){return e||(e=n.len(t)),i(r)||(r=n.mean(t,e)),n.aggNums(function(t,e){return t+Math.pow(e-r,2)},0,t)/e},n.stdev=function(t,e,i){return Math.sqrt(n.variance(t,e,i))},n.interp=function(t,e){if(!i(e))throw"n should be a finite number";if((e=e*t.length-.5)<0)return t[0];if(e>t.length-1)return t[t.length-1];var n=e%1;return n*t[Math.ceil(e)]+(1-n)*t[Math.floor(e)]}},{"./array":146,"fast-isnumeric":10}],180:[function(t,e,n){"use strict";var i=t("d3"),r=t("../lib"),a=t("../constants/xmlns_namespaces"),o=t("../constants/alignment").LINE_SPACING;function s(t,e){return t.node().getBoundingClientRect()[e]}var l=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(t,e,A){var C=t.text(),S=!t.attr("data-notex")&&"undefined"!=typeof MathJax&&C.match(l),E=i.select(t.node().parentNode);if(!E.empty()){var O=t.attr("class")?t.attr("class").split(" ")[0]:"text";return E.selectAll("svg."+(O+="-math")).remove(),E.selectAll("g."+O+"-group").remove(),t.style("display",null).attr({"data-unformatted":C,"data-math":"N"}),S?(e&&e._promises||[]).push(new Promise(function(e){t.style("display","none");var n=parseInt(t.node().style.fontSize,10);!function(t,e,n){var a,o,s,l;MathJax.Hub.Queue(function(){return o=r.extendDeepAll({},MathJax.Hub.config),s=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var n="math-output-"+r.randstr({},64);return l=i.select("body").append("div").attr({id:n}).style({visibility:"hidden",position:"absolute"}).style({"font-size":e.fontSize+"px"}).text(t.replace(c,"\\lt ").replace(u,"\\gt ")),MathJax.Hub.Typeset(l.node())},function(){var e=i.select("body").select("#MathJax_SVG_glyphs");if(l.select(".MathJax_SVG").empty()||!l.select("svg").node())r.log("There was an error in the tex syntax.",t),n();else{var o=l.select("svg").node().getBoundingClientRect();n(l.select(".MathJax_SVG"),e,o)}if(l.remove(),"SVG"!==a)return MathJax.Hub.setRenderer(a)},function(){return void 0!==s&&(MathJax.Hub.processSectionDelay=s),MathJax.Hub.Config(o)})}(S[2],{fontSize:n},function(i,r,a){E.selectAll("svg."+O).remove(),E.selectAll("g."+O+"-group").remove();var o=i&&i.select("svg");if(!o||!o.node())return P(),void e();var l=E.append("g").classed(O+"-group",!0).attr({"pointer-events":"none","data-unformatted":C,"data-math":"Y"});l.node().appendChild(o.node()),r&&r.node()&&o.node().insertBefore(r.node().cloneNode(!0),o.node().firstChild),o.attr({class:O,height:a.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var c=t.node().style.fill||"black";o.select("g").attr({fill:c,stroke:c});var u=s(o,"width"),h=s(o,"height"),d=+t.attr("x")-u*{start:0,middle:.5,end:1}[t.attr("text-anchor")||"start"],f=-(n||s(t,"height"))/4;"y"===O[0]?(l.attr({transform:"rotate("+[-90,+t.attr("x"),+t.attr("y")]+") translate("+[-u/2,f-h/2]+")"}),o.attr({x:+t.attr("x"),y:+t.attr("y")})):"l"===O[0]?o.attr({x:t.attr("x"),y:f-h/2}):"a"===O[0]&&0!==O.indexOf("atitle")?o.attr({x:0,y:f}):o.attr({x:d,y:+t.attr("y")+f-h/2}),A&&A.call(t,l),e(l)})})):P(),t}function P(){E.empty()||(O=t.attr("class")+"-math",E.select("svg."+O).remove()),t.text("").style("white-space","pre"),function(t,e){e=e.replace(g," ");var n,s=!1,l=[],c=-1;function u(){c++;var e=document.createElementNS(a.svg,"tspan");i.select(e).attr({class:"line",dy:c*o+"em"}),t.appendChild(e),n=e;var r=l;if(l=[{node:e}],r.length>1)for(var s=1;s<r.length;s++)A(r[s])}function A(t){var e,r=t.type,o={};if("a"===r){e="a";var s=t.target,c=t.href,u=t.popup;c&&(o={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":c},u&&(o.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else e="tspan";t.style&&(o.style=t.style);var h=document.createElementNS(a.svg,e);if("sup"===r||"sub"===r){C(n,p),n.appendChild(h);var v=document.createElementNS(a.svg,"tspan");C(v,p),i.select(v).attr("dy",f[r]),o.dy=d[r],n.appendChild(h),n.appendChild(v)}else n.appendChild(h);i.select(h).attr(o),n=t.node=h,l.push(t)}function C(t,e){t.appendChild(document.createTextNode(e))}function S(t){if(1!==l.length){var i=l.pop();t!==i.type&&r.log("Start tag <"+i.type+"> doesnt match end tag <"+t+">. Pretending it did match.",e),n=l[l.length-1].node}else r.log("Ignoring unexpected end tag </"+t+">.",e)}_.test(e)?u():(n=t,l=[{node:t}]);for(var E=e.split(m),O=0;O<E.length;O++){var P=E[O],D=P.match(y),z=D&&D[2].toLowerCase(),I=h[z];if("br"===z)u();else if(void 0===I)C(n,L(P));else if(D[1])S(z);else{var R=D[4],B={type:z},N=T(R,x);if(N?(N=N.replace(M,"$1 fill:"),I&&(N+=";"+I)):I&&(N=I),N&&(B.style=N),"a"===z){s=!0;var F=T(R,b);if(F){var j=document.createElement("a");j.href=F,-1!==v.indexOf(j.protocol)&&(B.href=encodeURI(decodeURI(F)),B.target=T(R,w)||"_blank",B.popup=T(R,k))}}A(B)}}return s}(t.node(),C)&&t.style("pointer-events","all"),n.positionText(t),A&&A.call(t)}};var c=/(<|&lt;|&#60;)/g,u=/(>|&gt;|&#62;)/g,h={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},d={sub:"0.3em",sup:"-0.6em"},f={sub:"-0.21em",sup:"0.42em"},p="\u200b",v=["http:","https:","mailto:","",void 0,":"],g=/(\r\n?|\n)/g,m=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,_=/<br(\s+.*)?>/i,x=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,b=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,w=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,k=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function T(t,e){if(!t)return null;var n=t.match(e),i=n&&(n[3]||n[4]);return i&&L(i)}var M=/(^|;)\s*color:/;n.plainText=function(t,e){for(var n=void 0!==(e=e||{}).len&&-1!==e.len?e.len:1/0,i=void 0!==e.allowedTags?e.allowedTags:["br"],r="...".length,a=t.split(m),o=[],s="",l=0,c=0;c<a.length;c++){var u=a[c],h=u.match(y),d=h&&h[2].toLowerCase();if(d)-1!==i.indexOf(d)&&(o.push(u),s=d);else{var f=u.length;if(l+f<n)o.push(u),l+=f;else if(l<n){var p=n-l;s&&("br"!==s||p<=r||f<=r)&&o.pop(),o.push(n>r?u.substr(0,p-r)+"...":u.substr(0,p));break}s=""}}return o.join("")};var A={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function L(t){return t.replace(C,function(t,e){return("#"===e.charAt(0)?function(t){if(!(t>1114111)){var e=String.fromCodePoint;if(e)return e(t);var n=String.fromCharCode;return t<=65535?n(t):n(55232+(t>>10),t%1024+56320)}}("x"===e.charAt(1)?parseInt(e.substr(2),16):parseInt(e.substr(1),10)):A[e])||t})}function S(t,e,n){var i,r,a,o=n.horizontalAlign,s=n.verticalAlign||"top",l=t.node().getBoundingClientRect(),c=e.node().getBoundingClientRect();return r="bottom"===s?function(){return l.bottom-i.height}:"middle"===s?function(){return l.top+(l.height-i.height)/2}:function(){return l.top},a="right"===o?function(){return l.right-i.width}:"center"===o?function(){return l.left+(l.width-i.width)/2}:function(){return l.left},function(){return i=this.node().getBoundingClientRect(),this.style({top:r()-c.top+"px",left:a()-c.left+"px","z-index":1e3}),this}}n.convertEntities=L,n.lineCount=function(t){return t.selectAll("tspan.line").size()||1},n.positionText=function(t,e,n){return t.each(function(){var t=i.select(this);function r(e,n){return void 0===n?null===(n=t.attr(e))&&(t.attr(e,0),n=0):t.attr(e,n),n}var a=r("x",e),o=r("y",n);"text"===this.nodeName&&t.selectAll("tspan.line").attr({x:a,y:o})})},n.makeEditable=function(t,e){var n=e.gd,r=e.delegate,a=i.dispatch("edit","input","cancel"),o=r||t;if(t.style({"pointer-events":r?"none":"all"}),1!==t.size())throw new Error("boo");function s(){!function(){var r=i.select(n).select(".svg-container"),o=r.append("div"),s=t.node().style,c=parseFloat(s.fontSize||12),u=e.text;void 0===u&&(u=t.attr("data-unformatted")),o.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":c,color:e.fill||s.fill||"black",opacity:1,"background-color":e.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(u).call(S(t,r,e)).on("blur",function(){n._editing=!1,t.text(this.textContent).style({opacity:1});var e,r=i.select(this).attr("class");(e=r?"."+r.split(" ")[0]+"-math-group":"[class*=-math-group]")&&i.select(t.node().parentNode).select(e).style({opacity:0});var o=this.textContent;i.select(this).transition().duration(0).remove(),i.select(document).on("mouseup",null),a.edit.call(t,o)}).on("focus",function(){var t=this;n._editing=!0,i.select(document).on("mouseup",function(){if(i.event.target===t)return!1;document.activeElement===o.node()&&o.node().blur()})}).on("keyup",function(){27===i.event.which?(n._editing=!1,t.style({opacity:1}),i.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),a.cancel.call(t,this.textContent)):(a.input.call(t,this.textContent),i.select(this).call(S(t,r,e)))}).on("keydown",function(){13===i.event.which&&this.blur()}).call(l)}(),t.style({opacity:0});var r,s=o.attr("class");(r=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&i.select(t.node().parentNode).select(r).style({opacity:0})}function l(t){var e=t.node(),n=document.createRange();n.selectNodeContents(e);var i=window.getSelection();i.removeAllRanges(),i.addRange(n),e.focus()}return e.immediate?s():o.on("click",s),i.rebind(t,a,"on")}},{"../constants/alignment":138,"../constants/xmlns_namespaces":141,"../lib":159,d3:8}],181:[function(t,e,n){"use strict";var i={};function r(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}n.throttle=function(t,e,n){var a=i[t],o=Date.now();if(!a){for(var s in i)i[s].ts<o-6e4&&delete i[s];a=i[t]={ts:0,timer:null}}function l(){n(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}r(a),o>a.ts+e?l():a.timer=setTimeout(function(){l(),a.timer=null},e)},n.done=function(t){var e=i[t];return e&&e.timer?new Promise(function(t){var n=e.onDone;e.onDone=function(){n&&n(),t(),e.onDone=null}}):Promise.resolve()},n.clear=function(t){if(t)r(i[t]),delete i[t];else for(var e in i)n.clear(e)}},{}],182:[function(t,e,n){"use strict";var i=t("fast-isnumeric");e.exports=function(t,e){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(e[0],e[1]))/Math.LN10;return i(n)||(n=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),n}},{"fast-isnumeric":10}],183:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],184:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],185:[function(t,e,n){"use strict";var i=t("../registry");e.exports=function(t){for(var e,n,r=i.layoutArrayContainers,a=i.layoutArrayRegexes,o=t.split("[")[0],s=0;s<a.length;s++)if((n=t.match(a[s]))&&0===n.index){e=n[0];break}if(e||(e=r[r.indexOf(o)]),!e)return!1;var l=t.substr(e.length);return l?!!(n=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(n[1]),property:n[3]||""}:{array:e,index:"",property:""}}},{"../registry":242}],186:[function(t,e,n){"use strict";var i=t("../lib"),r=i.extendFlat,a=i.isPlainObject,o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},s={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw"]},l=o.flags.slice().concat(["fullReplot"]),c=s.flags.slice().concat("layoutReplot");function u(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!1;return e}function h(t,e,n){var i=r({},t);for(var o in i){var s=i[o];a(s)&&(i[o]=d(s,e,0,o))}return"from-root"===n&&(i.editType=e),i}function d(t,e,n,i){if(t.valType){var a=r({},t);if(a.editType=e,Array.isArray(t.items)){a.items=new Array(t.items.length);for(var o=0;o<t.items.length;o++)a.items[o]=d(t.items[o],e)}return a}return h(t,e,"_"===i.charAt(0)?"nested":"from-root")}e.exports={traces:o,layout:s,traceFlags:function(){return u(l)},layoutFlags:function(){return u(c)},update:function(t,e){var n=e.editType;if(n&&"none"!==n)for(var i=n.split("+"),r=0;r<i.length;r++)t[i[r]]=!0},overrideAll:h}},{"../lib":159}],187:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("gl-mat4/fromQuat"),a=t("../registry"),o=t("../lib"),s=t("../plots/plots"),l=t("../plots/cartesian/axis_ids"),c=l.cleanId,u=l.getFromTrace,h=t("../components/color");function d(t,e){var n=t[e],i=e.charAt(0);n&&"paper"!==n&&(t[e]=c(n,i))}function f(t){function e(e,n){t[e]&&(!t.title||!t.title[n])&&(t.title||(t.title={}),t.title[n]=t[e],delete t[e])}t&&("string"!=typeof t.title&&"number"!=typeof t.title||(t.title={text:t.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function p(t){if(!o.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"==typeof e||"number"==typeof e)&&String(e)}function v(t,e,n,i){if(n&&!i)return t;if(i&&!n)return e;if(!t.trim())return e;if(!e.trim())return t;var r,a=Math.min(t.length,e.length);for(r=0;r<a&&t.charAt(r)===e.charAt(r);r++);return t.substr(0,r).trim()}function g(t){var e="middle",n="center";return"string"==typeof t&&(-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?n="left":-1!==t.indexOf("right")&&(n="right")),e+" "+n}function m(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}n.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&o.log("Clearing previous rejected promises from queue."),t._promises=[]},n.cleanLayout=function(t){var e,i;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var a=(s.subplotsRegistry.cartesian||{}).attrRegex,l=(s.subplotsRegistry.polar||{}).attrRegex,u=(s.subplotsRegistry.ternary||{}).attrRegex,p=(s.subplotsRegistry.gl3d||{}).attrRegex,v=Object.keys(t);for(e=0;e<v.length;e++){var g=v[e];if(a&&a.test(g)){var y=t[g];y.anchor&&"free"!==y.anchor&&(y.anchor=c(y.anchor)),y.overlaying&&(y.overlaying=c(y.overlaying)),y.type||(y.isdate?y.type="date":y.islog?y.type="log":!1===y.isdate&&!1===y.islog&&(y.type="linear")),"withzero"!==y.autorange&&"tozero"!==y.autorange||(y.autorange=!0,y.rangemode="tozero"),delete y.islog,delete y.isdate,delete y.categories,m(y,"domain")&&delete y.domain,void 0!==y.autotick&&(void 0===y.tickmode&&(y.tickmode=y.autotick?"auto":"linear"),delete y.autotick),f(y)}else if(l&&l.test(g))f(t[g].radialaxis);else if(u&&u.test(g)){var _=t[g];f(_.aaxis),f(_.baxis),f(_.caxis)}else if(p&&p.test(g)){var x=t[g],b=x.cameraposition;if(Array.isArray(b)&&4===b[0].length){var w=b[1],k=b[2],T=r([],b[0]),M=[];for(i=0;i<3;++i)M[i]=w[i]+k*T[2+4*i];x.camera={eye:{x:M[0],y:M[1],z:M[2]},center:{x:w[0],y:w[1],z:w[2]},up:{x:0,y:0,z:1}},delete x.cameraposition}f(x.xaxis),f(x.yaxis),f(x.zaxis)}}var A=Array.isArray(t.annotations)?t.annotations.length:0;for(e=0;e<A;e++){var C=t.annotations[e];o.isPlainObject(C)&&(C.ref&&("paper"===C.ref?(C.xref="paper",C.yref="paper"):"data"===C.ref&&(C.xref="x",C.yref="y"),delete C.ref),d(C,"xref"),d(C,"yref"))}var L=Array.isArray(t.shapes)?t.shapes.length:0;for(e=0;e<L;e++){var S=t.shapes[e];o.isPlainObject(S)&&(d(S,"xref"),d(S,"yref"))}var E=t.legend;return E&&(E.x>3?(E.x=1.02,E.xanchor="left"):E.x<-2&&(E.x=-.02,E.xanchor="right"),E.y>3?(E.y=1.02,E.yanchor="bottom"):E.y<-2&&(E.y=-.02,E.yanchor="top")),f(t),"rotate"===t.dragmode&&(t.dragmode="orbit"),h.clean(t),t.template&&t.template.layout&&n.cleanLayout(t.template.layout),t},n.cleanData=function(t){for(var e=0;e<t.length;e++){var i,r=t[e];if("histogramy"===r.type&&"xbins"in r&&!("ybins"in r)&&(r.ybins=r.xbins,delete r.xbins),r.error_y&&"opacity"in r.error_y){var l=h.defaults,u=r.error_y.color||(a.traceIs(r,"bar")?h.defaultLine:l[e%l.length]);r.error_y.color=h.addOpacity(h.rgb(u),h.opacity(u)*r.error_y.opacity),delete r.error_y.opacity}if("bardir"in r&&("h"!==r.bardir||!a.traceIs(r,"bar")&&"histogram"!==r.type.substr(0,9)||(r.orientation="h",n.swapXYData(r)),delete r.bardir),"histogramy"===r.type&&n.swapXYData(r),"histogramx"!==r.type&&"histogramy"!==r.type||(r.type="histogram"),"scl"in r&&!("colorscale"in r)&&(r.colorscale=r.scl,delete r.scl),"reversescl"in r&&!("reversescale"in r)&&(r.reversescale=r.reversescl,delete r.reversescl),r.xaxis&&(r.xaxis=c(r.xaxis,"x")),r.yaxis&&(r.yaxis=c(r.yaxis,"y")),a.traceIs(r,"gl3d")&&r.scene&&(r.scene=s.subplotsRegistry.gl3d.cleanId(r.scene)),!a.traceIs(r,"pie")&&!a.traceIs(r,"bar"))if(Array.isArray(r.textposition))for(i=0;i<r.textposition.length;i++)r.textposition[i]=g(r.textposition[i]);else r.textposition&&(r.textposition=g(r.textposition));var d=a.getModule(r);if(d&&d.colorbar){var y=d.colorbar.container,_=y?r[y]:r;_&&_.colorscale&&("YIGnBu"===_.colorscale&&(_.colorscale="YlGnBu"),"YIOrRd"===_.colorscale&&(_.colorscale="YlOrRd"))}if("surface"===r.type&&o.isPlainObject(r.contours)){var x=["x","y","z"];for(i=0;i<x.length;i++){var b=r.contours[x[i]];o.isPlainObject(b)&&(b.highlightColor&&(b.highlightcolor=b.highlightColor,delete b.highlightColor),b.highlightWidth&&(b.highlightwidth=b.highlightWidth,delete b.highlightWidth))}}if("candlestick"===r.type||"ohlc"===r.type){var w=!1!==(r.increasing||{}).showlegend,k=!1!==(r.decreasing||{}).showlegend,T=p(r.increasing),M=p(r.decreasing);if(!1!==T&&!1!==M){var A=v(T,M,w,k);A&&(r.name=A)}else!T&&!M||r.name||(r.name=T||M)}if(Array.isArray(r.transforms)){var C=r.transforms;for(i=0;i<C.length;i++){var L=C[i];if(o.isPlainObject(L))switch(L.type){case"filter":L.filtersrc&&(L.target=L.filtersrc,delete L.filtersrc),L.calendar&&(L.valuecalendar||(L.valuecalendar=L.calendar),delete L.calendar);break;case"groupby":if(L.styles=L.styles||L.style,L.styles&&!Array.isArray(L.styles)){var S=L.styles,E=Object.keys(S);L.styles=[];for(var O=0;O<E.length;O++)L.styles.push({target:E[O],value:S[E[O]]})}}}}m(r,"line")&&delete r.line,"marker"in r&&(m(r.marker,"line")&&delete r.marker.line,m(r,"marker")&&delete r.marker),h.clean(r),r.autobinx&&(delete r.autobinx,delete r.xbins),r.autobiny&&(delete r.autobiny,delete r.ybins),f(r),r.colorbar&&f(r.colorbar),r.marker&&r.marker.colorbar&&f(r.marker.colorbar),r.line&&r.line.colorbar&&f(r.line.colorbar),r.aaxis&&f(r.aaxis),r.baxis&&f(r.baxis)}},n.swapXYData=function(t){var e;if(o.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var n=t.error_y,i="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);o.swapAttrs(t,["error_?.copy_ystyle"]),i&&o.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var r=t.hoverinfo.split("+");for(e=0;e<r.length;e++)"x"===r[e]?r[e]="y":"y"===r[e]&&(r[e]="x");t.hoverinfo=r.join("+")}},n.coerceTraceIndices=function(t,e){if(i(e))return[e];if(!Array.isArray(e)||!e.length)return t.data.map(function(t,e){return e});if(Array.isArray(e)){for(var n=[],r=0;r<e.length;r++)o.isIndex(e[r],t.data.length)?n.push(e[r]):o.warn("trace index (",e[r],") is not a number or is out of bounds");return n}return e},n.manageArrayContainers=function(t,e,n){var r=t.obj,a=t.parts,s=a.length,l=a[s-1],c=i(l);if(c&&null===e){var u=a.slice(0,s-1).join(".");o.nestedProperty(r,u).get().splice(l,1)}else c&&void 0===t.get()?(void 0===t.get()&&(n[t.astr]=null),t.set(e)):t.set(e)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function _(t){var e=t.search(y);if(e>0)return t.substr(0,e)}n.hasParent=function(t,e){for(var n=_(e);n;){if(n in t)return!0;n=_(n)}return!1};var x=["x","y","z"];n.clearAxisTypes=function(t,e,n){for(var i=0;i<e.length;i++)for(var r=t._fullData[i],a=0;a<3;a++){var s=u(t,r,x[a]);if(s&&"log"!==s.type){var l=s._name,c=s._id.substr(1);if("scene"===c.substr(0,5)){if(void 0!==n[c])continue;l=c+"."+l}var h=l+".type";void 0===n[l]&&void 0===n[h]&&o.nestedProperty(t.layout,h).set(null)}}}},{"../components/color":43,"../lib":159,"../plots/cartesian/axis_ids":206,"../plots/plots":235,"../registry":242,"fast-isnumeric":10,"gl-mat4/fromQuat":11}],188:[function(t,e,n){"use strict";var i=t("./plot_api");n.plot=i.plot,n.newPlot=i.newPlot,n.restyle=i.restyle,n.relayout=i.relayout,n.redraw=i.redraw,n.update=i.update,n._guiRestyle=i._guiRestyle,n._guiRelayout=i._guiRelayout,n._guiUpdate=i._guiUpdate,n._storeDirectGUIEdit=i._storeDirectGUIEdit,n.react=i.react,n.extendTraces=i.extendTraces,n.prependTraces=i.prependTraces,n.addTraces=i.addTraces,n.deleteTraces=i.deleteTraces,n.moveTraces=i.moveTraces,n.purge=i.purge,n.addFrames=i.addFrames,n.deleteFrames=i.deleteFrames,n.animate=i.animate,n.setPlotConfig=i.setPlotConfig,n.toImage=t("./to_image"),n.validate=t("./validate"),n.downloadImage=t("../snapshot/download");var r=t("./template_api");n.makeTemplate=r.makeTemplate,n.validateTemplate=r.validateTemplate},{"../snapshot/download":244,"./plot_api":190,"./template_api":195,"./to_image":196,"./validate":197}],189:[function(t,e,n){"use strict";var i=t("../lib/is_plain_object"),r=t("../lib/noop"),a=t("../lib/loggers"),o=t("../lib/search").sorterAsc,s=t("../registry");n.containerArrayMatch=t("./container_array_match");var l=n.isAddVal=function(t){return"add"===t||i(t)},c=n.isRemoveVal=function(t){return null===t||"remove"===t};n.applyContainerArrayChanges=function(t,e,n,i,u){var h=e.astr,d=s.getComponentMethod(h,"supplyLayoutDefaults"),f=s.getComponentMethod(h,"draw"),p=s.getComponentMethod(h,"drawOne"),v=i.replot||i.recalc||d===r||f===r,g=t.layout,m=t._fullLayout;if(n[""]){Object.keys(n).length>1&&a.warn("Full array edits are incompatible with other edits",h);var y=n[""][""];if(c(y))e.set(null);else{if(!Array.isArray(y))return a.warn("Unrecognized full array edit value",h,y),!0;e.set(y)}return!v&&(d(g,m),f(t),!0)}var _,x,b,w,k,T,M,A=Object.keys(n).map(Number).sort(o),C=e.get(),L=C||[],S=u(m,h).get(),E=[],O=-1,P=L.length;for(_=0;_<A.length;_++)if(w=n[b=A[_]],k=Object.keys(w),M=l(T=w[""]),b<0||b>L.length-(M?0:1))a.warn("index out of range",h,b);else if(void 0!==T)k.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",h,b),c(T)?E.push(b):M?("add"===T&&(T={}),L.splice(b,0,T),S&&S.splice(b,0,{})):a.warn("Unrecognized full object edit value",h,b,T),-1===O&&(O=b);else for(x=0;x<k.length;x++)u(L[b],k[x],h+"["+b+"].").set(w[k[x]]);for(_=E.length-1;_>=0;_--)L.splice(E[_],1),S&&S.splice(E[_],1);if(L.length?C||e.set(L):e.set(null),v)return!1;if(d(g,m),p!==r){var D;if(-1===O)D=A;else{for(P=Math.max(L.length,P),D=[],_=0;_<A.length&&!((b=A[_])>=O);_++)D.push(b);for(_=O;_<P;_++)D.push(_)}for(_=0;_<D.length;_++)p(t,D[_])}else f(t);return!0}},{"../lib/is_plain_object":160,"../lib/loggers":163,"../lib/noop":168,"../lib/search":177,"../registry":242,"./container_array_match":185}],190:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("has-hover"),o=t("../lib"),s=o.nestedProperty,l=t("../lib/events"),c=t("../lib/queue"),u=t("../registry"),h=t("./plot_schema"),d=t("../plots/plots"),f=t("../plots/polar/legacy"),p=t("../plots/cartesian/axes"),v=t("../components/drawing"),g=t("../components/color"),m=t("../components/colorbar/connect"),y=t("../plots/cartesian/graph_interact").initInteractions,_=t("../constants/xmlns_namespaces"),x=t("../lib/svg_text_utils"),b=t("../plots/cartesian/select").clearSelect,w=t("./plot_config").dfltConfig,k=t("./manage_arrays"),T=t("./helpers"),M=t("./subroutines"),A=t("./edit_types"),C=t("../plots/cartesian/constants").AX_NAME_PATTERN,L=0;function S(t){var e=t._fullLayout;e._redrawFromAutoMarginCount?e._redrawFromAutoMarginCount--:t.emit("plotly_afterplot")}function E(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){o.error(t)}}function O(t,e){E(t,g.combine(e,"white"))}function P(t,e){if(!t._context){t._context=o.extendDeep({},w);var n=i.select("base");t._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:""}var r,s,l,c=t._context;if(e){for(s=Object.keys(e),r=0;r<s.length;r++)"editable"!==(l=s[r])&&"edits"!==l&&l in c&&(c[l]="setBackground"===l&&"opaque"===e[l]?O:e[l]);e.plot3dPixelRatio&&!c.plotGlPixelRatio&&(c.plotGlPixelRatio=c.plot3dPixelRatio);var u=e.editable;if(void 0!==u)for(c.editable=u,s=Object.keys(c.edits),r=0;r<s.length;r++)c.edits[s[r]]=u;if(e.edits)for(s=Object.keys(e.edits),r=0;r<s.length;r++)(l=s[r])in c.edits&&(c.edits[l]=e.edits[l]);c._exportedPlot=e._exportedPlot}c.staticPlot&&(c.editable=!1,c.edits={},c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1),"hover"!==c.displayModeBar||a||(c.displayModeBar=!0),"transparent"!==c.setBackground&&"function"==typeof c.setBackground||(c.setBackground=E),c._hasZeroHeight=c._hasZeroHeight||0===t.clientHeight,c._hasZeroWidth=c._hasZeroWidth||0===t.clientWidth;var h=c.scrollZoom,d=c._scrollZoom={};if(!0===h)d.cartesian=1,d.gl3d=1,d.geo=1,d.mapbox=1;else if("string"==typeof h){var f=h.split("+");for(r=0;r<f.length;r++)d[f[r]]=1}else!1!==h&&(d.gl3d=1,d.geo=1,d.mapbox=1)}function D(t,e){var n,i,r=e+1,a=[];for(n=0;n<t.length;n++)(i=t[n])<0?a.push(r+i):a.push(i);return a}function z(t,e,n){var i,r;for(i=0;i<e.length;i++){if((r=e[i])!==parseInt(r,10))throw new Error("all values in "+n+" must be integers");if(r>=t.data.length||r<-t.data.length)throw new Error(n+" must be valid indices for gd.data.");if(e.indexOf(r,i+1)>-1||r>=0&&e.indexOf(-t.data.length+r)>-1||r<0&&e.indexOf(t.data.length+r)>-1)throw new Error("each index in "+n+" must be unique.")}}function I(t,e,n){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),z(t,e,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&z(t,n,"newIndices"),void 0!==n&&e.length!==n.length)throw new Error("current and new indices must be of equal length.")}function R(t,e,n,i,a){!function(t,e,n,i){var r=o.isPlainObject(i);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!o.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var a in z(t,n,"indices"),e){if(!Array.isArray(e[a])||e[a].length!==n.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(r&&(!(a in i)||!Array.isArray(i[a])||i[a].length!==e[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,n,i);for(var l=function(t,e,n,i){var a,l,c,u,h=o.isPlainObject(i),d=[];for(var f in Array.isArray(n)||(n=[n]),n=D(n,t.data.length-1),e)for(var p=0;p<n.length;p++){if(a=(l=s(t.data[n[p]],f)).get(),!o.isArrayOrTypedArray(c=e[f][p]))throw new Error("attribute: "+f+" index: "+p+" must be an array");if(!o.isArrayOrTypedArray(a))throw new Error("cannot extend missing or non-array attribute: "+f);if(a.constructor!==c.constructor)throw new Error("cannot extend array with an array of a different type: "+f);r(u=h?i[f][p]:i)||(u=-1),d.push({prop:l,target:a,insert:c,maxp:Math.floor(u)})}return d}(t,e,n,i),c={},u={},h=0;h<l.length;h++){var d=l[h].prop,f=a(l[h].target,l[h].insert,l[h].maxp);d.set(f[0]),Array.isArray(c[d.astr])||(c[d.astr]=[]),c[d.astr].push(f[1]),Array.isArray(u[d.astr])||(u[d.astr]=[]),u[d.astr].push(l[h].target.length)}return{update:c,maxPoints:u}}function B(t,e){var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}function N(t,e,i,r){t=o.getGraphDiv(t),T.clearPromiseQueue(t);var a={};if("string"==typeof e)a[e]=i;else{if(!o.isPlainObject(e))return o.warn("Restyle fail.",e,i,r),Promise.reject();a=o.extendFlat({},e),void 0===r&&(r=i)}Object.keys(a).length&&(t.changed=!0);var s=T.coerceTraceIndices(t,r),l=$(t,a,s),u=l.flags;u.calc&&(t.calcdata=void 0),u.clearAxisTypes&&T.clearAxisTypes(t,s,{});var h=[];u.fullReplot?h.push(n.plot):(h.push(d.previousPromises),d.supplyDefaults(t),u.markerSize&&(d.doCalcdata(t),W(h)),u.style&&h.push(M.doTraceStyle),u.colorbars&&h.push(M.doColorBars),h.push(S)),h.push(d.rehover),c.add(t,N,[t,l.undoit,l.traces],N,[t,l.redoit,l.traces]);var f=o.syncOrAsync(h,t);return f&&f.then||(f=Promise.resolve()),f.then(function(){return t.emit("plotly_restyle",l.eventData),t})}function F(t){return void 0===t?null:t}function j(t,e){return e?function(e,n,i){var r=s(e,n),a=r.set;return r.set=function(e){H((i||"")+n,r.get(),e,t),a(e)},r}:s}function H(t,e,n,i){if(Array.isArray(e)||Array.isArray(n))for(var r=Array.isArray(e)?e:[],a=Array.isArray(n)?n:[],s=Math.max(r.length,a.length),l=0;l<s;l++)H(t+"["+l+"]",r[l],a[l],i);else if(o.isPlainObject(e)||o.isPlainObject(n)){var c=o.isPlainObject(e)?e:{},u=o.isPlainObject(n)?n:{},h=o.extendFlat({},c,u);for(var d in h)H(t+"."+d,c[d],u[d],i)}else void 0===i[t]&&(i[t]=F(e))}function $(t,e,n){var i,r=t._fullLayout,a=t._fullData,l=t.data,c=r._guiEditing,f=j(r._preGUI,c),v=o.extendDeepAll({},e);q(e);var g,m=A.traceFlags(),y={},_={};function x(){return n.map(function(){})}function b(t){var e=p.id2name(t);-1===g.indexOf(e)&&g.push(e)}function w(t){return"LAYOUT"+t+".autorange"}function k(t){return"LAYOUT"+t+".range"}function M(t){for(var e=t;e<a.length;e++)if(a[e]._input===l[t])return a[e]}function C(i,a,o){if(Array.isArray(i))i.forEach(function(t){C(t,a,o)});else if(!(i in e||T.hasParent(e,i))){var s;if("LAYOUT"===i.substr(0,6))s=f(t.layout,i.replace("LAYOUT",""));else{var u=n[o];s=j(r._tracePreGUI[M(u)._fullInput.uid],c)(l[u],i)}i in _||(_[i]=x()),void 0===_[i][o]&&(_[i][o]=F(s.get())),void 0!==a&&s.set(a)}}function L(t){return function(e){return a[e][t]}}function S(t){return function(e,i){return!1===e?a[n[i]][t]:null}}for(var E in e){if(T.hasParent(e,E))throw new Error("cannot set "+E+" and a parent attribute simultaneously");var O,P,D,z,I,R,B=e[E];if("autobinx"!==E&&"autobiny"!==E||(E=E.charAt(E.length-1)+"bins",B=Array.isArray(B)?B.map(S(E)):!1===B?n.map(L(E)):null),y[E]=B,"LAYOUT"!==E.substr(0,6)){for(_[E]=x(),i=0;i<n.length;i++)if(O=l[n[i]],P=M(n[i]),z=(D=j(r._tracePreGUI[P._fullInput.uid],c)(O,E)).get(),void 0!==(I=Array.isArray(B)?B[i%B.length]:B)){var N=D.parts[D.parts.length-1],H=E.substr(0,E.length-N.length-1),$=H?H+".":"",Z=H?s(P,H).get():P;if((R=h.getTraceValObject(P,D.parts))&&R.impliedEdits&&null!==I)for(var V in R.impliedEdits)C(o.relativeAttr(E,V),R.impliedEdits[V],i);else if("thicknessmode"!==N&&"lenmode"!==N||z===I||"fraction"!==I&&"pixels"!==I||!Z){if("type"===E&&"pie"===I!=("pie"===z)){var W="x",U="y";"bar"!==I&&"bar"!==z||"h"!==O.orientation||(W="y",U="x"),o.swapAttrs(O,["?","?src"],"labels",W),o.swapAttrs(O,["d?","?0"],"label",W),o.swapAttrs(O,["?","?src"],"values",U),"pie"===z?(s(O,"marker.color").set(s(O,"marker.colors").get()),r._pielayer.selectAll("g.trace").remove()):u.traceIs(O,"cartesian")&&s(O,"marker.colors").set(s(O,"marker.color").get())}}else{var G=r._size,X=Z.orient,Y="top"===X||"bottom"===X;if("thicknessmode"===N){var Q=Y?G.h:G.w;C($+"thickness",Z.thickness*("fraction"===I?1/Q:Q),i)}else{var K=Y?G.w:G.h;C($+"len",Z.len*("fraction"===I?1/K:K),i)}}if(_[E][i]=F(z),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(E)){if("orientation"===E){D.set(I);var J=O.x&&!O.y?"h":"v";if((D.get()||J)===P.orientation)continue}else"orientationaxes"===E&&(O.orientation={v:"h",h:"v"}[P.orientation]);T.swapXYData(O),m.calc=m.clearAxisTypes=!0}else-1!==d.dataArrayContainers.indexOf(D.parts[0])?(T.manageArrayContainers(D,I,_),m.calc=!0):(R?R.arrayOk&&!u.traceIs(P,"regl")&&(o.isArrayOrTypedArray(I)||o.isArrayOrTypedArray(z))?m.calc=!0:A.update(m,R):m.calc=!0,D.set(I))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(E)&&p.swap(t,n),"orientationaxes"===E){var tt=s(t.layout,"hovermode");"x"===tt.get()?tt.set("y"):"y"===tt.get()&&tt.set("x")}if(-1!==["orientation","type"].indexOf(E)){for(g=[],i=0;i<n.length;i++){var et=l[n[i]];u.traceIs(et,"cartesian")&&(b(et.xaxis||"x"),b(et.yaxis||"y"))}C(g.map(w),!0,0),C(g.map(k),[0,1],0)}}else D=f(t.layout,E.replace("LAYOUT","")),_[E]=[F(D.get())],D.set(Array.isArray(B)?B[0]:B),m.calc=!0}return(m.calc||m.plot)&&(m.fullReplot=!0),{flags:m,undoit:_,redoit:y,traces:n,eventData:o.extendDeepNoArrays([],[v,n])}}function q(t){var e,n,i,r=o.counterRegex("axis",".title",!1,!1),a=/colorbar\.title$/,s=Object.keys(t);for(e=0;e<s.length;e++)i=t[n=s[e]],"title"!==n&&!r.test(n)&&!a.test(n)||"string"!=typeof i&&"number"!=typeof i?n.indexOf("titlefont")>-1?l(n,n.replace("titlefont","title.font")):n.indexOf("titleposition")>-1?l(n,n.replace("titleposition","title.position")):n.indexOf("titleside")>-1?l(n,n.replace("titleside","title.side")):n.indexOf("titleoffset")>-1&&l(n,n.replace("titleoffset","title.offset")):l(n,n.replace("title","title.text"));function l(e,n){t[n]=t[e],delete t[e]}}function Z(t,e,n){if(t=o.getGraphDiv(t),T.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var i={};if("string"==typeof e)i[e]=n;else{if(!o.isPlainObject(e))return o.warn("Relayout fail.",e,n),Promise.reject();i=o.extendFlat({},e)}Object.keys(i).length&&(t.changed=!0);var r=Y(t,i),a=r.flags;a.calc&&(t.calcdata=void 0);var s=[d.previousPromises];a.layoutReplot?s.push(M.layoutReplot):Object.keys(i).length&&(V(t,a,r)||d.supplyDefaults(t),a.legend&&s.push(M.doLegend),a.layoutstyle&&s.push(M.layoutStyles),a.axrange&&W(s,r.rangesAltered),a.ticks&&s.push(M.doTicksRelayout),a.modebar&&s.push(M.doModeBar),a.camera&&s.push(M.doCamera),s.push(S)),s.push(d.rehover),c.add(t,Z,[t,r.undoit],Z,[t,r.redoit]);var l=o.syncOrAsync(s,t);return l&&l.then||(l=Promise.resolve(t)),l.then(function(){return t.emit("plotly_relayout",r.eventData),t})}function V(t,e,n){var i=t._fullLayout;if(!e.axrange)return!1;for(var r in e)if("axrange"!==r&&e[r])return!1;for(var a in n.rangesAltered){var o=p.id2name(a),s=t.layout[o],l=i[o];if(l.autorange=s.autorange,l.range=s.range.slice(),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)if(c!==a){var u=i[p.id2name(c)];u.autorange=l.autorange,u.range=l.range.slice(),u._input.range=l.range.slice()}}return!0}function W(t,e){t.push(function(t){var e=t._fullLayout._zoomlayer;e&&b(e)},M.doAutoRangeAndConstraints,e?function(t){var n=[],i=!0;for(var r in e){var a=p.getFromId(t,r);if(n.push(r),a._matchGroup)for(var o in a._matchGroup)e[o]||n.push(o);a.automargin&&(i=!1)}return p.draw(t,n,{skipTitle:i})}:function(t){return p.draw(t,"redraw")},M.drawData,M.finalDraw)}n.plot=function(t,e,r,a){var s;if(t=o.getGraphDiv(t),l.init(t),o.isPlainObject(e)){var c=e;e=c.data,r=c.layout,a=c.config,s=c.frames}if(!1===l.triggerHandler(t,"plotly_beforeplot",[e,r,a]))return Promise.reject();e||r||o.isPlotDiv(t)||o.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",t),P(t,a),r||(r={}),i.select(t).classed("js-plotly-plot",!0),v.makeTester(),Array.isArray(t._promises)||(t._promises=[]);var h=0===(t.data||[]).length&&Array.isArray(e);if(Array.isArray(e)&&(T.cleanData(e),h?t.data=e:t.data.push.apply(t.data,e),t.empty=!1),t.layout&&!h||(t.layout=T.cleanLayout(r)),t._dragging&&!t._transitioning)return t._replotPending=!0,Promise.reject();t._replotPending=!1,d.supplyDefaults(t);var g=t._fullLayout,_=g._has("cartesian");if(!g._has("polar")&&e&&e[0]&&e[0].r)return o.log("Legacy polar charts are deprecated!"),function(t,e,n){var r=i.select(t).selectAll(".plot-container").data([0]);r.enter().insert("div",":first-child").classed("plot-container plotly",!0);var a=r.selectAll(".svg-container").data([0]);a.enter().append("div").classed("svg-container",!0).style("position","relative"),a.html(""),e&&(t.data=e),n&&(t.layout=n),f.manager.fillLayout(t),a.style({width:t._fullLayout.width+"px",height:t._fullLayout.height+"px"}),t.framework=f.manager.framework(t),t.framework({data:t.data,layout:t.layout},a.node()),t.framework.setUndoPoint();var s=t.framework.svg(),l=1,c=t._fullLayout.title?t._fullLayout.title.text:"";""!==c&&c||(l=0);var u=function(){this.call(x.convertToTspans,t)},h=s.select(".title-group text").call(u);if(t._context.edits.titleText){var p=o._(t,"Click to enter Plot title");c&&c!==p||(l=.2,h.attr({"data-unformatted":p}).text(p).style({opacity:l}).on("mouseover.opacity",function(){i.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){i.select(this).transition().duration(1e3).style("opacity",0)}));var v=function(){this.call(x.makeEditable,{gd:t}).on("edit",function(e){t.framework({layout:{title:{text:e}}}),this.text(e).call(u),this.call(v)}).on("cancel",function(){var t=this.attr("data-unformatted");this.text(t).call(u)})};h.call(v)}return t._context.setBackground(t,t._fullLayout.paper_bgcolor),d.addLinks(t),Promise.resolve()}(t,e,r);g._replotting=!0,h&&lt(t),t.framework!==lt&&(t.framework=lt,lt(t)),v.initGradients(t),h&&p.saveShowSpikeInitial(t);var b=!t.calcdata||t.calcdata.length!==(t._fullData||[]).length;b&&d.doCalcdata(t);for(var w=0;w<t.calcdata.length;w++)t.calcdata[w][0].trace=t._fullData[w];t._context.responsive?t._responsiveChartHandler||(t._responsiveChartHandler=function(){d.resize(t)},window.addEventListener("resize",t._responsiveChartHandler)):o.clearResponsive(t);var k=JSON.stringify(g._size),A=0;function C(){var e,n,i,r=t.calcdata;for(d.clearAutoMarginIds(t),M.drawMarginPushers(t),p.allowAutoMargin(t),e=0;e<r.length;e++){var a=(i=(n=r[e])[0].trace)._module.colorbar;!0===i.visible&&a?m(t,n,a):d.autoMargin(t,"cb"+i.uid)}return d.doAutoMargin(t),d.previousPromises(t)}function L(){t._transitioning||(M.doAutoRangeAndConstraints(t),h&&p.saveRangeInitial(t),u.getComponentMethod("rangeslider","calcAutorange")(t))}var E=[d.previousPromises,function(){if(s)return n.addFrames(t,s)},function e(){for(var n=g._basePlotModules,i=0;i<n.length;i++)n[i].drawFramework&&n[i].drawFramework(t);if(!g._glcanvas&&g._has("gl")&&(g._glcanvas=g._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(t){return t.key}),g._glcanvas.enter().append("canvas").attr("class",function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),g._glcanvas){g._glcanvas.attr("width",g.width).attr("height",g.height);var r=g._glcanvas.data()[0].regl;if(r&&(Math.floor(g.width)!==r._gl.drawingBufferWidth||Math.floor(g.height)!==r._gl.drawingBufferHeight)){var a="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!A)return o.log(a+" Clearing graph and plotting again."),d.cleanPlot([],{},t._fullData,g),d.supplyDefaults(t),g=t._fullLayout,d.doCalcdata(t),A++,e();o.error(a)}}return"h"===g.modebar.orientation?g._modebardiv.style("height",null).style("width","100%"):g._modebardiv.style("width",null).style("height",g.height+"px"),d.previousPromises(t)},C,function(){if(JSON.stringify(g._size)!==k)return o.syncOrAsync([C,M.layoutStyles],t)}];_&&E.push(function(){if(b)return o.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),L],t);L()}),E.push(M.layoutStyles),_&&E.push(function(){return p.draw(t,h?"":"redraw")}),E.push(M.drawData,M.finalDraw,y,d.addLinks,d.rehover,d.doAutoMargin,d.previousPromises);var O=o.syncOrAsync(E,t);return O&&O.then||(O=Promise.resolve()),O.then(function(){return S(t),t})},n.setPlotConfig=function(t){return o.extendFlat(w,t)},n.redraw=function(t){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return T.cleanData(t.data),T.cleanLayout(t.layout),t.calcdata=void 0,n.plot(t).then(function(){return t.emit("plotly_redraw"),t})},n.newPlot=function(t,e,i,r){return t=o.getGraphDiv(t),d.cleanPlot([],{},t._fullData||[],t._fullLayout||{}),d.purge(t),n.plot(t,e,i,r)},n.extendTraces=function t(e,i,r,a){var s=R(e=o.getGraphDiv(e),i,r,a,function(t,e,n){var i,r;if(o.isTypedArray(t))if(n<0){var a=new t.constructor(0),s=B(t,e);n<0?(i=s,r=a):(i=a,r=s)}else if(i=new t.constructor(n),r=new t.constructor(t.length+e.length-n),n===e.length)i.set(e),r.set(t);else if(n<e.length){var l=e.length-n;i.set(e.subarray(l)),r.set(t),r.set(e.subarray(0,l),t.length)}else{var c=n-e.length,u=t.length-c;i.set(t.subarray(u)),i.set(e,c),r.set(t.subarray(0,u))}else i=t.concat(e),r=n>=0&&n<i.length?i.splice(0,i.length-n):[];return[i,r]}),l=n.redraw(e);return c.add(e,n.prependTraces,[e,s.update,r,s.maxPoints],t,arguments),l},n.prependTraces=function t(e,i,r,a){var s=R(e=o.getGraphDiv(e),i,r,a,function(t,e,n){var i,r;if(o.isTypedArray(t))if(n<=0){var a=new t.constructor(0),s=B(e,t);n<0?(i=s,r=a):(i=a,r=s)}else if(i=new t.constructor(n),r=new t.constructor(t.length+e.length-n),n===e.length)i.set(e),r.set(t);else if(n<e.length){var l=e.length-n;i.set(e.subarray(0,l)),r.set(e.subarray(l)),r.set(t,l)}else{var c=n-e.length;i.set(e),i.set(t.subarray(0,c),e.length),r.set(t.subarray(c))}else i=e.concat(t),r=n>=0&&n<i.length?i.splice(n,i.length):[];return[i,r]}),l=n.redraw(e);return c.add(e,n.extendTraces,[e,s.update,r,s.maxPoints],t,arguments),l},n.addTraces=function t(e,i,r){e=o.getGraphDiv(e);var a,s,l=[],u=n.deleteTraces,h=t,d=[e,l],f=[e,i];for(function(t,e,n){var i,r;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),i=0;i<e.length;i++)if("object"!=typeof(r=e[i])||Array.isArray(r)||null===r)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(e,i,r),Array.isArray(i)||(i=[i]),i=i.map(function(t){return o.extendFlat({},t)}),T.cleanData(i),a=0;a<i.length;a++)e.data.push(i[a]);for(a=0;a<i.length;a++)l.push(-i.length+a);if(void 0===r)return s=n.redraw(e),c.add(e,u,d,h,f),s;Array.isArray(r)||(r=[r]);try{I(e,l,r)}catch(t){throw e.data.splice(e.data.length-i.length,i.length),t}return c.startSequence(e),c.add(e,u,d,h,f),s=n.moveTraces(e,l,r),c.stopSequence(e),s},n.deleteTraces=function t(e,i){e=o.getGraphDiv(e);var r,a,s=[],l=n.addTraces,u=t,h=[e,s,i],d=[e,i];if(void 0===i)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(i)||(i=[i]),z(e,i,"indices"),(i=D(i,e.data.length-1)).sort(o.sorterDes),r=0;r<i.length;r+=1)a=e.data.splice(i[r],1)[0],s.push(a);var f=n.redraw(e);return c.add(e,l,h,u,d),f},n.moveTraces=function t(e,i,r){var a,s=[],l=[],u=t,h=t,d=[e=o.getGraphDiv(e),r,i],f=[e,i,r];if(I(e,i,r),i=Array.isArray(i)?i:[i],void 0===r)for(r=[],a=0;a<i.length;a++)r.push(-i.length+a);for(r=Array.isArray(r)?r:[r],i=D(i,e.data.length-1),r=D(r,e.data.length-1),a=0;a<e.data.length;a++)-1===i.indexOf(a)&&s.push(e.data[a]);for(a=0;a<i.length;a++)l.push({newIndex:r[a],trace:e.data[i[a]]});for(l.sort(function(t,e){return t.newIndex-e.newIndex}),a=0;a<l.length;a+=1)s.splice(l[a].newIndex,0,l[a].trace);e.data=s;var p=n.redraw(e);return c.add(e,u,d,h,f),p},n.restyle=N,n._storeDirectGUIEdit=function(t,e,n){for(var i in n)H(i,s(t,i).get(),n[i],e)},n.relayout=Z;var U=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,G=/^[xyz]axis[0-9]*\.autorange$/,X=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Y(t,e){var n,i,r,a=t.layout,l=t._fullLayout,c=j(l._preGUI,l._guiEditing),d=Object.keys(e),f=p.list(t),v=o.extendDeepAll({},e),g={};for(q(e),d=Object.keys(e),i=0;i<d.length;i++)if(0===d[i].indexOf("allaxes")){for(r=0;r<f.length;r++){var m=f[r]._id.substr(1),y=-1!==m.indexOf("scene")?m+".":"",_=d[i].replace("allaxes",y+f[r]._name);e[_]||(e[_]=e[d[i]])}delete e[d[i]]}var x=A.layoutFlags(),b={},w={};function M(t,n){if(Array.isArray(t))t.forEach(function(t){M(t,n)});else if(!(t in e||T.hasParent(e,t))){var i=c(a,t);t in w||(w[t]=F(i.get())),void 0!==n&&i.set(n)}}var L,S={};function E(t){var e=p.name2id(t.split(".")[0]);return S[e]=1,e}for(var O in e){if(T.hasParent(e,O))throw new Error("cannot set "+O+" and a parent attribute simultaneously");for(var P=c(a,O),D=e[O],z=P.parts.length-1;z>0&&"string"!=typeof P.parts[z];)z--;var I=P.parts[z],R=P.parts[z-1]+"."+I,B=P.parts.slice(0,z).join("."),N=s(t.layout,B).get(),H=s(l,B).get(),$=P.get();if(void 0!==D){b[O]=D,w[O]="reverse"===I?D:F($);var Z=h.getLayoutValObject(l,P.parts);if(Z&&Z.impliedEdits&&null!==D)for(var V in Z.impliedEdits)M(o.relativeAttr(O,V),Z.impliedEdits[V]);if(-1!==["width","height"].indexOf(O))if(D){M("autosize",null);var W="height"===O?"width":"height";M(W,l[W])}else l[O]=t._initialAutoSize[O];else if("autosize"===O)M("width",D?null:l.width),M("height",D?null:l.height);else if(R.match(U))E(R),s(l,B+"._inputRange").set(null);else if(R.match(G)){E(R),s(l,B+"._inputRange").set(null);var Y=s(l,B).get();Y._inputDomain&&(Y._input.domain=Y._inputDomain.slice())}else R.match(X)&&s(l,B+"._inputDomain").set(null);if("type"===I){var K=N,J="linear"===H.type&&"log"===D;if(J||"log"===H.type&&"linear"===D){if(K&&K.range)if(H.autorange)J&&(K.range=K.range[1]>K.range[0]?[1,2]:[2,1]);else{var tt=K.range[0],et=K.range[1];J?(tt<=0&&et<=0&&M(B+".autorange",!0),tt<=0?tt=et/1e6:et<=0&&(et=tt/1e6),M(B+".range[0]",Math.log(tt)/Math.LN10),M(B+".range[1]",Math.log(et)/Math.LN10)):(M(B+".range[0]",Math.pow(10,tt)),M(B+".range[1]",Math.pow(10,et)))}else M(B+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[P.parts[0]]&&"radialaxis"===P.parts[1]&&delete l[P.parts[0]]._subplot.viewInitial["radialaxis.range"],u.getComponentMethod("annotations","convertCoords")(t,H,D,M),u.getComponentMethod("images","convertCoords")(t,H,D,M)}else M(B+".autorange",!0),M(B+".range",null);s(l,B+"._inputRange").set(null)}else if(I.match(C)){var nt=s(l,O).get(),it=(D||{}).type;it&&"-"!==it||(it="linear"),u.getComponentMethod("annotations","convertCoords")(t,nt,it,M),u.getComponentMethod("images","convertCoords")(t,nt,it,M)}var rt=k.containerArrayMatch(O);if(rt){n=rt.array;var at=rt.property,ot=Z||{editType:"calc"};""!==(i=rt.index)&&""===at&&(k.isAddVal(D)?w[O]=null:k.isRemoveVal(D)?w[O]=(s(a,n).get()||[])[i]:o.warn("unrecognized full object value",e)),A.update(x,ot),g[n]||(g[n]={});var st=g[n][i];st||(st=g[n][i]={}),st[at]=D,delete e[O]}else"reverse"===I?(N.range?N.range.reverse():(M(B+".autorange",!0),N.range=[1,0]),H.autorange?x.calc=!0:x.plot=!0):(l._has("scatter-like")&&l._has("regl")&&"dragmode"===O&&("lasso"===D||"select"===D)&&"lasso"!==$&&"select"!==$?x.plot=!0:l._has("gl2d")?x.plot=!0:Z?A.update(x,Z):x.calc=!0,P.set(D))}}for(n in g)k.applyContainerArrayChanges(t,c(a,n),g[n],x,c)||(x.plot=!0);var lt=l._axisConstraintGroups||[];for(L in S)for(i=0;i<lt.length;i++){var ct=lt[i];if(ct[L])for(var ut in x.calc=!0,ct)S[ut]||(p.getFromId(t,ut)._constraintShrinkable=!0)}return(Q(t)||e.height||e.width)&&(x.plot=!0),(x.plot||x.calc)&&(x.layoutReplot=!0),{flags:x,rangesAltered:S,undoit:w,redoit:b,eventData:v}}function Q(t){var e=t._fullLayout,n=e.width,i=e.height;return t.layout.autosize&&d.plotAutoSize(t,t.layout,e),e.width!==n||e.height!==i}function K(t,e,i,r){if(t=o.getGraphDiv(t),T.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);o.isPlainObject(e)||(e={}),o.isPlainObject(i)||(i={}),Object.keys(e).length&&(t.changed=!0),Object.keys(i).length&&(t.changed=!0);var a=T.coerceTraceIndices(t,r),s=$(t,o.extendFlat({},e),a),l=s.flags,u=Y(t,o.extendFlat({},i)),h=u.flags;(l.calc||h.calc)&&(t.calcdata=void 0),l.clearAxisTypes&&T.clearAxisTypes(t,a,i);var f=[];if(l.fullReplot&&h.layoutReplot){var p=t.data,v=t.layout;t.data=void 0,t.layout=void 0,f.push(function(){return n.plot(t,p,v)})}else l.fullReplot?f.push(n.plot):h.layoutReplot?f.push(M.layoutReplot):(f.push(d.previousPromises),V(t,h,u)||d.supplyDefaults(t),l.style&&f.push(M.doTraceStyle),l.colorbars&&f.push(M.doColorBars),h.legend&&f.push(M.doLegend),h.layoutstyle&&f.push(M.layoutStyles),h.axrange&&W(f,u.rangesAltered),h.ticks&&f.push(M.doTicksRelayout),h.modebar&&f.push(M.doModeBar),h.camera&&f.push(M.doCamera),f.push(S));f.push(d.rehover),c.add(t,K,[t,s.undoit,u.undoit,s.traces],K,[t,s.redoit,u.redoit,s.traces]);var g=o.syncOrAsync(f,t);return g&&g.then||(g=Promise.resolve(t)),g.then(function(){return t.emit("plotly_update",{data:s.eventData,layout:u.eventData}),t})}function J(t){return function(e){e._fullLayout._guiEditing=!0;var n=t.apply(null,arguments);return e._fullLayout._guiEditing=!1,n}}n.update=K,n._guiRestyle=J(N),n._guiRelayout=J(Z),n._guiUpdate=J(K);var tt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],et=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function nt(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=t.match(i.pattern);if(r)return{head:r[1],attr:i.attr}}}function it(t,e){var n=s(e,t).get();if(void 0!==n)return n;var i=t.split(".");for(i.pop();i.length>1;)if(i.pop(),void 0!==(n=s(e,i.join(".")+".uirevision").get()))return n;return e.uirevision}function rt(t,e){for(var n=0;n<e.length;n++)if(e[n]._fullInput.uid===t)return n;return-1}function at(t,e,n){for(var i=0;i<e.length;i++)if(e[i].uid===t)return i;return!e[n]||e[n].uid?-1:n}function ot(t,e){var n=o.isPlainObject(t),i=Array.isArray(t);return n||i?(n&&o.isPlainObject(e)||i&&Array.isArray(e))&&JSON.stringify(t)===JSON.stringify(e):t===e}function st(t,e,n,i){var r,a,l,c=i.getValObject,u=i.flags,h=i.immutable,d=i.inArray,f=i.arrayIndex;function p(){var t=r.editType;d&&-1!==t.indexOf("arraydraw")?o.pushUnique(u.arrays[d],f):(A.update(u,r),"none"!==t&&u.nChanges++,i.transition&&r.anim&&u.nChangesAnim++,(U.test(l)||G.test(l))&&(u.rangesAltered[n[0]]=1),X.test(l)&&s(e,"_inputDomain").set(null),"datarevision"===a&&(u.newDataRevision=1))}function v(t){return"data_array"===t.valType||t.arrayOk}for(a in t){if(u.calc&&!i.transition)return;var g=t[a],m=e[a],y=n.concat(a);if(l=y.join("."),"_"!==a.charAt(0)&&"function"!=typeof g&&g!==m){if(("tick0"===a||"dtick"===a)&&"geo"!==n[0]){var _=e.tickmode;if("auto"===_||"array"===_||!_)continue}if(("range"!==a||!e.autorange)&&("zmin"!==a&&"zmax"!==a||"contourcarpet"!==e.type)&&(r=c(y))&&(!r._compareAsJSON||JSON.stringify(g)!==JSON.stringify(m))){var x,b=r.valType,w=v(r),k=Array.isArray(g),T=Array.isArray(m);if(k&&T){var M="_input_"+a,C=t[M],L=e[M];if(Array.isArray(C)&&C===L)continue}if(void 0===m)w&&k?u.calc=!0:p();else if(r._isLinkedToArray){var S=[],E=!1;d||(u.arrays[a]=S);var O=Math.min(g.length,m.length),P=Math.max(g.length,m.length);if(O!==P){if("arraydraw"!==r.editType){p();continue}E=!0}for(x=0;x<O;x++)st(g[x],m[x],y.concat(x),o.extendFlat({inArray:a,arrayIndex:x},i));if(E)for(x=O;x<P;x++)S.push(x)}else!b&&o.isPlainObject(g)?st(g,m,y,i):w?k&&T?(h&&(u.calc=!0),(h||i.newDataRevision)&&p()):k!==T?u.calc=!0:p():k&&T&&g.length===m.length&&String(g)===String(m)||p()}}}for(a in e)if(!(a in t||"_"===a.charAt(0)||"function"==typeof e[a])){if(v(r=c(n.concat(a)))&&Array.isArray(e[a]))return void(u.calc=!0);p()}}function lt(t){var e=i.select(t),n=t._fullLayout;if(n._container=e.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var r={};i.selectAll("defs").each(function(){this.id&&(r[this.id.split("-")[1]]=1)}),n._uid=o.randstr(r)}n._paperdiv.selectAll(".main-svg").attr(_.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var a=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=a.append("g").classed("imagelayer",!0),n._shapeLowerLayer=a.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var s=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=s.append("g").classed("imagelayer",!0),n._shapeUpperLayer=s.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),n._modebardiv=n._paperdiv.selectAll(".modebar-container").data([0]),n._modebardiv.enter().append("div").classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),t.emit("plotly_framework")}n.react=function(t,e,i,r){var a,l,c=(t=o.getGraphDiv(t))._fullData,f=t._fullLayout;if(o.isPlotDiv(t)&&c&&f){if(o.isPlainObject(e)){var p=e;e=p.data,i=p.layout,r=p.config,a=p.frames}var v=!1;if(r){var g=o.extendDeep({},t._context);t._context=void 0,P(t,r),v=function t(e,n){var i;for(i in e)if("_"!==i.charAt(0)){var r=e[i],a=n[i];if(r!==a)if(o.isPlainObject(r)&&o.isPlainObject(a)){if(t(r,a))return!0}else{if(!Array.isArray(r)||!Array.isArray(a))return!0;if(r.length!==a.length)return!0;for(var s=0;s<r.length;s++)if(r[s]!==a[s]){if(!o.isPlainObject(r[s])||!o.isPlainObject(a[s]))return!0;if(t(r[s],a[s]))return!0}}}}(g,t._context)}t.data=e||[],T.cleanData(t.data),t.layout=i||{},T.cleanLayout(t.layout),function(t,e,n,i){var r,a,l,c,u,h,d,f,p=i._preGUI,v=[],g={};for(r in p){if(u=nt(r,tt)){if((c=(l=s(i,a=u.attr||u.head+".uirevision").get())&&it(a,e))&&c===l&&(null===(h=p[r])&&(h=void 0),ot(f=(d=s(e,r)).get(),h))){void 0===f&&"autorange"===r.substr(r.length-9)&&v.push(r.substr(0,r.length-10)),d.set(F(s(i,r).get()));continue}}else o.warn("unrecognized GUI edit: "+r);delete p[r],"range["===r.substr(r.length-8,6)&&(g[r.substr(0,r.length-9)]=1)}for(var m=0;m<v.length;m++){var y=v[m];if(g[y]){var _=s(e,y).get();_&&delete _.autorange}}var x=i._tracePreGUI;for(var b in x){var w,k=x[b],T=null;for(r in k){if(!T){var M=rt(b,n);if(M<0){delete x[b];break}var A=at(b,t,(w=n[M]._fullInput).index);if(A<0){delete x[b];break}T=t[A]}if(u=nt(r,et)){if(u.attr?c=(l=s(i,u.attr).get())&&it(u.attr,e):(l=w.uirevision,void 0===(c=T.uirevision)&&(c=e.uirevision)),c&&c===l&&(null===(h=k[r])&&(h=void 0),ot(f=(d=s(T,r)).get(),h))){d.set(F(s(w,r).get()));continue}}else o.warn("unrecognized GUI edit: "+r+" in trace uid "+b);delete k[r]}}}(t.data,t.layout,c,f),d.supplyDefaults(t,{skipUpdateCalc:!0});var m=t._fullData,y=t._fullLayout,_=void 0===y.datarevision,x=y.transition,b=function(t,e,n,i,r){var a=A.layoutFlags();return a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,st(e,n,[],{getValObject:function(t){return h.getLayoutValObject(n,t)},flags:a,immutable:i,transition:r,gd:t}),(a.plot||a.calc)&&(a.layoutReplot=!0),r&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some"),a}(t,f,y,_,x),w=function(t,e,n,i,r,a){var o=e.length===n.length;if(!r&&!o)return{fullReplot:!0,calc:!0};var s,l,c=A.traceFlags();c.arrays={},c.nChanges=0,c.nChangesAnim=0;var u={getValObject:function(t){return h.getTraceValObject(l,t)},flags:c,immutable:i,transition:r,newDataRevision:a,gd:t},f={};for(s=0;s<e.length;s++)if(n[s]){if(d.hasMakesDataTransform(l=n[s]._fullInput)&&(l=n[s]),f[l.uid])continue;f[l.uid]=1,st(e[s]._fullInput,l,[],u)}return(c.calc||c.plot)&&(c.fullReplot=!0),r&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some"),c}(t,c,m,_,x,b.newDataRevision);Q(t)&&(b.layoutReplot=!0),w.calc||b.calc?t.calcdata=void 0:d.supplyDefaultsUpdateCalc(t.calcdata,m);var k=[];if(a&&(t._transitionData={},d.createTransitionData(t),k.push(function(){return n.addFrames(t,a)})),y.transition&&!v&&(w.anim||b.anim))d.doCalcdata(t),M.doAutoRangeAndConstraints(t),k.push(function(){return d.transitionFromReact(t,w,b,f)});else if(w.fullReplot||b.layoutReplot||v)t._fullLayout._skipDefaults=!0,k.push(n.plot);else{for(var C in b.arrays){var L=b.arrays[C];if(L.length){var E=u.getComponentMethod(C,"drawOne");if(E!==o.noop)for(var O=0;O<L.length;O++)E(t,L[O]);else{var D=u.getComponentMethod(C,"draw");if(D===o.noop)throw new Error("cannot draw components: "+C);D(t)}}}k.push(d.previousPromises),w.style&&k.push(M.doTraceStyle),w.colorbars&&k.push(M.doColorBars),b.legend&&k.push(M.doLegend),b.layoutstyle&&k.push(M.layoutStyles),b.axrange&&W(k),b.ticks&&k.push(M.doTicksRelayout),b.modebar&&k.push(M.doModeBar),b.camera&&k.push(M.doCamera),k.push(S)}k.push(d.rehover),(l=o.syncOrAsync(k,t))&&l.then||(l=Promise.resolve(t))}else l=n.newPlot(t,e,i,r);return l.then(function(){return t.emit("plotly_react",{data:e,layout:i}),t})},n.animate=function(t,e,n){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var i=t._transitionData;i._frameQueue||(i._frameQueue=[]);var r=(n=d.supplyAnimationDefaults(n)).transition,a=n.frame;function s(t){return Array.isArray(r)?t>=r.length?r[0]:r[t]:r}function l(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function c(t,e){var n=0;return function(){if(t&&++n===e)return t()}}return void 0===i._frameWaitingCnt&&(i._frameWaitingCnt=0),new Promise(function(a,u){var h,f,p=0;function v(t){return t.transitionOpts=Array.isArray(r)?p>=r.length?r[p]:r[0]:r,p++,t}var g=[],m=null==e,y=Array.isArray(e);if(m||y||!o.isPlainObject(e)){if(m||-1!==["string","number"].indexOf(typeof e))for(h=0;h<i._frames.length;h++)(f=i._frames[h])&&(m||String(f.group)===String(e))&&g.push({type:"byname",name:String(f.name),data:v({name:f.name})});else if(y)for(h=0;h<e.length;h++){var _=e[h];-1!==["number","string"].indexOf(typeof _)?(_=String(_),g.push({type:"byname",name:_,data:v({name:_})})):o.isPlainObject(_)&&g.push({type:"object",data:v(o.extendFlat({},_))})}}else g.push({type:"object",data:v(o.extendFlat({},e))});for(h=0;h<g.length;h++)if("byname"===(f=g[h]).type&&!i._frameHash[f.data.name])return o.warn('animate failure: frame not found: "'+f.data.name+'"'),void u();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==i._frameQueue.length){for(;i._frameQueue.length;){var e=i._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&g.reverse();var x=t._fullLayout._currentFrame;if(x&&n.fromcurrent){var b=-1;for(h=0;h<g.length;h++)if("byname"===(f=g[h]).type&&f.name===x){b=h;break}if(b>0&&b<g.length-1){var w=[];for(h=0;h<g.length;h++)f=g[h],("byname"!==g[h].type||h>b)&&w.push(f);g=w}}g.length>0?function(e){if(0!==e.length){for(var r=0;r<e.length;r++){var o;o="byname"===e[r].type?d.computeFrame(t,e[r].name):e[r].data;var h=l(r),f=s(r);f.duration=Math.min(f.duration,h.duration);var p={frame:o,name:e[r].name,frameOpts:h,transitionOpts:f};r===e.length-1&&(p.onComplete=c(a,2),p.onInterrupt=u),i._frameQueue.push(p)}"immediate"===n.mode&&(i._lastFrameAt=-1/0),i._animationRaf||function(){t.emit("plotly_animating"),i._lastFrameAt=-1/0,i._timeToNext=0,i._runningTransitions=0,i._currentFrame=null;var e=function(){i._animationRaf=window.requestAnimationFrame(e),Date.now()-i._lastFrameAt>i._timeToNext&&function(){i._currentFrame&&i._currentFrame.onComplete&&i._currentFrame.onComplete();var e=i._currentFrame=i._frameQueue.shift();if(e){var n=e.name?e.name.toString():null;t._fullLayout._currentFrame=n,i._lastFrameAt=Date.now(),i._timeToNext=e.frameOpts.duration,d.transition(t,e.frame.data,e.frame.layout,T.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),t.emit("plotly_animatingframe",{name:n,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(i._animationRaf),i._animationRaf=null}()};e()}()}}(g):(t.emit("plotly_animated"),a())})},n.addFrames=function(t,e,n){if(t=o.getGraphDiv(t),null==e)return Promise.resolve();if(!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var i,r,a,s,l=t._transitionData._frames,u=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var h=l.length+2*e.length,f=[],p={};for(i=e.length-1;i>=0;i--)if(o.isPlainObject(e[i])){var v=e[i].name,g=(u[v]||p[v]||{}).name,m=e[i].name;g&&m&&"number"==typeof m&&(u[g]||p[g])&&L<5&&(L++,o.warn('addFrames: overwriting frame "'+(u[g]||p[g]).name+'" with a frame whose name of type "number" also equates to "'+g+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===L&&o.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[v]={name:v},f.push({frame:d.supplyFrameDefaults(e[i]),index:n&&null!=n[i]?n[i]:h+i})}f.sort(function(t,e){return t.index>e.index?-1:t.index<e.index?1:0});var y=[],_=[],x=l.length;for(i=f.length-1;i>=0;i--){if("number"==typeof(r=f[i].frame).name&&o.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!r.name)for(;u[r.name="frame "+t._transitionData._counter++];);if(u[r.name]){for(a=0;a<l.length&&(l[a]||{}).name!==r.name;a++);y.push({type:"replace",index:a,value:r}),_.unshift({type:"replace",index:a,value:l[a]})}else s=Math.max(0,Math.min(f[i].index,x)),y.push({type:"insert",index:s,value:r}),_.unshift({type:"delete",index:s}),x++}return c&&c.add(t,d.modifyFrames,[t,_],d.modifyFrames,[t,y]),d.modifyFrames(t,y)},n.deleteFrames=function(t,e){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var n,i,r=t._transitionData._frames,a=[],s=[];if(!e)for(e=[],n=0;n<r.length;n++)e.push(n);for((e=e.slice(0)).sort(),n=e.length-1;n>=0;n--)a.push({type:"delete",index:i=e[n]}),s.unshift({type:"insert",index:i,value:r[i]});return c&&c.add(t,d.modifyFrames,[t,s],d.modifyFrames,[t,a]),d.modifyFrames(t,a)},n.purge=function(t){var e=(t=o.getGraphDiv(t))._fullLayout||{};return d.cleanPlot([],{},t._fullData||[],e),d.purge(t),l.purge(t),e._container&&e._container.remove(),delete t._context,t}},{"../components/color":43,"../components/colorbar/connect":45,"../components/drawing":64,"../constants/xmlns_namespaces":141,"../lib":159,"../lib/events":152,"../lib/queue":173,"../lib/svg_text_utils":180,"../plots/cartesian/axes":203,"../plots/cartesian/constants":209,"../plots/cartesian/graph_interact":212,"../plots/cartesian/select":220,"../plots/plots":235,"../plots/polar/legacy":238,"../registry":242,"./edit_types":186,"./helpers":187,"./manage_arrays":189,"./plot_config":191,"./plot_schema":192,"./subroutines":194,d3:8,"fast-isnumeric":10,"has-hover":12}],191:[function(t,e,n){"use strict";var i={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:"https://plot.ly"},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"boolean",dflt:1},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},r={};!function t(e,n){for(var i in e){var r=e[i];r.valType?n[i]=r.dflt:(n[i]||(n[i]={}),t(r,n[i]))}}(i,r),e.exports={configAttributes:i,dfltConfig:r}},{}],192:[function(t,e,n){"use strict";var i=t("../registry"),r=t("../lib"),a=t("../plots/attributes"),o=t("../plots/layout_attributes"),s=t("../plots/frame_attributes"),l=t("../plots/animation_attributes"),c=t("./plot_config").configAttributes,u=t("../plots/polar/legacy/area_attributes"),h=t("../plots/polar/legacy/axis_attributes"),d=t("./edit_types"),f=r.extendFlat,p=r.extendDeepAll,v=r.isPlainObject,g="_isSubplotObj",m="_isLinkedToArray",y=[g,m,"_arrayAttrRegexps","_deprecated"];function _(t,e,n){if(!t)return!1;if(t._isLinkedToArray)if(x(e[n]))n++;else if(n<e.length)return!1;for(;n<e.length;n++){var i=t[e[n]];if(!v(i))break;if(t=i,n===e.length-1)break;if(t._isLinkedToArray){if(!x(e[++n]))return!1}else if("info_array"===t.valType){var r=e[++n];if(!x(r))return!1;var a=t.items;if(Array.isArray(a)){if(r>=a.length)return!1;if(2===t.dimensions){if(e.length===++n)return t;var o=e[n];if(!x(o))return!1;t=a[r][o]}else t=a[r]}else t=a}}return t}function x(t){return t===Math.round(t)&&t>=0}function b(t){return function(t){n.crawl(t,function(t,e,i){n.isValObject(t)?"data_array"===t.valType?(t.role="data",i[e+"src"]={valType:"string",editType:"none"}):!0===t.arrayOk&&(i[e+"src"]={valType:"string",editType:"none"}):v(t)&&(t.role="object")})}(t),function(t){n.crawl(t,function(t,e,n){if(t){var i=t[m];i&&(delete t[m],n[e]={items:{}},n[e].items[i]=t,n[e].role="object")}})}(t),function(t){!function t(e){for(var n in e)if(v(e[n]))t(e[n]);else if(Array.isArray(e[n]))for(var i=0;i<e[n].length;i++)t(e[n][i]);else e[n]instanceof RegExp&&(e[n]=e[n].toString())}(t)}(t),t}function w(t,e,n){var i=r.nestedProperty(t,n),a=p({},e.layoutAttributes);a[g]=!0,i.set(a)}function k(t,e,n){var i=r.nestedProperty(t,n);i.set(p(i.get()||{},e))}n.IS_SUBPLOT_OBJ=g,n.IS_LINKED_TO_ARRAY=m,n.DEPRECATED="_deprecated",n.UNDERSCORE_ATTRS=y,n.get=function(){var t={};i.allTypes.concat("area").forEach(function(e){t[e]=function(t){var e,o;"area"===t?(e={attributes:u},o={}):o=(e=i.modules[t]._module).basePlotModule;var s={type:null},l=p({},a),c=p({},e.attributes);n.crawl(c,function(t,e,n,i,a){r.nestedProperty(l,a).set(void 0),void 0===t&&r.nestedProperty(c,a).set(void 0)}),p(s,l),p(s,c),o.attributes&&p(s,o.attributes),s.type=t;var h={meta:e.meta||{},attributes:b(s)};if(e.layoutAttributes){var d={};p(d,e.layoutAttributes),h.layoutAttributes=b(d)}return h}(e)});var e,v={};return Object.keys(i.transformsRegistry).forEach(function(t){v[t]=function(t){var e=p({},i.transformsRegistry[t].attributes);return Object.keys(i.componentsRegistry).forEach(function(n){var r=i.componentsRegistry[n];r.schema&&r.schema.transforms&&r.schema.transforms[t]&&Object.keys(r.schema.transforms[t]).forEach(function(n){k(e,r.schema.transforms[t][n],n)})}),{attributes:b(e)}}(t)}),{defs:{valObjects:r.valObjectMeta,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:d.traces,layout:d.layout},impliedEdits:{}},traces:t,layout:function(){var t,e,n={};for(t in p(n,o),i.subplotsRegistry)if((e=i.subplotsRegistry[t]).layoutAttributes)if(Array.isArray(e.attr))for(var r=0;r<e.attr.length;r++)w(n,e,e.attr[r]);else w(n,e,"subplot"===e.attr?e.name:e.attr);for(t in n=function(t){return f(t,{radialaxis:h.radialaxis,angularaxis:h.angularaxis}),f(t,h.layout),t}(n),i.componentsRegistry){var a=(e=i.componentsRegistry[t]).schema;if(a&&(a.subplots||a.layout)){var s=a.subplots;if(s&&s.xaxis&&!s.yaxis)for(var l in s.xaxis)delete n.yaxis[l]}else e.layoutAttributes&&k(n,e.layoutAttributes,e.name)}return{layoutAttributes:b(n)}}(),transforms:v,frames:(e={frames:r.extendDeepAll({},s)},b(e),e.frames),animation:b(l),config:b(c)}},n.crawl=function(t,e,i,r){var a=i||0;r=r||"",Object.keys(t).forEach(function(i){var o=t[i];if(-1===y.indexOf(i)){var s=(r?r+".":"")+i;e(o,i,t,a,s),n.isValObject(o)||v(o)&&"impliedEdits"!==i&&n.crawl(o,e,a+1,s)}})},n.isValObject=function(t){return t&&void 0!==t.valType},n.findArrayAttributes=function(t){var e,i,o=[],s=[],l=[];function c(t,n,a,c){s=s.slice(0,c).concat([n]),l=l.slice(0,c).concat([t&&t._isLinkedToArray]),t&&("data_array"===t.valType||!0===t.arrayOk)&&("colorbar"!==s[c-1]||"ticktext"!==n&&"tickvals"!==n)&&function t(e,n,a){var c=e[s[n]],u=a+s[n];if(n===s.length-1)r.isArrayOrTypedArray(c)&&o.push(i+u);else if(l[n]){if(Array.isArray(c))for(var h=0;h<c.length;h++)r.isPlainObject(c[h])&&t(c[h],n+1,u+"["+h+"].")}else r.isPlainObject(c)&&t(c,n+1,u+".")}(e,0,"")}e=t,i="",n.crawl(a,c),t._module&&t._module.attributes&&n.crawl(t._module.attributes,c);var u=t.transforms;if(u)for(var h=0;h<u.length;h++){var d=u[h],f=d._module;f&&(i="transforms["+h+"].",e=d,n.crawl(f.attributes,c))}return o},n.getTraceValObject=function(t,e){var n,r,o=e[0],s=1;if("transforms"===o){if(1===e.length)return a.transforms;var l=t.transforms;if(!Array.isArray(l)||!l.length)return!1;var c=e[1];if(!x(c)||c>=l.length)return!1;r=(n=(i.transformsRegistry[l[c].type]||{}).attributes)&&n[e[2]],s=3}else if("area"===t.type)r=u[o];else{var h=t._module;if(h||(h=(i.modules[t.type||a.type.dflt]||{})._module),!h)return!1;if(!(r=(n=h.attributes)&&n[o])){var d=h.basePlotModule;d&&d.attributes&&(r=d.attributes[o])}r||(r=a[o])}return _(r,e,s)},n.getLayoutValObject=function(t,e){return _(function(t,e){var n,r,a,s,l=t._basePlotModules;if(l){var c;for(n=0;n<l.length;n++){if((a=l[n]).attrRegex&&a.attrRegex.test(e)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!c&&a.layoutAttributes&&(c=a.layoutAttributes)}var u=a.baseLayoutAttrOverrides;if(u&&e in u)return u[e]}if(c)return c}var d=t._modules;if(d)for(n=0;n<d.length;n++)if((s=d[n].layoutAttributes)&&e in s)return s[e];for(r in i.componentsRegistry)if(!(a=i.componentsRegistry[r]).schema&&e===a.name)return a.layoutAttributes;return e in o?o[e]:"radialaxis"===e||"angularaxis"===e?h[e]:h.layout[e]||!1}(t,e[0]),e,1)}},{"../lib":159,"../plots/animation_attributes":198,"../plots/attributes":200,"../plots/frame_attributes":230,"../plots/layout_attributes":233,"../plots/polar/legacy/area_attributes":236,"../plots/polar/legacy/axis_attributes":237,"../registry":242,"./edit_types":186,"./plot_config":191}],193:[function(t,e,n){"use strict";var i=t("../lib"),r=t("../plots/attributes"),a="templateitemname",o={name:{valType:"string",editType:"none"}};function s(t){return t&&"string"==typeof t}function l(t){return"s"!==t.charAt(t.length-1)&&i.warn("bad argument to arrayDefaultKey: "+t),t.substr(0,t.length-1)+"defaults"}o[a]={valType:"string",editType:"calc"},n.templatedArray=function(t,e){return e._isLinkedToArray=t,e.name=o.name,e[a]=o[a],e},n.traceTemplater=function(t){var e,n,a={};for(e in t)n=t[e],Array.isArray(n)&&n.length&&(a[e]=0);return{newTrace:function(o){var s={type:e=i.coerce(o,{},r,"type"),_template:null};if(e in a){var l=a[e]%(n=t[e]).length;a[e]++,s._template=n[l]}return s}}},n.newContainer=function(t,e,n){var r=t._template,a=r&&(r[e]||n&&r[n]);return i.isPlainObject(a)||(a=null),t[e]={_template:a}},n.arrayTemplater=function(t,e,n){var i=t._template,r=i&&i[l(e)],o=i&&i[e];Array.isArray(o)&&o.length||(o=[]);var c={};return{newItem:function(t){var e={name:t.name,_input:t},i=e[a]=t[a];if(!s(i))return e._template=r,e;for(var l=0;l<o.length;l++){var u=o[l];if(u.name===i)return c[i]=1,e._template=u,e}return e[n]=t[n]||!1,e._template=!1,e},defaultItems:function(){for(var t=[],e=0;e<o.length;e++){var n=o[e],i=n.name;if(s(i)&&!c[i]){var r={_template:n,name:i,_input:{_templateitemname:i}};r[a]=n[a],t.push(r),c[i]=1}}return t}}},n.arrayDefaultKey=l,n.arrayEditor=function(t,e,n){var r=(i.nestedProperty(t,e).get()||[]).length,o=n._index,s=o>=r&&(n._input||{})._templateitemname;s&&(o=r);var l,c=e+"["+o+"]";function u(){l={},s&&(l[c]={},l[c][a]=s)}function h(t,e){s?i.nestedProperty(l[c],t).set(e):l[c+"."+t]=e}function d(){var t=l;return u(),t}return u(),{modifyBase:function(t,e){l[t]=e},modifyItem:h,getUpdateObj:d,applyUpdate:function(e,n){e&&h(e,n);var r=d();for(var a in r)i.nestedProperty(t,a).set(r[a])}}}},{"../lib":159,"../plots/attributes":200}],194:[function(t,e,n){"use strict";var i=t("d3"),r=t("../registry"),a=t("../plots/plots"),o=t("../lib"),s=t("../lib/clear_gl_canvases"),l=t("../components/color"),c=t("../components/drawing"),u=t("../components/titles"),h=t("../components/modebar"),d=t("../plots/cartesian/axes"),f=t("../constants/alignment"),p=t("../plots/cartesian/constraints"),v=p.enforce,g=p.clean,m=t("../plots/cartesian/autorange").doAutoRange,y="start";function _(t,e,n){for(var i=0;i<n.length;i++){var r=n[i][0],a=n[i][1];if(!(r[0]>=t[1]||r[1]<=t[0])&&a[0]<e[1]&&a[1]>e[0])return!0}return!1}function x(t){var e,r,a,s,u,p,v=t._fullLayout,g=v._size,m=g.p,y=d.list(t,"",!0);if(v._paperdiv.style({width:t._context.responsive&&v.autosize&&!t._context._hasZeroWidth&&!t.layout.width?"100%":v.width+"px",height:t._context.responsive&&v.autosize&&!t._context._hasZeroHeight&&!t.layout.height?"100%":v.height+"px"}).selectAll(".main-svg").call(c.setSize,v.width,v.height),t._context.setBackground(t,v.paper_bgcolor),n.drawMainTitle(t),h.manage(t),!v._has("cartesian"))return t._promises.length&&Promise.all(t._promises);function x(t,e,n){var i=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===n?e._offset-m-i:e._offset+e._length+m+i:g.t+g.h*(1-(t.position||0))+i%1:e?"right"===n?e._offset+e._length+m+i:e._offset-m-i:g.l+g.w*(t.position||0)+i%1}for(e=0;e<y.length;e++){var w=(s=y[e])._anchorAxis;s._linepositions={},s._lw=c.crispRound(t,s.linewidth,1),s._mainLinePosition=x(s,w,s.side),s._mainMirrorPosition=s.mirror&&w?x(s,w,f.OPPOSITE_SIDE[s.side]):null}var T=[],M=[],A=[],C=1===l.opacity(v.paper_bgcolor)&&1===l.opacity(v.plot_bgcolor)&&v.paper_bgcolor===v.plot_bgcolor;for(r in v._plots)if((a=v._plots[r]).mainplot)a.bg&&a.bg.remove(),a.bg=void 0;else{var L=a.xaxis.domain,S=a.yaxis.domain,E=a.plotgroup;if(_(L,S,A)){var O=E.node(),P=a.bg=o.ensureSingle(E,"rect","bg");O.insertBefore(P.node(),O.childNodes[0]),M.push(r)}else E.select("rect.bg").remove(),A.push([L,S]),C||(T.push(r),M.push(r))}var D,z,I,R,B,N,F,j,H,$,q,Z,V,W=v._bgLayer.selectAll(".bg").data(T);for(W.enter().append("rect").classed("bg",!0),W.exit().remove(),W.each(function(t){v._plots[t].bg=i.select(this)}),e=0;e<M.length;e++)u=(a=v._plots[M[e]]).xaxis,p=a.yaxis,a.bg&&a.bg.call(c.setRect,u._offset-m,p._offset-m,u._length+2*m,p._length+2*m).call(l.fill,v.plot_bgcolor).style("stroke-width",0);if(!v._hasOnlyLargeSploms)for(r in v._plots){u=(a=v._plots[r]).xaxis,p=a.yaxis;var U,G,X=a.clipId="clip"+v._uid+r+"plot",Y=o.ensureSingleById(v._clips,"clipPath",X,function(t){t.classed("plotclip",!0).append("rect")});a.clipRect=Y.select("rect").attr({width:u._length,height:p._length}),c.setTranslate(a.plot,u._offset,p._offset),a._hasClipOnAxisFalse?(U=null,G=X):(U=X,G=null),c.setClipUrl(a.plot,U,t),a.layerClipId=G}function Q(t){return"M"+D+","+t+"H"+z}function K(t){return"M"+u._offset+","+t+"h"+u._length}function J(t){return"M"+t+","+j+"V"+F}function tt(t){return"M"+t+","+p._offset+"v"+p._length}function et(t,e,n){if(!t.showline||r!==t._mainSubplot)return"";if(!t._anchorAxis)return n(t._mainLinePosition);var i=e(t._mainLinePosition);return t.mirror&&(i+=e(t._mainMirrorPosition)),i}for(r in v._plots){p=(a=v._plots[r]).yaxis;var nt="M0,0";b(u=a.xaxis,r)&&(B=k(u,"left",p,y),D=u._offset-(B?m+B:0),N=k(u,"right",p,y),z=u._offset+u._length+(N?m+N:0),I=x(u,p,"bottom"),R=x(u,p,"top"),!(V=!u._anchorAxis||r!==u._mainSubplot)||"allticks"!==u.mirror&&"all"!==u.mirror||(u._linepositions[r]=[I,R]),nt=et(u,Q,K),V&&u.showline&&("all"===u.mirror||"allticks"===u.mirror)&&(nt+=Q(I)+Q(R)),a.xlines.style("stroke-width",u._lw+"px").call(l.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")),a.xlines.attr("d",nt);var it="M0,0";b(p,r)&&(q=k(p,"bottom",u,y),F=p._offset+p._length+(q?m:0),Z=k(p,"top",u,y),j=p._offset-(Z?m:0),H=x(p,u,"left"),$=x(p,u,"right"),!(V=!p._anchorAxis||r!==p._mainSubplot)||"allticks"!==p.mirror&&"all"!==p.mirror||(p._linepositions[r]=[H,$]),it=et(p,J,tt),V&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(it+=J(H)+J($)),a.ylines.style("stroke-width",p._lw+"px").call(l.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),a.ylines.attr("d",it)}return d.makeClipPaths(t),t._promises.length&&Promise.all(t._promises)}function b(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function w(t,e,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var i=n._anchorAxis;if(!i)return!1;var r=f.FROM_BL[e];return n.side===e?i.domain[r]===t.domain[r]:n.mirror&&i.domain[1-r]===t.domain[1-r]}function k(t,e,n,i){if(w(t,e,n))return n._lw;for(var r=0;r<i.length;r++){var a=i[r];if(a._mainAxis===n._mainAxis&&w(t,e,a))return a._lw}return 0}n.layoutStyles=function(t){return o.syncOrAsync([a.doAutoMargin,x],t)},n.drawMainTitle=function(t){var e=t._fullLayout,n=function(t){var e=t.title,n="middle";return o.isRightAnchor(e)?n="end":o.isLeftAnchor(e)&&(n=y),n}(e),i=function(t){var e=t.title,n="0em";return o.isTopAnchor(e)?n=f.CAP_SHIFT+"em":o.isMiddleAnchor(e)&&(n=f.MID_SHIFT+"em"),n}(e);u.draw(t,"gtitle",{propContainer:e,propName:"title.text",placeholder:e._dfltTitle.plot,attributes:{x:function(t,e){var n=t.title,i=t._size,r=0;switch(e===y?r=n.pad.l:"end"===e&&(r=-n.pad.r),n.xref){case"paper":return i.l+i.w*n.x+r;case"container":default:return t.width*n.x+r}}(e,n),y:function(t,e){var n=t.title,i=t._size,r=0;if("0em"!==e&&e?e===f.CAP_SHIFT+"em"&&(r=n.pad.t):r=-n.pad.b,"auto"===n.y)return i.t/2;switch(n.yref){case"paper":return i.t+i.h-i.h*n.y+r;case"container":default:return t.height-t.height*n.y+r}}(e,i),"text-anchor":n,dy:i}})},n.doTraceStyle=function(t){var e,i=t.calcdata,o=[];for(e=0;e<i.length;e++){var l=i[e],c=l[0]||{},u=c.trace||{},h=u._module||{},d=h.arraysToCalcdata;d&&d(l,u);var f=h.editStyle;f&&o.push({fn:f,cd0:c})}if(o.length){for(e=0;e<o.length;e++){var p=o[e];p.fn(t,p.cd0)}s(t),n.redrawReglTraces(t)}return a.style(t),r.getComponentMethod("legend","draw")(t),a.previousPromises(t)},n.doColorBars=function(t){for(var e=0;e<t.calcdata.length;e++){var n=t.calcdata[e][0];if((n.t||{}).cb){var i=n.trace,o=n.t.cb;r.traceIs(i,"contour")&&o.line({width:!1!==i.contours.showlines?i.line.width:0,dash:i.line.dash,color:"line"===i.contours.coloring?o._opts.line.color:i.line.color});var s=i._module.colorbar.container;o.options((s?i[s]:i).colorbar)()}}return a.previousPromises(t)},n.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,r.call("plot",t,"",e)},n.doLegend=function(t){return r.getComponentMethod("legend","draw")(t),a.previousPromises(t)},n.doTicksRelayout=function(t){return d.draw(t,"redraw"),t._fullLayout._hasOnlyLargeSploms&&(r.subplotsRegistry.splom.updateGrid(t),s(t),n.redrawReglTraces(t)),n.drawMainTitle(t),a.previousPromises(t)},n.doModeBar=function(t){var e=t._fullLayout;h.manage(t);for(var n=0;n<e._basePlotModules.length;n++){var i=e._basePlotModules[n].updateFx;i&&i(t)}return a.previousPromises(t)},n.doCamera=function(t){for(var e=t._fullLayout,n=e._subplots.gl3d,i=0;i<n.length;i++){var r=e[n[i]];r._scene.setCamera(r.camera)}},n.drawData=function(t){var e,i=t._fullLayout,o=t.calcdata;for(e=0;e<o.length;e++){var l=o[e][0].trace;!0===l.visible&&l._module.colorbar||i._infolayer.select(".cb"+l.uid).remove()}s(t);var c=i._basePlotModules;for(e=0;e<c.length;e++)c[e].plot(t);return n.redrawReglTraces(t),a.style(t),r.getComponentMethod("shapes","draw")(t),r.getComponentMethod("annotations","draw")(t),i._replotting=!1,a.previousPromises(t)},n.redrawReglTraces=function(t){var e=t._fullLayout;if(e._has("regl")){var n,i,r=t._fullData,a=[],s=[];for(e._hasOnlyLargeSploms&&e._splomGrid.draw(),n=0;n<r.length;n++){var l=r[n];!0===l.visible&&("splom"===l.type?e._splomScenes[l.uid].draw():"scattergl"===l.type?o.pushUnique(a,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&o.pushUnique(s,l.subplot))}for(n=0;n<a.length;n++)(i=e._plots[a[n]])._scene&&i._scene.draw();for(n=0;n<s.length;n++)(i=e[s[n]]._subplot)._scene&&i._scene.draw()}},n.doAutoRangeAndConstraints=function(t){for(var e,n=t._fullLayout,i=d.list(t,"",!0),r=n._axisMatchGroups||[],a=0;a<i.length;a++)g(t,e=i[a]),m(t,e);v(t);t:for(var o=0;o<r.length;o++){var s,l=r[o],c=null;for(s in l){if(!1===(e=d.getFromId(t,s)).autorange)continue t;c?c[0]<c[1]?(c[0]=Math.min(c[0],e.range[0]),c[1]=Math.max(c[1],e.range[1])):(c[0]=Math.max(c[0],e.range[0]),c[1]=Math.min(c[1],e.range[1])):c=e.range}for(s in l)(e=d.getFromId(t,s)).range=c.slice(),e._input.range=c.slice(),e.setScale()}},n.finalDraw=function(t){r.getComponentMethod("shapes","draw")(t),r.getComponentMethod("images","draw")(t),r.getComponentMethod("annotations","draw")(t),r.getComponentMethod("rangeslider","draw")(t),r.getComponentMethod("rangeselector","draw")(t)},n.drawMarginPushers=function(t){r.getComponentMethod("legend","draw")(t),r.getComponentMethod("rangeselector","draw")(t),r.getComponentMethod("sliders","draw")(t),r.getComponentMethod("updatemenus","draw")(t)}},{"../components/color":43,"../components/drawing":64,"../components/modebar":102,"../components/titles":131,"../constants/alignment":138,"../lib":159,"../lib/clear_gl_canvases":148,"../plots/cartesian/autorange":202,"../plots/cartesian/axes":203,"../plots/cartesian/constraints":210,"../plots/plots":235,"../registry":242,d3:8}],195:[function(t,e,n){"use strict";var i=t("../lib"),r=i.isPlainObject,a=t("./plot_schema"),o=t("../plots/plots"),s=t("../plots/attributes"),l=t("./plot_template"),c=t("./plot_config").dfltConfig;function u(t,e){t=i.extendDeep({},t);var n,a,o=Object.keys(t).sort();function s(e,n,i){if(r(n)&&r(e))u(e,n);else if(Array.isArray(n)&&Array.isArray(e)){var o=l.arrayTemplater({_template:t},i);for(a=0;a<n.length;a++){var s=n[a],c=o.newItem(s)._template;c&&u(c,s)}var h=o.defaultItems();for(a=0;a<h.length;a++)n.push(h[a]._template);for(a=0;a<n.length;a++)delete n[a].templateitemname}}for(n=0;n<o.length;n++){var c=o[n],d=t[c];if(c in e?s(d,e[c],c):e[c]=d,h(c)===c)for(var f in e){var p=h(f);f===p||p!==c||f in t||s(d,e[f],c)}}}function h(t){return t.replace(/[0-9]+$/,"")}function d(t,e,n,a,o){var s=o&&n(o);for(var c in t){var u=t[c],p=f(t,c,a),v=f(t,c,o),g=n(v);if(!g){var m=h(c);m!==c&&(g=n(v=f(t,m,o)))}if(!(s&&s===g||!g||g._noTemplating||"data_array"===g.valType||g.arrayOk&&Array.isArray(u)))if(!g.valType&&r(u))d(u,e,n,p,v);else if(g._isLinkedToArray&&Array.isArray(u))for(var y=!1,_=0,x={},b=0;b<u.length;b++){var w=u[b];if(r(w)){var k=w.name;if(k)x[k]||(d(w,e,n,f(u,_,p),f(u,_,v)),_++,x[k]=1);else if(!y){var T=f(t,l.arrayDefaultKey(c),a),M=f(u,_,p);d(w,e,n,M,f(u,_,v));var A=i.nestedProperty(e,M);i.nestedProperty(e,T).set(A.get()),A.set(null),y=!0}}}else i.nestedProperty(e,p).set(u)}}function f(t,e,n){return n?Array.isArray(t)?n+"["+e+"]":n+"."+e:e}function p(t){for(var e=0;e<t.length;e++)if(r(t[e]))return!0}function v(t){var e;switch(t.code){case"data":e="The template has no key data.";break;case"layout":e="The template has no key layout.";break;case"missing":e=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case"unused":e=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case"reused":e="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}return t.msg=e,t}n.makeTemplate=function(t){t=i.isPlainObject(t)?t:i.getGraphDiv(t),t=i.extendDeep({_context:c},{data:t.data,layout:t.layout}),o.supplyDefaults(t);var e=t.data||[],n=t.layout||{};n._basePlotModules=t._fullLayout._basePlotModules,n._modules=t._fullLayout._modules;var l={data:{},layout:{}};e.forEach(function(t){var e={};d(t,e,(function(t,e){return a.getTraceValObject(t,i.nestedProperty({},e).parts)}).bind(null,t));var n=i.coerce(t,{},s,"type"),r=l.data[n];r||(r=l.data[n]=[]),r.push(e)}),d(n,l.layout,(function(t,e){return a.getLayoutValObject(t,i.nestedProperty({},e).parts)}).bind(null,n)),delete l.layout.template;var h=n.template;if(r(h)){var f,p,v,g,m,y,_=h.layout;r(_)&&u(_,l.layout);var x=h.data;if(r(x)){for(p in l.data)if(v=x[p],Array.isArray(v)){for(y=(m=l.data[p]).length,g=v.length,f=0;f<y;f++)u(v[f%g],m[f]);for(f=y;f<g;f++)m.push(i.extendDeep({},v[f]))}for(p in x)p in l.data||(l.data[p]=i.extendDeep([],x[p]))}}return l},n.validateTemplate=function(t,e){var n=i.extendDeep({},{_context:c,data:t.data,layout:t.layout}),a=n.layout||{};r(e)||(e=a.template||{});var s=e.layout,l=e.data,u=[];n.layout=a,n.layout.template=e,o.supplyDefaults(n);var d=n._fullLayout,g=n._fullData,m={};if(r(s)?(function t(e,n){for(var i in e)if("_"!==i.charAt(0)&&r(e[i])){var a,o=h(i),s=[];for(a=0;a<n.length;a++)s.push(f(e,i,n[a])),o!==i&&s.push(f(e,o,n[a]));for(a=0;a<s.length;a++)m[s[a]]=1;t(e[i],s)}}(d,["layout"]),function t(e,n){for(var i in e)if(-1===i.indexOf("defaults")&&r(e[i])){var a=f(e,i,n);m[a]?t(e[i],a):u.push({code:"unused",path:a})}}(s,"layout")):u.push({code:"layout"}),r(l)){for(var y,_={},x=0;x<g.length;x++){var b=g[x];_[y=b.type]=(_[y]||0)+1,b._fullInput._template||u.push({code:"missing",index:b._fullInput.index,traceType:y})}for(y in l){var w=l[y].length,k=_[y]||0;w>k?u.push({code:"unused",traceType:y,templateCount:w,dataCount:k}):k>w&&u.push({code:"reused",traceType:y,templateCount:w,dataCount:k})}}else u.push({code:"data"});if(function t(e,n){for(var i in e)if("_"!==i.charAt(0)){var a=e[i],o=f(e,i,n);r(a)?(Array.isArray(e)&&!1===a._template&&a.templateitemname&&u.push({code:"missing",path:o,templateitemname:a.templateitemname}),t(a,o)):Array.isArray(a)&&p(a)&&t(a,o)}}({data:g,layout:d},""),u.length)return u.map(v)}},{"../lib":159,"../plots/attributes":200,"../plots/plots":235,"./plot_config":191,"./plot_schema":192,"./plot_template":193}],196:[function(t,e,n){"use strict";var i=t("./plot_api"),r=t("../lib"),a=t("../snapshot/helpers"),o=t("../snapshot/tosvg"),s=t("../snapshot/svgtoimg"),l={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},c=/^data:image\/\w+;base64,/;e.exports=function(t,e){var n,u,h;function d(t){return!(t in e)||r.validate(e[t],l[t])}if(e=e||{},r.isPlainObject(t)?(n=t.data||[],u=t.layout||{},h=t.config||{}):(t=r.getGraphDiv(t),n=r.extendDeep([],t.data),u=r.extendDeep({},t.layout),h=t._context),!d("width")||!d("height"))throw new Error("Height and width should be pixel values.");if(!d("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var f={};function p(t,n){return r.coerce(e,f,l,t,n)}var v=p("format"),g=p("width"),m=p("height"),y=p("scale"),_=p("setBackground"),x=p("imageDataOnly"),b=document.createElement("div");b.style.position="absolute",b.style.left="-5000px",document.body.appendChild(b);var w=r.extendFlat({},u);g&&(w.width=g),m&&(w.height=m);var k=r.extendFlat({},h,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),T=a.getRedrawFunc(b);function M(){return new Promise(function(t){setTimeout(t,a.getDelay(b._fullLayout))})}function A(){return new Promise(function(t,e){var n=o(b,v,y),a=b._fullLayout.width,l=b._fullLayout.height;if(i.purge(b),document.body.removeChild(b),"svg"===v)return t(x?n:"data:image/svg+xml,"+encodeURIComponent(n));var c=document.createElement("canvas");c.id=r.randstr(),s({format:v,width:a,height:l,scale:y,canvas:c,svg:n,promise:!0}).then(t).catch(e)})}return new Promise(function(t,e){i.plot(b,n,w,k).then(T).then(M).then(A).then(function(e){t(function(t){return x?t.replace(c,""):t}(e))}).catch(function(t){e(t)})})}},{"../lib":159,"../snapshot/helpers":246,"../snapshot/svgtoimg":248,"../snapshot/tosvg":250,"./plot_api":190}],197:[function(t,e,n){"use strict";var i=t("../lib"),r=t("../plots/plots"),a=t("./plot_schema"),o=t("./plot_config").dfltConfig,s=i.isPlainObject,l=Array.isArray,c=i.isArrayOrTypedArray;function u(t,e,n,r,a,o){o=o||[];for(var h=Object.keys(t),d=0;d<h.length;d++){var g=h[d];if("transforms"!==g){var m=o.slice();m.push(g);var y=t[g],_=e[g],x=v(n,g),b="info_array"===(x||{}).valType,w="colorscale"===(x||{}).valType,k=(x||{}).items;if(p(n,g))if(s(y)&&s(_))u(y,_,x,r,a,m);else if(b&&l(y)){y.length>_.length&&r.push(f("unused",a,m.concat(_.length)));var T,M,A,C,L=_.length,S=Array.isArray(k);if(S&&(L=Math.min(L,k.length)),2===x.dimensions)for(M=0;M<L;M++)if(l(y[M])){y[M].length>_[M].length&&r.push(f("unused",a,m.concat(M,_[M].length)));var E=_[M].length;for(T=0;T<(S?Math.min(E,k[M].length):E);T++)C=_[M][T],i.validate(A=y[M][T],S?k[M][T]:k)?C!==A&&C!==+A&&r.push(f("dynamic",a,m.concat(M,T),A,C)):r.push(f("value",a,m.concat(M,T),A))}else r.push(f("array",a,m.concat(M),y[M]));else for(M=0;M<L;M++)C=_[M],i.validate(A=y[M],S?k[M]:k)?C!==A&&C!==+A&&r.push(f("dynamic",a,m.concat(M),A,C)):r.push(f("value",a,m.concat(M),A))}else if(x.items&&!b&&l(y)){var O,P,D=k[Object.keys(k)[0]],z=[];for(O=0;O<_.length;O++){var I=_[O]._index||O;if((P=m.slice()).push(I),s(y[I])&&s(_[O])){z.push(I);var R=y[I],B=_[O];s(R)&&!1!==R.visible&&!1===B.visible?r.push(f("invisible",a,P)):u(R,B,D,r,a,P)}}for(O=0;O<y.length;O++)(P=m.slice()).push(O),s(y[O])?-1===z.indexOf(O)&&r.push(f("unused",a,P)):r.push(f("object",a,P,y[O]))}else!s(y)&&s(_)?r.push(f("object",a,m,y)):c(y)||!c(_)||b||w?g in e?i.validate(y,x)?"enumerated"===x.valType&&(x.coerceNumber&&y!==+_||y!==_)&&r.push(f("dynamic",a,m,y,_)):r.push(f("value",a,m,y)):r.push(f("unused",a,m,y)):r.push(f("array",a,m,y));else r.push(f("schema",a,m))}}return r}e.exports=function(t,e){var n,c,h=a.get(),d=[],p={_context:i.extendFlat({},o)};l(t)?(p.data=i.extendDeep([],t),n=t):(p.data=[],n=[],d.push(f("array","data"))),s(e)?(p.layout=i.extendDeep({},e),c=e):(p.layout={},c={},arguments.length>1&&d.push(f("object","layout"))),r.supplyDefaults(p);for(var v=p._fullData,g=n.length,m=0;m<g;m++){var y=n[m],_=["data",m];if(s(y)){var x=v[m],b=x.type,w=h.traces[b].attributes;w.type={valType:"enumerated",values:[b]},!1===x.visible&&!1!==y.visible&&d.push(f("invisible",_)),u(y,x,w,d,_);var k=y.transforms,T=x.transforms;if(k){l(k)||d.push(f("array",_,["transforms"])),_.push("transforms");for(var M=0;M<k.length;M++){var A=["transforms",M],C=k[M].type;if(s(k[M])){var L=h.transforms[C]?h.transforms[C].attributes:{};L.type={valType:"enumerated",values:Object.keys(h.transforms)},u(k[M],T[M],L,d,_,A)}else d.push(f("object",_,A))}}}else d.push(f("object",_))}return u(c,p._fullLayout,function(t,e){for(var n=t.layout.layoutAttributes,r=0;r<e.length;r++){var a=e[r],o=t.traces[a.type],s=o.layoutAttributes;s&&i.extendFlat(a.subplot?n[o.attributes.subplot.dflt]:n,s)}return n}(h,v),d,"layout"),0===d.length?void 0:d};var h={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":d(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":d(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return d(t)+"key "+e+" is not part of the schema"},unused:function(t,e,n){var i=s(n)?"container":"key";return d(t)+i+" "+e+" did not get coerced"},dynamic:function(t,e,n,i){return[d(t)+"key",e,"(set to '"+n+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(t,e){return(e?d(t)+"item "+e:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,e,n){return[d(t)+"key "+e,"is set to an invalid value ("+n+")"].join(" ")}};function d(t){return l(t)?"In data trace "+t[1]+", ":"In "+t+", "}function f(t,e,n,r,a){var o,s;n=n||"",l(e)?(o=e[0],s=e[1]):(o=e,s=null);var c=function(t){if(!l(t))return String(t);for(var e="",n=0;n<t.length;n++){var i=t[n];"number"==typeof i?e=e.substr(0,e.length-1)+"["+i+"]":e+=i,n<t.length-1&&(e+=".")}return e}(n),u=h[t](e,c,r,a);return i.log(u),{code:t,container:o,trace:s,path:n,astr:c,msg:u}}function p(t,e){var n=m(e),i=n.keyMinusId;return!!(i in t&&t[i]._isSubplotObj&&n.id)||e in t}function v(t,e){return e in t?t[e]:t[m(e).keyMinusId]}var g=i.counterRegex("([a-z]+)");function m(t){var e=t.match(g);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":159,"../plots/plots":235,"./plot_config":191,"./plot_schema":192}],198:[function(t,e,n){"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],199:[function(t,e,n){"use strict";var i=t("../lib"),r=t("../plot_api/plot_template");e.exports=function(t,e,n){var a,o,s=n.name,l=n.inclusionAttr||"visible",c=e[s],u=i.isArrayOrTypedArray(t[s])?t[s]:[],h=e[s]=[],d=r.arrayTemplater(e,s,l);for(a=0;a<u.length;a++){var f=u[a];i.isPlainObject(f)?o=d.newItem(f):(o=d.newItem({}))[l]=!1,o._index=a,!1!==o[l]&&n.handleItemDefaults(f,o,e,n),h.push(o)}var p=d.defaultItems();for(a=0;a<p.length;a++)(o=p[a])._index=h.length,n.handleItemDefaults({},o,e,n,{}),h.push(o);if(i.isArrayOrTypedArray(c)){var v=Math.min(c.length,h.length);for(a=0;a<v;a++)i.relinkPrivateKeys(h[a],c[a])}return h}},{"../lib":159,"../plot_api/plot_template":193}],200:[function(t,e,n){"use strict";var i=t("../components/fx/attributes");e.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:i.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":73}],201:[function(t,e,n){"use strict";e.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],202:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib"),a=t("../../constants/numerical").FP_SAFE,o=t("../../registry");function s(t,e){var n,i,a=[],o=l(e),s=c(t,e),u=s.min,h=s.max;if(0===u.length||0===h.length)return r.simpleMap(e.range,e.r2l);var d=u[0].val,f=h[0].val;for(n=1;n<u.length&&d===f;n++)d=Math.min(d,u[n].val);for(n=1;n<h.length&&d===f;n++)f=Math.max(f,h[n].val);var p=!1;if(e.range){var v=r.simpleMap(e.range,e.r2l);p=v[1]<v[0]}"reversed"===e.autorange&&(p=!0,e.autorange=!0);var g,m,y,_,x,b,w=e.rangemode,k="tozero"===w,T="nonnegative"===w,M=e._length,A=M/10,C=0;for(n=0;n<u.length;n++)for(g=u[n],i=0;i<h.length;i++)(b=(m=h[i]).val-g.val)>0&&((x=M-o(g)-o(m))>A?b/x>C&&(y=g,_=m,C=b/x):b/M>C&&(y={val:g.val,pad:0},_={val:m.val,pad:0},C=b/M));if(d===f){var L=d-1,S=d+1;if(k)if(0===d)a=[0,1];else{var E=(d>0?h:u).reduce(function(t,e){return Math.max(t,o(e))},0),O=d/(1-Math.min(.5,E/M));a=d>0?[0,O]:[O,0]}else a=T?[Math.max(0,L),Math.max(1,S)]:[L,S]}else k?(y.val>=0&&(y={val:0,pad:0}),_.val<=0&&(_={val:0,pad:0})):T&&(y.val-C*o(y)<0&&(y={val:0,pad:0}),_.val<=0&&(_={val:1,pad:0})),C=(_.val-y.val)/(M-o(y)-o(_)),a=[y.val-C*o(y),_.val+C*o(_)];return p&&a.reverse(),r.simpleMap(a,e.l2r||Number)}function l(t){var e=t._length/20;return"domain"===t.constrain&&t._inputDomain&&(e*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(t){return t.pad+(t.extrapad?e:0)}}function c(t,e){var n,i,r,a=e._id,o=t._fullLayout,s=[],l=[];function c(t,e){for(n=0;n<e.length;n++){var o=t[e[n]],c=(o._extremes||{})[a];if(!0===o.visible&&c){for(i=0;i<c.min.length;i++)u(s,(r=c.min[i]).val,r.pad,{extrapad:r.extrapad});for(i=0;i<c.max.length;i++)h(l,(r=c.max[i]).val,r.pad,{extrapad:r.extrapad})}}}return c(t._fullData,e._traceIndices),c(o.annotations||[],e._annIndices||[]),c(o.shapes||[],e._shapeIndices||[]),{min:s,max:l}}function u(t,e,n,i){d(t,e,n,i,p)}function h(t,e,n,i){d(t,e,n,i,v)}function d(t,e,n,i,r){for(var a=i.tozero,o=i.extrapad,s=!0,l=0;l<t.length&&s;l++){var c=t[l];if(r(c.val,e)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}r(e,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(t.splice(l,1),l--)}if(s){var u=a&&0===e;t.push({val:e,pad:u?0:n,extrapad:!u&&o})}}function f(t){return i(t)&&Math.abs(t)<a}function p(t,e){return t<=e}function v(t,e){return t>=e}e.exports={getAutoRange:s,makePadFn:l,doAutoRange:function(t,e){if(e.setScale(),e.autorange){e.range=s(t,e),e._r=e.range.slice(),e._rl=r.simpleMap(e._r,e.r2l);var n=e._input,i={};i[e._attr+".range"]=e.range,i[e._attr+".autorange"]=e.autorange,o.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,i),n.range=e.range.slice(),n.autorange=e.autorange}var a=e._anchorAxis;if(a&&a.rangeslider){var l=a.rangeslider[e._name];l&&"auto"===l.rangemode&&(l.range=s(t,e)),a._input.rangeslider[e._name]=r.extendFlat({},l)}},findExtremes:function(t,e,n){n||(n={}),t._m||t.setScale();var r,o,s,l,c,d,p,v,g,m=[],y=[],_=e.length,x=n.padded||!1,b=n.tozero&&("linear"===t.type||"-"===t.type),w="log"===t.type,k=!1;function T(t){if(Array.isArray(t))return k=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var M=T((t._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),A=T((t._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),C=T(n.vpadplus||n.vpad),L=T(n.vpadminus||n.vpad);if(!k){if(v=1/0,g=-1/0,w)for(r=0;r<_;r++)(o=e[r])<v&&o>0&&(v=o),o>g&&o<a&&(g=o);else for(r=0;r<_;r++)(o=e[r])<v&&o>-a&&(v=o),o>g&&o<a&&(g=o);e=[v,g],_=2}var S={tozero:b,extrapad:x};function E(n){i(s=e[n])&&(d=M(n),p=A(n),v=s-L(n),g=s+C(n),w&&v<g/10&&(v=g/10),l=t.c2l(v),c=t.c2l(g),b&&(l=Math.min(0,l),c=Math.max(0,c)),f(l)&&u(m,l,p,S),f(c)&&h(y,c,d,S))}var O=Math.min(6,_);for(r=0;r<O;r++)E(r);for(r=_-1;r>=O;r--)E(r);return{min:m,max:y,opts:n}},concatExtremes:c}},{"../../constants/numerical":140,"../../lib":159,"../../registry":242,"fast-isnumeric":10}],203:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),c=t("../../components/titles"),u=t("../../components/color"),h=t("../../components/drawing"),d=t("./layout_attributes"),f=t("./clean_ticks"),p=t("../../constants/numerical"),v=p.ONEAVGYEAR,g=p.ONEAVGMONTH,m=p.ONEDAY,y=p.ONEHOUR,_=p.ONEMIN,x=p.ONESEC,b=p.MINUS_SIGN,w=p.BADNUM,k=t("../../constants/alignment").MID_SHIFT,T=t("../../constants/alignment").LINE_SPACING,M=e.exports={};M.setConvert=t("./set_convert");var A=t("./axis_autotype"),C=t("./axis_ids");M.id2name=C.id2name,M.name2id=C.name2id,M.cleanId=C.cleanId,M.list=C.list,M.listIds=C.listIds,M.getFromId=C.getFromId,M.getFromTrace=C.getFromTrace;var L=t("./autorange");M.getAutoRange=L.getAutoRange,M.findExtremes=L.findExtremes,M.coerceRef=function(t,e,n,i,r,a){var o=i.charAt(i.length-1),l=n._fullLayout._subplots[o+"axis"],c=i+"ref",u={};return r||(r=l[0]||a),a||(a=r),u[c]={valType:"enumerated",values:l.concat(a?[a]:[]),dflt:r},s.coerce(t,e,u,c)},M.coercePosition=function(t,e,n,i,r,a){var o,l;if("paper"===i||"pixel"===i)o=s.ensureNumber,l=n(r,a);else{var c=M.getFromId(e,i);l=n(r,a=c.fraction2r(a)),o=c.cleanPos}t[r]=o(l)},M.cleanPosition=function(t,e,n){return("paper"===n||"pixel"===n?s.ensureNumber:M.getFromId(e,n).cleanPos)(t)},M.redrawComponents=function(t,e){e=e||M.listIds(t);var n=t._fullLayout;function i(i,r,a,s){for(var l=o.getComponentMethod(i,r),c={},u=0;u<e.length;u++)for(var h=n[M.id2name(e[u])][a],d=0;d<h.length;d++){var f=h[d];if(!c[f]&&(l(t,f),c[f]=1,s))return}}i("annotations","drawOne","_annIndices"),i("shapes","drawOne","_shapeIndices"),i("images","draw","_imgIndices",!0)};var S=M.getDataConversions=function(t,e,n,i){var r,a="x"===n||"y"===n||"z"===n?n:i;if(Array.isArray(a)){if(r={type:A(i),_categories:[]},M.setConvert(r),"category"===r.type)for(var o=0;o<i.length;o++)r.d2c(i[o])}else r=M.getFromTrace(t,e,a);return r?{d2c:r.d2c,c2d:r.c2d}:"ids"===a?{d2c:O,c2d:O}:{d2c:E,c2d:E}};function E(t){return+t}function O(t){return String(t)}M.getDataToCoordFunc=function(t,e,n,i){return S(t,e,n,i).d2c},M.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},M.minDtick=function(t,e,n,i){-1===["log","category","multicategory"].indexOf(t.type)&&i?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=n):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((n-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=n):((e/t._minDtick+1e-6)%1>2e-6||((n-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},M.saveRangeInitial=function(t,e){for(var n=M.list(t,"",!0),i=!1,r=0;r<n.length;r++){var a=n[r],o=void 0===a._rangeInitial;(o&&!1===a.autorange||e&&(o||a.range[0]!==a._rangeInitial[0]||a.range[1]!==a._rangeInitial[1]))&&(a._rangeInitial=a.range.slice(),i=!0)}return i},M.saveShowSpikeInitial=function(t,e){for(var n=M.list(t,"",!0),i=!1,r="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial;(s||e&&(s||!(o.showspikes===o._showspikes)))&&(o._showSpikeInitial=o.showspikes,i=!0),"on"!==r||o.showspikes||(r="off")}return t._fullLayout._cartesianSpikesEnabled=r,i},M.autoBin=function(t,e,n,i,a,o){var l,c=s.aggNums(Math.min,null,t),u=s.aggNums(Math.max,null,t);if("category"===e.type||"multicategory"===e.type)return{start:c-.5,end:u+.5,size:Math.max(1,Math.round(o)||1),_dataSpan:u-c};if(a||(a=e.calendar),l="log"===e.type?{type:"linear",range:[c,u]}:{type:e.type,range:s.simpleMap([c,u],e.c2r,0,a),calendar:a},M.setConvert(l),o=o&&f.dtick(o,l.type))l.dtick=o,l.tick0=f.tick0(void 0,l.type,a);else{var h;if(n)h=(u-c)/n;else{var d=s.distinctVals(t),p=Math.pow(10,Math.floor(Math.log(d.minDiff)/Math.LN10)),v=p*s.roundUp(d.minDiff/p,[.9,1.9,4.9,9.9],!0);h=Math.max(v,2*s.stdev(t)/Math.pow(t.length,i?.25:.4)),r(h)||(h=1)}M.autoTicks(l,h)}var g,y=l.dtick,_=M.tickIncrement(M.tickFirst(l),y,"reverse",a);if("number"==typeof y)g=(_=function(t,e,n,i,a){var o=0,s=0,l=0,c=0;function u(e){return(1+100*(e-t)/n.dtick)%100<2}for(var h=0;h<e.length;h++)e[h]%1==0?l++:r(e[h])||c++,u(e[h])&&o++,u(e[h]+n.dtick/2)&&s++;var d=e.length-c;if(l===d&&"date"!==n.type)n.dtick<1?t=i-.5*n.dtick:(t-=.5)+n.dtick<i&&(t+=n.dtick);else if(s<.1*d&&(o>.3*d||u(i)||u(a))){var f=n.dtick/2;t+=t+f<i?f:-f}return t}(_,t,l,c,u))+(1+Math.floor((u-_)/y))*y;else for("M"===l.dtick.charAt(0)&&(_=function(t,e,n,i,r){var a=s.findExactDates(e,r);if(a.exactDays>.8){var o=Number(n.substr(1));a.exactYears>.8&&o%12==0?t=M.tickIncrement(t,"M6","reverse")+1.5*m:a.exactMonths>.8?t=M.tickIncrement(t,"M1","reverse")+15.5*m:t-=m/2;var l=M.tickIncrement(t,n);if(l<=i)return l}return t}(_,t,y,c,a)),g=_;g<=u;)g=M.tickIncrement(g,y,!1,a);return{start:e.c2r(_,0,a),end:e.c2r(g,0,a),size:y,_dataSpan:u-c}},M.prepTicks=function(t){var e=s.simpleMap(t.range,t.r2l);if("auto"===t.tickmode||!t.dtick){var n,i=t.nticks;i||("category"===t.type||"multicategory"===t.type?i=t._length/(n=t.tickfont?1.2*(t.tickfont.size||12):15):(n="y"===t._id.charAt(0)?40:80,i=s.constrain(t._length/n,4,9)+1),"radialaxis"===t._name&&(i*=2)),"array"===t.tickmode&&(i*=100),M.autoTicks(t,Math.abs(e[1]-e[0])/i),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),"date"===t.type&&t.dtick<.1&&(t.dtick=.1),j(t)},M.calcTicks=function(t){M.prepTicks(t);var e=s.simpleMap(t.range,t.r2l);if("array"===t.tickmode)return function(t){var e=t.tickvals,n=t.ticktext,i=new Array(e.length),r=s.simpleMap(t.range,t.r2l),a=1.0001*r[0]-1e-4*r[1],o=1.0001*r[1]-1e-4*r[0],l=Math.min(a,o),c=Math.max(a,o),u=0;Array.isArray(n)||(n=[]);var h="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var d=0;d<e.length;d++){var f=h(e[d]);f>l&&f<c&&(i[u]=void 0===n[d]?M.tickText(t,f):H(t,f,String(n[d])),u++)}return u<e.length&&i.splice(u,e.length-u),i}(t);t._tmin=M.tickFirst(t);var n=1.0001*e[1]-1e-4*e[0],i=e[1]<e[0];if(t._tmin<1.0001*e[0]-1e-4*e[1]!==i)return[];var r=[];"category"!==t.type&&"multicategory"!==t.type||(n=i?Math.max(-.5,n):Math.min(t._categories.length-.5,n));for(var a=null,o=Math.max(1e3,t._length||0),l=t._tmin;(i?l>=n:l<=n)&&!(r.length>o||l===a);l=M.tickIncrement(l,t.dtick,i,t.calendar))a=l,r.push(l);nt(t)&&360===Math.abs(e[1]-e[0])&&r.pop(),t._tmax=r[r.length-1],t._prevDateHead="",t._inCalcTicks=!0;for(var c=new Array(r.length),u=0;u<r.length;u++)c[u]=M.tickText(t,r[u]);return t._inCalcTicks=!1,c};var P=[2,5,10],D=[1,2,3,6,12],z=[1,2,5,10,15,30],I=[1,2,3,7,14],R=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],B=[-.301,0,.301,.699,1],N=[15,30,45,90,180];function F(t,e,n){return e*s.roundUp(t/e,n)}function j(t){var e=t.dtick;if(t._tickexponent=0,r(e)||"string"==typeof e||(e=1),"category"!==t.type&&"multicategory"!==t.type||(t._tickround=null),"date"===t.type){var n=t.r2l(t.tick0),i=t.l2r(n).replace(/(^-|i)/g,""),a=i.length;if("M"===String(e).charAt(0))t._tickround=a>10||"01-01"!==i.substr(5)?"d":+e.substr(1)%12==0?"y":"m";else if(e>=m&&a<=10||e>=15*m)t._tickround="d";else if(e>=_&&a<=16||e>=y)t._tickround="M";else if(e>=x&&a<=19||e>=_)t._tickround="S";else{var o=t.l2r(n+e).replace(/^-/,"").length;t._tickround=Math.max(a,o)-20,t._tickround<0&&(t._tickround=4)}}else if(r(e)||"L"===e.charAt(0)){var s=t.range.map(t.r2d||Number);r(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1])),c=Math.floor(Math.log(l)/Math.LN10+.01);Math.abs(c)>3&&(t._tickexponent=q(t.exponentformat)&&!Z(c)?3*Math.round((c-1)/3):c)}else t._tickround=null}function H(t,e,n){var i=t.tickfont||{};return{x:e,dx:0,dy:0,text:n||"",fontSize:i.size,font:i.family,fontColor:i.color}}M.autoTicks=function(t,e){var n;function i(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=s.dateTick0(t.calendar);var a=2*e;a>v?(e/=v,n=i(10),t.dtick="M"+12*F(e,n,P)):a>g?t.dtick="M"+F(e/=g,1,D):a>m?(t.dtick=F(e,m,I),t.tick0=s.dateTick0(t.calendar,!0)):a>y?t.dtick=F(e,y,D):a>_?t.dtick=F(e,_,z):a>x?t.dtick=F(e,x,z):(n=i(10),t.dtick=F(e,n,P))}else if("log"===t.type){t.tick0=0;var o=s.simpleMap(t.range,t.r2l);if(e>.7)t.dtick=Math.ceil(e);else if(Math.abs(o[1]-o[0])<1){var l=1.5*Math.abs((o[1]-o[0])/e);e=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/l,n=i(10),t.dtick="L"+F(e,n,P)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type||"multicategory"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):nt(t)?(t.tick0=0,t.dtick=F(e,n=1,N)):(t.tick0=0,n=i(10),t.dtick=F(e,n,P));if(0===t.dtick&&(t.dtick=1),!r(t.dtick)&&"string"!=typeof t.dtick){var c=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(c)}},M.tickIncrement=function(t,e,n,a){var o=n?-1:1;if(r(e))return t+o*e;var l=e.charAt(0),c=o*Number(e.substr(1));if("M"===l)return s.incrementMonth(t,c,a);if("L"===l)return Math.log(Math.pow(10,t)+c)/Math.LN10;if("D"===l){var u="D2"===e?B:R,h=t+.01*o,d=s.roundUp(s.mod(h,1),u,n);return Math.floor(h)+Math.log(i.round(Math.pow(10,d),1))/Math.LN10}throw"unrecognized dtick "+String(e)},M.tickFirst=function(t){var e=t.r2l||Number,n=s.simpleMap(t.range,e),a=n[1]<n[0],o=a?Math.floor:Math.ceil,l=1.0001*n[0]-1e-4*n[1],c=t.dtick,u=e(t.tick0);if(r(c)){var h=o((l-u)/c)*c+u;return"category"!==t.type&&"multicategory"!==t.type||(h=s.constrain(h,0,t._categories.length-1)),h}var d=c.charAt(0),f=Number(c.substr(1));if("M"===d){for(var p,v,g,m=0,y=u;m<10;){if(((p=M.tickIncrement(y,c,a,t.calendar))-l)*(y-l)<=0)return a?Math.min(y,p):Math.max(y,p);v=(l-(y+p)/2)/(p-y),g=d+(Math.abs(Math.round(v))||1)*f,y=M.tickIncrement(y,g,v<0?!a:a,t.calendar),m++}return s.error("tickFirst did not converge",t),y}if("L"===d)return Math.log(o((Math.pow(10,l)-u)/f)*f+u)/Math.LN10;if("D"===d){var _="D2"===c?B:R,x=s.roundUp(s.mod(l,1),_,a);return Math.floor(l)+Math.log(i.round(Math.pow(10,x),1))/Math.LN10}throw"unrecognized dtick "+String(c)},M.tickText=function(t,e,n){var i,a=H(t,e),o="array"===t.tickmode,l=n||o,c=t.type,u="category"===c?t.d2l_noadd:t.d2l;if(o&&Array.isArray(t.ticktext)){var h=s.simpleMap(t.range,t.r2l),d=Math.abs(h[1]-h[0])/1e4;for(i=0;i<t.ticktext.length&&!(Math.abs(e-u(t.tickvals[i]))<d);i++);if(i<t.ticktext.length)return a.text=String(t.ticktext[i]),a}function f(i){return void 0===i||(n?"none"===i:"all"!==i&&e!=={first:t._tmin,last:t._tmax}[i])}var p=n?"never":"none"!==t.exponentformat&&f(t.showexponent)?"hide":"";if("date"===c?function(t,e,n,i){var a=t._tickround,o=n&&t.hoverformat||M.getTickFormat(t);i&&(a=r(a)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[a]);var l,c=s.formatDate(e.x,o,a,t._dateFormat,t.calendar,t._extraFormat),u=c.indexOf("\n");-1!==u&&(l=c.substr(u+1),c=c.substr(0,u)),i&&("00:00:00"===c||"00:00"===c?(c=l,l=""):8===c.length&&(c=c.replace(/:00$/,""))),l&&(n?"d"===a?c+=", "+l:c=l+(c?", "+c:""):t._inCalcTicks&&l===t._prevDateHead||(c+="<br>"+l,t._prevDateHead=l)),e.text=c}(t,a,n,l):"log"===c?function(t,e,n,i,a){var o=t.dtick,l=e.x,c=t.tickformat,u="string"==typeof o&&o.charAt(0);if("never"===a&&(a=""),i&&"L"!==u&&(o="L3",u="L"),c||"L"===u)e.text=V(Math.pow(10,l),t,a,i);else if(r(o)||"D"===u&&s.mod(l+.01,1)<.1){var h=Math.round(l),d=Math.abs(h),f=t.exponentformat;"power"===f||q(f)&&Z(h)?(e.text=0===h?1:1===h?"10":"10<sup>"+(h>1?"":b)+d+"</sup>",e.fontSize*=1.25):("e"===f||"E"===f)&&d>2?e.text="1"+f+(h>0?"+":b)+d:(e.text=V(Math.pow(10,l),t,"","fakehover"),"D1"===o&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==u)throw"unrecognized dtick "+String(o);e.text=String(Math.round(Math.pow(10,s.mod(l,1)))),e.fontSize*=.75}if("D1"===t.dtick){var p=String(e.text).charAt(0);"0"!==p&&"1"!==p||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(l<0?.5:.25)))}}(t,a,0,l,p):"category"===c?function(t,e){var n=t._categories[Math.round(e.x)];void 0===n&&(n=""),e.text=String(n)}(t,a):"multicategory"===c?function(t,e,n){var i=Math.round(e.x),r=t._categories[i]||[],a=void 0===r[1]?"":String(r[1]),o=void 0===r[0]?"":String(r[0]);n?e.text=o+" - "+a:(e.text=a,e.text2=o)}(t,a,n):nt(t)?function(t,e,n,i,r){if("radians"!==t.thetaunit||n)e.text=V(e.x,t,r,i);else{var a=e.x/180;if(0===a)e.text="0";else{var o=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}var n=function(t){for(var n=1;!e(Math.round(t*n)/n,t);)n*=10;return n}(t),i=t*n,r=Math.abs(function t(n,i){return e(i,0)?n:t(i,n%i)}(i,n));return[Math.round(i/r),Math.round(n/r)]}(a);if(o[1]>=100)e.text=V(s.deg2rad(e.x),t,r,i);else{var l=e.x<0;e.text=1===o[1]?1===o[0]?"\u03c0":o[0]+"\u03c0":["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join(""),l&&(e.text=b+e.text)}}}}(t,a,n,l,p):function(t,e,n,i,r){"never"===r?r="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(r="hide"),e.text=V(e.x,t,r,i)}(t,a,0,l,p),t.tickprefix&&!f(t.showtickprefix)&&(a.text=t.tickprefix+a.text),t.ticksuffix&&!f(t.showticksuffix)&&(a.text+=t.ticksuffix),"boundaries"===t.tickson||t.showdividers){var v=function(e){var n=t.l2p(e);return n>=0&&n<=t._length?e:null};a.xbnd=[v(a.x-.5),v(a.x+t.dtick-.5)]}return a},M.hoverLabelText=function(t,e,n){if(n!==w&&n!==e)return M.hoverLabelText(t,e)+" - "+M.hoverLabelText(t,n);var i="log"===t.type&&e<=0,r=M.tickText(t,t.c2l(i?-e:e),"hover").text;return i?0===e?"0":b+r:r};var $=["f","p","n","\u03bc","m","","k","M","G","T"];function q(t){return"SI"===t||"B"===t}function Z(t){return t>14||t<-15}function V(t,e,n,i){var a=t<0,o=e._tickround,l=n||e.exponentformat||"B",c=e._tickexponent,u=M.getTickFormat(e),h=e.separatethousands;if(i){var d={exponentformat:l,dtick:"none"===e.showexponent?e.dtick:r(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};j(d),o=(Number(d._tickround)||0)+4,c=d._tickexponent,e.hoverformat&&(u=e.hoverformat)}if(u)return e._numFormat(u)(t).replace(/-/g,b);var f,p=Math.pow(10,-o)/2;if("none"===l&&(c=0),(t=Math.abs(t))<p)t="0",a=!1;else{if(t+=p,c&&(t*=Math.pow(10,-c),o+=c),0===o)t=String(Math.floor(t));else if(o<0){t=(t=String(Math.round(t))).substr(0,t.length+o);for(var v=o;v<0;v++)t+="0"}else{var g=(t=String(t)).indexOf(".")+1;g&&(t=t.substr(0,g+o).replace(/\.?0+$/,""))}t=s.numSeparate(t,e._separators,h)}return c&&"hide"!==l&&(q(l)&&Z(c)&&(l="power"),f=c<0?b+-c:"power"!==l?"+"+c:String(c),"e"===l||"E"===l?t+=l+f:"power"===l?t+="\xd710<sup>"+f+"</sup>":"B"===l&&9===c?t+="B":q(l)&&(t+=$[c/3+5])),a?b+t:t}function W(t,e){var n=t._id.charAt(0),i=s.deg2rad(t._tickAngles[e]||0),r=Math.sin(i),a=Math.cos(i),o=0,l=0;return t._selections[e].each(function(){var t=Y(this),e=h.bBox(t.node()),n=e.width,i=e.height;o=Math.max(o,a*n,r*i),l=Math.max(l,r*n,a*i)}),{x:l,y:o}[n]}function U(t){return[t.text,t.x,t.axInfo,t.font,t.fontSize,t.fontColor].join("_")}function G(t,e){var n,i=t._fullLayout._size,r=e._id.charAt(0),a=e.side;return"free"!==e.anchor?n=C.getFromId(t,e.anchor):"x"===r?n={_offset:i.t+(1-(e.position||0))*i.h,_length:0}:"y"===r&&(n={_offset:i.l+(e.position||0)*i.w,_length:0}),"top"===a||"left"===a?n._offset:"bottom"===a||"right"===a?n._offset+n._length:void 0}function X(t,e){var n=t.l2p(e);return n>1&&n<t._length-1}function Y(t){var e=i.select(t),n=e.select(".text-math-group");return n.empty()?e.select("text"):n}function Q(t){return t._id+".automargin"}function K(t){return t._id+".rangeslider"}function J(t,e){for(var n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n])}function tt(t,e,n){var i,r,a=[],o=[],l=t.layout;for(i=0;i<e.length;i++)a.push(M.getFromId(t,e[i]));for(i=0;i<n.length;i++)o.push(M.getFromId(t,n[i]));var c=Object.keys(d),u=["anchor","domain","overlaying","position","side","tickangle","editType"],h=["linear","log"];for(i=0;i<c.length;i++){var f=c[i],p=a[0][f],v=o[0][f],g=!0,m=!1,y=!1;if("_"!==f.charAt(0)&&"function"!=typeof p&&-1===u.indexOf(f)){for(r=1;r<a.length&&g;r++){var _=a[r][f];"type"===f&&-1!==h.indexOf(p)&&-1!==h.indexOf(_)&&p!==_?m=!0:_!==p&&(g=!1)}for(r=1;r<o.length&&g;r++){var x=o[r][f];"type"===f&&-1!==h.indexOf(v)&&-1!==h.indexOf(x)&&v!==x?y=!0:o[r][f]!==v&&(g=!1)}g&&(m&&(l[a[0]._name].type="linear"),y&&(l[o[0]._name].type="linear"),et(l,f,a,o,t._fullLayout._dfltTitle))}}for(i=0;i<t._fullLayout.annotations.length;i++){var b=t._fullLayout.annotations[i];-1!==e.indexOf(b.xref)&&-1!==n.indexOf(b.yref)&&s.swapAttrs(l.annotations[i],["?"])}}function et(t,e,n,i,r){var a,o=s.nestedProperty,l=o(t[n[0]._name],e).get(),c=o(t[i[0]._name],e).get();for("title"===e&&(l&&l.text===r.x&&(l.text=r.y),c&&c.text===r.y&&(c.text=r.x)),a=0;a<n.length;a++)o(t,n[a]._name+"."+e).set(c);for(a=0;a<i.length;a++)o(t,i[a]._name+"."+e).set(l)}function nt(t){return"angularaxis"===t._id}M.getTickFormat=function(t){var e,n,i,r,a,o,s,l;function c(t){return"string"!=typeof t?t:Number(t.replace("M",""))*g}function u(t,e){var n=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var i=n.indexOf(t.charAt(0)),r=n.indexOf(e.charAt(0));return i===r?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):i-r}return"number"==typeof t?1:-1}function h(t,e){var n=null===e[0],i=null===e[1],r=u(t,e[0])>=0,a=u(t,e[1])<=0;return(n||r)&&(i||a)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if((i=t.tickformatstops[e]).enabled&&(r=t.dtick,o=void 0,o=c||function(t){return t},l=(a=i.dtickrange)[1],(!(s=a[0])&&"number"!=typeof s||o(s)<=o(r))&&(!l&&"number"!=typeof l||o(l)>=o(r)))){n=i;break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if((i=t.tickformatstops[e]).enabled&&h(t.dtick,i.dtickrange)){n=i;break}}return n?n.value:t.tickformat},M.getSubplots=function(t,e){var n=t._fullLayout._subplots,i=n.cartesian.concat(n.gl2d||[]),r=e?M.findSubplotsWithAxis(i,e):i;return r.sort(function(t,e){var n=t.substr(1).split("y"),i=e.substr(1).split("y");return n[0]===i[0]?+n[1]-+i[1]:+n[0]-+i[0]}),r},M.findSubplotsWithAxis=function(t,e){for(var n=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),i=[],r=0;r<t.length;r++){var a=t[r];n.test(a)&&i.push(a)}return i},M.makeClipPaths=function(t){var e=t._fullLayout;if(!e._hasOnlyLargeSploms){var n,r,a={_offset:0,_length:e.width,_id:""},o={_offset:0,_length:e.height,_id:""},s=M.list(t,"x",!0),l=M.list(t,"y",!0),c=[];for(n=0;n<s.length;n++)for(c.push({x:s[n],y:o}),r=0;r<l.length;r++)0===n&&c.push({x:a,y:l[r]}),c.push({x:s[n],y:l[r]});var u=e._clips.selectAll(".axesclip").data(c,function(t){return t.x._id+t.y._id});u.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+e._uid+t.x._id+t.y._id}).append("rect"),u.exit().remove(),u.each(function(t){i.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})})}},M.draw=function(t,e,n){var i=t._fullLayout;"redraw"===e&&i._paper.selectAll("g.subplot").each(function(t){var e=i._plots[t[0]],n=e.xaxis,r=e.yaxis;e.xaxislayer.selectAll("."+n._id+"tick").remove(),e.yaxislayer.selectAll("."+r._id+"tick").remove(),e.xaxislayer.selectAll("."+n._id+"tick2").remove(),e.yaxislayer.selectAll("."+r._id+"tick2").remove(),e.xaxislayer.selectAll("."+n._id+"divider").remove(),e.yaxislayer.selectAll("."+r._id+"divider").remove(),e.gridlayer&&e.gridlayer.selectAll("path").remove(),e.zerolinelayer&&e.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+n._id+"title").remove(),i._infolayer.select(".g-"+r._id+"title").remove()});var r=e&&"redraw"!==e?e:M.listIds(t);return s.syncOrAsync(r.map(function(e){return function(){if(e){var i=M.getFromId(t,e),r=M.drawOne(t,i,n);return i._r=i.range.slice(),i._rl=s.simpleMap(i._r,i.r2l),r}}}))},M.drawOne=function(t,e,n){var i,r,l;n=n||{},e.setScale();var d=t._fullLayout,f=e._id,p=f.charAt(0),v=M.counterLetter(f),g=e._mainLinePosition,m=e._mainMirrorPosition,y=d._plots[e._mainSubplot][p+"axislayer"],_=e._subplotsWith,x=e._vals=M.calcTicks(e),b=[e.mirror,g,m].join("_");for(i=0;i<x.length;i++)x[i].axInfo=b;if(e.visible){e._selections={},e._tickAngles={};var w,k,A=M.makeTransFn(e);if("boundaries"===e.tickson){var C=function(t,e){var n,i=[],r=function(t,e){var n=t.xbnd[e];null!==n&&i.push(s.extendFlat({},t,{x:n}))};if(e.length){for(n=0;n<e.length;n++)r(e[n],0);r(e[n-1],1)}return i}(0,x);k=M.clipEnds(e,C),w="inside"===e.ticks?k:C}else k=M.clipEnds(e,x),w="inside"===e.ticks?k:x;var L=e._gridVals=k,S=function(t,e){var n,i,r=[],a=function(t,e){var n=t.xbnd[e];null!==n&&r.push(s.extendFlat({},t,{x:n}))};if(t.showdividers&&e.length){for(n=0;n<e.length;n++){var o=e[n];o.text2!==i&&a(o,0),i=o.text2}a(e[n-1],1)}return r}(e,x);if(!d._hasOnlyLargeSploms){var E={};for(i=0;i<_.length;i++){var O=(l=d._plots[r=_[i]])[v+"axis"],P=O._mainAxis._id;if(!E[P]){E[P]=1;var D="x"===p?"M0,"+O._offset+"v"+O._length:"M"+O._offset+",0h"+O._length;M.drawGrid(t,e,{vals:L,counterAxis:O,layer:l.gridlayer.select("."+f),path:D,transFn:A}),M.drawZeroLine(t,e,{counterAxis:O,layer:l.zerolinelayer,path:D,transFn:A})}}}var z=M.getTickSigns(e),I=[];if(e.ticks){var R,B,N,F=M.makeTickPath(e,g,z[2]);if(e._anchorAxis&&e.mirror&&!0!==e.mirror?(R=M.makeTickPath(e,m,z[3]),B=F+R):(R="",B=F),e.showdividers&&"outside"===e.ticks&&"boundaries"===e.tickson){var j={};for(i=0;i<S.length;i++)j[S[i].x]=1;N=function(t){return j[t.x]?R:B}}else N=B;M.drawTicks(t,e,{vals:w,layer:y,path:N,transFn:A}),I=Object.keys(e._linepositions||{})}for(i=0;i<I.length;i++){l=d._plots[r=I[i]];var $=e._linepositions[r]||[],q=M.makeTickPath(e,$[0],z[0])+M.makeTickPath(e,$[1],z[1]);M.drawTicks(t,e,{vals:w,layer:l[p+"axislayer"],path:q,transFn:A})}var Z=[];if(Z.push(function(){return M.drawLabels(t,e,{vals:x,layer:y,transFn:A,labelFns:M.makeLabelFns(e,g)})}),"multicategory"===e.type){var V=0,X={x:2,y:10}[p],Y=z[2]*("inside"===e.ticks?-1:1);Z.push(function(){return V+=W(e,f+"tick")+X,V+=e._tickAngles[f+"tick"]?e.tickfont.size*T:0,M.drawLabels(t,e,{vals:function(t,e){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r];i[a.text2]?i[a.text2].push(a.x):i[a.text2]=[a.x]}for(var o in i)n.push(H(t,s.interp(i[o],.5),o));return n}(e,x),layer:y,cls:f+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:A,labelFns:M.makeLabelFns(e,g+V*Y)})}),Z.push(function(){return V+=W(e,f+"tick2"),e._labelLength=V,function(t,e,n){var i=e._id+"divider",r=n.vals,a=n.layer.selectAll("path."+i).data(r,U);a.exit().remove(),a.enter().insert("path",":first-child").classed(i,1).classed("crisp",1).call(u.stroke,e.dividercolor).style("stroke-width",h.crispRound(t,e.dividerwidth,1)+"px"),a.attr("transform",n.transFn).attr("d",n.path)}(t,e,{vals:S,layer:y,path:M.makeTickPath(e,g,Y,V),transFn:A})})}var J=o.getComponentMethod("rangeslider","isVisible")(e);return Z.push(function(){if(e.showticklabels){var n=t.getBoundingClientRect(),i=y.node().getBoundingClientRect();e._boundingBox={width:i.width,height:i.height,left:i.left-n.left,right:i.right-n.left,top:i.top-n.top,bottom:i.bottom-n.top}}else{var r,a=d._size;e._boundingBox="x"===p?{top:r="free"===e.anchor?a.t+a.h*(1-e.position):a.t+a.h*(1-e._anchorAxis.domain[{bottom:0,top:1}[e.side]]),bottom:r,left:e._offset,right:e._offset+e._length,width:e._length,height:0}:{left:r="free"===e.anchor?a.l+a.w*e.position:a.l+a.w*e._anchorAxis.domain[{left:0,right:1}[e.side]],right:r,bottom:e._offset+e._length,top:e._offset,height:e._length,width:0}}if(_){for(var o=e._counterSpan=[1/0,-1/0],s=0;s<_.length;s++){var l=d._plots[_[s]]["x"===p?"yaxis":"xaxis"];tt(o,[l._offset,l._offset+l._length])}"free"===e.anchor&&tt(o,"x"===p?[e._boundingBox.bottom,e._boundingBox.top]:[e._boundingBox.right,e._boundingBox.left])}},function(){var n,i,r=e.side.charAt(0);if(J&&(i=o.getComponentMethod("rangeslider","autoMarginOpts")(t,e)),a.autoMargin(t,K(e),i),e.automargin&&(!J||"b"!==r)){n={x:0,y:0,r:0,l:0,t:0,b:0};var s,l,c=e._boundingBox,u=G(t,e);switch(p+r){case"xb":s=0,l=c.top-u,n[r]=c.height;break;case"xt":s=1,l=u-c.bottom,n[r]=c.height;break;case"yl":s=0,l=u-c.right,n[r]=c.width;break;case"yr":s=1,l=c.left-u,n[r]=c.width}if(n[v]="free"===e.anchor?e.position:e._anchorAxis.domain[s],n[r]>0&&(n[r]+=l),e.title.text!==d._dfltTitle[p]&&(n[r]+=e.title.font.size),"x"===p&&c.width>0){var h=c.right-(e._offset+e._length);h>0&&(n.x=1,n.r=h);var f=e._offset-c.left;f>0&&(n.x=0,n.l=f)}else if("y"===p&&c.height>0){var g=c.bottom-(e._offset+e._length);g>0&&(n.y=0,n.b=g);var m=e._offset-c.top;m>0&&(n.y=1,n.t=m)}}a.autoMargin(t,Q(e),n)}),n.skipTitle||J&&e._boundingBox&&"bottom"===e.side||Z.push(function(){return function(t,e){var n,i=t._fullLayout,r=e._id,a=r.charAt(0),o=e.title.font.size;n="multicategory"===e.type?e._labelLength:10+1.5*o+(e.linewidth?e.linewidth-1:0);var s,l,u,d,f=G(t,e);if("x"===a?(l=e._offset+e._length/2,u="top"===e.side?-n-o*(e.showticklabels?1:0):n+o*(e.showticklabels?1.5:.5),u+=f):(u=e._offset+e._length/2,l="right"===e.side?n+o*(e.showticklabels?1:.5):-n-o*(e.showticklabels?.5:0),l+=f,s={rotate:"-90",offset:0}),"multicategory"!==e.type){var p=e._selections[e._id+"tick"];if(d={selection:p,side:e.side},p&&p.node()&&p.node().parentNode){var v=h.getTranslate(p.node().parentNode);d.offsetLeft=v.x,d.offsetTop=v.y}}return c.draw(t,r+"title",{propContainer:e,propName:e._name+".title.text",placeholder:i._dfltTitle[a],avoid:d,transform:s,attributes:{x:l,y:u,"text-anchor":"middle"}})}(t,e)}),s.syncOrAsync(Z)}function tt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.max(t[1],e[1])}},M.getTickSigns=function(t){var e=t._id.charAt(0),n=t.side==={x:"top",y:"right"}[e]?1:-1,i=[-1,1,n,-n];return"inside"!==t.ticks==("x"===e)&&(i=i.map(function(t){return-t})),i},M.makeTransFn=function(t){var e=t._id.charAt(0),n=t._offset;return"x"===e?function(e){return"translate("+(n+t.l2p(e.x))+",0)"}:function(e){return"translate(0,"+(n+t.l2p(e.x))+")"}},M.makeTickPath=function(t,e,n,i){i=void 0!==i?i:t.ticklen;var r=t._id.charAt(0),a=(t.linewidth||1)/2;return"x"===r?"M0,"+(e+a*n)+"v"+i*n:"M"+(e+a*n)+",0h"+i*n},M.makeLabelFns=function(t,e,n){var i=t._id.charAt(0),a="boundaries"!==t.tickson&&"outside"===t.ticks,o=0,l=0;if(a&&(o+=t.ticklen),n&&"outside"===t.ticks){var c=s.deg2rad(n);o=t.ticklen*Math.cos(c)+1,l=t.ticklen*Math.sin(c)}t.showticklabels&&(a||t.showline)&&(o+=.2*t.tickfont.size);var u,h,d,f,p={labelStandoff:o+=(t.linewidth||1)/2,labelShift:l};return"x"===i?(u=l*(f="bottom"===t.side?1:-1),h=e+o*f,d="bottom"===t.side?1:-.2,p.xFn=function(t){return t.dx+u},p.yFn=function(t){return t.dy+h+t.fontSize*d},p.anchorFn=function(t,e){return r(e)&&0!==e&&180!==e?e*f<0?"end":"start":"middle"},p.heightFn=function(e,n,i){return n<-60||n>60?-.5*i:"top"===t.side?-i:0}):"y"===i&&(u=o,h=-l*(f="right"===t.side?1:-1),d=90===Math.abs(t.tickangle)?.5:0,p.xFn=function(t){return t.dx+e+(u+t.fontSize*d)*f},p.yFn=function(t){return t.dy+h+t.fontSize*k},p.anchorFn=function(e,n){return r(n)&&90===Math.abs(n)?"middle":"right"===t.side?"start":"end"},p.heightFn=function(e,n,i){return(n*="left"===t.side?1:-1)<-30?-i:n<30?-.5*i:0}),p},M.drawTicks=function(t,e,n){var i=e._id+"tick",r=(n=n||{}).layer.selectAll("path."+i).data(e.ticks?n.vals:[],U);r.exit().remove(),r.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(u.stroke,e.tickcolor).style("stroke-width",h.crispRound(t,e.tickwidth,1)+"px").attr("d",n.path),r.attr("transform",n.transFn)},M.drawGrid=function(t,e,n){var i=e._id+"grid",r=(n=n||{}).vals,a=n.counterAxis;if(!1===e.showgrid)r=[];else if(a&&M.shouldShowZeroLine(t,e,a))for(var o="array"===e.tickmode,s=0;s<r.length;s++){var l=r[s].x;if(o?!l:Math.abs(l)<e.dtick/100){if(r=r.slice(0,s).concat(r.slice(s+1)),!o)break;s--}}var c=n.layer.selectAll("path."+i).data(r,U);c.exit().remove(),c.enter().append("path").classed(i,1).classed("crisp",!1!==n.crisp),e._gw=h.crispRound(t,e.gridwidth,1),c.attr("transform",n.transFn).attr("d",n.path).call(u.stroke,e.gridcolor||"#ddd").style("stroke-width",e._gw+"px"),"function"==typeof n.path&&c.attr("d",n.path)},M.drawZeroLine=function(t,e,n){var i=e._id+"zl",r=M.shouldShowZeroLine(t,e,(n=n||n).counterAxis),a=n.layer.selectAll("path."+i).data(r?[{x:0,id:e._id}]:[]);a.exit().remove(),a.enter().append("path").classed(i,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(t,e){return C.idSort(t.id,e.id)})}),a.attr("transform",n.transFn).attr("d",n.path).call(u.stroke,e.zerolinecolor||u.defaultLine).style("stroke-width",h.crispRound(t,e.zerolinewidth,e._gw||1)+"px")},M.drawLabels=function(t,e,n){n=n||{};var a=e._id,o=a.charAt(0),c=n.cls||a+"tick",u=n.vals,d=n.labelFns,f=n.secondary?0:e.tickangle,p=(e._tickAngles||{})[c],v=n.layer.selectAll("g."+c).data(e.showticklabels?u:[],U),g=[];function m(t,e){t.each(function(t){var a=i.select(this),o=a.select(".text-math-group"),s=d.anchorFn(t,e),c=n.transFn.call(a.node(),t)+(r(e)&&0!=+e?" rotate("+e+","+d.xFn(t)+","+(d.yFn(t)-t.fontSize/2)+")":""),u=l.lineCount(a),f=T*t.fontSize,p=d.heightFn(t,r(e)?+e:0,(u-1)*f);if(p&&(c+=" translate(0, "+p+")"),o.empty())a.select("text").attr({transform:c,"text-anchor":s});else{var v=h.bBox(o.node()).width*{end:-.5,start:.5}[s];o.attr("transform",c+(v?"translate("+v+",0)":""))}})}v.enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(e){var n=i.select(this),r=t._promises.length;n.call(l.positionText,d.xFn(e),d.yFn(e)).call(h.font,e.font,e.fontSize,e.fontColor).text(e.text).call(l.convertToTspans,t),t._promises[r]?g.push(t._promises.pop().then(function(){m(n,f)})):m(n,f)}),v.exit().remove(),n.repositionOnUpdate&&v.each(function(t){i.select(this).select("text").call(l.positionText,d.xFn(t),d.yFn(t))}),m(v,p||f),e._selections&&(e._selections[c]=v);var y=s.syncOrAsync([function(){return g.length&&Promise.all(g)},function(){m(v,f);var t=null;if(u.length&&"x"===o&&!r(f)&&("log"!==e.type||"D"!==String(e.dtick).charAt(0))){t=0;var i,a=0,l=[];if(v.each(function(t){a=Math.max(a,t.fontSize);var n=e.l2p(t.x),i=Y(this),r=h.bBox(i.node());l.push({top:0,bottom:10,height:10,left:n-r.width/2,right:n+r.width/2+2,width:r.width+2})}),"boundaries"!==e.tickson&&!e.showdividers||n.secondary){var d=u.length,p=Math.abs((u[d-1].x-u[0].x)*e._m)/(d-1)<2.5*a||"multicategory"===e.type;for(i=0;i<l.length-1;i++)if(s.bBoxIntersect(l[i],l[i+1])){t=p?90:30;break}}else{var g=2;for(e.ticks&&(g+=e.tickwidth/2),i=0;i<l.length;i++){var y=u[i].xbnd,_=l[i];if(null!==y[0]&&_.left-e.l2p(y[0])<g||null!==y[1]&&e.l2p(y[1])-_.right<g){t=90;break}}}t&&m(v,t)}e._tickAngles&&(e._tickAngles[c]=null===t?r(f)?f:0:t)}]);return y&&y.then&&t._promises.push(y),y},M.shouldShowZeroLine=function(t,e,n){var i=s.simpleMap(e.range,e.r2l);return i[0]*i[1]<=0&&e.zeroline&&("linear"===e.type||"-"===e.type)&&e._gridVals.length&&(X(e,0)||!function(t,e,n,i){var r=n._mainAxis;if(r){var a=t._fullLayout,o=e._id.charAt(0),s=M.counterLetter(e._id),l=e._offset+(Math.abs(i[0])<Math.abs(i[1])==("x"===o)?0:e._length),c=a._plots[n._mainSubplot];if(!(c.mainplotinfo||c).overlays.length)return f(n);for(var u=M.list(t,s),h=0;h<u.length;h++){var d=u[h];if(d._mainAxis===r&&f(d))return!0}}function f(t){if(!t.showline||!t.linewidth)return!1;var n=Math.max((t.linewidth+e.zerolinewidth)/2,1);function i(t){return"number"==typeof t&&Math.abs(t-l)<n}if(i(t._mainLinePosition)||i(t._mainMirrorPosition))return!0;var r=t._linepositions||{};for(var a in r)if(i(r[a][0])||i(r[a][1]))return!0}}(t,e,n,i)||function(t,e){for(var n=t._fullData,i=e._mainSubplot,r=e._id.charAt(0),a=0;a<n.length;a++){var s=n[a];if(!0===s.visible&&s.xaxis+s.yaxis===i&&(o.traceIs(s,"bar")&&s.orientation==={x:"h",y:"v"}[r]||s.fill&&s.fill.charAt(s.fill.length-1)===r))return!0}return!1}(t,e))},M.clipEnds=function(t,e){return e.filter(function(e){return X(t,e.x)})},M.allowAutoMargin=function(t){for(var e=M.list(t,"",!0),n=0;n<e.length;n++){var i=e[n];i.automargin&&a.allowAutoMargin(t,Q(i)),o.getComponentMethod("rangeslider","isVisible")(i)&&a.allowAutoMargin(t,K(i))}},M.swap=function(t,e){for(var n=function(t,e){var n,i,r=[];for(n=0;n<e.length;n++){var a=[],o=t._fullData[e[n]].xaxis,s=t._fullData[e[n]].yaxis;if(o&&s){for(i=0;i<r.length;i++)-1===r[i].x.indexOf(o)&&-1===r[i].y.indexOf(s)||a.push(i);if(a.length){var l,c=r[a[0]];if(a.length>1)for(i=1;i<a.length;i++)J(c.x,(l=r[a[i]]).x),J(c.y,l.y);J(c.x,[o]),J(c.y,[s])}else r.push({x:[o],y:[s]})}}return r}(t,e),i=0;i<n.length;i++)tt(t,n[i].x,n[i].y)}},{"../../components/color":43,"../../components/drawing":64,"../../components/titles":131,"../../constants/alignment":138,"../../constants/numerical":140,"../../lib":159,"../../lib/svg_text_utils":180,"../../plots/plots":235,"../../registry":242,"./autorange":202,"./axis_autotype":204,"./axis_ids":206,"./clean_ticks":208,"./layout_attributes":215,"./set_convert":221,d3:8,"fast-isnumeric":10}],204:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib"),a=t("../../constants/numerical").BADNUM;e.exports=function(t,e,n){return!(n=n||{}).noMultiCategory&&r.isArrayOrTypedArray((o=t)[0])&&r.isArrayOrTypedArray(o[1])?"multicategory":function(t,e){for(var n=Math.max(1,(t.length-1)/1e3),a=0,o=0,s={},l=0;l<t.length;l+=n){var c=t[Math.round(l)],u=String(c);s[u]||(s[u]=1,r.isDateTime(c,e)&&(a+=1),i(c)&&(o+=1))}return a>2*o}(t,e)?"date":function(t){for(var e=Math.max(1,(t.length-1)/1e3),n=0,i=0,o={},s=0;s<t.length;s+=e){var l=t[Math.round(s)],c=String(l);o[c]||(o[c]=1,"boolean"==typeof l?i++:r.cleanNumber(l)!==a?n++:"string"==typeof l&&i++)}return i>2*n}(t)?"category":function(t){if(!t)return!1;for(var e=0;e<t.length;e++)if(i(t[e]))return!0;return!1}(t)?"linear":"-";var o}},{"../../constants/numerical":140,"../../lib":159,"fast-isnumeric":10}],205:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("../../lib"),a=t("./layout_attributes"),o=t("./tick_value_defaults"),s=t("./tick_mark_defaults"),l=t("./tick_label_defaults"),c=t("./category_order_defaults"),u=t("./line_grid_defaults"),h=t("./set_convert");e.exports=function(t,e,n,d,f){var p=d.letter,v=d.font||{},g=d.splomStash||{},m=n("visible",!d.cheateronly),y=e.type;if("date"===y&&i.getComponentMethod("calendars","handleDefaults")(t,e,"calendar",d.calendar),h(e,f),!n("autorange",!e.isValidRange(t.range))||"linear"!==y&&"-"!==y||n("rangemode"),n("range"),e.cleanRange(),c(t,e,n,d),"category"===y||d.noHover||n("hoverformat"),!m)return e;var _=n("color"),x=_!==a.color.dflt?_:v.color;n("title.text",g.label||f._dfltTitle[p]),r.coerceFont(n,"title.font",{family:v.family,size:Math.round(1.2*v.size),color:x}),o(t,e,n,y),l(t,e,n,y,d),s(t,e,n,d),u(t,e,n,{dfltColor:_,bgColor:d.bgColor,showGrid:d.showGrid,attributes:a}),(e.showline||e.ticks)&&n("mirror"),d.automargin&&n("automargin");var b,w="multicategory"===e.type;return d.noTickson||"category"!==e.type&&!w||!e.ticks&&!e.showgrid||(w&&(b="boundaries"),n("tickson",b)),w&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),e}},{"../../lib":159,"../../registry":242,"./category_order_defaults":207,"./layout_attributes":215,"./line_grid_defaults":217,"./set_convert":221,"./tick_label_defaults":222,"./tick_mark_defaults":223,"./tick_value_defaults":224}],206:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("./constants");n.id2name=function(t){if("string"==typeof t&&t.match(r.AX_ID_PATTERN)){var e=t.substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},n.name2id=function(t){if(t.match(r.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},n.cleanId=function(t,e){if(t.match(r.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)){var n=t.substr(1).replace(/^0+/,"");return"1"===n&&(n=""),t.charAt(0)+n}},n.list=function(t,e,i){var r=t._fullLayout;if(!r)return[];var a,o=n.listIds(t,e),s=new Array(o.length);for(a=0;a<o.length;a++){var l=o[a];s[a]=r[l.charAt(0)+"axis"+l.substr(1)]}if(!i){var c=r._subplots.gl3d||[];for(a=0;a<c.length;a++){var u=r[c[a]];e?s.push(u[e+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},n.listIds=function(t,e){var n=t._fullLayout;if(!n)return[];var i=n._subplots;return e?i[e+"axis"]:i.xaxis.concat(i.yaxis)},n.getFromId=function(t,e,i){var r=t._fullLayout;return"x"===i?e=e.replace(/y[0-9]*/,""):"y"===i&&(e=e.replace(/x[0-9]*/,"")),r[n.id2name(e)]},n.getFromTrace=function(t,e,r){var a=t._fullLayout,o=null;if(i.traceIs(e,"gl3d")){var s=e.scene;"scene"===s.substr(0,5)&&(o=a[s][r+"axis"])}else o=n.getFromId(t,e[r+"axis"]||r);return o},n.idSort=function(t,e){var n=t.charAt(0),i=e.charAt(0);return n!==i?n>i?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)},n.getAxisGroup=function(t,e){for(var n=t._axisMatchGroups,i=0;i<n.length;i++)if(n[i][e])return"g"+i;return e}},{"../../registry":242,"./constants":209}],207:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){if("category"===e.type){var r,a=t.categoryarray,o=Array.isArray(a)&&a.length>0;o&&(r="array");var s,l=n("categoryorder",r);"array"===l&&(s=n("categoryarray")),o||"array"!==l||(l=e.categoryorder="trace"),"trace"===l?e._initialCategories=[]:"array"===l?e._initialCategories=s.slice():(s=function(t,e){var n,i,r,a=e.dataAttr||t._id.charAt(0),o={};if(e.axData)n=e.axData;else for(n=[],i=0;i<e.data.length;i++){var s=e.data[i];s[a+"axis"]===t._id&&n.push(s)}for(i=0;i<n.length;i++){var l=n[i][a];for(r=0;r<l.length;r++){var c=l[r];null!=c&&(o[c]=1)}}return Object.keys(o)}(e,i).sort(),"category ascending"===l?e._initialCategories=s:"category descending"===l&&(e._initialCategories=s.reverse()))}}},{}],208:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib"),a=t("../../constants/numerical").ONEDAY;n.dtick=function(t,e){var n="log"===e,r="date"===e,o="category"===e,s=r?a:1;if(!t)return s;if(i(t))return(t=Number(t))<=0?s:o?Math.max(1,Math.round(t)):r?Math.max(.1,t):t;if("string"!=typeof t||!r&&!n)return s;var l=t.charAt(0),c=t.substr(1);return(c=i(c)?Number(c):0)<=0||!(r&&"M"===l&&c===Math.round(c)||n&&"L"===l||n&&"D"===l&&(1===c||2===c))?s:t},n.tick0=function(t,e,n,a){return"date"===e?r.cleanDate(t,r.dateTick0(n)):"D1"!==a&&"D2"!==a?i(t)?Number(t):0:void 0}},{"../../constants/numerical":140,"../../lib":159,"fast-isnumeric":10}],209:[function(t,e,n){"use strict";var i=t("../../lib/regex").counter;e.exports={idRegex:{x:i("x"),y:i("y")},attrRegex:i("[xy]axis"),xAxisMatch:i("xaxis"),yAxisMatch:i("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["heatmaplayer","contourcarpetlayer","contourlayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":174}],210:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./axis_ids").id2name,a=t("./scale_zoom"),o=t("./autorange").makePadFn,s=t("./autorange").concatExtremes,l=t("../../constants/numerical").ALMOST_EQUAL,c=t("../../constants/alignment").FROM_BL;function u(t,e,n,i,a){var o,s,l,c,u="range"!==a,h=i[r(e)].type,d=[];for(s=0;s<n.length;s++)(l=n[s])!==e&&(c=i[r(l)]).type===h&&(c.fixedrange?u&&c.anchor&&i[r(c.anchor)].fixedrange&&d.push(l):d.push(l));for(o=0;o<t.length;o++)if(t[o][e]){var f=t[o],p=[];for(s=0;s<d.length;s++)f[l=d[s]]||p.push(l);return{linkableAxes:p,thisGroup:f}}return{linkableAxes:d,thisGroup:null}}function h(t,e,n,i,r){var a,o,s,l,c;null===e?((e={})[n]=1,c=t.length,t.push(e)):c=t.indexOf(e);var u=Object.keys(e);for(a=0;a<t.length;a++)if(s=t[a],a!==c&&s[i]){var h=s[i];for(o=0;o<u.length;o++)s[l=u[o]]=h*r*e[l];return void t.splice(c,1)}if(1!==r)for(o=0;o<u.length;o++)e[u[o]]*=r;e[i]=1}function d(t,e){var n=t._inputDomain,i=n[0]+(n[1]-n[0])*c[t.constraintoward];t.domain=t._input.domain=[i+(n[0]-i)/e,i+(n[1]-i)/e],t.setScale()}n.handleConstraintDefaults=function(t,e,n,r,a){var o,s,l,c,d=a._axisConstraintGroups,f=a._axisMatchGroups,p=e._id,v=p.charAt(0),g=((a._splomAxes||{})[v]||{})[p]||{},m=e._id,y=m.charAt(0),_=n("constrain");if(i.coerce(t,e,{constraintoward:{valType:"enumerated",values:"x"===y?["left","center","right"]:["bottom","middle","top"],dflt:"x"===y?"center":"middle"}},"constraintoward"),!t.matches&&!g.matches||e.fixedrange||(s=u(f,m,r,a),o=i.coerce(t,e,{matches:{valType:"enumerated",values:s.linkableAxes||[],dflt:g.matches}},"matches")),o||!t.scaleanchor||e.fixedrange&&"domain"!==_||(c=u(d,m,r,a,_),l=i.coerce(t,e,{scaleanchor:{valType:"enumerated",values:c.linkableAxes||[]}},"scaleanchor")),o?(delete e.constrain,h(f,s.thisGroup,m,o,1)):-1!==r.indexOf(t.matches)&&i.warn("ignored "+e._name+'.matches: "'+t.matches+'" to avoid either an infinite loop or because the target axis has fixed range.'),l){var x=n("scaleratio");x||(x=e.scaleratio=1),h(d,c.thisGroup,m,l,x)}else-1!==r.indexOf(t.scaleanchor)&&i.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')},n.enforce=function(t){var e,n,i,c,u,h,f,p=t._fullLayout,v=p._axisConstraintGroups||[];for(e=0;e<v.length;e++){var g=v[e],m=Object.keys(g),y=1/0,_=0,x=1/0,b={},w={},k=!1;for(n=0;n<m.length;n++)w[i=m[n]]=c=p[r(i)],c._inputDomain?c.domain=c._inputDomain.slice():c._inputDomain=c.domain.slice(),c._inputRange||(c._inputRange=c.range.slice()),c.setScale(),b[i]=u=Math.abs(c._m)/g[i],y=Math.min(y,u),"domain"!==c.constrain&&c._constraintShrinkable||(x=Math.min(x,u)),delete c._constraintShrinkable,_=Math.max(_,u),"domain"===c.constrain&&(k=!0);if(!(y>l*_)||k)for(n=0;n<m.length;n++)if(u=b[i=m[n]],h=(c=w[i]).constrain,u!==x||"domain"===h)if(f=u/x,"range"===h)a(c,f);else{var T=c._inputDomain,M=(c.domain[1]-c.domain[0])/(T[1]-T[0]),A=(c.r2l(c.range[1])-c.r2l(c.range[0]))/(c.r2l(c._inputRange[1])-c.r2l(c._inputRange[0]));if((f/=M)*A<1){c.domain=c._input.domain=T.slice(),a(c,f);continue}if(A<1&&(c.range=c._input.range=c._inputRange.slice(),f*=A),c.autorange){var C=c.r2l(c.range[0]),L=c.r2l(c.range[1]),S=(C+L)/2,E=S,O=S,P=Math.abs(L-S),D=S-P*f*1.0001,z=S+P*f*1.0001,I=o(c);d(c,f);var R,B,N=Math.abs(c._m),F=s(t,c),j=F.min,H=F.max;for(B=0;B<j.length;B++)(R=j[B].val-I(j[B])/N)>D&&R<E&&(E=R);for(B=0;B<H.length;B++)(R=H[B].val+I(H[B])/N)<z&&R>O&&(O=R);f/=(O-E)/(2*P),E=c.l2r(E),O=c.l2r(O),c.range=c._input.range=C<L?[E,O]:[O,E]}d(c,f)}}},n.clean=function(t,e){if(e._inputDomain){for(var n=!1,i=e._id,r=t._fullLayout._axisConstraintGroups,a=0;a<r.length;a++)if(r[a][i]){n=!0;break}n&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}}},{"../../constants/alignment":138,"../../constants/numerical":140,"../../lib":159,"./autorange":202,"./axis_ids":206,"./scale_zoom":219}],211:[function(t,e,n){"use strict";var i=t("d3"),r=t("tinycolor2"),a=t("has-passive-events"),o=t("../../registry"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),c=t("../../components/color"),u=t("../../components/drawing"),h=t("../../components/fx"),d=t("./axes"),f=t("../../lib/setcursor"),p=t("../../components/dragelement"),v=t("../../constants/alignment").FROM_TL,g=t("../../lib/clear_gl_canvases"),m=t("../../plot_api/subroutines").redrawReglTraces,y=t("../plots"),_=t("./axis_ids").getFromId,x=t("./select").prepSelect,b=t("./select").clearSelect,w=t("./select").selectOnClick,k=t("./scale_zoom"),T=t("./constants"),M=T.MINDRAG,A=T.MINZOOM,C=!0;function L(t,e,n,i){var r=s.ensureSingle(t.draglayer,e,n,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return r.call(f,i),r.node()}function S(t,e,n,r,a,o,s){var l=L(t,"rect",e,n);return i.select(l).call(u.setRect,r,a,o,s),l}function E(t,e){for(var n=0;n<t.length;n++)if(!t[n].fixedrange)return e;return""}function O(t,e,n,i,r){for(var a=0;a<t.length;a++){var o=t[a];if(!o.fixedrange){var s=o._rl[0],l=o._rl[1]-s;o.range=[o.l2r(s+l*e),o.l2r(s+l*n)],i[o._name+".range[0]"]=o.range[0],i[o._name+".range[1]"]=o.range[1]}}if(r&&r.length){var c=(e+(1-n))/2;O(r,c,1-c,i,[])}}function P(t,e){for(var n=0;n<t.length;n++){var i=t[n];i.fixedrange||(i.range=[i.l2r(i._rl[0]-e/i._m),i.l2r(i._rl[1]-e/i._m)])}}function D(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function z(t,e,n,i,r){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+n+", "+i+")").attr("d",r+"Z")}function I(t,e,n){return t.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+e+", "+n+")").attr("d","M0,0Z")}function R(t,e,n,i,r,a){t.attr("d",i+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),B(t,e,r,a)}function B(t,e,n,i){n||(t.transition().style("fill",i>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function N(t){i.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function F(t){C&&t.data&&t._context.showTips&&(s.notifier(s._(t,"Double-click to zoom back out"),"long"),C=!1)}function j(t){return"lasso"===t||"select"===t}function H(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,A)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function $(t,e,n,i){for(var r,a,o,l,c=!1,u={},h={},d=0;d<e.length;d++){var f=e[d];for(r in n)if(f[r]){for(o in f)("x"===o.charAt(0)?n:i)[o]||(u[o]=r);for(a in i)f[a]&&(c=!0)}for(a in i)if(f[a])for(l in f)("x"===l.charAt(0)?n:i)[l]||(h[l]=a)}c&&(s.extendFlat(u,h),h={});var p={},v=[];for(o in u){var g=_(t,o);v.push(g),p[g._id]=g}var m={},y=[];for(l in h){var x=_(t,l);y.push(x),m[x._id]=x}return{xaHash:p,yaHash:m,xaxes:v,yaxes:y,xLinks:u,yLinks:h,isSubplotConstrained:c}}function q(t,e){if(a){var n=void 0!==t.onwheel?"wheel":"mousewheel";t._onwheel&&t.removeEventListener(n,t._onwheel),t._onwheel=e,t.addEventListener(n,e,{passive:!1})}else void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel&&(t.onmousewheel=e)}function Z(t){var e=[];for(var n in t)e.push(t[n]);return e}e.exports={makeDragBox:function(t,e,n,a,c,f,C,L){var B,V,W,U,G,X,Y,Q,K,J,tt,et,nt,it,rt,at,ot,st,lt,ct,ut,ht=t._fullLayout._zoomlayer,dt=C+L==="nsew",ft=1===(C+L).length;function pt(){if(K=(B=e.xaxis)._length,J=(V=e.yaxis)._length,Y=B._offset,Q=V._offset,(W={})[B._id]=B,(U={})[V._id]=V,C&&L)for(var n=e.overlays,i=0;i<n.length;i++){var r=n[i].xaxis;W[r._id]=r;var a=n[i].yaxis;U[a._id]=a}G=Z(W),X=Z(U),nt=E(G,L),it=E(X,C),rt=!it&&!nt,tt=$(t,t._fullLayout._axisConstraintGroups,W,U),et=$(t,t._fullLayout._axisMatchGroups,W,U),at=L||tt.isSubplotConstrained||et.isSubplotConstrained,ot=C||tt.isSubplotConstrained||et.isSubplotConstrained;var o=t._fullLayout;st=o._has("scattergl"),lt=o._has("splom"),ct=o._has("svg")}pt();var vt=function(t,e,n){return t?"nsew"===t?dt?"":"pan"===e?"move":"crosshair":t.toLowerCase()+"-resize":"pointer"}(it+nt,t._fullLayout.dragmode),gt=S(e,C+L+"drag",vt,n,a,c,f);if(rt&&!dt)return gt.onmousedown=null,gt.style.pointerEvents="none",gt;var mt,yt,_t,xt,bt,wt,kt,Tt,Mt,At,Ct={element:gt,gd:t,plotinfo:e};function Lt(){Ct.plotinfo.selection=!1,b(ht)}function St(n,r){var a=t._fullLayout.clickmode;if(N(t),2!==n||ft||function(){if(!t._transitioningWithDuration){var e=t._context.doubleClick,n=[];nt&&(n=n.concat(G)),it&&(n=n.concat(X)),et.xaxes&&(n=n.concat(et.xaxes)),et.yaxes&&(n=n.concat(et.yaxes));var i,r,a,s={};if("reset+autosize"===e)for(e="autosize",r=0;r<n.length;r++)if((i=n[r])._rangeInitial&&(i.range[0]!==i._rangeInitial[0]||i.range[1]!==i._rangeInitial[1])||!i._rangeInitial&&!i.autorange){e="reset";break}if("autosize"===e)for(r=0;r<n.length;r++)(i=n[r]).fixedrange||(s[i._name+".autorange"]=!0);else if("reset"===e)for((nt||tt.isSubplotConstrained)&&(n=n.concat(tt.xaxes)),it&&!tt.isSubplotConstrained&&(n=n.concat(tt.yaxes)),tt.isSubplotConstrained&&(nt?it||(n=n.concat(X)):n=n.concat(G)),r=0;r<n.length;r++)(i=n[r]).fixedrange||(i._rangeInitial?(s[i._name+".range[0]"]=(a=i._rangeInitial)[0],s[i._name+".range[1]"]=a[1]):s[i._name+".autorange"]=!0);t.emit("plotly_doubleclick",null),o.call("_guiRelayout",t,s)}}(),dt)a.indexOf("select")>-1&&w(r,t,G,X,e.id,Ct),a.indexOf("event")>-1&&h.click(t,r,e.id);else if(1===n&&ft){var s=C?V:B,c="s"===C||"w"===L?0:1,u=s._name+".range["+c+"]",d=function(t,e){var n,r=t.range[c],a=Math.abs(r-t.range[1-c]);return"date"===t.type?r:"log"===t.type?(n=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3,i.format("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4,i.format("."+String(n)+"g")(r))}(s),f="left",p="middle";if(s.fixedrange)return;C?(p="n"===C?"top":"bottom","right"===s.side&&(f="right")):"e"===L&&(f="right"),t._context.showAxisRangeEntryBoxes&&i.select(gt).call(l.makeEditable,{gd:t,immediate:!0,background:t._fullLayout.paper_bgcolor,text:String(d),fill:s.tickfont?s.tickfont.color:"#444",horizontalAlign:f,verticalAlign:p}).on("edit",function(e){var n=s.d2r(e);void 0!==n&&o.call("_guiRelayout",t,u,n)})}}function Et(e,n){if(t._transitioningWithDuration)return!1;var i=Math.max(0,Math.min(K,e+mt)),r=Math.max(0,Math.min(J,n+yt)),a=Math.abs(i-mt),o=Math.abs(r-yt);function s(){kt="",_t.r=_t.l,_t.t=_t.b,Mt.attr("d","M0,0Z")}if(_t.l=Math.min(mt,i),_t.r=Math.max(mt,i),_t.t=Math.min(yt,r),_t.b=Math.max(yt,r),tt.isSubplotConstrained)a>A||o>A?(kt="xy",a/K>o/J?(o=a*J/K,yt>r?_t.t=yt-o:_t.b=yt+o):(a=o*K/J,mt>i?_t.l=mt-a:_t.r=mt+a),Mt.attr("d",H(_t))):s();else if(et.isSubplotConstrained)if(a>A||o>A){kt="xy";var l=Math.min(_t.l/K,(J-_t.b)/J),c=Math.max(_t.r/K,(J-_t.t)/J);_t.l=l*K,_t.r=c*K,_t.b=(1-l)*J,_t.t=(1-c)*J,Mt.attr("d",H(_t))}else s();else!it||o<Math.min(Math.max(.6*a,M),A)?a<M||!nt?s():(_t.t=0,_t.b=J,kt="x",Mt.attr("d","M"+(_t.l-.5)+","+(yt-A-.5)+"h-3v"+(2*A+1)+"h3ZM"+(_t.r+.5)+","+(yt-A-.5)+"h3v"+(2*A+1)+"h-3Z")):!nt||a<Math.min(.6*o,A)?(_t.l=0,_t.r=K,kt="y",Mt.attr("d","M"+(mt-A-.5)+","+(_t.t-.5)+"v-3h"+(2*A+1)+"v3ZM"+(mt-A-.5)+","+(_t.b+.5)+"v3h"+(2*A+1)+"v-3Z")):(kt="xy",Mt.attr("d",H(_t)));_t.w=_t.r-_t.l,_t.h=_t.b-_t.t,kt&&(At=!0),t._dragged=At,R(Tt,Mt,_t,bt,wt,xt),wt=!0}function Ot(){if(ut={},Math.min(_t.h,_t.w)<2*M)return N(t);"xy"!==kt&&"x"!==kt||(O(G,_t.l/K,_t.r/K,ut,tt.xaxes),Bt("x",ut)),"xy"!==kt&&"y"!==kt||(O(X,(J-_t.b)/J,(J-_t.t)/J,ut,tt.yaxes),Bt("y",ut)),N(t),Ft(),F(t)}Ct.prepFn=function(e,n,i){var a=Ct.dragmode,o=t._fullLayout.dragmode;o!==a&&(Ct.dragmode=o),pt(),rt||(dt?e.shiftKey?"pan"===o?o="zoom":j(o)||(o="pan"):e.ctrlKey&&(o="pan"):o="pan"),Ct.minDrag="lasso"===o?1:void 0,j(o)?(Ct.xaxes=G,Ct.yaxes=X,x(e,n,i,Ct,o)):(Ct.clickFn=St,j(a)&&Lt(),rt||("zoom"===o?(Ct.moveFn=Et,Ct.doneFn=Ot,Ct.minDrag=1,function(e,n,i){var a=gt.getBoundingClientRect();_t={l:mt=n-a.left,r:mt,w:0,t:yt=i-a.top,b:yt,h:0},xt=t._hmpixcount?t._hmlumcount/t._hmpixcount:r(t._fullLayout.plot_bgcolor).getLuminance(),wt=!1,kt="xy",At=!1,Tt=z(ht,xt,Y,Q,bt="M0,0H"+K+"V"+J+"H0V0"),Mt=I(ht,Y,Q)}(0,n,i)):"pan"===o&&(Ct.moveFn=Rt,Ct.doneFn=Ft)))},p.init(Ct);var Pt=[0,0,K,J],Dt=null,zt=T.REDRAWDELAY,It=e.mainplot?t._fullLayout._plots[e.mainplot]:e;function Rt(e,n){if(!t._transitioningWithDuration){if(t._fullLayout._replotting=!0,"ew"===nt||"ns"===it)return nt&&(P(G,e),Bt("x")),it&&(P(X,n),Bt("y")),jt([nt?-e:0,it?-n:0,K,J]),void Nt();if(tt.isSubplotConstrained&&nt&&it){var i="w"===nt==("n"===it)?1:-1,r=(e/K+i*n/J)/2;e=r*K,n=i*r*J}"w"===nt?e=l(G,0,e):"e"===nt?e=l(G,1,-e):nt||(e=0),"n"===it?n=l(X,1,n):"s"===it?n=l(X,0,-n):it||(n=0);var a="w"===nt?e:0,o="n"===it?n:0;if(tt.isSubplotConstrained){var s;if(!nt&&1===it.length){for(s=0;s<G.length;s++)G[s].range=G[s]._r.slice(),k(G[s],1-n/J);a=(e=n*K/J)/2}if(!it&&1===nt.length){for(s=0;s<X.length;s++)X[s].range=X[s]._r.slice(),k(X[s],1-e/K);o=(n=e*J/K)/2}}Bt("x"),Bt("y"),jt([a,o,K-e,J-n]),Nt()}function l(t,e,n){for(var i,r,a=1-e,o=0;o<t.length;o++){var s=t[o];if(!s.fixedrange){i=s,r=s._rl[a]+(s._rl[e]-s._rl[a])/D(n/s._length);var l=s.l2r(r);!1!==l&&void 0!==l&&(s.range[e]=l)}}return i._length*(i._rl[e]-r)/(i._rl[e]-i._rl[a])}}function Bt(t,e){for(var n=et.isSubplotConstrained?{x:X,y:G}[t]:et[t+"axes"],i=et.isSubplotConstrained?{x:G,y:X}[t]:[],r=0;r<n.length;r++){var a=n[r],o=a._id,s=et.xLinks[o]||et.yLinks[o],l=i[0]||W[s]||U[s];if(l){var c=l.range;e?(e[a._name+".range[0]"]=c[0],e[a._name+".range[1]"]=c[1]):a.range=c}}}function Nt(){var e,n=[];function i(t){for(e=0;e<t.length;e++)t[e].fixedrange||n.push(t[e]._id)}for(at&&(i(G),i(tt.xaxes),i(et.xaxes)),ot&&(i(X),i(tt.yaxes),i(et.yaxes)),ut={},e=0;e<n.length;e++){var r=_(t,n[e]);d.drawOne(t,r,{skipTitle:!0}),ut[r._name+".range[0]"]=r.range[0],ut[r._name+".range[1]"]=r.range[1]}d.redrawComponents(t,n)}function Ft(){jt([0,0,K,J]),s.syncOrAsync([y.previousPromises,function(){t._fullLayout._replotting=!1,o.call("_guiRelayout",t,ut)}],t)}function jt(e){var n,i,r,a,l=t._fullLayout,c=l._plots,h=l._subplots.cartesian;if(lt&&o.subplotsRegistry.splom.drag(t),st)for(n=0;n<h.length;n++)if(r=(i=c[h[n]]).xaxis,a=i.yaxis,i._scene){var d=s.simpleMap(r.range,r.r2l),f=s.simpleMap(a.range,a.r2l);i._scene.update({range:[d[0],f[0],d[1],f[1]]})}if((lt||st)&&(g(t),m(t)),ct){var p=e[2]/B._length,v=e[3]/V._length;for(n=0;n<h.length;n++){r=(i=c[h[n]]).xaxis,a=i.yaxis;var y,_,x,b,w=ot&&!a.fixedrange&&U[a._id];if(at&&!r.fixedrange&&W[r._id]?(y=p,x=L?e[0]:qt(r,y)):et.xaHash[r._id]?(y=p,x=e[0]*r._length/B._length):et.yaHash[r._id]?(y=v,x="ns"===it?-e[1]*r._length/V._length:qt(r,y,{n:"top",s:"bottom"}[it])):x=$t(r,y=Ht(r,p,v)),w?(_=v,b=C?e[1]:qt(a,_)):et.yaHash[a._id]?(_=v,b=e[1]*a._length/V._length):et.xaHash[a._id]?(_=p,b="ew"===nt?-e[0]*a._length/B._length:qt(a,_,{e:"right",w:"left"}[nt])):b=$t(a,_=Ht(a,p,v)),y||_){y||(y=1),_||(_=1);var k=r._offset-x/y,T=a._offset-b/_;i.clipRect.call(u.setTranslate,x,b).call(u.setScale,y,_),i.plot.call(u.setTranslate,k,T).call(u.setScale,1/y,1/_),y===i.xScaleFactor&&_===i.yScaleFactor||(u.setPointGroupScale(i.zoomScalePts,y,_),u.setTextPointsScale(i.zoomScaleTxt,y,_)),u.hideOutsideRangePoints(i.clipOnAxisFalseTraces,i),i.xScaleFactor=y,i.yScaleFactor=_}}}}function Ht(t,e,n){return t.fixedrange?0:at&&tt.xaHash[t._id]?e:ot&&(tt.isSubplotConstrained?tt.xaHash:tt.yaHash)[t._id]?n:0}function $t(t,e){return e?(t.range=t._r.slice(),k(t,e),qt(t,e)):0}function qt(t,e,n){return t._length*(1-e)*v[n||t.constraintoward||"middle"]}return C.length*L.length!=1&&q(gt,function(e){if(t._context._scrollZoom.cartesian||t._fullLayout._enablescrollzoom){if(Lt(),t._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();pt(),clearTimeout(Dt);var n=-e.deltaY;if(isFinite(n)||(n=e.wheelDelta/10),isFinite(n)){var i,r=Math.exp(-Math.min(Math.max(n,-20),20)/200),a=It.draglayer.select(".nsewdrag").node().getBoundingClientRect(),o=(e.clientX-a.left)/a.width,l=(a.bottom-e.clientY)/a.height;if(at){for(L||(o=.5),i=0;i<G.length;i++)c(G[i],o,r);Bt("x"),Pt[2]*=r,Pt[0]+=Pt[2]*o*(1/r-1)}if(ot){for(C||(l=.5),i=0;i<X.length;i++)c(X[i],l,r);Bt("y"),Pt[3]*=r,Pt[1]+=Pt[3]*(1-l)*(1/r-1)}jt(Pt),Nt(),Dt=setTimeout(function(){Pt=[0,0,K,J],Ft()},zt),e.preventDefault()}else s.log("Did not find wheel motion attributes: ",e)}function c(t,e,n){if(!t.fixedrange){var i=s.simpleMap(t.range,t.r2l),r=i[0]+(i[1]-i[0])*e;t.range=i.map(function(e){return t.l2r(r+(e-r)*n)})}}}),gt},makeDragger:L,makeRectDragger:S,makeZoombox:z,makeCorners:I,updateZoombox:R,xyCorners:H,transitionZoombox:B,removeZoombox:N,showDoubleClickNotifier:F,attachWheelEventHandler:q}},{"../../components/color":43,"../../components/dragelement":61,"../../components/drawing":64,"../../components/fx":82,"../../constants/alignment":138,"../../lib":159,"../../lib/clear_gl_canvases":148,"../../lib/setcursor":178,"../../lib/svg_text_utils":180,"../../plot_api/subroutines":194,"../../registry":242,"../plots":235,"./axes":203,"./axis_ids":206,"./constants":209,"./scale_zoom":219,"./select":220,d3:8,"has-passive-events":13,tinycolor2:26}],212:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../components/fx"),a=t("../../components/dragelement"),o=t("../../lib/setcursor"),s=t("./dragbox").makeDragBox,l=t("./constants").DRAGGERSIZE;n.initInteractions=function(t){var e=t._fullLayout;if(t._context.staticPlot)i.select(t).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("splom")){Object.keys(e._plots||{}).sort(function(t,n){if((e._plots[t].mainplot&&!0)===(e._plots[n].mainplot&&!0)){var i=t.split("y"),r=n.split("y");return i[0]===r[0]?Number(i[1]||1)-Number(r[1]||1):Number(i[0]||1)-Number(r[0]||1)}return e._plots[t].mainplot?1:-1}).forEach(function(n){var i=e._plots[n],o=i.xaxis,c=i.yaxis;if(!i.mainplot){var u=s(t,i,o._offset,c._offset,o._length,c._length,"ns","ew");u.onmousemove=function(e){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===n&&r.hover(t,e,n)},r.hover(t,e,n),t._fullLayout._lasthover=u,t._fullLayout._hoversubplot=n},u.onmouseout=function(e){t._dragging||(t._fullLayout._hoversubplot=null,a.unhover(t,e))},t._context.showAxisDragHandles&&(s(t,i,o._offset-l,c._offset-l,l,l,"n","w"),s(t,i,o._offset+o._length,c._offset-l,l,l,"n","e"),s(t,i,o._offset-l,c._offset+c._length,l,l,"s","w"),s(t,i,o._offset+o._length,c._offset+c._length,l,l,"s","e"))}if(t._context.showAxisDragHandles){if(n===o._mainSubplot){var h=o._mainLinePosition;"top"===o.side&&(h-=l),s(t,i,o._offset+.1*o._length,h,.8*o._length,l,"","ew"),s(t,i,o._offset,h,.1*o._length,l,"","w"),s(t,i,o._offset+.9*o._length,h,.1*o._length,l,"","e")}if(n===c._mainSubplot){var d=c._mainLinePosition;"right"!==c.side&&(d-=l),s(t,i,d,c._offset+.1*c._length,l,.8*c._length,"ns",""),s(t,i,d,c._offset+.9*c._length,l,.1*c._length,"s",""),s(t,i,d,c._offset,l,.1*c._length,"n","")}}});var o=e._hoverlayer.node();o.onmousemove=function(n){n.target=t._fullLayout._lasthover,r.hover(t,n,e._hoversubplot)},o.onclick=function(e){e.target=t._fullLayout._lasthover,r.click(t,e)},o.onmousedown=function(e){t._fullLayout._lasthover.onmousedown(e)},n.updateFx(t)}},n.updateFx=function(t){var e=t._fullLayout;o(e._draggers,"pan"===e.dragmode?"move":"crosshair")}},{"../../components/dragelement":61,"../../components/fx":82,"../../lib/setcursor":178,"./constants":209,"./dragbox":211,d3:8}],213:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("../../lib");e.exports=function(t){return function(e,n){var a=e[t];if(Array.isArray(a))for(var o=i.subplotsRegistry.cartesian,s=o.idRegex,l=n._subplots,c=l.xaxis,u=l.yaxis,h=l.cartesian,d=n._has("cartesian")||n._has("gl2d"),f=0;f<a.length;f++){var p=a[f];if(r.isPlainObject(p)){var v=p.xref,g=p.yref,m=s.x.test(v),y=s.y.test(g);if(m||y){d||r.pushUnique(n._basePlotModules,o);var _=!1;m&&-1===c.indexOf(v)&&(c.push(v),_=!0),y&&-1===u.indexOf(g)&&(u.push(g),_=!0),_&&m&&y&&h.push(v+g)}}}}}},{"../../lib":159,"../../registry":242}],214:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../registry"),a=t("../../lib"),o=t("../plots"),s=t("../../components/drawing"),l=t("../get_data").getModuleCalcData,c=t("./axis_ids"),u=t("./constants"),h=t("../../constants/xmlns_namespaces"),d=a.ensureSingle;function f(t,e,n){return a.ensureSingle(t,e,n,function(t){t.datum(n)})}function p(t,e,n,a,o){for(var c,h,d,f=u.traceLayerClasses,p=t._fullLayout,v=p._modules,g=[],m=[],y=0;y<v.length;y++){var _=(c=v[y]).name,x=r.modules[_].categories;if(x.svg){var b=c.layerName||_+"layer",w=c.plot;d=(h=l(n,w))[0],n=h[1],d.length&&g.push({i:f.indexOf(b),className:b,plotMethod:w,cdModule:d}),x.zoomScale&&m.push("."+b)}}g.sort(function(t,e){return t.i-e.i});var k=e.plot.selectAll("g.mlayer").data(g,function(t){return t.className});if(k.enter().append("g").attr("class",function(t){return t.className}).classed("mlayer",!0),k.exit().remove(),k.order(),k.each(function(n){var r=i.select(this),l=n.className;n.plotMethod(t,e,n.cdModule,r,a,o),"scatterlayer"!==l&&"barlayer"!==l&&s.setClipUrl(r,e.layerClipId,t)}),p._has("scattergl")&&(c=r.getModule("scattergl"),d=l(n,c)[0],c.plot(t,e,d)),!t._context.staticPlot&&(e._hasClipOnAxisFalse&&(e.clipOnAxisFalseTraces=e.plot.selectAll(".scatterlayer, .barlayer").selectAll(".trace")),m.length)){var T=e.plot.selectAll(m.join(",")).selectAll(".trace");e.zoomScalePts=T.selectAll("path.point"),e.zoomScaleTxt=T.selectAll(".textpoint")}}function v(t,e){var n=e.plotgroup,i=e.id,r=u.layerValue2layerClass[e.xaxis.layer],a=u.layerValue2layerClass[e.yaxis.layer],o=t._fullLayout._hasOnlyLargeSploms;if(e.mainplot){var s=e.mainplotinfo,l=s.plotgroup,h=i+"-x",p=i+"-y";e.gridlayer=s.gridlayer,e.zerolinelayer=s.zerolinelayer,d(s.overlinesBelow,"path",h),d(s.overlinesBelow,"path",p),d(s.overaxesBelow,"g",h),d(s.overaxesBelow,"g",p),e.plot=d(s.overplot,"g",i),d(s.overlinesAbove,"path",h),d(s.overlinesAbove,"path",p),d(s.overaxesAbove,"g",h),d(s.overaxesAbove,"g",p),e.xlines=l.select(".overlines-"+r).select("."+h),e.ylines=l.select(".overlines-"+a).select("."+p),e.xaxislayer=l.select(".overaxes-"+r).select("."+h),e.yaxislayer=l.select(".overaxes-"+a).select("."+p)}else if(o)e.xlines=d(n,"path","xlines-above"),e.ylines=d(n,"path","ylines-above"),e.xaxislayer=d(n,"g","xaxislayer-above"),e.yaxislayer=d(n,"g","yaxislayer-above");else{var v=d(n,"g","layer-subplot");e.shapelayer=d(v,"g","shapelayer"),e.imagelayer=d(v,"g","imagelayer"),e.gridlayer=d(n,"g","gridlayer"),e.zerolinelayer=d(n,"g","zerolinelayer"),d(n,"path","xlines-below"),d(n,"path","ylines-below"),e.overlinesBelow=d(n,"g","overlines-below"),d(n,"g","xaxislayer-below"),d(n,"g","yaxislayer-below"),e.overaxesBelow=d(n,"g","overaxes-below"),e.plot=d(n,"g","plot"),e.overplot=d(n,"g","overplot"),e.xlines=d(n,"path","xlines-above"),e.ylines=d(n,"path","ylines-above"),e.overlinesAbove=d(n,"g","overlines-above"),d(n,"g","xaxislayer-above"),d(n,"g","yaxislayer-above"),e.overaxesAbove=d(n,"g","overaxes-above"),e.xlines=n.select(".xlines-"+r),e.ylines=n.select(".ylines-"+a),e.xaxislayer=n.select(".xaxislayer-"+r),e.yaxislayer=n.select(".yaxislayer-"+a)}o||(f(e.gridlayer,"g",e.xaxis._id),f(e.gridlayer,"g",e.yaxis._id),e.gridlayer.selectAll("g").map(function(t){return t[0]}).sort(c.idSort)),e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function g(t,e){if(t){var n={};for(var r in t.each(function(t){var r=t[0];i.select(this).remove(),m(r,e),n[r]=!0}),e._plots)for(var a=e._plots[r].overlays||[],o=0;o<a.length;o++){var s=a[o];n[s.id]&&s.plot.selectAll(".trace").remove()}}}function m(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=u.idRegex,n.attrRegex=u.attrRegex,n.attributes=t("./attributes"),n.layoutAttributes=t("./layout_attributes"),n.supplyLayoutDefaults=t("./layout_defaults"),n.transitionAxes=t("./transition_axes"),n.finalizeSubplots=function(t,e){var n,i,r,o=e._subplots,s=o.xaxis,l=o.yaxis,h=o.cartesian,d=h.concat(o.gl2d||[]),f={},p={};for(n=0;n<d.length;n++){var v=d[n].split("y");f[v[0]]=1,p["y"+v[1]]=1}for(n=0;n<s.length;n++)f[i=s[n]]||(r=(t[c.id2name(i)]||{}).anchor,u.idRegex.y.test(r)||(r="y"),h.push(i+r),d.push(i+r),p[r]||(p[r]=1,a.pushUnique(l,r)));for(n=0;n<l.length;n++)p[r=l[n]]||(i=(t[c.id2name(r)]||{}).anchor,u.idRegex.x.test(i)||(i="x"),h.push(i+r),d.push(i+r),f[i]||(f[i]=1,a.pushUnique(s,i)));if(!d.length){for(var g in i="",r="",t)u.attrRegex.test(g)&&("x"===g.charAt(0)?(!i||+g.substr(5)<+i.substr(5))&&(i=g):(!r||+g.substr(5)<+r.substr(5))&&(r=g));i=i?c.name2id(i):"x",r=r?c.name2id(r):"y",s.push(i),l.push(r),h.push(i+r)}},n.plot=function(t,e,n,i){var r,a=t._fullLayout,o=a._subplots.cartesian,s=t.calcdata;if(null!==e){if(!Array.isArray(e))for(e=[],r=0;r<s.length;r++)e.push(r);for(r=0;r<o.length;r++){for(var l,c=o[r],u=a._plots[c],h=[],d=0;d<s.length;d++){var f=s[d],v=f[0].trace;v.xaxis+v.yaxis===c&&((-1!==e.indexOf(v.index)||v.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(v.fill)&&-1===h.indexOf(l)&&h.push(l),h.push(f)),l=f)}p(t,u,h,n,i)}}},n.clean=function(t,e,n,i){var r,a,o,s=i._plots||{},l=e._plots||{},u=i._subplots||{};if(i._hasOnlyLargeSploms&&!e._hasOnlyLargeSploms)for(o in s)(r=s[o]).plotgroup&&r.plotgroup.remove();var h=i._has&&i._has("gl"),d=e._has&&e._has("gl");if(h&&!d)for(o in s)(r=s[o])._scene&&r._scene.destroy();if(u.xaxis&&u.yaxis){var f=c.listIds({_fullLayout:i});for(a=0;a<f.length;a++){var p=f[a];e[c.id2name(p)]||i._infolayer.selectAll(".g-"+p+"title").remove()}}var v=i._has&&i._has("cartesian"),y=e._has&&e._has("cartesian");if(v&&!y)g(i._cartesianlayer.selectAll(".subplot"),i),i._defs.selectAll(".axesclip").remove(),delete i._axisConstraintGroups;else if(u.cartesian)for(a=0;a<u.cartesian.length;a++){var _=u.cartesian[a];l[_]||(i._cartesianlayer.selectAll("."+_+",."+_+"-x,."+_+"-y").remove(),m(_,i))}},n.drawFramework=function(t){var e=t._fullLayout,n=function(t){var e,n,i,r,a,o,s=t._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],h=[];for(e=0;e<c;e++){var d=(a=(r=s._plots[i=l[e]]).xaxis)._mainAxis._id+(o=r.yaxis)._mainAxis._id,f=s._plots[d];r.overlays=[],d!==i&&f?(r.mainplot=d,r.mainplotinfo=f,h.push(i)):(r.mainplot=void 0,r.mainPlotinfo=void 0,u.push(i))}for(e=0;e<h.length;e++)(r=s._plots[i=h[e]]).mainplotinfo.overlays.push(r);var p=u.concat(h),v=new Array(c);for(e=0;e<c;e++){var g=[i=p[e],(a=(r=s._plots[i]).xaxis).layer,(o=r.yaxis).layer,a.overlaying||"",o.overlaying||""];for(n=0;n<r.overlays.length;n++)g.push(r.overlays[n].id);v[e]=g}return v}(t),r=e._cartesianlayer.selectAll(".subplot").data(n,String);r.enter().append("g").attr("class",function(t){return"subplot "+t[0]}),r.order(),r.exit().call(g,e),r.each(function(n){var r=n[0],a=e._plots[r];a.plotgroup=i.select(this),v(t,a),a.draglayer=d(e._draggers,"g",r)})},n.rangePlot=function(t,e,n){v(t,e),p(t,e,n),o.style(t)},n.toSVG=function(t){var e=t._fullLayout._glimages,n=i.select(t).selectAll(".svg-container");n.filter(function(t,e){return e===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:h.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":64,"../../constants/xmlns_namespaces":141,"../../lib":159,"../../registry":242,"../get_data":231,"../plots":235,"./attributes":201,"./axis_ids":206,"./constants":209,"./graph_interact":212,"./layout_attributes":215,"./layout_defaults":216,"./transition_axes":225,d3:8}],215:[function(t,e,n){"use strict";var i=t("../font_attributes"),r=t("../../components/color/attributes"),a=t("../../components/drawing/attributes").dash,o=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray,l=t("./constants");e.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:r.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:i({editType:"ticks"}),editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"calc"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:r.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:i({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:r.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:r.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:r.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:r.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:i({editType:"ticks"})}}},{"../../components/color/attributes":42,"../../components/drawing/attributes":63,"../../lib/extend":153,"../../plot_api/plot_template":193,"../font_attributes":229,"./constants":209}],216:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../components/color"),a=t("../../plot_api/plot_template"),o=t("../layout_attributes"),s=t("./layout_attributes"),l=t("./type_defaults"),c=t("./axis_defaults"),u=t("./constraints").handleConstraintDefaults,h=t("./position_defaults"),d=t("./axis_ids"),f=d.id2name,p=d.name2id,v=t("../../registry"),g=v.traceIs,m=v.getComponentMethod;function y(t,e,n){Array.isArray(t[e])?t[e].push(n):t[e]=[n]}e.exports=function(t,e,n){var d,v,_={},x={},b={},w={},k={};for(d=0;d<n.length;d++){var T=n[d];if(g(T,"cartesian")||g(T,"gl2d")){var M,A;if(T.xaxis)y(_,M=f(T.xaxis),T);else if(T.xaxes)for(v=0;v<T.xaxes.length;v++)y(_,f(T.xaxes[v]),T);if(T.yaxis)y(_,A=f(T.yaxis),T);else if(T.yaxes)for(v=0;v<T.yaxes.length;v++)y(_,f(T.yaxes[v]),T);g(T,"carpet")&&("carpet"!==T.type||T._cheater)||M&&(b[M]=1),"carpet"===T.type&&T._cheater&&M&&(x[M]=1),g(T,"2dMap")&&(w[M]=1,w[A]=1),g(T,"oriented")&&(k["h"===T.orientation?A:M]=1)}}var C=e._subplots,L=C.xaxis,S=C.yaxis,E=i.simpleMap(L,f),O=i.simpleMap(S,f),P=E.concat(O),D=r.background;L.length&&S.length&&(D=i.coerce(t,e,o,"plot_bgcolor"));var z,I,R,B,N=r.combine(D,e.paper_bgcolor);function F(t,e){return i.coerce(R,B,s,t,e)}function j(t,e){return i.coerce2(R,B,s,t,e)}function H(t){return"x"===t?S:L}var $={x:H("x"),y:H("y")},q=$.x.concat($.y);function Z(e,n){for(var i="x"===e?E:O,r=[],a=0;a<i.length;a++){var o=i[a];o===n||(t[o]||{}).overlaying||r.push(p(o))}return r}for(d=0;d<P.length;d++){I=(z=P[d]).charAt(0),i.isPlainObject(t[z])||(t[z]={}),R=t[z],B=a.newContainer(e,z,I+"axis");var V=_[z]||[];B._traceIndices=V.map(function(t){return t._expandedIndex}),B._annIndices=[],B._shapeIndices=[],B._imgIndices=[],B._subplotsWith=[],B._counterAxes=[],B._name=B._attr=z;var W=B._id=p(z),U=Z(I,z),G={letter:I,font:e.font,outerTicks:w[z],showGrid:!k[z],data:V,bgColor:N,calendar:e.calendar,automargin:!0,cheateronly:"x"===I&&x[z]&&!b[z],splomStash:((e._splomAxes||{})[I]||{})[W]};F("uirevision",e.uirevision),l(R,B,F,G),c(R,B,F,G,e);var X=j("spikecolor"),Y=j("spikethickness"),Q=j("spikedash"),K=j("spikemode"),J=j("spikesnap");F("showspikes",!!(X||Y||Q||K||J))||(delete B.spikecolor,delete B.spikethickness,delete B.spikedash,delete B.spikemode,delete B.spikesnap),h(R,B,F,{letter:I,counterAxes:$[I],overlayableAxes:U,grid:e.grid}),B._input=R}var tt=m("rangeslider","handleDefaults"),et=m("rangeselector","handleDefaults");for(d=0;d<E.length;d++)R=t[z=E[d]],B=e[z],tt(t,e,z),"date"===B.type&&et(R,B,e,O,B.calendar),F("fixedrange");for(d=0;d<O.length;d++){R=t[z=O[d]];var nt=e[f((B=e[z]).anchor)];F("fixedrange",m("rangeslider","isVisible")(nt))}var it=e._axisConstraintGroups=[],rt=e._axisMatchGroups=[];for(d=0;d<P.length;d++)I=(z=P[d]).charAt(0),u(R=t[z],B=e[z],F,q,e);for(d=0;d<rt.length;d++){var at,ot=rt[d],st=null,lt=null;for(at in ot)(B=e[f(at)]).matches||(st=B.range,lt=B.autorange);if(null===st||null===lt)for(at in ot){st=(B=e[f(at)]).range,lt=B.autorange;break}for(at in ot)(B=e[f(at)]).matches&&(B.range=st.slice(),B.autorange=lt),B._matchGroup=ot;if(it.length)for(at in ot)for(v=0;v<it.length;v++){var ct=it[v];for(var ut in ct)at===ut&&(i.warn("Axis "+ut+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete ct[ut],Object.keys(ct).length<2&&it.splice(v,1))}}}},{"../../components/color":43,"../../lib":159,"../../plot_api/plot_template":193,"../../registry":242,"../layout_attributes":233,"./axis_defaults":205,"./axis_ids":206,"./constraints":210,"./layout_attributes":215,"./position_defaults":218,"./type_defaults":226}],217:[function(t,e,n){"use strict";var i=t("tinycolor2").mix,r=t("../../components/color/attributes").lightFraction,a=t("../../lib");e.exports=function(t,e,n,o){var s=(o=o||{}).dfltColor;function l(n,i){return a.coerce2(t,e,o.attributes,n,i)}var c=l("linecolor",s),u=l("linewidth");n("showline",o.showLine||!!c||!!u)||(delete e.linecolor,delete e.linewidth);var h=l("gridcolor",i(s,o.bgColor,o.blend||r).toRgbString()),d=l("gridwidth");if(n("showgrid",o.showGrid||!!h||!!d)||(delete e.gridcolor,delete e.gridwidth),!o.noZeroLine){var f=l("zerolinecolor",s),p=l("zerolinewidth");n("zeroline",o.showGrid||!!f||!!p)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":42,"../../lib":159,tinycolor2:26}],218:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib");e.exports=function(t,e,n,a){var o,s,l,c,u=a.counterAxes||[],h=a.overlayableAxes||[],d=a.letter,f=a.grid;f&&(o=f._anchors[e._id],(s=f._domains[d][f._axisMap[e._id]])&&(l=f[d+"side"].split(" ")[0],c=f.domain[d]["right"===l||"top"===l?1:0])),s=s||[0,1],o=o||(i(t.position)?"free":u[0]||"free"),l=l||("x"===d?"bottom":"left"),c=c||0,"free"===r.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:o}},"anchor")&&n("position",c),r.coerce(t,e,{side:{valType:"enumerated",values:"x"===d?["bottom","top"]:["left","right"],dflt:l}},"side");var p=!1;if(h.length&&(p=r.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(h),dflt:!1}},"overlaying")),!p){var v=n("domain",s);v[0]>v[1]-1/4096&&(e.domain=s),r.noneOrAll(t.domain,e.domain,s)}return n("layer"),e}},{"../../lib":159,"fast-isnumeric":10}],219:[function(t,e,n){"use strict";var i=t("../../constants/alignment").FROM_BL;e.exports=function(t,e,n){void 0===n&&(n=i[t.constraintoward||"center"]);var r=[t.r2l(t.range[0]),t.r2l(t.range[1])],a=r[0]+(r[1]-r[0])*n;t.range=t._input.range=[t.l2r(a+(r[0]-a)*e),t.l2r(a+(r[1]-a)*e)]}},{"../../constants/alignment":138}],220:[function(t,e,n){"use strict";var i=t("polybooljs"),r=t("../../registry"),a=t("../../components/color"),o=t("../../components/fx"),s=t("../../lib/polygon"),l=t("../../lib/throttle"),c=t("../../components/fx/helpers").makeEventData,u=t("./axis_ids").getFromId,h=t("../../lib/clear_gl_canvases"),d=t("../../plot_api/subroutines").redrawReglTraces,f=t("./constants"),p=f.MINSELECT,v=s.filter,g=s.tester;function m(t){return t._id}function y(t,e,n,i,r,a,o){var s,l,c,u,h,d,f,p,v,g=e._hoverdata,m=e._fullLayout.clickmode.indexOf("event")>-1,y=[];if(function(t){return t&&Array.isArray(t)&&!0!==t[0].hoverOnBox}(g)){w(t,e,a);var _=function(t,e){var n,i,r=t[0],a=-1,o=[];for(i=0;i<e.length;i++)if(r.fullData._expandedIndex===(n=e[i]).cd[0].trace._expandedIndex){if(!0===r.hoverOnBox)break;void 0!==r.pointNumber?a=r.pointNumber:void 0!==r.binNumber&&(a=r.binNumber,o=r.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:n}}(g,s=T(e,n,i,r));if(_.pointNumbers.length>0?function(t,e){var n,i,r,a=[];for(r=0;r<t.length;r++)(n=t[r]).cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0&&a.push(n);if(1===a.length&&a[0]===e.searchInfo&&(i=e.searchInfo.cd[0].trace).selectedpoints.length===e.pointNumbers.length){for(r=0;r<e.pointNumbers.length;r++)if(i.selectedpoints.indexOf(e.pointNumbers[r])<0)return!1;return!0}return!1}(s,_):function(t){var e,n,i=0;for(n=0;n<t.length;n++)if((e=t[n].cd[0].trace).selectedpoints){if(e.selectedpoints.length>1)return!1;if((i+=e.selectedpoints.length)>1)return!1}return 1===i}(s)&&(d=A(_))){for(o&&o.remove(),v=0;v<s.length;v++)(l=s[v])._module.selectPoints(l,!1);C(e,s),k(a),m&&e.emit("plotly_deselect",null)}else{for(f=t.shiftKey&&(void 0!==d?d:A(_)),u=b(a.selectionDefs.concat([c={pointNumber:_.pointNumber,searchInfo:_.searchInfo,subtract:f}])),v=0;v<s.length;v++)if(h=L(s[v]._module.selectPoints(s[v],u),s[v]),y.length)for(var x=0;x<h.length;x++)y.push(h[x]);else y=h;C(e,s,p={points:y}),c&&a&&a.selectionDefs.push(c),o&&M(a.mergedPolygons,o),m&&e.emit("plotly_selected",p)}}}function _(t){return"pointNumber"in t&&"searchInfo"in t}function x(t){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,n,i,r){return r.cd[0].trace._expandedIndex===t.searchInfo.cd[0].trace._expandedIndex&&i===t.pointNumber},isRect:!1,degenerate:!1,subtract:t.subtract}}function b(t){for(var e=[],n=_(t[0])?0:t[0][0][0],i=n,r=_(t[0])?0:t[0][0][1],a=r,o=0;o<t.length;o++)if(_(t[o]))e.push(x(t[o]));else{var l=s.tester(t[o]);l.subtract=t[o].subtract,e.push(l),n=Math.min(n,l.xmin),i=Math.max(i,l.xmax),r=Math.min(r,l.ymin),a=Math.max(a,l.ymax)}return{xmin:n,xmax:i,ymin:r,ymax:a,pts:[],contains:function(t,n,i,r){for(var a=!1,o=0;o<e.length;o++)e[o].contains(t,n,i,r)&&(a=!1===e[o].subtract);return a},isRect:!1,degenerate:!1}}function w(t,e,n){var i=e._fullLayout,r=i._zoomlayer,a=n.plotinfo,o=i._lastSelectedSubplot&&i._lastSelectedSubplot===a.id,s=t.shiftKey||t.altKey;o&&s&&a.selection&&a.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=a.selection.selectionDefs,n.mergedPolygons=a.selection.mergedPolygons):s&&a.selection||k(n),o||(S(r),i._lastSelectedSubplot=a.id)}function k(t){var e=t.plotinfo;e.selection={},e.selection.selectionDefs=t.selectionDefs=[],e.selection.mergedPolygons=t.mergedPolygons=[]}function T(t,e,n,i){var r,a,o,s=[],l=e.map(m),c=n.map(m);for(o=0;o<t.calcdata.length;o++)if(!0===(a=(r=t.calcdata[o])[0].trace).visible&&a._module&&a._module.selectPoints)if(!i||a.subplot!==i&&a.geo!==i)if("splom"===a.type&&a._xaxes[l[0]]&&a._yaxes[c[0]]){var h=d(a._module,r,e[0],n[0]);h.scene=t._fullLayout._splomScenes[a.uid],s.push(h)}else{if(-1===l.indexOf(a.xaxis))continue;if(-1===c.indexOf(a.yaxis))continue;s.push(d(a._module,r,u(t,a.xaxis),u(t,a.yaxis)))}else s.push(d(a._module,r,e[0],n[0]));return s;function d(t,e,n,i){return{_module:t,cd:e,xaxis:n,yaxis:i}}}function M(t,e){var n,i,r=[];for(n=0;n<t.length;n++){var a=t[n];r.push(a.join("L")+"L"+a[0])}i=t.length>0?"M"+r.join("M")+"Z":"M0,0Z",e.attr("d",i)}function A(t){var e=t.searchInfo.cd[0].trace,n=t.pointNumbers;return!!e.selectedpoints&&e.selectedpoints.indexOf(n.length>0?n[0]:t.pointNumber)>-1}function C(t,e,n){var i,a,o,s;for(i=0;i<e.length;i++){var l=e[i].cd[0].trace._fullInput,c=t._fullLayout._tracePreGUI[l.uid];void 0===c.selectedpoints&&(c.selectedpoints=l._input.selectedpoints||null)}if(n){var u=n.points||[];for(i=0;i<e.length;i++)(s=e[i].cd[0].trace)._input.selectedpoints=s._fullInput.selectedpoints=[],s._fullInput!==s&&(s.selectedpoints=[]);for(i=0;i<u.length;i++){var f=u[i],p=f.data,v=f.fullData;f.pointIndices?([].push.apply(p.selectedpoints,f.pointIndices),s._fullInput!==s&&[].push.apply(v.selectedpoints,f.pointIndices)):(p.selectedpoints.push(f.pointIndex),s._fullInput!==s&&v.selectedpoints.push(f.pointIndex))}}else for(i=0;i<e.length;i++)delete(s=e[i].cd[0].trace).selectedpoints,delete s._input.selectedpoints,s._fullInput!==s&&delete s._fullInput.selectedpoints;var g=!1;for(i=0;i<e.length;i++){s=(o=(a=e[i]).cd)[0].trace,r.traceIs(s,"regl")&&(g=!0);var m=a._module,y=m.styleOnSelect||m.style;y&&y(t,o)}g&&(h(t),d(t))}function L(t,e){if(Array.isArray(t))for(var n=e.cd,i=e.cd[0].trace,r=0;r<t.length;r++)t[r]=c(t[r],i,n);return t}function S(t){t.selectAll(".select-outline").remove()}e.exports={prepSelect:function(t,e,n,r,s){var c,u,h,d,m,_,x,A=r.gd,S=A._fullLayout,E=S._zoomlayer,O=r.element.getBoundingClientRect(),P=r.plotinfo,D=P.xaxis._offset,z=P.yaxis._offset,I=e-O.left,R=n-O.top,B=I,N=R,F="M"+I+","+R,j=r.xaxes[0]._length,H=r.yaxes[0]._length,$=r.xaxes.concat(r.yaxes),q=t.altKey;w(t,A,r),"lasso"===s&&(c=v([[I,R]],f.BENDPX));var Z=E.selectAll("path.select-outline-"+P.id).data([1,2]);Z.enter().append("path").attr("class",function(t){return"select-outline select-outline-"+t+" select-outline-"+P.id}).attr("transform","translate("+D+", "+z+")").attr("d",F+"Z");var V,W=E.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1}).attr("transform","translate("+D+", "+z+")").attr("d","M0,0Z"),U=S._uid+f.SELECTID,G=[],X=T(A,r.xaxes,r.yaxes,r.subplot);function Y(t){var e="y"===t._id.charAt(0)?1:0;return function(n){return t.p2d(n[e])}}function Q(t,e){return t-e}V=P.fillRangeItems?P.fillRangeItems:"select"===s?function(t,e){var n=t.range={};for(m=0;m<$.length;m++){var i=$[m],r=i._id.charAt(0);n[i._id]=[i.p2d(e[r+"min"]),i.p2d(e[r+"max"])].sort(Q)}}:function(t,e,n){var i=t.lassoPoints={};for(m=0;m<$.length;m++){var r=$[m];i[r._id]=n.filtered.map(Y(r))}},r.moveFn=function(t,e){B=Math.max(0,Math.min(j,t+I)),N=Math.max(0,Math.min(H,e+R));var n,a=Math.abs(B-I),o=Math.abs(N-R);"select"===s?"h"===(n="any"===S.selectdirection?o<Math.min(.6*a,p)?"h":a<Math.min(.6*o,p)?"v":"d":S.selectdirection)?((d=[[I,0],[I,H],[B,H],[B,0]]).xmin=Math.min(I,B),d.xmax=Math.max(I,B),d.ymin=Math.min(0,H),d.ymax=Math.max(0,H),W.attr("d","M"+d.xmin+","+(R-p)+"h-4v"+2*p+"h4ZM"+(d.xmax-1)+","+(R-p)+"h4v"+2*p+"h-4Z")):"v"===n?((d=[[0,R],[0,N],[j,N],[j,R]]).xmin=Math.min(0,j),d.xmax=Math.max(0,j),d.ymin=Math.min(R,N),d.ymax=Math.max(R,N),W.attr("d","M"+(I-p)+","+d.ymin+"v-4h"+2*p+"v4ZM"+(I-p)+","+(d.ymax-1)+"v4h"+2*p+"v-4Z")):"d"===n&&((d=[[I,R],[I,N],[B,N],[B,R]]).xmin=Math.min(I,B),d.xmax=Math.max(I,B),d.ymin=Math.min(R,N),d.ymax=Math.max(R,N),W.attr("d","M0,0Z")):"lasso"===s&&(c.addPt([B,N]),d=c.filtered),r.selectionDefs&&r.selectionDefs.length?(h=function(t,e,n){return q?i.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions:i.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}(r.mergedPolygons,d),d.subtract=q,u=b(r.selectionDefs.concat([d]))):(h=[d],u=g(d)),M(h,Z),l.throttle(U,f.SELECTDELAY,function(){var t;G=[];var e,n=[];for(m=0;m<X.length;m++)if(e=(_=X[m])._module.selectPoints(_,u),n.push(e),t=L(e,_),G.length)for(var i=0;i<t.length;i++)G.push(t[i]);else G=t;C(A,X,x={points:G}),V(x,d,c),r.gd.emit("plotly_selecting",x)})},r.clickFn=function(t,e){var n=S.clickmode;W.remove(),l.done(U).then(function(){if(l.clear(U),2===t){for(Z.remove(),m=0;m<X.length;m++)(_=X[m])._module.selectPoints(_,!1);C(A,X),k(r),A.emit("plotly_deselect",null)}else n.indexOf("select")>-1&&y(e,A,r.xaxes,r.yaxes,r.subplot,r,Z),"event"===n&&A.emit("plotly_selected",void 0);o.click(A,e)})},r.doneFn=function(){W.remove(),l.done(U).then(function(){l.clear(U),r.gd.emit("plotly_selected",x),d&&r.selectionDefs&&(d.subtract=q,r.selectionDefs.push(d),r.mergedPolygons.length=0,[].push.apply(r.mergedPolygons,h))})}},clearSelect:S,selectOnClick:y}},{"../../components/color":43,"../../components/fx":82,"../../components/fx/helpers":78,"../../lib/clear_gl_canvases":148,"../../lib/polygon":171,"../../lib/throttle":181,"../../plot_api/subroutines":194,"../../registry":242,"./axis_ids":206,"./constants":209,polybooljs:17}],221:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("../../lib"),o=a.cleanNumber,s=a.ms2DateTime,l=a.dateTime2ms,c=a.ensureNumber,u=a.isArrayOrTypedArray,h=t("../../constants/numerical"),d=h.FP_SAFE,f=h.BADNUM,p=h.LOG_CLIP,v=t("./constants"),g=t("./axis_ids");function m(t){return Math.pow(10,t)}function y(t){return null!=t}e.exports=function(t,e){e=e||{};var n=t._id||"x",h=n.charAt(0);function _(e,n){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&n&&t.range&&2===t.range.length){var i=t.range[0],r=t.range[1];return.5*(i+r-2*p*Math.abs(i-r))}return f}function x(e,n,i){var o=l(e,i||t.calendar);if(o===f){if(!r(e))return f;e=+e;var s=Math.floor(10*a.mod(e+.05,1)),c=Math.round(e-s/10);o=l(new Date(c))+s/10}return o}function b(e,n,i){return s(e,n,i||t.calendar)}function w(e){return t._categories[Math.round(e)]}function k(e){if(y(e)){if(void 0===t._categoriesMap&&(t._categoriesMap={}),void 0!==t._categoriesMap[e])return t._categoriesMap[e];t._categories.push(e);var n=t._categories.length-1;return t._categoriesMap[e]=n,n}return f}function T(e){if(t._categoriesMap)return t._categoriesMap[e]}function M(t){var e=T(t);return void 0!==e?e:r(t)?+t:void 0}function A(e){return r(e)?i.round(t._b+t._m*e,2):f}function C(e){return(e-t._b)/t._m}t.c2l="log"===t.type?_:c,t.l2c="log"===t.type?m:c,t.l2p=A,t.p2l=C,t.c2p="log"===t.type?function(t,e){return A(_(t,e))}:A,t.p2c="log"===t.type?function(t){return m(C(t))}:C,-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=o,t.c2d=t.c2r=t.l2d=t.l2r=c,t.d2p=t.r2p=function(e){return t.l2p(o(e))},t.p2d=t.p2r=C,t.cleanPos=c):"log"===t.type?(t.d2r=t.d2l=function(t,e){return _(o(t),e)},t.r2d=t.r2c=function(t){return m(o(t))},t.d2c=t.r2l=o,t.c2d=t.l2r=c,t.c2r=_,t.l2d=m,t.d2p=function(e,n){return t.l2p(t.d2r(e,n))},t.p2d=function(t){return m(C(t))},t.r2p=function(e){return t.l2p(o(e))},t.p2r=C,t.cleanPos=c):"date"===t.type?(t.d2r=t.r2d=a.identity,t.d2c=t.r2c=t.d2l=t.r2l=x,t.c2d=t.c2r=t.l2d=t.l2r=b,t.d2p=t.r2p=function(e,n,i){return t.l2p(x(e,0,i))},t.p2d=t.p2r=function(t,e,n){return b(C(t),e,n)},t.cleanPos=function(e){return a.cleanDate(e,f,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=k,t.r2d=t.c2d=t.l2d=w,t.d2r=t.d2l_noadd=M,t.r2c=function(e){var n=M(e);return void 0!==n?n:t.fraction2r(.5)},t.l2r=t.c2r=c,t.r2l=M,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return w(C(t))},t.r2p=t.d2p,t.p2r=C,t.cleanPos=function(t){return"string"==typeof t&&""!==t?t:c(t)}):"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=w,t.d2r=t.d2l_noadd=M,t.r2c=function(e){var n=M(e);return void 0!==n?n:t.fraction2r(.5)},t.r2c_just_indices=T,t.l2r=t.c2r=c,t.r2l=M,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return w(C(t))},t.r2p=t.d2p,t.p2r=C,t.cleanPos=function(t){return Array.isArray(t)||"string"==typeof t&&""!==t?t:c(t)},t.setupMultiCategory=function(i){var r,o,s=t._traceIndices,l=e._axisMatchGroups;if(l&&l.length&&0===t._categories.length)for(r=0;r<l.length;r++){var c=l[r];if(c[n])for(var d in c)if(d!==n){var f=e[g.id2name(d)];s=s.concat(f._traceIndices)}}var p=[[0,{}],[0,{}]],v=[];for(r=0;r<s.length;r++){var m=i[s[r]];if(h in m){var _=m[h],x=m._length||a.minRowLength(_);if(u(_[0])&&u(_[1]))for(o=0;o<x;o++){var b=_[0][o],w=_[1][o];y(b)&&y(w)&&(v.push([b,w]),b in p[0][1]||(p[0][1][b]=p[0][0]++),w in p[1][1]||(p[1][1][w]=p[1][0]++))}}}for(v.sort(function(t,e){var n=p[0][1],i=n[t[0]]-n[e[0]];if(i)return i;var r=p[1][1];return r[t[1]]-r[e[1]]}),r=0;r<v.length;r++)k(v[r])}),t.fraction2r=function(e){var n=t.r2l(t.range[0]),i=t.r2l(t.range[1]);return t.l2r(n+e*(i-n))},t.r2fraction=function(e){var n=t.r2l(t.range[0]),i=t.r2l(t.range[1]);return(t.r2l(e)-n)/(i-n)},t.cleanRange=function(e,n){n||(n={}),e||(e="range");var i,o,s=a.nestedProperty(t,e).get();if(o=(o="date"===t.type?a.dfltRange(t.calendar):"y"===h?v.DFLTRANGEY:n.dfltRange||v.DFLTRANGEX).slice(),s&&2===s.length)for("date"===t.type&&(s[0]=a.cleanDate(s[0],f,t.calendar),s[1]=a.cleanDate(s[1],f,t.calendar)),i=0;i<2;i++)if("date"===t.type){if(!a.isDateTime(s[i],t.calendar)){t[e]=o;break}if(t.r2l(s[0])===t.r2l(s[1])){var l=a.constrain(t.r2l(s[0]),a.MIN_MS+1e3,a.MAX_MS-1e3);s[0]=t.l2r(l-1e3),s[1]=t.l2r(l+1e3);break}}else{if(!r(s[i])){if(!r(s[1-i])){t[e]=o;break}s[i]=s[1-i]*(i?10:.1)}if(s[i]<-d?s[i]=-d:s[i]>d&&(s[i]=d),s[0]===s[1]){var c=Math.max(1,Math.abs(1e-6*s[0]));s[0]-=c,s[1]+=c}}else a.nestedProperty(t,e).set(o)},t.setScale=function(n){var i=e._size;if(t.overlaying){var r=g.getFromId({_fullLayout:e},t.overlaying);t.domain=r.domain}var a=n&&t._r?"_r":"range",o=t.calendar;t.cleanRange(a);var s=t.r2l(t[a][0],o),l=t.r2l(t[a][1],o);if("y"===h?(t._offset=i.t+(1-t.domain[1])*i.h,t._length=i.h*(t.domain[1]-t.domain[0]),t._m=t._length/(s-l),t._b=-t._m*l):(t._offset=i.l+t.domain[0]*i.w,t._length=i.w*(t.domain[1]-t.domain[0]),t._m=t._length/(l-s),t._b=-t._m*s),!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw e._replotting=!1,new Error("Something went wrong with axis scaling")},t.makeCalcdata=function(e,n){var i,r,o,s,l=t.type,c="date"===l&&e[n+"calendar"];if(n in e){if(i=e[n],s=e._length||a.minRowLength(i),a.isTypedArray(i)&&("linear"===l||"log"===l)){if(s===i.length)return i;if(i.subarray)return i.subarray(0,s)}if("multicategory"===l)return function(t,e){for(var n=new Array(e),i=0;i<e;i++)n[i]=T([(t[0]||[])[i],(t[1]||[])[i]]);return n}(i,s);for(r=new Array(s),o=0;o<s;o++)r[o]=t.d2c(i[o],0,c)}else{var u=n+"0"in e?t.d2c(e[n+"0"],0,c):0,h=e["d"+n]?Number(e["d"+n]):1;for(i=e[{x:"y",y:"x"}[n]],s=e._length||i.length,r=new Array(s),o=0;o<s;o++)r[o]=u+o*h}return r},t.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&r(t.r2l(e[0]))&&r(t.r2l(e[1]))},t.isPtWithinRange=function(e,n){var i=t.c2l(e[h],null,n),r=t.r2l(t.range[0]),a=t.r2l(t.range[1]);return r<a?r<=i&&i<=a:a<=i&&i<=r},t.clearCalc=function(){var i=function(){t._categories=[],t._categoriesMap={}},r=e._axisMatchGroups;if(r&&r.length){for(var a=!1,o=0;o<r.length;o++){var s=r[o];if(s[n]){a=!0;var l=null,c=null;for(var u in s){var h=e[g.id2name(u)];if(h._categories){l=h._categories,c=h._categoriesMap;break}}l&&c?(t._categories=l,t._categoriesMap=c):i();break}}a||i()}else i();if(t._initialCategories)for(var d=0;d<t._initialCategories.length;d++)k(t._initialCategories[d])};var L=e._d3locale;"date"===t.type&&(t._dateFormat=L?L.timeFormat.utc:i.time.format.utc,t._extraFormat=e._extraFormat),t._separators=e.separators,t._numFormat=L?L.numberFormat:i.format,delete t._minDtick,delete t._forceTick0}},{"../../constants/numerical":140,"../../lib":159,"./axis_ids":206,"./constants":209,d3:8,"fast-isnumeric":10}],222:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./layout_attributes"),a=t("../array_container_defaults");function o(t,e){function n(n,a){return i.coerce(t,e,r.tickformatstops,n,a)}n("enabled")&&(n("dtickrange"),n("value"))}e.exports=function(t,e,n,s,l){var c=function(t){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(e.every(function(n){return t[n]===t[e[0]]})||1===e.length)return t[e[0]]}(t);if(n("tickprefix")&&n("showtickprefix",c),n("ticksuffix",l.tickSuffixDflt)&&n("showticksuffix",c),n("showticklabels")){var u=l.font||{},h=e.color;if(i.coerceFont(n,"tickfont",{family:u.family,size:u.size,color:h&&h!==r.color.dflt?h:u.color}),n("tickangle"),"category"!==s){var d=n("tickformat"),f=t.tickformatstops;Array.isArray(f)&&f.length&&a(t,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),d||"date"===s||(n("showexponent",c),n("exponentformat"),n("separatethousands"))}}}},{"../../lib":159,"../array_container_defaults":199,"./layout_attributes":215}],223:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./layout_attributes");e.exports=function(t,e,n,a){var o=i.coerce2(t,e,r,"ticklen"),s=i.coerce2(t,e,r,"tickwidth"),l=i.coerce2(t,e,r,"tickcolor",e.color);n("ticks",a.outerTicks||o||s||l?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":159,"./layout_attributes":215}],224:[function(t,e,n){"use strict";var i=t("./clean_ticks");e.exports=function(t,e,n,r){var a;if("auto"===(a="array"!==t.tickmode||"log"!==r&&"date"!==r?n("tickmode",Array.isArray(t.tickvals)?"array":t.dtick?"linear":"auto"):e.tickmode="auto"))n("nticks");else if("linear"===a){var o=e.dtick=i.dtick(t.dtick,r);e.tick0=i.tick0(t.tick0,r,e.calendar,o)}else"multicategory"!==r&&(void 0===n("tickvals")?e.tickmode="auto":n("ticktext"))}},{"./clean_ticks":208}],225:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../registry"),a=t("../../components/drawing"),o=t("./axes");e.exports=function(t,e,n,s){var l=t._fullLayout;if(0!==e.length){var c,u,h,d;s&&(c=s());var f=i.ease(n.easing);return t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(d),d=null,function(){for(var n={},i=0;i<e.length;i++){var a=e[i];a.xr0&&(n[a.plotinfo.xaxis._name+".range"]=a.xr0.slice()),a.yr0&&(n[a.plotinfo.yaxis._name+".range"]=a.yr0.slice())}return r.call("relayout",t,n).then(function(){for(var t=0;t<e.length;t++)p(e[t].plotinfo)})}()}),u=Date.now(),d=window.requestAnimationFrame(function i(){h=Date.now();for(var a=Math.min(1,(h-u)/n.duration),o=f(a),s=0;s<e.length;s++)v(e[s],o);h-u>n.duration?(function(){for(var n={},i=0;i<e.length;i++){var a=e[i];a.xr1&&(n[a.plotinfo.xaxis._name+".range"]=a.xr1.slice()),a.yr1&&(n[a.plotinfo.yaxis._name+".range"]=a.yr1.slice())}c&&c(),r.call("relayout",t,n).then(function(){for(var t=0;t<e.length;t++)p(e[t].plotinfo)})}(),d=window.cancelAnimationFrame(i)):d=window.requestAnimationFrame(i)}),Promise.resolve()}function p(t){var e=t.xaxis,n=t.yaxis;l._defs.select("#"+t.clipId+"> rect").call(a.setTranslate,0,0).call(a.setScale,1,1),t.plot.call(a.setTranslate,e._offset,n._offset).call(a.setScale,1,1);var i=t.plot.selectAll(".scatterlayer .trace");i.selectAll(".point").call(a.setPointGroupScale,1,1),i.selectAll(".textpoint").call(a.setTextPointsScale,1,1),i.call(a.hideOutsideRangePoints,t)}function v(e,n){var i=e.plotinfo,r=i.xaxis,s=i.yaxis,l=e.xr0,c=e.xr1,u=r._length,h=e.yr0,d=e.yr1,f=s._length,p=!!c,v=!!d,g=[];if(p){var m=l[1]-l[0],y=c[1]-c[0];g[0]=(l[0]*(1-n)+n*c[0]-l[0])/(l[1]-l[0])*u,g[2]=u*(1-n+n*y/m),r.range[0]=l[0]*(1-n)+n*c[0],r.range[1]=l[1]*(1-n)+n*c[1]}else g[0]=0,g[2]=u;if(v){var _=h[1]-h[0],x=d[1]-d[0];g[1]=(h[1]*(1-n)+n*d[1]-h[1])/(h[0]-h[1])*f,g[3]=f*(1-n+n*x/_),s.range[0]=h[0]*(1-n)+n*d[0],s.range[1]=h[1]*(1-n)+n*d[1]}else g[1]=0,g[3]=f;o.drawOne(t,r,{skipTitle:!0}),o.drawOne(t,s,{skipTitle:!0}),o.redrawComponents(t,[r._id,s._id]);var b=p?u/g[2]:1,w=v?f/g[3]:1,k=r._offset-(p?g[0]/g[2]*u:0),T=s._offset-(v?g[1]/g[3]*f:0);i.clipRect.call(a.setTranslate,p?g[0]:0,v?g[1]:0).call(a.setScale,1/b,1/w),i.plot.call(a.setTranslate,k,T).call(a.setScale,b,w),a.setPointGroupScale(i.zoomScalePts,1/b,1/w),a.setTextPointsScale(i.zoomScaleTxt,1/b,1/w)}o.redrawComponents(t)}},{"../../components/drawing":64,"../../registry":242,"./axes":203,d3:8}],226:[function(t,e,n){"use strict";var i=t("../../registry").traceIs,r=t("./axis_autotype");function a(t){return{v:"x",h:"y"}[t.orientation||"v"]}function o(t,e){var n=a(t),r=i(t,"box-violin"),o=i(t._fullInput||{},"candlestick");return r&&!o&&e===n&&void 0===t[n]&&void 0===t[n+"0"]}e.exports=function(t,e,n,s){"-"===n("type",(s.splomStash||{}).type)&&(function(t,e){if("-"===t.type){var n=t._id,s=n.charAt(0);-1!==n.indexOf("scene")&&(n=s);var l=function(t,e,n){for(var i=0;i<t.length;i++){var r=t[i];if("splom"===r.type&&r._length>0&&(r["_"+n+"axes"]||{})[e])return r;if((r[n+"axis"]||n)===e){if(o(r,n))return r;if((r[n]||[]).length||r[n+"0"])return r}}}(e,n,s);if(l)if("histogram"!==l.type||s!=={v:"y",h:"x"}[l.orientation||"v"]){var c,u=s+"calendar",h=l[u],d={noMultiCategory:!i(l,"cartesian")||i(l,"noMultiCategory")};if(o(l,s)){var f=a(l),p=[];for(c=0;c<e.length;c++){var v=e[c];i(v,"box-violin")&&(v[s+"axis"]||s)===n&&(p.push(void 0!==v[f]?v[f][0]:void 0!==v.name?v.name:"text"),v[u]!==h&&(h=void 0))}t.type=r(p,h,d)}else if("splom"===l.type){var g=l.dimensions,m=l._diag;for(c=0;c<g.length;c++){var y=g[c];if(y.visible&&(m[c][0]===n||m[c][1]===n)){t.type=r(y.values,h,d);break}}}else t.type=r(l[s]||[l[s+"0"]],h,d)}else t.type="linear"}}(e,s.data),"-"===e.type?e.type="linear":t.type=e.type)}},{"../../registry":242,"./axis_autotype":204}],227:[function(t,e,n){"use strict";var i=t("../registry"),r=t("../lib");function a(t,e,n){var i,a,o,s=!1;if("data"===e.type)i=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;i=t._fullLayout}return a=r.nestedProperty(i,e.prop).get(),(o=n[e.type]=n[e.type]||{}).hasOwnProperty(e.prop)&&o[e.prop]!==a&&(s=!0),o[e.prop]=a,{changed:s,value:a}}function o(t,e){var n=[],i=e[0],a={};if("string"==typeof i)a[i]=e[1];else{if(!r.isPlainObject(i))return n;a=i}return l(a,function(t,e,i){n.push({type:"layout",prop:t,value:i})},"",0),n}function s(t,e){var n,i,a,o,s=[];if(a=e[1],n=e[2],o={},"string"==typeof(i=e[0]))o[i]=a;else{if(!r.isPlainObject(i))return s;o=i,void 0===n&&(n=a)}return void 0===n&&(n=null),l(o,function(e,i,r){var a;if(Array.isArray(r)){var o=Math.min(r.length,t.data.length);n&&(o=Math.min(o,n.length)),a=[];for(var l=0;l<o;l++)a[l]=n?n[l]:l}else a=n?n.slice(0):null;if(null===a)Array.isArray(r)&&(r=r[0]);else if(Array.isArray(a)){if(!Array.isArray(r)){var c=r;r=[];for(var u=0;u<a.length;u++)r[u]=c}r.length=Math.min(a.length,r.length)}s.push({type:"data",prop:e,traces:a,value:r})},"",0),s}function l(t,e,n,i){Object.keys(t).forEach(function(a){var o=t[a];if("_"!==a[0]){var s=n+(i>0?".":"")+a;r.isPlainObject(o)?l(o,e,s,i+1):e(s,a,o)}})}n.manageCommandObserver=function(t,e,i,o){var s={},l=!0;e&&e._commandObserver&&(s=e._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=n.hasSimpleAPICommandBindings(t,i,s.lookupTable);if(e&&e._commandObserver){if(c)return s;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,s}if(c){a(t,c,s.cache),s.check=function(){if(l){var e=a(t,c,s.cache);return e.changed&&o&&void 0!==s.lookupTable[e.value]&&(s.disable(),Promise.resolve(o({value:e.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[e.value]})).then(s.enable,s.enable)),e.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<u.length;h++)t._internalOn(u[h],s.check);s.remove=function(){for(var e=0;e<u.length;e++)t._removeInternalListener(u[e],s.check)}}else r.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},e&&(e._commandObserver=s),s},n.hasSimpleAPICommandBindings=function(t,e,i){var r,a,o=e.length;for(r=0;r<o;r++){var s,l=e[r],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var h=n.computeAPICommandBindings(t,c,u);if(1!==h.length)return!1;if(a){if((s=h[0]).type!==a.type)return!1;if(s.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var d=0;d<a.traces.length;d++)if(a.traces[d]!==s.traces[d])return!1}else if(s.prop!==a.prop)return!1}else a=h[0],Array.isArray(a.traces)&&a.traces.sort();var f=(s=h[0]).value;if(Array.isArray(f)){if(1!==f.length)return!1;f=f[0]}i&&(i[f]=r)}return a},n.executeAPICommand=function(t,e,n){if("skip"===e)return Promise.resolve();var a=i.apiMethodRegistry[e],o=[t];Array.isArray(n)||(n=[]);for(var s=0;s<n.length;s++)o.push(n[s]);return a.apply(null,o).catch(function(t){return r.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)})},n.computeAPICommandBindings=function(t,e,n){var i;switch(Array.isArray(n)||(n=[]),e){case"restyle":i=s(t,n);break;case"relayout":i=o(0,n);break;case"update":i=s(t,[n[0],n[2]]).concat(o(0,[n[1]]));break;case"animate":i=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,n);break;default:i=[]}return i}},{"../lib":159,"../registry":242}],228:[function(t,e,n){"use strict";var i=t("../lib/extend").extendFlat;n.attributes=function(t,e){e=e||{};var n={valType:"info_array",editType:(t=t||{}).editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},r={x:i({},n,{}),y:i({},n,{}),editType:t.editType};return t.noGridCell||(r.row={valType:"integer",min:0,dflt:0,editType:t.editType},r.column={valType:"integer",min:0,dflt:0,editType:t.editType}),r},n.defaults=function(t,e,n,i){var r=i&&i.x||[0,1],a=i&&i.y||[0,1],o=e.grid;if(o){var s=n("domain.column");void 0!==s&&(s<o.columns?r=o._domains.x[s]:delete t.domain.column);var l=n("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete t.domain.row)}n("domain.x",r),n("domain.y",a)}},{"../lib/extend":153}],229:[function(t,e,n){"use strict";e.exports=function(t){var e=t.editType,n=t.colorEditType;void 0===n&&(n=e);var i={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:n},editType:e};return t.arrayOk&&(i.family.arrayOk=!0,i.size.arrayOk=!0,i.color.arrayOk=!0),i}},{}],230:[function(t,e,n){"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],231:[function(t,e,n){"use strict";var i=t("../registry"),r=t("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(t,e,n){var r=i.subplotsRegistry[e];if(!r)return[];for(var a=r.attr,o=[],s=0;s<t.length;s++){var l=t[s];l[0].trace[a]===n&&o.push(l)}return o},n.getModuleCalcData=function(t,e){var n,r=[],a=[];if(!(n="string"==typeof e?i.getModule(e).plot:"function"==typeof e?e:e.plot))return[r,t];for(var o=0;o<t.length;o++){var s=t[o],l=s[0].trace;!0===l.visible&&(l._module.plot===n?r.push(s):a.push(s))}return[r,a]},n.getSubplotData=function(t,e,n){if(!i.subplotsRegistry[e])return[];var a,o,s,l=i.subplotsRegistry[e].attr,c=[];if("gl2d"===e){var u=n.match(r);o="x"+u[1],s="y"+u[2]}for(var h=0;h<t.length;h++)a=t[h],"gl2d"===e&&i.traceIs(a,"gl2d")?a[l[0]]===o&&a[l[1]]===s&&c.push(a):a[l]===n&&c.push(a);return c}},{"../registry":242,"./cartesian/constants":209}],232:[function(t,e,n){"use strict";function i(t,e){var n,i,r=[0,0,0,0];for(n=0;n<4;++n)for(i=0;i<4;++i)r[i]+=t[4*n+i]*e[n];return r}e.exports=function(t,e){return i(t.projection,i(t.view,i(t.model,[e[0],e[1],e[2],1])))}},{}],233:[function(t,e,n){"use strict";var i=t("./font_attributes"),r=t("./animation_attributes"),a=t("../components/color/attributes"),o=t("../components/colorscale/layout_attributes"),s=t("./pad_attributes"),l=t("../lib/extend").extendFlat,c=i({editType:"calc"});c.family.dflt='"Open Sans", verdana, arial, sans-serif',c.size.dflt=12,c.color.dflt=a.defaultLine,e.exports={font:c,title:{text:{valType:"string",editType:"layoutstyle"},font:i({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},colorscale:o,datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},meta:{valType:"data_array",editType:"plot"},transition:l({},r.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:i({editType:"layoutstyle"})}}},{"../components/color/attributes":42,"../components/colorscale/layout_attributes":56,"../lib/extend":153,"./animation_attributes":198,"./font_attributes":229,"./pad_attributes":234}],234:[function(t,e,n){"use strict";e.exports=function(t){var e=t.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],235:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("../registry"),o=t("../plot_api/plot_schema"),s=t("../plot_api/plot_template"),l=t("../lib"),c=t("../components/color"),u=t("../constants/numerical").BADNUM,h=t("../plots/cartesian/axis_ids"),d=t("./animation_attributes"),f=t("./frame_attributes"),p=l.relinkPrivateKeys,v=l._,g=e.exports={};l.extendFlat(g,a),g.attributes=t("./attributes"),g.attributes.type.values=g.allTypes,g.fontAttrs=t("./font_attributes"),g.layoutAttributes=t("./layout_attributes"),g.fontWeight="normal";var m=g.transformsRegistry,y=t("./command");g.executeAPICommand=y.executeAPICommand,g.computeAPICommandBindings=y.computeAPICommandBindings,g.manageCommandObserver=y.manageCommandObserver,g.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,g.redrawText=function(t){if(!((t=l.getGraphDiv(t)).data&&t.data[0]&&t.data[0].r))return new Promise(function(e){setTimeout(function(){a.getComponentMethod("annotations","draw")(t),a.getComponentMethod("legend","draw")(t),(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()}),e(g.previousPromises(t))},300)})},g.resize=function(t){return t=l.getGraphDiv(t),new Promise(function(e,n){function i(t){var e=window.getComputedStyle(t).display;return!e||"none"===e}t&&!i(t)||n(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._redrawTimer=setTimeout(function(){if(!t.layout||t.layout.width&&t.layout.height||i(t))e(t);else{delete t.layout.width,delete t.layout.height;var n=t.changed;t.autoplay=!0,a.call("relayout",t,{autosize:!0}).then(function(){t.changed=n,e(t)})}},100)})},g.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then(function(){t._promises=[]})},g.addLinks=function(t){if(t._context.showLink||t._context.showSources){var e=t._fullLayout,n=l.ensureSingle(e._paper,"text","js-plot-link-container",function(t){t.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:c.defaultLine,"pointer-events":"all"}).each(function(){var t=i.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)})}),r=n.node(),a={y:e._paper.attr("height")-9};document.body.contains(r)&&r.getComputedTextLength()>=e.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=e._paper.attr("width")-7),n.attr(a);var o=n.select(".js-link-to-tool"),s=n.select(".js-link-spacer"),u=n.select(".js-sourcelinks");t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var n=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)n.on("click",function(){g.sendDataToCloud(t)});else{var i=window.location.pathname.split("/"),r=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+i[2].split(".")[0]+"/"+i[1]+r})}}(t,o),s.text(o.text()&&u.text()?" - ":"")}},g.sendDataToCloud=function(t){t.emit("plotly_beforeexport");var e=(window.PLOTLYENV||{}).BASE_URL||t._context.plotlyServerURL,n=i.select(t).append("div").attr("id","hiddenform").style("display","none"),r=n.append("form").attr({action:e+"/external",method:"post",target:"_blank"});return r.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(t,!1,"keepdata"),r.node().submit(),n.remove(),t.emit("plotly_afterexport"),!1};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],x=["year","month","dayMonth","dayMonthYear"];function b(t,e){var n=t._context.locale,i=!1,r={};function o(t){for(var n=!0,a=0;a<e.length;a++){var o=e[a];r[o]||(t[o]?r[o]=t[o]:n=!1)}n&&(i=!0)}for(var s=0;s<2;s++){for(var l=t._context.locales,c=0;c<2;c++){var u=(l[n]||{}).format;if(u&&(o(u),i))break;l=a.localeRegistry}var h=n.split("-")[0];if(i||h===n)break;n=h}return i||o(a.localeRegistry.en.format),r}function w(t,e){var n={_fullLayout:e},i="x"===t._id.charAt(0),r=t._mainAxis._anchorAxis,a="",o="",s="";if(r&&(s=r._mainAxis._id,a=i?t._id+s:s+t._id),!a||!e._plots[a]){a="";for(var l=t._counterAxes,c=0;c<l.length;c++){var u=l[c],d=i?t._id+u:u+t._id;o||(o=d);var f=h.getFromId(n,u);if(s&&f.overlaying===s){a=d;break}}}return a||o}function k(t){var e=t.transforms;if(Array.isArray(e)&&e.length)for(var n=0;n<e.length;n++){var i=e[n],r=i._module||m[i.type];if(r&&r.makesData)return!0}return!1}function T(t,e,n,i){for(var r=t.transforms,a=[t],o=0;o<r.length;o++){var s=r[o],l=m[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:t,fullData:e,layout:n,fullLayout:i,transformIndex:o}))}return a}function M(t){var e=t.margin;if(!t._size){var n=t._size={l:Math.round(e.l),r:Math.round(e.r),t:Math.round(e.t),b:Math.round(e.b),p:Math.round(e.pad)};n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b}t._pushmargin||(t._pushmargin={}),t._pushmarginIds||(t._pushmarginIds={})}function A(t,e,n){var i=!1,r=[g.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},n.prepareFn,g.rehover,function(){return t.emit("plotly_transitioning",[]),new Promise(function(r){t._transitioning=!0,e.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push(function(){i=!0}),n.redraw&&t._transitionData._interruptCallbacks.push(function(){return a.call("redraw",t)}),t._transitionData._interruptCallbacks.push(function(){t.emit("plotly_transitioninterrupted",[])});var o=0,s=0;function l(){return o++,function(){var e;s++,i||s!==o||(e=r,t._transitionData&&(function(t){if(t)for(;t.length;)t.shift()}(t._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(n.redraw)return a.call("redraw",t)}).then(function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])}).then(e)))}}n.runFn(l),setTimeout(l())})}],o=l.syncOrAsync(r,t);return o&&o.then||(o=Promise.resolve()),o.then(function(){return t})}function C(t,e){for(var n=0;n<t.length;n++){var i=t[n];i.clearCalc(),"multicategory"===i.type&&i.setupMultiCategory(e)}}g.supplyDefaults=function(t,e){var n=e&&e.skipUpdateCalc,r=t._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var o,s=t._fullLayout={},c=t.layout||{},u=t._fullData||[],h=t._fullData=[],d=t.data||[],f=t.calcdata||[],m=t._context||{};t._transitionData||g.createTransitionData(t),s._dfltTitle={plot:v(t,"Click to enter Plot title"),x:v(t,"Click to enter X axis title"),y:v(t,"Click to enter Y axis title"),colorbar:v(t,"Click to enter Colorscale title"),annotation:v(t,"new text")},s._traceWord=v(t,"trace");var y=b(t,_);if(s._mapboxAccessToken=m.mapboxAccessToken,r._initialAutoSizeIsDone){var w=r.width,k=r.height;g.supplyLayoutGlobalDefaults(c,s,y),c.width||(s.width=w),c.height||(s.height=k),g.sanitizeMargins(s)}else{g.supplyLayoutGlobalDefaults(c,s,y);var T=!c.width||!c.height,A=s.autosize;T&&(A||m.autosizable)?g.plotAutoSize(t,c,s):T&&g.sanitizeMargins(s),!A&&T&&(c.width=s.width,c.height=s.height)}s._d3locale=function(t,e){return t.decimal=e.charAt(0),t.thousands=e.charAt(1),i.locale(t)}(y,s.separators),s._extraFormat=b(t,x),s._initialAutoSizeIsDone=!0,s._dataLength=d.length,s._modules=[],s._visibleModules=[],s._basePlotModules=[];var C=s._subplots=function(){var t,e,n=a.collectableSubplotTypes,i={};if(!n){n=[];var r=a.subplotsRegistry;for(var o in r){var s=r[o].attr;if(s&&(n.push(o),Array.isArray(s)))for(e=0;e<s.length;e++)l.pushUnique(n,s[e])}}for(t=0;t<n.length;t++)i[n[t]]=[];return i}(),L=s._splomAxes={x:{},y:{}},S=s._splomSubplots={};s._splomGridDflt={},s._scatterStackOpts={},s._firstScatter={},s._alignmentOpts={},s._requestRangeslider={},s._traceUids=function(t,e){var n,i,r=e.length,a=[];for(n=0;n<t.length;n++){var o=t[n]._fullInput;o!==i&&a.push(o),i=o}var s=a.length,c=new Array(r),u={};function h(t,e){c[e]=t,u[t]=1}function d(t,e){if(t&&"string"==typeof t&&!u[t])return h(t,e),!0}for(n=0;n<r;n++){var f=e[n].uid;"number"==typeof f&&(f=String(f)),d(f,n)||n<s&&d(a[n].uid,n)||h(l.randstr(u),n)}return c}(u,d),s._globalTransforms=(t._context||{}).globalTransforms,g.supplyDataDefaults(d,h,c,s);var E=Object.keys(L.x),O=Object.keys(L.y);if(E.length>1&&O.length>1){for(a.getComponentMethod("grid","sizeDefaults")(c,s),o=0;o<E.length;o++)l.pushUnique(C.xaxis,E[o]);for(o=0;o<O.length;o++)l.pushUnique(C.yaxis,O[o]);for(var P in S)l.pushUnique(C.cartesian,P)}if(s._has=g._hasPlotType.bind(s),u.length===h.length)for(o=0;o<h.length;o++)p(h[o],u[o]);g.supplyLayoutModuleDefaults(c,s,h,t._transitionData);var D=s._visibleModules,z=[];for(o=0;o<D.length;o++){var I=D[o].crossTraceDefaults;I&&l.pushUnique(z,I)}for(o=0;o<z.length;o++)z[o](h,s);a.getComponentMethod("colorscale","crossTraceDefaults")(h,s),s._hasOnlyLargeSploms=1===s._basePlotModules.length&&"splom"===s._basePlotModules[0].name&&E.length>15&&O.length>15&&0===s.shapes.length&&0===s.images.length,s._hasCartesian=s._has("cartesian"),s._hasGeo=s._has("geo"),s._hasGL3D=s._has("gl3d"),s._hasGL2D=s._has("gl2d"),s._hasTernary=s._has("ternary"),s._hasPie=s._has("pie"),g.linkSubplots(h,s,u,r),g.cleanPlot(h,s,u,r),p(s,r),s._preGUI||(s._preGUI={}),s._tracePreGUI||(s._tracePreGUI={});var R,B=s._tracePreGUI,N={};for(R in B)N[R]="old";for(o=0;o<h.length;o++)N[R=h[o]._fullInput.uid]||(B[R]={}),N[R]="new";for(R in N)"old"===N[R]&&delete B[R];M(s),a.getComponentMethod("rangeslider","makeData")(s),n||f.length!==h.length||g.supplyDefaultsUpdateCalc(f,h)}},g.supplyDefaultsUpdateCalc=function(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=(t[n]||[])[0];if(r&&r.trace){var a=r.trace;if(a._hasCalcTransform){var o,s,c,u=a._arrayAttrs;for(o=0;o<u.length;o++)c=l.nestedProperty(a,s=u[o]).get().slice(),l.nestedProperty(i,s).set(c)}r.trace=i}}},g.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},g._hasPlotType=function(t){var e,n=this._basePlotModules||[];for(e=0;e<n.length;e++)if(n[e].name===t)return!0;var i=this._modules||[];for(e=0;e<i.length;e++){var r=i[e].name;if(r===t)return!0;var o=a.modules[r];if(o&&o.categories[t])return!0}return!1},g.cleanPlot=function(t,e,n,i){var r,a,o=i._basePlotModules||[];for(r=0;r<o.length;r++){var s=o[r];s.clean&&s.clean(t,e,n,i)}var l=i._has&&i._has("gl"),c=e._has&&e._has("gl");l&&!c&&void 0!==i._glcontainer&&(i._glcontainer.selectAll(".gl-canvas").remove(),i._glcontainer.selectAll(".no-webgl").remove(),i._glcanvas=null);var u=!!i._infolayer;t:for(r=0;r<n.length;r++){var h=n[r].uid;for(a=0;a<t.length;a++)if(h===t[a].uid)continue t;u&&i._infolayer.select(".cb"+h).remove()}i._zoomlayer&&i._zoomlayer.selectAll(".select-outline").remove()},g.linkSubplots=function(t,e,n,i){var r,a,o=i._plots||{},s=e._plots={},c=e._subplots,u={_fullData:t,_fullLayout:e},d=c.cartesian.concat(c.gl2d||[]);for(r=0;r<d.length;r++){var f,p=d[r],v=o[p],g=h.getFromId(u,p,"x"),m=h.getFromId(u,p,"y");for(v?f=s[p]=v:(f=s[p]={}).id=p,g._counterAxes.push(m._id),m._counterAxes.push(g._id),g._subplotsWith.push(p),m._subplotsWith.push(p),f.xaxis=g,f.yaxis=m,f._hasClipOnAxisFalse=!1,a=0;a<t.length;a++){var y=t[a];if(y.xaxis===f.xaxis._id&&y.yaxis===f.yaxis._id&&!1===y.cliponaxis){f._hasClipOnAxisFalse=!0;break}}}var _,x=h.list(u,null,!0);for(r=0;r<x.length;r++){var b=null;(_=x[r]).overlaying&&(b=h.getFromId(u,_.overlaying))&&b.overlaying&&(_.overlaying=!1,b=null),_._mainAxis=b||_,b&&(_.domain=b.domain.slice()),_._anchorAxis="free"===_.anchor?null:h.getFromId(u,_.anchor)}for(r=0;r<x.length;r++)(_=x[r])._counterAxes.sort(h.idSort),_._subplotsWith.sort(l.subplotSort),_._mainSubplot=w(_,e)},g.clearExpandedTraceDefaultColors=function(t){var e,n,i;for(n=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],o.crawl(t._module.attributes,function(t,i,r,a){n[a]=i,n.length=a+1,"color"===t.valType&&void 0===t.dflt&&e.push(n.join("."))})),i=0;i<e.length;i++)l.nestedProperty(t,"_input."+e[i]).get()||l.nestedProperty(t,e[i]).set(null)},g.supplyDataDefaults=function(t,e,n,i){var r,o,c,u=i._modules,h=i._visibleModules,d=i._basePlotModules,f=0,v=0;function m(t){e.push(t);var n=t._module;n&&(l.pushUnique(u,n),!0===t.visible&&l.pushUnique(h,n),l.pushUnique(d,t._module.basePlotModule),f++,!1!==t._input.visible&&v++)}i._transformModules=[];var y={},_=[],x=s.traceTemplater((n.template||{}).data||{});for(r=0;r<t.length;r++){if((o=x.newTrace(c=t[r])).uid=i._traceUids[r],g.supplyTraceDefaults(c,o,v,i,r),o.index=r,o._input=c,o._expandedIndex=f,o.transforms&&o.transforms.length)for(var b=!1!==c.visible&&!1===o.visible,w=T(o,e,n,i),k=0;k<w.length;k++){var M=w[k],A={_template:o._template,type:o.type,uid:o.uid+k};b&&!1===M.visible&&delete M.visible,g.supplyTraceDefaults(M,A,f,i,r),p(A,M),A.index=r,A._input=c,A._fullInput=o,A._expandedIndex=f,A._expandedInput=M,m(A)}else o._fullInput=o,o._expandedInput=o,m(o);a.traceIs(o,"carpetAxis")&&(y[o.carpet]=o),a.traceIs(o,"carpetDependent")&&_.push(r)}for(r=0;r<_.length;r++)if((o=e[_[r]]).visible){var C=y[o.carpet];o._carpet=C,C&&C.visible?(o.xaxis=C.xaxis,o.yaxis=C.yaxis):o.visible=!1}},g.supplyAnimationDefaults=function(t){var e;t=t||{};var n={};function i(e,i){return l.coerce(t||{},n,d,e,i)}if(i("mode"),i("direction"),i("fromcurrent"),Array.isArray(t.frame))for(n.frame=[],e=0;e<t.frame.length;e++)n.frame[e]=g.supplyAnimationFrameDefaults(t.frame[e]||{});else n.frame=g.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(n.transition=[],e=0;e<t.transition.length;e++)n.transition[e]=g.supplyAnimationTransitionDefaults(t.transition[e]||{});else n.transition=g.supplyAnimationTransitionDefaults(t.transition||{});return n},g.supplyAnimationFrameDefaults=function(t){var e={};function n(n,i){return l.coerce(t||{},e,d.frame,n,i)}return n("duration"),n("redraw"),e},g.supplyAnimationTransitionDefaults=function(t){var e={};function n(n,i){return l.coerce(t||{},e,d.transition,n,i)}return n("duration"),n("easing"),e},g.supplyFrameDefaults=function(t){var e={};function n(n,i){return l.coerce(t,e,f,n,i)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),e},g.supplyTraceDefaults=function(t,e,n,i,r){var o,s=i.colorway||c.defaults,u=s[n%s.length];function h(n,i){return l.coerce(t,e,g.attributes,n,i)}var d=h("visible");h("type"),h("name",i._traceWord+" "+r),h("uirevision",i.uirevision);var f,p,v=g.getModule(e);if(e._module=v,v){var m=v.basePlotModule,y=m.attr,_=m.attributes;if(y&&_){var x=i._subplots,b="";if("gl2d"!==m.name||d){if(Array.isArray(y))for(o=0;o<y.length;o++){var w=y[o],k=l.coerce(t,e,_,w);x[w]&&l.pushUnique(x[w],k),b+=k}else b=l.coerce(t,e,_,y);x[m.name]&&l.pushUnique(x[m.name],b)}}}return d&&(h("customdata"),h("ids"),a.traceIs(e,"showLegend")?(e._dfltShowLegend=!0,h("showlegend"),h("legendgroup")):e._dfltShowLegend=!1,f="hoverlabel",p=function(){a.getComponentMethod("fx","supplyDefaults")(t,e,u,i)},v&&f in v.attributes&&void 0===v.attributes[f]||(p?p():h(f,"")),v&&(v.supplyDefaults(t,e,u,i),e.hovertemplate||l.coerceHoverinfo(t,e,i)),a.traceIs(e,"noOpacity")||h("opacity"),a.traceIs(e,"notLegendIsolatable")&&(e.visible=!!e.visible),v&&v.selectPoints&&h("selectedpoints"),g.supplyTransformDefaults(t,e,i)),e},g.hasMakesDataTransform=k,g.supplyTransformDefaults=function(t,e,n){if(e._length||k(t)){var i=n._globalTransforms||[],r=n._transformModules||[];if(Array.isArray(t.transforms)||0!==i.length)for(var a=i.concat(t.transforms||[]),o=e.transforms=[],s=0;s<a.length;s++){var c,u=a[s],h=u.type,d=m[h],f=!(u._module&&u._module===d),p=d&&"function"==typeof d.transform;d||l.warn("Unrecognized transform type "+h+"."),d&&d.supplyDefaults&&(f||p)?((c=d.supplyDefaults(u,e,n,t)).type=h,c._module=d,l.pushUnique(r,d)):c=l.extendFlat({},u),o.push(c)}}},g.supplyLayoutGlobalDefaults=function(t,e,n){function i(n,i){return l.coerce(t,e,g.layoutAttributes,n,i)}var r=t.template;l.isPlainObject(r)&&(e.template=r,e._template=r.layout,e._dataTemplate=r.data);var o=l.coerceFont(i,"font");i("title.text",e._dfltTitle.plot),l.coerceFont(i,"title.font",{family:o.family,size:Math.round(1.4*o.size),color:o.color}),i("title.xref"),i("title.yref"),i("title.x"),i("title.y"),i("title.xanchor"),i("title.yanchor"),i("title.pad.t"),i("title.pad.r"),i("title.pad.b"),i("title.pad.l"),i("autosize",!(t.width&&t.height)),i("width"),i("height"),i("margin.l"),i("margin.r"),i("margin.t"),i("margin.b"),i("margin.pad"),i("margin.autoexpand"),t.width&&t.height&&g.sanitizeMargins(e),a.getComponentMethod("grid","sizeDefaults")(t,e),i("paper_bgcolor"),i("separators",n.decimal+n.thousands),i("hidesources"),i("colorway"),i("datarevision");var s=i("uirevision");i("editrevision",s),i("selectionrevision",s),i("modebar.orientation"),i("modebar.bgcolor",c.addOpacity(e.paper_bgcolor,.5));var u=c.contrast(c.rgb(e.modebar.bgcolor));i("modebar.color",c.addOpacity(u,.3)),i("modebar.activecolor",c.addOpacity(u,.7)),i("modebar.uirevision",s),i("meta"),l.isPlainObject(t.transition)&&(i("transition.duration"),i("transition.easing"),i("transition.ordering")),a.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),a.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,i)},g.plotAutoSize=function(t,e,n){var i,a,o=t._context||{},s=o.frameMargins,c=l.isPlotDiv(t);if(c&&t.emit("plotly_autosize"),o.fillFrame)i=window.innerWidth,a=window.innerHeight,document.body.style.overflow="hidden";else{var u=c?window.getComputedStyle(t):{};if(i=parseFloat(u.width)||parseFloat(u.maxWidth)||n.width,a=parseFloat(u.height)||parseFloat(u.maxHeight)||n.height,r(s)&&s>0){var h=1-2*s;i=Math.round(h*i),a=Math.round(h*a)}}var d=g.layoutAttributes.width.min,f=g.layoutAttributes.height.min;i<d&&(i=d),a<f&&(a=f);var p=!e.width&&Math.abs(n.width-i)>1,v=!e.height&&Math.abs(n.height-a)>1;(v||p)&&(p&&(n.width=i),v&&(n.height=a)),t._initialAutoSize||(t._initialAutoSize={width:i,height:a}),g.sanitizeMargins(n)},g.supplyLayoutModuleDefaults=function(t,e,n,i){var r,o,s,c=a.componentsRegistry,u=e._basePlotModules,h=a.subplotsRegistry.cartesian;for(r in c)(s=c[r]).includeBasePlot&&s.includeBasePlot(t,e);for(var d in u.length||u.push(h),e._has("cartesian")&&(a.getComponentMethod("grid","contentDefaults")(t,e),h.finalizeSubplots(t,e)),e._subplots)e._subplots[d].sort(l.subplotSort);for(o=0;o<u.length;o++)(s=u[o]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n);var f=e._modules;for(o=0;o<f.length;o++)(s=f[o]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n);var p=e._transformModules;for(o=0;o<p.length;o++)(s=p[o]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n,i);for(r in c)(s=c[r]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n)},g.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),void 0!==e._geocontainer&&e._geocontainer.remove(),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(t),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.framework,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._replotPending,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},g.style=function(t){var e,n=t._fullLayout._visibleModules,i=[];for(e=0;e<n.length;e++){var r=n[e];r.style&&l.pushUnique(i,r.style)}for(e=0;e<i.length;e++)i[e](t)},g.sanitizeMargins=function(t){if(t&&t.margin){var e,n=t.width,i=t.height,r=t.margin,a=i-(r.t+r.b);n-(r.l+r.r)<0&&(e=(n-1)/(r.l+r.r),r.l=Math.floor(e*r.l),r.r=Math.floor(e*r.r)),a<0&&(e=(i-1)/(r.t+r.b),r.t=Math.floor(e*r.t),r.b=Math.floor(e*r.b))}},g.clearAutoMarginIds=function(t){t._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(t,e){t._fullLayout._pushmarginIds[e]=1},g.autoMargin=function(t,e,n){var i=t._fullLayout,r=i._pushmargin,a=i._pushmarginIds;if(!1!==i.margin.autoexpand){if(n){var o=n.pad;if(void 0===o){var s=i.margin;o=Math.min(12,s.l,s.r,s.t,s.b)}n.l+n.r>.5*i.width&&(n.l=n.r=0),n.b+n.t>.5*i.height&&(n.b=n.t=0),r[e]={l:{val:void 0!==n.xl?n.xl:n.x,size:n.l+o},r:{val:void 0!==n.xr?n.xr:n.x,size:n.r+o},b:{val:void 0!==n.yb?n.yb:n.y,size:n.b+o},t:{val:void 0!==n.yt?n.yt:n.y,size:n.t+o}},a[e]=1}else delete r[e],delete a[e];i._replotting||g.doAutoMargin(t)}},g.doAutoMargin=function(t){var e=t._fullLayout;e._size||(e._size={}),M(e);var n=e._size,i=JSON.stringify(n),o=e.margin,s=o.l,l=o.r,c=o.t,u=o.b,h=e.width,d=e.height,f=e._pushmargin,p=e._pushmarginIds;if(!1!==e.margin.autoexpand){for(var v in f)p[v]||delete f[v];for(var g in f.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:u}},f){var m=f[g].l||{},y=f[g].b||{},_=m.val,x=m.size,b=y.val,w=y.size;for(var k in f){if(r(x)&&f[k].r){var T=f[k].r.val,A=f[k].r.size;if(T>_){var C=(x*T+(A-h)*_)/(T-_),L=(A*(1-_)+(x-h)*(1-T))/(T-_);C>=0&&L>=0&&h-(C+L)>0&&C+L>s+l&&(s=C,l=L)}}if(r(w)&&f[k].t){var S=f[k].t.val,E=f[k].t.size;if(S>b){var O=(w*S+(E-d)*b)/(S-b),P=(E*(1-b)+(w-d)*(1-S))/(S-b);O>=0&&P>=0&&d-(P+O)>0&&O+P>u+c&&(u=O,c=P)}}}}}if(n.l=Math.round(s),n.r=Math.round(l),n.t=Math.round(c),n.b=Math.round(u),n.p=Math.round(o.pad),n.w=Math.round(h)-n.l-n.r,n.h=Math.round(d)-n.t-n.b,!e._replotting&&"{}"!==i&&i!==JSON.stringify(e._size))return"_redrawFromAutoMarginCount"in e?e._redrawFromAutoMarginCount++:e._redrawFromAutoMarginCount=1,a.call("plot",t)},g.graphJson=function(t,e,n,i,r){(r&&e&&!t._fullData||r&&!e&&!t._fullLayout)&&g.supplyDefaults(t);var a=r?t._fullLayout:t.layout,o=(t._transitionData||{})._frames;function s(t){if("function"==typeof t)return null;if(l.isPlainObject(t)){var e,i,r={};for(e in t)if("function"!=typeof t[e]&&-1===["_","["].indexOf(e.charAt(0))){if("keepdata"===n){if("src"===e.substr(e.length-3))continue}else if("keepstream"===n){if("string"==typeof(i=t[e+"src"])&&i.indexOf(":")>0&&!l.isPlainObject(t.stream))continue}else if("keepall"!==n&&"string"==typeof(i=t[e+"src"])&&i.indexOf(":")>0)continue;r[e]=s(t[e])}return r}return Array.isArray(t)?t.map(s):l.isTypedArray(t)?l.simpleMap(t,l.identity):l.isJSDate(t)?l.ms2DateTimeLocal(+t):t}var c={data:((r?t._fullData:t.data)||[]).map(function(t){var n=s(t);return e&&delete n.fit,n})};return e||(c.layout=s(a)),t.framework&&t.framework.isPolar&&(c=t.framework.getConfig()),o&&(c.frames=s(o)),"object"===i?c:JSON.stringify(c)},g.modifyFrames=function(t,e){var n,i,r,a=t._transitionData._frames,o=t._transitionData._frameHash;for(n=0;n<e.length;n++)switch((i=e[n]).type){case"replace":var s=(a[i.index]||{}).name,l=(r=i.value).name;a[i.index]=o[l]=r,l!==s&&(delete o[s],o[l]=r);break;case"insert":o[(r=i.value).name]=r,a.splice(i.index,0,r);break;case"delete":delete o[(r=a[i.index]).name],a.splice(i.index,1)}return Promise.resolve()},g.computeFrame=function(t,e){var n,i,r,a,o=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var s=o[e.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=g.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(i=s.traces))for(i=[],n=0;n<s.data.length;n++)i[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(r=i[n])&&(-1===(a=u.traces.indexOf(r))&&(u.traces[a=u.data.length]=r),u.data[a]=g.extendTrace(u.data[a],s.data[n]))}return u},g.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},n=t._transitionData._frames,i=0;i<n.length;i++){var r=n[i];r&&r.name&&(e[r.name]=r)}},g.extendObjectWithContainers=function(t,e,n){var i,r,a,o,s,c,u,h=l.extendDeepNoArrays({},e||{}),d=l.expandObjectPaths(h),f={};if(n&&n.length)for(a=0;a<n.length;a++)void 0===(r=(i=l.nestedProperty(d,n[a])).get())?l.nestedProperty(f,n[a]).set(null):(i.set(null),l.nestedProperty(f,n[a]).set(r));if(t=l.extendDeepNoArrays(t||{},d),n&&n.length)for(a=0;a<n.length;a++)if(c=l.nestedProperty(f,n[a]).get()){for(u=(s=l.nestedProperty(t,n[a])).get(),Array.isArray(u)||s.set(u=[]),o=0;o<c.length;o++){var p=c[o];u[o]=null===p?null:g.extendObjectWithContainers(u[o],p)}s.set(u)}return t},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=a.layoutArrayContainers,g.extendTrace=function(t,e){return g.extendObjectWithContainers(t,e,g.dataArrayContainers)},g.extendLayout=function(t,e){return g.extendObjectWithContainers(t,e,g.layoutArrayContainers)},g.transition=function(t,e,n,i,r,a){var o={redraw:r.redraw},s=[],c=[];return o.prepareFn=function(){for(var r=Array.isArray(e)?e.length:0,a=i.slice(0,r),o=0;o<a.length;o++){var u=a[o],h=t._fullData[u]._module;h&&(h.animatable&&s.push(u),t.data[a[o]]=g.extendTrace(t.data[a[o]],e[o]))}var d=l.expandObjectPaths(l.extendDeepNoArrays({},n)),f=/^[xy]axis[0-9]*$/;for(var p in d)f.test(p)&&delete d[p].range;g.extendLayout(t.layout,d),delete t.calcdata,g.supplyDefaults(t),g.doCalcdata(t);var v=l.expandObjectPaths(n);if(v){var m=t._fullLayout._plots;for(var y in m){var _,x,b,w,k=m[y],T=k.xaxis,M=k.yaxis,A=T.range.slice(),C=M.range.slice();Array.isArray(v[T._name+".range"])?_=v[T._name+".range"].slice():Array.isArray((v[T._name]||{}).range)&&(_=v[T._name].range.slice()),Array.isArray(v[M._name+".range"])?x=v[M._name+".range"].slice():Array.isArray((v[M._name]||{}).range)&&(x=v[M._name].range.slice()),A&&_&&(A[0]!==_[0]||A[1]!==_[1])&&(b={xr0:A,xr1:_}),C&&x&&(C[0]!==x[0]||C[1]!==x[1])&&(w={yr0:C,yr1:x}),(b||w)&&c.push(l.extendFlat({plotinfo:k},b,w))}}return Promise.resolve()},o.runFn=function(e){var i,r,o=t._fullLayout._basePlotModules,u=c.length;if(n)for(r=0;r<o.length;r++)o[r].transitionAxes&&o[r].transitionAxes(t,c,a,e);for(u?((i=l.extendFlat({},a)).duration=0,s=null):i=a,r=0;r<o.length;r++)o[r].plot(t,s,i,e)},A(t,a,o)},g.transitionFromReact=function(t,e,n,i){var r=t._fullLayout,a=r.transition,o={},s=[];return o.prepareFn=function(){var t=r._plots;for(var a in o.redraw=!1,"some"===e.anim&&(o.redraw=!0),"some"===n.anim&&(o.redraw=!0),t){var c,u,h=t[a],d=h.xaxis,f=h.yaxis,p=i[d._name].range.slice(),v=i[f._name].range.slice(),g=d.range.slice(),m=f.range.slice();d.setScale(),f.setScale(),p[0]===g[0]&&p[1]===g[1]||(c={xr0:p,xr1:g}),v[0]===m[0]&&v[1]===m[1]||(u={yr0:v,yr1:m}),(c||u)&&s.push(l.extendFlat({plotinfo:h},c,u))}return Promise.resolve()},o.runFn=function(n){for(var i,r,o,c=t._fullData,u=t._fullLayout._basePlotModules,h=[],d=0;d<c.length;d++)h.push(d);function f(){for(var e=0;e<u.length;e++)u[e].transitionAxes&&u[e].transitionAxes(t,s,i,n)}function p(){for(var e=0;e<u.length;e++)u[e].plot(t,o,r,n)}s.length&&e.anim?"traces first"===a.ordering?(i=l.extendFlat({},a,{duration:0}),o=h,r=a,p(),setTimeout(f,a.duration)):(i=a,o=null,r=l.extendFlat({},a,{duration:0}),f(),p()):s.length?(i=a,f()):e.anim&&(o=h,r=a,p())},A(t,a,o)},g.doCalcdata=function(t,e){var n,i,r,s,c=h.list(t),d=t._fullData,f=t._fullLayout,p=new Array(d.length),v=(t.calcdata||[]).slice(0);for(t.calcdata=p,f._numBoxes=0,f._numViolins=0,f._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,f._piecolormap={},r=0;r<d.length;r++)Array.isArray(e)&&-1===e.indexOf(r)&&(p[r]=v[r]);for(r=0;r<d.length;r++)(n=d[r])._arrayAttrs=o.findArrayAttributes(n),n._extremes={};var g=f._subplots.polar||[];for(r=0;r<g.length;r++)c.push(f[g[r]].radialaxis,f[g[r]].angularaxis);C(c,d);var y=!1;for(r=0;r<d.length;r++)if(!0===(n=d[r]).visible&&n.transforms){if((i=n._module)&&i.calc){var _=i.calc(t,n);_[0]&&_[0].t&&_[0].t._scene&&delete _[0].t._scene.dirty}for(s=0;s<n.transforms.length;s++){var x=n.transforms[s];(i=m[x.type])&&i.calcTransform&&(n._hasCalcTransform=!0,y=!0,i.calcTransform(t,n,x))}}function b(e,r){if(!!(i=(n=d[e])._module).isContainer===r){var a=[];if(!0===n.visible){delete n._indexToPoints;var o=n.transforms||[];for(s=o.length-1;s>=0;s--)if(o[s].enabled){n._indexToPoints=o[s]._indexToPoints;break}i&&i.calc&&(a=i.calc(t,n))}Array.isArray(a)&&a[0]||(a=[{x:u,y:u}]),a[0].t||(a[0].t={}),a[0].trace=n,p[e]=a}}for(y&&C(c,d),r=0;r<d.length;r++)b(r,!0);for(r=0;r<d.length;r++)b(r,!1);!function(t){var e,n,i,r=t._fullLayout,a=r._visibleModules,o={};for(n=0;n<a.length;n++){var s=a[n],c=s.crossTraceCalc;if(c){var u=s.basePlotModule.name;o[u]?l.pushUnique(o[u],c):o[u]=[c]}}for(i in o){var h=o[i],d=r._subplots[i];if(Array.isArray(d))for(e=0;e<d.length;e++){var f=d[e],p="cartesian"===i?r._plots[f]:r[f];for(n=0;n<h.length;n++)h[n](t,p,f)}else for(n=0;n<h.length;n++)h[n](t)}}(t),a.getComponentMethod("fx","calc")(t),a.getComponentMethod("errorbars","calc")(t)},g.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},g.generalUpdatePerTraceModule=function(t,e,n,i){var r,a=e.traceHash,o={};for(r=0;r<n.length;r++){var s=n[r],c=s[0].trace;c.visible&&(o[c.type]=o[c.type]||[],o[c.type].push(s))}for(var u in a)if(!o[u]){var h=a[u][0];h[0].trace.visible=!1,o[u]=[h]}for(var d in o){var f=o[d];f[0][0].trace._module.plot(t,e,l.filterVisible(f),i)}e.traceHash=o}},{"../components/color":43,"../constants/numerical":140,"../lib":159,"../plot_api/plot_schema":192,"../plot_api/plot_template":193,"../plots/cartesian/axis_ids":206,"../registry":242,"./animation_attributes":198,"./attributes":200,"./command":227,"./font_attributes":229,"./frame_attributes":230,"./layout_attributes":233,d3:8,"fast-isnumeric":10}],236:[function(t,e,n){"use strict";var i=t("../../../traces/scatter/attributes"),r=i.marker,a=t("../../../lib/extend").extendFlat;["Area traces are deprecated!","Please switch to the *barpolar* trace type."].join(" "),e.exports={r:a({},i.r,{}),t:a({},i.t,{}),marker:{color:a({},r.color,{}),size:a({},r.size,{}),symbol:a({},r.symbol,{}),opacity:a({},r.opacity,{}),editType:"calc"}}},{"../../../lib/extend":153,"../../../traces/scatter/attributes":280}],237:[function(t,e,n){"use strict";var i=t("../../cartesian/layout_attributes"),r=t("../../../lib/extend").extendFlat,a=t("../../../plot_api/edit_types").overrideAll,o=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),s=r({},i.domain,{});function l(t,e){return r({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:o},visible:{valType:"boolean"}})}e.exports=a({radialaxis:l(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:s,orientation:{valType:"number"}}),angularaxis:l(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:s}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":153,"../../../plot_api/edit_types":186,"../../cartesian/layout_attributes":215}],238:[function(t,e,n){"use strict";(e.exports=t("./micropolar")).manager=t("./micropolar_manager")},{"./micropolar":239,"./micropolar_manager":240}],239:[function(t,e,n){var i=t("d3"),r=t("../../../lib").extendDeepAll,a=t("../../../constants/alignment").MID_SHIFT,o=e.exports={version:"0.2.2"};o.Axis=function(){var t,e,n,s,l={data:[],layout:{}},c={},u={},h=i.dispatch("hover"),d={render:function(c){return function(c){var h=l.data,d=l.layout;("string"==typeof(e=c||e)||e.nodeName)&&(e=i.select(e)),e.datum(h).each(function(e,l){var c=e.slice();u={data:o.util.cloneJson(c),layout:o.util.cloneJson(d)};var h=0;c.forEach(function(t,e){t.color||(t.color=d.defaultColorRange[h],h=(h+1)%d.defaultColorRange.length),t.strokeColor||(t.strokeColor="LinePlot"===t.geometry?t.color:i.rgb(t.color).darker().toString()),u.data[e].color=t.color,u.data[e].strokeColor=t.strokeColor,u.data[e].strokeDash=t.strokeDash,u.data[e].strokeSize=t.strokeSize});var f=c.filter(function(t,e){var n=t.visible;return void 0===n||!0===n}),p=!1,v=f.map(function(t,e){return p=p||void 0!==t.groupId,t});if(p){var g=i.nest().key(function(t,e){return void 0!==t.groupId?t.groupId:"unstacked"}).entries(v),m=[],y=g.map(function(t,e){if("unstacked"===t.key)return t.values;var n=t.values[0].r.map(function(t,e){return 0});return t.values.forEach(function(t,e,i){t.yStack=[n],m.push(n),n=o.util.sumArrays(t.r,n)}),t.values});f=i.merge(y)}f.forEach(function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]});var _=Math.min(d.width-d.margin.left-d.margin.right,d.height-d.margin.top-d.margin.bottom)/2;_=Math.max(10,_);var x,b=[d.margin.left+_,d.margin.top+_];x=p?[0,i.max(o.util.sumArrays(o.util.arrayLast(f).r[0],o.util.arrayLast(m)))]:i.extent(o.util.flattenArray(f.map(function(t,e){return t.r}))),d.radialAxis.domain!=o.DATAEXTENT&&(x[0]=0),n=i.scale.linear().domain(d.radialAxis.domain!=o.DATAEXTENT&&d.radialAxis.domain?d.radialAxis.domain:x).range([0,_]),u.layout.radialAxis.domain=n.domain();var w,k=o.util.flattenArray(f.map(function(t,e){return t.t})),T="string"==typeof k[0];T&&(k=o.util.deduplicate(k),w=k.slice(),k=i.range(k.length),f=f.map(function(t,e){var n=t;return t.t=[k],p&&(n.yStack=t.yStack),n}));var M=f.filter(function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry}).length===f.length,A=null===d.needsEndSpacing?T||!M:d.needsEndSpacing,C=d.angularAxis.domain&&d.angularAxis.domain!=o.DATAEXTENT&&!T&&d.angularAxis.domain[0]>=0?d.angularAxis.domain:i.extent(k),L=Math.abs(k[1]-k[0]);M&&!T&&(L=0);var S=C.slice();A&&T&&(S[1]+=L);var E=d.angularAxis.ticksCount||4;E>8&&(E=E/(E/8)+E%8),d.angularAxis.ticksStep&&(E=(S[1]-S[0])/E);var O=d.angularAxis.ticksStep||(S[1]-S[0])/(E*(d.minorTicks+1));w&&(O=Math.max(Math.round(O),1)),S[2]||(S[2]=O);var P=i.range.apply(this,S);if(P=P.map(function(t,e){return parseFloat(t.toPrecision(12))}),s=i.scale.linear().domain(S.slice(0,2)).range("clockwise"===d.direction?[0,360]:[360,0]),u.layout.angularAxis.domain=s.domain(),u.layout.angularAxis.endPadding=A?L:0,void 0===(t=i.select(this).select("svg.chart-root"))||t.empty()){var D=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),z=this.appendChild(this.ownerDocument.importNode(D.documentElement,!0));t=i.select(z)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var I,R=t.select(".chart-group"),B={fill:"none",stroke:d.tickColor},N={"font-size":d.font.size,"font-family":d.font.family,fill:d.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(t,e){return" "+t+" 0 "+d.font.outlineColor}).join(",")};if(d.showLegend){I=t.select(".legend-group").attr({transform:"translate("+[_,d.margin.top]+")"}).style({display:"block"});var F=f.map(function(t,e){var n=o.util.cloneJson(t);return n.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",n.visibleInLegend=void 0===t.visibleInLegend||t.visibleInLegend,n.color="LinePlot"===t.geometry?t.strokeColor:t.color,n});o.Legend().config({data:f.map(function(t,e){return t.name||"Element"+e}),legendConfig:r({},o.Legend.defaultConfig().legendConfig,{container:I,elements:F,reverseOrder:d.legend.reverseOrder})})();var j=I.node().getBBox();_=Math.min(d.width-j.width-d.margin.left-d.margin.right,d.height-d.margin.top-d.margin.bottom)/2,_=Math.max(10,_),b=[d.margin.left+_,d.margin.top+_],n.range([0,_]),u.layout.radialAxis.domain=n.domain(),I.attr("transform","translate("+[b[0]+_,b[1]-_]+")")}else I=t.select(".legend-group").style({display:"none"});t.attr({width:d.width,height:d.height}).style({opacity:d.opacity}),R.attr("transform","translate("+b+")").style({cursor:"crosshair"});var H=[(d.width-(d.margin.left+d.margin.right+2*_+(j?j.width:0)))/2,(d.height-(d.margin.top+d.margin.bottom+2*_))/2];if(H[0]=Math.max(0,H[0]),H[1]=Math.max(0,H[1]),t.select(".outer-group").attr("transform","translate("+H+")"),d.title&&d.title.text){var $=t.select("g.title-group text").style(N).text(d.title.text),q=$.node().getBBox();$.attr({x:b[0]-q.width/2,y:b[1]-_-20})}var Z=t.select(".radial.axis-group");if(d.radialAxis.gridLinesVisible){var V=Z.selectAll("circle.grid-circle").data(n.ticks(5));V.enter().append("circle").attr({class:"grid-circle"}).style(B),V.attr("r",n),V.exit().remove()}Z.select("circle.outside-circle").attr({r:_}).style(B);var W=t.select("circle.background-circle").attr({r:_}).style({fill:d.backgroundColor,stroke:d.stroke});function U(t,e){return s(t)%360+d.orientation}if(d.radialAxis.visible){var G=i.svg.axis().scale(n).ticks(5).tickSize(5);Z.call(G).attr({transform:"rotate("+d.radialAxis.orientation+")"}),Z.selectAll(".domain").style(B),Z.selectAll("g>text").text(function(t,e){return this.textContent+d.radialAxis.ticksSuffix}).style(N).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===d.radialAxis.tickOrientation?"rotate("+-d.radialAxis.orientation+") translate("+[0,N["font-size"]]+")":"translate("+[0,N["font-size"]]+")"}}),Z.selectAll("g>line").style({stroke:"black"})}var X=t.select(".angular.axis-group").selectAll("g.angular-tick").data(P),Y=X.enter().append("g").classed("angular-tick",!0);X.attr({transform:function(t,e){return"rotate("+U(t)+")"}}).style({display:d.angularAxis.visible?"block":"none"}),X.exit().remove(),Y.append("line").classed("grid-line",!0).classed("major",function(t,e){return e%(d.minorTicks+1)==0}).classed("minor",function(t,e){return!(e%(d.minorTicks+1)==0)}).style(B),Y.selectAll(".minor").style({stroke:d.minorTickColor}),X.select("line.grid-line").attr({x1:d.tickLength?_-d.tickLength:0,x2:_}).style({display:d.angularAxis.gridLinesVisible?"block":"none"}),Y.append("text").classed("axis-text",!0).style(N);var Q=X.select("text.axis-text").attr({x:_+d.labelOffset,dy:a+"em",transform:function(t,e){var n=U(t),i=_+d.labelOffset,r=d.angularAxis.tickOrientation;return"horizontal"==r?"rotate("+-n+" "+i+" 0)":"radial"==r?n<270&&n>90?"rotate(180 "+i+" 0)":null:"rotate("+(n<=180&&n>0?-90:90)+" "+i+" 0)"}}).style({"text-anchor":"middle",display:d.angularAxis.labelsVisible?"block":"none"}).text(function(t,e){return e%(d.minorTicks+1)!=0?"":w?w[t]+d.angularAxis.ticksSuffix:t+d.angularAxis.ticksSuffix}).style(N);d.angularAxis.rewriteTicks&&Q.text(function(t,e){return e%(d.minorTicks+1)!=0?"":d.angularAxis.rewriteTicks(this.textContent,e)});var K=i.max(R.selectAll(".angular-tick text")[0].map(function(t,e){return t.getCTM().e+t.getBBox().width}));I.attr({transform:"translate("+[_+K,d.margin.top]+")"});var J=t.select("g.geometry-group").selectAll("g").size()>0,tt=t.select("g.geometry-group").selectAll("g.geometry").data(f);if(tt.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),tt.exit().remove(),f[0]||J){var et=[];f.forEach(function(t,e){var i={};i.radialScale=n,i.angularScale=s,i.container=tt.filter(function(t,n){return n==e}),i.geometry=t.geometry,i.orientation=d.orientation,i.direction=d.direction,i.index=e,et.push({data:t,geometryConfig:i})});var nt=i.nest().key(function(t,e){return void 0!==t.data.groupId||"unstacked"}).entries(et),it=[];nt.forEach(function(t,e){"unstacked"===t.key?it=it.concat(t.values.map(function(t,e){return[t]})):it.push(t.values)}),it.forEach(function(t,e){var n;n=Array.isArray(t)?t[0].geometryConfig.geometry:t.geometryConfig.geometry;var i=t.map(function(t,e){return r(o[n].defaultConfig(),t)});o[n]().config(i)()})}var rt,at,ot=t.select(".guides-group"),st=t.select(".tooltips-group"),lt=o.tooltipPanel().config({container:st,fontSize:8})(),ct=o.tooltipPanel().config({container:st,fontSize:8})(),ut=o.tooltipPanel().config({container:st,hasTick:!0})();if(!T){var ht=ot.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});R.on("mousemove.angular-guide",function(t,e){var n=o.util.getMousePos(W).angle;ht.attr({x2:-_,transform:"rotate("+n+")"}).style({opacity:.5}),rt=s.invert((n+180+360-d.orientation)%360);var i=o.util.convertToCartesian(_+12,n+180);lt.text(o.util.round(rt)).move([i[0]+b[0],i[1]+b[1]])}).on("mouseout.angular-guide",function(t,e){ot.select("line").style({opacity:0})})}var dt=ot.select("circle").style({stroke:"grey",fill:"none"});R.on("mousemove.radial-guide",function(t,e){var i=o.util.getMousePos(W).radius;dt.attr({r:i}).style({opacity:.5}),at=n.invert(o.util.getMousePos(W).radius);var r=o.util.convertToCartesian(i,d.radialAxis.orientation);ct.text(o.util.round(at)).move([r[0]+b[0],r[1]+b[1]])}).on("mouseout.radial-guide",function(t,e){dt.style({opacity:0}),ut.hide(),lt.hide(),ct.hide()}),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,n){var r=i.select(this),a=this.style.fill,s="black";if(r.attr({"data-opacity":this.style.opacity||1}),a&&"none"!==a){r.attr({"data-fill":a}),s=i.hsl(a).darker().toString(),r.style({fill:s,opacity:1});var l={t:o.util.round(e[0]),r:o.util.round(e[1])};T&&(l.t=w[e[0]]);var c="t: "+l.t+", r: "+l.r,u=this.getBoundingClientRect(),h=t.node().getBoundingClientRect(),d=[u.left+u.width/2-H[0]-h.left,u.top+u.height/2-H[1]-h.top];ut.config({color:s}).text(c),ut.move(d)}else r.attr({"data-stroke":a=this.style.stroke||"black"}),s=i.hsl(a).darker().toString(),r.style({stroke:s,opacity:1})}).on("mousemove.tooltip",function(t,e){if(0!=i.event.which)return!1;i.select(this).attr("data-fill")&&ut.show()}).on("mouseout.tooltip",function(t,e){ut.hide();var n=i.select(this),r=n.attr("data-fill");n.style(r?{fill:r,opacity:n.attr("data-opacity")}:{stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(c),this},config:function(t){if(!arguments.length)return l;var e=o.util.cloneJson(t);return e.data.forEach(function(t,e){l.data[e]||(l.data[e]={}),r(l.data[e],o.Axis.defaultConfig().data[0]),r(l.data[e],t)}),r(l.layout,o.Axis.defaultConfig().layout),r(l.layout,e.layout),this},getLiveConfig:function(){return u},getinputConfig:function(){return c},radialScale:function(t){return n},angularScale:function(t){return s},svg:function(){return t}};return i.rebind(d,h,"on"),d},o.Axis.defaultConfig=function(t,e){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:i.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},o.util={},o.DATAEXTENT="dataExtent",o.AREA="AreaChart",o.LINE="LinePlot",o.DOT="DotPlot",o.BAR="BarChart",o.util._override=function(t,e){for(var n in t)n in e&&(e[n]=t[n])},o.util._extend=function(t,e){for(var n in t)e[n]=t[n]},o.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},o.util.dataFromEquation2=function(t,e){var n=e||6;return i.range(0,360+n,n).map(function(e,n){var i=e*Math.PI/180;return[e,t(i)]})},o.util.dataFromEquation=function(t,e,n){var r=e||6,a=[],o=[];i.range(0,360+r,r).forEach(function(e,n){var i=e*Math.PI/180,r=t(i);a.push(e),o.push(r)});var s={t:a,r:o};return n&&(s.name=n),s},o.util.ensureArray=function(t,e){if(void 0===t)return null;var n=[].concat(t);return i.range(e).map(function(t,e){return n[e]||n[0]})},o.util.fillArrays=function(t,e,n){return e.forEach(function(e,i){t[e]=o.util.ensureArray(t[e],n)}),t},o.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},o.util.validateKeys=function(t,e){"string"==typeof e&&(e=e.split("."));var n=e.shift();return t[n]&&(!e.length||objHasKeys(t[n],e))},o.util.sumArrays=function(t,e){return i.zip(t,e).map(function(t,e){return i.sum(t)})},o.util.arrayLast=function(t){return t[t.length-1]},o.util.arrayEqual=function(t,e){for(var n=Math.max(t.length,e.length,1);n-- >=0&&t[n]===e[n];);return-2===n},o.util.flattenArray=function(t){for(var e=[];!o.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},o.util.deduplicate=function(t){return t.filter(function(t,e,n){return n.indexOf(t)==e})},o.util.convertToCartesian=function(t,e){var n=e*Math.PI/180;return[t*Math.cos(n),t*Math.sin(n)]},o.util.round=function(t,e){var n=Math.pow(10,e||2);return Math.round(t*n)/n},o.util.getMousePos=function(t){var e=i.mouse(t.node()),n=e[0],r=e[1],a={};return a.x=n,a.y=r,a.pos=e,a.angle=180*(Math.atan2(r,n)+Math.PI)/Math.PI,a.radius=Math.sqrt(n*n+r*r),a},o.util.duplicatesCount=function(t){for(var e,n={},i={},r=0,a=t.length;r<a;r++)(e=t[r])in n?(n[e]++,i[e]=n[e]):n[e]=1;return i},o.util.duplicates=function(t){return Object.keys(o.util.duplicatesCount(t))},o.util.translator=function(t,e,n,i){if(i){var r=n.slice();n=e,e=r}var a=e.reduce(function(t,e){if(void 0!==t)return t[e]},t);void 0!==a&&(e.reduce(function(t,n,i){if(void 0!==t)return i===e.length-1&&delete t[n],t[n]},t),n.reduce(function(t,e,i){return void 0===t[e]&&(t[e]={}),i===n.length-1&&(t[e]=a),t[e]},t))},o.PolyChart=function(){var t=[o.PolyChart.defaultConfig()],e=i.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};function a(){var e=t[0].geometryConfig,r=e.container;"string"==typeof r&&(r=i.select(r)),r.datum(t).each(function(t,r){var a=!!t[0].data.yStack,o=t.map(function(t,e){return a?i.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):i.zip(t.data.t[0],t.data.r[0])}),s=e.angularScale,l=e.radialScale.domain()[0],c={bar:function(n,r,a){var o=t[a].data,l=e.radialScale(n[1])-e.radialScale(0),c=e.radialScale(n[2]||0),u=o.barWidth;i.select(this).attr({class:"mark bar",d:"M"+[[l+c,-u/2],[l+c,u/2],[c,u/2],[c,-u/2]].join("L")+"Z",transform:function(t,n){return"rotate("+(e.orientation+s(t[0]))+")"}})},dot:function(n,r,a){var o=n[2]?[n[0],n[1]+n[2]]:n,s=i.svg.symbol().size(t[a].data.dotSize).type(t[a].data.dotType)(n,r);i.select(this).attr({class:"mark dot",d:s,transform:function(t,n){var i;return"translate("+[(i=function(t,n){return{r:e.radialScale(t[1]),t:(e.angularScale(t[0])+e.orientation)*Math.PI/180}}(o)).r*Math.cos(i.t),i.r*Math.sin(i.t)]+")"}})}},u=i.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});c.line=function(n,r,a){var s=n[2]?o[a].map(function(t,e){return[t[0],t[1]+t[2]]}):o[a];if(i.select(this).each(c.dot).style({opacity:function(e,n){return+t[a].data.dotVisible},fill:p.stroke(n,r,a)}).attr({class:"mark dot"}),!(r>0)){var l=i.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path"),l.attr({class:"line",d:u(s),transform:function(t,n){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return p.fill(n,r,a)},"fill-opacity":0,stroke:function(t,e){return p.stroke(n,r,a)},"stroke-width":function(t,e){return p["stroke-width"](n,r,a)},"stroke-dasharray":function(t,e){return p["stroke-dasharray"](n,r,a)},opacity:function(t,e){return p.opacity(n,r,a)},display:function(t,e){return p.display(n,r,a)}})}};var h=e.angularScale.range(),d=Math.abs(h[1]-h[0])/o[0].length*Math.PI/180,f=i.svg.arc().startAngle(function(t){return-d/2}).endAngle(function(t){return d/2}).innerRadius(function(t){return e.radialScale(l+(t[2]||0))}).outerRadius(function(t){return e.radialScale(l+(t[2]||0))+e.radialScale(t[1])});c.arc=function(t,n,r){i.select(this).attr({class:"mark arc",d:f,transform:function(t,n){return"rotate("+(e.orientation+s(t[0])+90)+")"}})};var p={fill:function(e,n,i){return t[i].data.color},stroke:function(e,n,i){return t[i].data.strokeColor},"stroke-width":function(e,n,i){return t[i].data.strokeSize+"px"},"stroke-dasharray":function(e,i,r){return n[t[r].data.strokeDash]},opacity:function(e,n,i){return t[i].data.opacity},display:function(e,n,i){return void 0===t[i].data.visible||t[i].data.visible?"block":"none"}},v=i.select(this).selectAll("g.layer").data(o);v.enter().append("g").attr({class:"layer"});var g=v.selectAll("path.mark").data(function(t,e){return t});g.enter().append("path").attr({class:"mark"}),g.style(p).each(c[e.geometryType]),g.exit().remove(),v.exit().remove()})}return a.config=function(e){return arguments.length?(e.forEach(function(e,n){t[n]||(t[n]={}),r(t[n],o.PolyChart.defaultConfig()),r(t[n],e)}),this):t},a.getColorScale=function(){},i.rebind(a,e,"on"),a},o.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:i.scale.category20()}}},o.BarChart=function(){return o.PolyChart()},o.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},o.AreaChart=function(){return o.PolyChart()},o.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},o.DotPlot=function(){return o.PolyChart()},o.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},o.LinePlot=function(){return o.PolyChart()},o.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},o.Legend=function(){var t=o.Legend.defaultConfig(),e=i.dispatch("hover");function n(){var e=t.legendConfig,a=t.data.map(function(t,n){return[].concat(t).map(function(t,i){var a=r({},e.elements[n]);return a.name=t,a.color=[].concat(e.elements[n].color)[i],a})}),o=i.merge(a);o=o.filter(function(t,n){return e.elements[n]&&(e.elements[n].visibleInLegend||void 0===e.elements[n].visibleInLegend)}),e.reverseOrder&&(o=o.reverse());var s=e.container;("string"==typeof s||s.nodeName)&&(s=i.select(s));var l=o.map(function(t,e){return t.color}),c=e.fontSize,u=null==e.isContinuous?"number"==typeof o[0]:e.isContinuous,h=u?e.height:c*o.length,d=s.classed("legend-group",!0).selectAll("svg").data([0]),f=d.enter().append("svg").attr({width:300,height:h+c,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});f.append("g").classed("legend-axis",!0),f.append("g").classed("legend-marks",!0);var p=i.range(o.length),v=i.scale[u?"linear":"ordinal"]().domain(p).range(l),g=i.scale[u?"linear":"ordinal"]().domain(p)[u?"range":"rangePoints"]([0,h]);if(u){var m=d.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);m.enter().append("stop"),m.attr({offset:function(t,e){return e/(l.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),d.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var y=d.select(".legend-marks").selectAll("path.legend-mark").data(o);y.enter().append("path").classed("legend-mark",!0),y.attr({transform:function(t,e){return"translate("+[c/2,g(e)+c/2]+")"},d:function(t,e){var n,r,a;return a=3*(r=c),"line"===(n=t.symbol)?"M"+[[-r/2,-r/12],[r/2,-r/12],[r/2,r/12],[-r/2,r/12]]+"Z":-1!=i.svg.symbolTypes.indexOf(n)?i.svg.symbol().type(n).size(a)():i.svg.symbol().type("square").size(a)()},fill:function(t,e){return v(e)}}),y.exit().remove()}var _=i.svg.axis().scale(g).orient("right"),x=d.select("g.legend-axis").attr({transform:"translate("+[u?e.colorBandWidth:c,c/2]+")"}).call(_);return x.selectAll(".domain").style({fill:"none",stroke:"none"}),x.selectAll("line").style({fill:"none",stroke:u?e.textColor:"none"}),x.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(t,e){return o[e].name}),n}return n.config=function(e){return arguments.length?(r(t,e),this):t},i.rebind(n,e,"on"),n},o.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},o.tooltipPanel=function(){var t,e,n,a={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},s="tooltip-"+o.tooltipPanel.uid++,l=10,c=function(){var i=(t=a.container.selectAll("g."+s).data([0])).enter().append("g").classed(s,!0).style({"pointer-events":"none",display:"none"});return n=i.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),e=i.append("text").attr({dx:a.padding+l,dy:.3*+a.fontSize}),c};return c.text=function(r){var o=i.hsl(a.color).l,s=o>=.5?"#aaa":"white",u=r||"";e.style({fill:o>=.5?"black":"white","font-size":a.fontSize+"px"}).text(u);var h=a.padding,d=e.node().getBBox(),f={fill:a.color,stroke:s,"stroke-width":"2px"},p=d.width+2*h+l,v=d.height+2*h;return n.attr({d:"M"+[[l,-v/2],[l,-v/4],[a.hasTick?0:l,0],[l,v/4],[l,v/2],[p,v/2],[p,-v/2]].join("L")+"Z"}).style(f),t.attr({transform:"translate("+[l,-v/2+2*h]+")"}),t.style({display:"block"}),c},c.move=function(e){if(t)return t.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),c},c.hide=function(){if(t)return t.style({display:"none"}),c},c.show=function(){if(t)return t.style({display:"block"}),c},c.config=function(t){return r(a,t),c},c},o.tooltipPanel.uid=1,o.adapter={},o.adapter.plotly=function(){return{convert:function(t,e){var n={};if(t.data&&(n.data=t.data.map(function(t,n){var i=r({},t);return[[i,["marker","color"],["color"]],[i,["marker","opacity"],["opacity"]],[i,["marker","line","color"],["strokeColor"]],[i,["marker","line","dash"],["strokeDash"]],[i,["marker","line","width"],["strokeSize"]],[i,["marker","symbol"],["dotType"]],[i,["marker","size"],["dotSize"]],[i,["marker","barWidth"],["barWidth"]],[i,["line","interpolation"],["lineInterpolation"]],[i,["showlegend"],["visibleInLegend"]]].forEach(function(t,n){o.util.translator.apply(null,t.concat(e))}),e||delete i.marker,e&&delete i.groupId,e?("LinePlot"===i.geometry?(i.type="scatter",!0===i.dotVisible?(delete i.dotVisible,i.mode="lines+markers"):i.mode="lines"):"DotPlot"===i.geometry?(i.type="scatter",i.mode="markers"):"AreaChart"===i.geometry?i.type="area":"BarChart"===i.geometry&&(i.type="bar"),delete i.geometry):("scatter"===i.type?"lines"===i.mode?i.geometry="LinePlot":"markers"===i.mode?i.geometry="DotPlot":"lines+markers"===i.mode&&(i.geometry="LinePlot",i.dotVisible=!0):"area"===i.type?i.geometry="AreaChart":"bar"===i.type&&(i.geometry="BarChart"),delete i.mode,delete i.type),i}),!e&&t.layout&&"stack"===t.layout.barmode)){var a=o.util.duplicates(n.data.map(function(t,e){return t.geometry}));n.data.forEach(function(t,e){var i=a.indexOf(t.geometry);-1!=i&&(n.data[e].groupId=i)})}if(t.layout){var s=r({},t.layout);if([[s,["plot_bgcolor"],["backgroundColor"]],[s,["showlegend"],["showLegend"]],[s,["radialaxis"],["radialAxis"]],[s,["angularaxis"],["angularAxis"]],[s.angularaxis,["showline"],["gridLinesVisible"]],[s.angularaxis,["showticklabels"],["labelsVisible"]],[s.angularaxis,["nticks"],["ticksCount"]],[s.angularaxis,["tickorientation"],["tickOrientation"]],[s.angularaxis,["ticksuffix"],["ticksSuffix"]],[s.angularaxis,["range"],["domain"]],[s.angularaxis,["endpadding"],["endPadding"]],[s.radialaxis,["showline"],["gridLinesVisible"]],[s.radialaxis,["tickorientation"],["tickOrientation"]],[s.radialaxis,["ticksuffix"],["ticksSuffix"]],[s.radialaxis,["range"],["domain"]],[s.angularAxis,["showline"],["gridLinesVisible"]],[s.angularAxis,["showticklabels"],["labelsVisible"]],[s.angularAxis,["nticks"],["ticksCount"]],[s.angularAxis,["tickorientation"],["tickOrientation"]],[s.angularAxis,["ticksuffix"],["ticksSuffix"]],[s.angularAxis,["range"],["domain"]],[s.angularAxis,["endpadding"],["endPadding"]],[s.radialAxis,["showline"],["gridLinesVisible"]],[s.radialAxis,["tickorientation"],["tickOrientation"]],[s.radialAxis,["ticksuffix"],["ticksSuffix"]],[s.radialAxis,["range"],["domain"]],[s.font,["outlinecolor"],["outlineColor"]],[s.legend,["traceorder"],["reverseOrder"]],[s,["labeloffset"],["labelOffset"]],[s,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(t,n){o.util.translator.apply(null,t.concat(e))}),e?(void 0!==s.tickLength&&(s.angularaxis.ticklen=s.tickLength,delete s.tickLength),s.tickColor&&(s.angularaxis.tickcolor=s.tickColor,delete s.tickColor)):(s.angularAxis&&void 0!==s.angularAxis.ticklen&&(s.tickLength=s.angularAxis.ticklen),s.angularAxis&&void 0!==s.angularAxis.tickcolor&&(s.tickColor=s.angularAxis.tickcolor)),s.legend&&"boolean"!=typeof s.legend.reverseOrder&&(s.legend.reverseOrder="normal"!=s.legend.reverseOrder),s.legend&&"boolean"==typeof s.legend.traceorder&&(s.legend.traceorder=s.legend.traceorder?"reversed":"normal",delete s.legend.reverseOrder),s.margin&&void 0!==s.margin.t){var l=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],u={};i.entries(s.margin).forEach(function(t,e){u[c[l.indexOf(t.key)]]=t.value}),s.margin=u}e&&(delete s.needsEndSpacing,delete s.minorTickColor,delete s.minorTicks,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksStep,delete s.angularaxis.rewriteTicks,delete s.angularaxis.nticks,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksStep,delete s.radialaxis.rewriteTicks,delete s.radialaxis.nticks),n.layout=s}return n}}}},{"../../../constants/alignment":138,"../../../lib":159,d3:8}],240:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../../lib"),a=t("../../../components/color"),o=t("./micropolar"),s=t("./undo_manager"),l=r.extendDeepAll,c=e.exports={};c.framework=function(t){var e,n,r,a,u,h=new s;function d(n,s){return s&&(u=s),i.select(i.select(u).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),e=e?l(e,n):n,r||(r=o.Axis()),a=o.adapter.plotly().convert(e),r.config(a).render(u),t.data=e.data,t.layout=e.layout,c.fillLayout(t),e}return d.isPolar=!0,d.svg=function(){return r.svg()},d.getConfig=function(){return e},d.getLiveConfig=function(){return o.adapter.plotly().convert(r.getLiveConfig(),!0)},d.getLiveScales=function(){return{t:r.angularScale(),r:r.radialScale()}},d.setUndoPoint=function(){var t,i,r=this,a=o.util.cloneJson(e);t=a,i=n,h.add({undo:function(){i&&r(i)},redo:function(){r(t)}}),n=o.util.cloneJson(a)},d.undo=function(){h.undo()},d.redo=function(){h.redo()},d},c.fillLayout=function(t){var e=i.select(t).selectAll(".plot-container"),n=e.selectAll(".svg-container"),r=t.framework&&t.framework.svg&&t.framework.svg();t._fullLayout=l({width:800,height:600,paper_bgcolor:a.background,_container:e,_paperdiv:n,_paper:r},t.layout)}},{"../../../components/color":43,"../../../lib":159,"./micropolar":239,"./undo_manager":241,d3:8}],241:[function(t,e,n){"use strict";e.exports=function(){var t,e=[],n=-1,i=!1;function r(t,e){return t?(i=!0,t[e](),i=!1,this):this}return{add:function(t){return i?this:(e.splice(n+1,e.length-n),e.push(t),n=e.length-1,this)},setCallback:function(e){t=e},undo:function(){var i=e[n];return i?(r(i,"undo"),n-=1,t&&t(i.undo),this):this},redo:function(){var i=e[n+1];return i?(r(i,"redo"),n+=1,t&&t(i.redo),this):this},clear:function(){e=[],n=-1},hasUndo:function(){return-1!==n},hasRedo:function(){return n<e.length-1},getCommands:function(){return e},getPreviousCommand:function(){return e[n-1]},getIndex:function(){return n}}}},{}],242:[function(t,e,n){"use strict";var i=t("./lib/loggers"),r=t("./lib/noop"),a=t("./lib/push_unique"),o=t("./lib/is_plain_object"),s=t("./lib/extend"),l=t("./plots/attributes"),c=t("./plots/layout_attributes"),u=s.extendFlat,h=s.extendDeepAll;function d(t){var e=t.name,r=t.categories,a=t.meta;if(n.modules[e])i.log("Type "+e+" already registered");else{n.subplotsRegistry[t.basePlotModule.name]||function(t){var e=t.name;if(n.subplotsRegistry[e])i.log("Plot type "+e+" already registered.");else for(var r in g(t),n.subplotsRegistry[e]=t,n.componentsRegistry)_(r,t.name)}(t.basePlotModule);for(var o={},s=0;s<r.length;s++)o[r[s]]=!0,n.allCategories[r[s]]=!0;for(var l in n.modules[e]={_module:t,categories:o},a&&Object.keys(a).length&&(n.modules[e].meta=a),n.allTypes.push(e),n.componentsRegistry)m(l,e);t.layoutAttributes&&u(n.traceLayoutAttributes,t.layoutAttributes)}}function f(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var e=t.name;for(var i in n.componentsRegistry[e]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&a(n.layoutArrayContainers,e),g(t)),n.modules)m(e,i);for(var r in n.subplotsRegistry)_(e,r);for(var o in n.transformsRegistry)y(e,o);t.schema&&t.schema.layout&&h(c,t.schema.layout)}function p(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var e="Transform module "+t.name,r="function"==typeof t.transform,a="function"==typeof t.calcTransform;if(!r&&!a)throw new Error(e+" is missing a *transform* or *calcTransform* method.");for(var s in r&&a&&i.log([e+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),o(t.attributes)||i.log(e+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&i.log(e+" registered without a *supplyDefaults* method."),n.transformsRegistry[t.name]=t,n.componentsRegistry)y(s,t.name)}function v(t){var e=t.name,i=e.split("-")[0],r=t.dictionary,a=t.format,o=r&&Object.keys(r).length,s=a&&Object.keys(a).length,l=n.localeRegistry,c=l[e];if(c||(l[e]=c={}),i!==e){var u=l[i];u||(l[i]=u={}),o&&u.dictionary===c.dictionary&&(u.dictionary=r),s&&u.format===c.format&&(u.format=a)}o&&(c.dictionary=r),s&&(c.format=a)}function g(t){if(t.layoutAttributes){var e=t.layoutAttributes._arrayAttrRegexps;if(e)for(var i=0;i<e.length;i++)a(n.layoutArrayRegexes,e[i])}}function m(t,e){var i=n.componentsRegistry[t].schema;if(i&&i.traces){var r=i.traces[e];r&&h(n.modules[e]._module.attributes,r)}}function y(t,e){var i=n.componentsRegistry[t].schema;if(i&&i.transforms){var r=i.transforms[e];r&&h(n.transformsRegistry[e].attributes,r)}}function _(t,e){var i=n.componentsRegistry[t].schema;if(i&&i.subplots){var r=n.subplotsRegistry[e],a=r.layoutAttributes,o="subplot"===r.attr?r.name:r.attr;Array.isArray(o)&&(o=o[0]);var s=i.subplots[o];a&&s&&h(a,s)}}function x(t){return"object"==typeof t&&(t=t.type),t}n.modules={},n.allCategories={},n.allTypes=[],n.subplotsRegistry={},n.transformsRegistry={},n.componentsRegistry={},n.layoutArrayContainers=[],n.layoutArrayRegexes=[],n.traceLayoutAttributes={},n.localeRegistry={},n.apiMethodRegistry={},n.collectableSubplotTypes=null,n.register=function(t){if(n.collectableSubplotTypes=null,!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(!i)throw new Error("Invalid module was attempted to be registered!");switch(i.moduleType){case"trace":d(i);break;case"transform":p(i);break;case"component":f(i);break;case"locale":v(i);break;case"apiMethod":n.apiMethodRegistry[i.name]=i.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},n.getModule=function(t){var e=n.modules[x(t)];return!!e&&e._module},n.traceIs=function(t,e){if("various"===(t=x(t)))return!1;var r=n.modules[t];return r||(t&&"area"!==t&&i.log("Unrecognized trace type "+t+"."),r=n.modules[l.type.dflt]),!!r.categories[e]},n.getTransformIndices=function(t,e){for(var n=[],i=t.transforms||[],r=0;r<i.length;r++)i[r].type===e&&n.push(r);return n},n.hasTransform=function(t,e){for(var n=t.transforms||[],i=0;i<n.length;i++)if(n[i].type===e)return!0;return!1},n.getComponentMethod=function(t,e){var i=n.componentsRegistry[t];return i&&i[e]||r},n.call=function(){var t=arguments[0],e=[].slice.call(arguments,1);return n.apiMethodRegistry[t].apply(null,e)}},{"./lib/extend":153,"./lib/is_plain_object":160,"./lib/loggers":163,"./lib/noop":168,"./lib/push_unique":172,"./plots/attributes":200,"./plots/layout_attributes":233}],243:[function(t,e,n){"use strict";var i=t("../lib"),r=i.extendFlat,a=i.extendDeep;function o(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}e.exports=function(t,e){var n;t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var i=t.layout,s=a([],t.data),l=a({},i,o(e.tileClass)),c=t._context||{};if(e.width&&(l.width=e.width),e.height&&(l.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){l.annotations=[];var u=Object.keys(l);for(n=0;n<u.length;n++)["xaxis","yaxis","zaxis"].indexOf(u[n].slice(0,5))>-1&&(l[u[n]].title={text:""});for(n=0;n<s.length;n++){var h=s[n];h.showscale=!1,h.marker&&(h.marker.showscale=!1),"pie"===h.type&&(h.textposition="none")}}if(Array.isArray(e.annotations))for(n=0;n<e.annotations.length;n++)l.annotations.push(e.annotations[n]);var d=Object.keys(l).filter(function(t){return t.match(/^scene\d*$/)});if(d.length){var f={};for("thumbnail"===e.tileClass&&(f={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<d.length;n++){var p=l[d[n]];p.xaxis||(p.xaxis={}),p.yaxis||(p.yaxis={}),p.zaxis||(p.zaxis={}),r(p.xaxis,f),r(p.yaxis,f),r(p.zaxis,f),p._scene=null}}var v=document.createElement("div");e.tileClass&&(v.className=e.tileClass);var g={gd:v,td:v,layout:l,data:s,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return"transparent"!==e.setBackground&&(g.config.setBackground=e.setBackground||"opaque"),g.gd.defaultLayout=o(e.tileClass),g}},{"../lib":159}],244:[function(t,e,n){"use strict";var i=t("../plot_api/to_image"),r=t("../lib"),a=t("./filesaver");e.exports=function(t,e){var n;return r.isPlainObject(t)||(n=r.getGraphDiv(t)),(e=e||{}).format=e.format||"png",new Promise(function(o,s){n&&n._snapshotInProgress&&s(new Error("Snapshotting already in progress.")),r.isIE()&&"svg"!==e.format&&s(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),n&&(n._snapshotInProgress=!0);var l=i(t,e),c=e.filename||t.fn||"newplot";c+="."+e.format,l.then(function(t){return n&&(n._snapshotInProgress=!1),a(t,c)}).then(function(t){o(t)}).catch(function(t){n&&(n._snapshotInProgress=!1),s(t)})})}},{"../lib":159,"../plot_api/to_image":196,"./filesaver":245}],245:[function(t,e,n){"use strict";e.exports=function(t,e){var n=document.createElement("a"),i="download"in n,r=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(a,o){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&o(new Error("IE < 10 unsupported")),r&&(document.location.href="data:application/octet-stream"+t.slice(t.search(/[,;]/)),a(e)),e||(e="download"),i&&(n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),a(e)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var s=t.split(/^data:image\/svg\+xml,/)[1],l=decodeURIComponent(s);navigator.msSaveBlob(new Blob([l]),e),a(e)}o(new Error("download error"))})}},{}],246:[function(t,e,n){"use strict";n.getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},n.getRedrawFunc=function(t){var e=t._fullLayout||{};if(e._has&&e._has("polar")||!t.data||!t.data[0]||!t.data[0].r)return function(){(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()})}}},{}],247:[function(t,e,n){"use strict";var i=t("./helpers"),r={getDelay:i.getDelay,getRedrawFunc:i.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};e.exports=r},{"./cloneplot":243,"./download":244,"./helpers":246,"./svgtoimg":248,"./toimage":249,"./tosvg":250}],248:[function(t,e,n){"use strict";var i=t("../lib"),r=t("events").EventEmitter;e.exports=function(t){var e=t.emitter||new r,n=new Promise(function(r,a){var o=window.Image,s=t.svg,l=t.format||"png";if(i.isIE()&&"svg"!==l){var c=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return a(c),t.promise?n:e.emit("error",c)}var u=t.canvas,h=t.scale||1,d=h*(t.width||300),f=h*(t.height||150),p=u.getContext("2d"),v=new o,g="data:image/svg+xml,"+encodeURIComponent(s);u.width=d,u.height=f,v.onload=function(){var n;switch("svg"!==l&&p.drawImage(v,0,0,d,f),l){case"jpeg":n=u.toDataURL("image/jpeg");break;case"png":n=u.toDataURL("image/png");break;case"webp":n=u.toDataURL("image/webp");break;case"svg":n=g;break;default:var i="Image format is not jpeg, png, svg or webp.";if(a(new Error(i)),!t.promise)return e.emit("error",i)}r(n),t.promise||e.emit("success",n)},v.onerror=function(n){if(a(n),!t.promise)return e.emit("error",n)},v.src=g});return t.promise?n:e}},{"../lib":159,events:7}],249:[function(t,e,n){"use strict";var i=t("events").EventEmitter,r=t("../registry"),a=t("../lib"),o=t("./helpers"),s=t("./cloneplot"),l=t("./tosvg"),c=t("./svgtoimg");e.exports=function(t,e){var n=new i,u=s(t,{format:"png"}),h=u.gd;h.style.position="absolute",h.style.left="-5000px",document.body.appendChild(h);var d=o.getRedrawFunc(h);return r.call("plot",h,u.data,u.layout,u.config).then(d).then(function(){var t=o.getDelay(h._fullLayout);setTimeout(function(){var t=l(h),i=document.createElement("canvas");i.id=a.randstr(),(n=c({format:e.format,width:h._fullLayout.width,height:h._fullLayout.height,canvas:i,emitter:n,svg:t})).clean=function(){h&&document.body.removeChild(h)}},t)}).catch(function(t){n.emit("error",t)}),n}},{"../lib":159,"../registry":242,"./cloneplot":243,"./helpers":246,"./svgtoimg":248,"./tosvg":250,events:7}],250:[function(t,e,n){"use strict";var i=t("d3"),r=t("../lib"),a=t("../components/drawing"),o=t("../components/color"),s=t("../constants/xmlns_namespaces"),l=/"/g,c=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");e.exports=function(t,e,n){var u,h=t._fullLayout,d=h._paper,f=h._toppaper,p=h.width,v=h.height;d.insert("rect",":first-child").call(a.setRect,0,0,p,v).call(o.fill,h.paper_bgcolor);var g=h._basePlotModules||[];for(u=0;u<g.length;u++){var m=g[u];m.toSVG&&m.toSVG(t)}if(f){var y=f.node().childNodes,_=Array.prototype.slice.call(y);for(u=0;u<_.length;u++){var x=_[u];x.childNodes.length&&d.node().appendChild(x)}}h._draggers&&h._draggers.remove(),d.node().style.background="",d.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var t=i.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(l,"TOBESTRIPPED"))}else t.remove()}),d.selectAll(".point, .scatterpts, .legendfill>path, .legendlines>path, .cbfill").each(function(){var t=i.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(l,"TOBESTRIPPED"));var n=this.style.stroke;n&&-1!==n.indexOf("url(")&&t.style("stroke",n.replace(l,"TOBESTRIPPED"))}),"pdf"!==e&&"eps"!==e||d.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),d.node().setAttributeNS(s.xmlns,"xmlns",s.svg),d.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===e&&n&&(d.attr("width",n*p),d.attr("height",n*v),d.attr("viewBox","0 0 "+p+" "+v));var b=(new window.XMLSerializer).serializeToString(d.node());return b=(b=(b=function(t){var e=i.select("body").append("div").style({display:"none"}).html(""),n=t.replace(/(&[^;]*;)/gi,function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":e.html(t).text()});return e.remove(),n}(b)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(c,"'"),r.isIE()&&(b=(b=(b=b.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),b}},{"../components/color":43,"../components/drawing":64,"../constants/xmlns_namespaces":141,"../lib":159,d3:8}],251:[function(t,e,n){"use strict";var i=t("../../lib").mergeArray;e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;i(e.text,t,"tx"),i(e.hovertext,t,"htx");var r=e.marker;if(r){i(r.opacity,t,"mo"),i(r.color,t,"mc");var a=r.line;a&&(i(a.color,t,"mlc"),i(a.width,t,"mlw"))}}},{"../../lib":159}],252:[function(t,e,n){"use strict";var i=t("../scatter/attributes"),r=t("../../components/fx/hovertemplate_attributes"),a=t("../../components/colorscale/attributes"),o=t("../../components/colorbar/attributes"),s=t("../../plots/font_attributes"),l=t("./constants.js"),c=t("../../lib/extend").extendFlat,u=s({editType:"calc",arrayOk:!0,colorEditType:"style"}),h=c({},i.marker.line.width,{dflt:0}),d=c({width:h,editType:"calc"},a("marker.line")),f=c({line:d,editType:"calc"},a("marker"),{colorbar:o,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});e.exports={x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,text:i.text,hovertext:i.hovertext,hovertemplate:r({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},textfont:c({},u,{}),insidetextfont:c({},u,{}),outsidetextfont:c({},u,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:c({},i.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:f,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:i.selected.marker.opacity,color:i.selected.marker.color,editType:"style"},textfont:i.selected.textfont,editType:"style"},unselected:{marker:{opacity:i.unselected.marker.opacity,color:i.unselected.marker.color,editType:"style"},textfont:i.unselected.textfont,editType:"style"},r:i.r,t:i.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorbar/attributes":44,"../../components/colorscale/attributes":50,"../../components/fx/hovertemplate_attributes":81,"../../lib/extend":153,"../../plots/font_attributes":229,"../scatter/attributes":280,"./constants.js":254}],253:[function(t,e,n){"use strict";var i=t("../../plots/cartesian/axes"),r=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/calc"),o=t("./arrays_to_calcdata"),s=t("../scatter/calc_selection");e.exports=function(t,e){var n,l,c=i.getFromId(t,e.xaxis||"x"),u=i.getFromId(t,e.yaxis||"y");"h"===e.orientation?(n=c.makeCalcdata(e,"x"),l=u.makeCalcdata(e,"y")):(n=u.makeCalcdata(e,"y"),l=c.makeCalcdata(e,"x"));for(var h=Math.min(l.length,n.length),d=new Array(h),f=0;f<h;f++)d[f]={p:l[f],s:n[f]},e.ids&&(d[f].id=String(e.ids[f]));return r(e,"marker")&&a(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),r(e,"marker.line")&&a(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}),o(d,e),s(d,e),d}},{"../../components/colorscale/calc":51,"../../components/colorscale/helpers":54,"../../plots/cartesian/axes":203,"../scatter/calc_selection":282,"./arrays_to_calcdata":251}],254:[function(t,e,n){"use strict";e.exports={eventDataKeys:[]}},{}],255:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib").isArrayOrTypedArray,a=t("../../constants/numerical").BADNUM,o=t("../../registry"),s=t("../../plots/cartesian/axes"),l=t("../../plots/cartesian/axis_ids").getAxisGroup,c=t("./sieve.js");function u(t,e,n,o){if(o.length){var u,x,b,w,k=t._fullLayout.barmode,T="overlay"===k,M="group"===k;if(function(t,e,n,a){var o,s;for(o=0;o<a.length;o++){var l,c=a[o],u=c[0].trace,h=u.base,d="h"===u.orientation?u.xcalendar:u.ycalendar,f="category"===n.type||"multicategory"===n.type?function(){return null}:n.d2c;if(r(h)){for(s=0;s<Math.min(h.length,c.length);s++)l=f(h[s],0,d),i(l)?(c[s].b=+l,c[s].hasB=1):c[s].b=0;for(;s<c.length;s++)c[s].b=0}else{l=f(h,0,d);var p=i(l);for(l=p?l:0,s=0;s<c.length;s++)c[s].b=l,p&&(c[s].hasB=1)}}}(0,0,n,o),T)h(t,e,n,o);else if(M){for(u=[],x=[],b=0;b<o.length;b++)void 0===(w=o[b])[0].trace.offset?x.push(w):u.push(w);x.length&&function(t,e,n,i){var r=t._fullLayout.barnorm,a=new c(x,!1,!r);(function(t,e,n){for(var i=t._fullLayout,r=i.bargroupgap||0,a=n.minDiff,o=n.traces,s=o.length,c=n.positions.length!==n.distinctPositions.length,u=a*(1-i.bargap),h=l(i,e._id)+o[0][0].trace.orientation,d=i._alignmentOpts[h]||{},g=0;g<s;g++){var m,y,_=o[g],x=_[0].trace,b=Object.keys((d[x.alignmentgroup]||{}).offsetGroups||{}).length,w=(m=b?u/b:c?u/s:u)*(1-r);y=b?((2*x._offsetIndex+1-b)*m-w)/2:c?((2*g+1-s)*m-w)/2:-w/2;var k=_[0].t;k.barwidth=w,k.poffset=y,k.bargroupwidth=u,k.bardelta=a}n.binWidth=o[0][0].t.barwidth/100,f(n),p(0,e,n),v(0,e,n,c)})(t,e,a),r?(m(0,0,a),y(t,n,a)):g(0,n,a)}(t,e,n),u.length&&h(t,e,n,u)}else{for(u=[],x=[],b=0;b<o.length;b++)void 0===(w=o[b])[0].trace.base?x.push(w):u.push(w);x.length&&function(t,e,n,i){var r=t._fullLayout,o=r.barmode,l="relative"===o,u=r.barnorm,h=new c(i,l,!(u||"stack"===o||l));d(t,e,h),function(t,e,n){for(var i=t._fullLayout.barnorm,r=_(e),o=n.traces,l=0;l<o.length;l++){for(var c=o[l],u=c[0].trace,h=[],d=0;d<c.length;d++){var f=c[d];if(f.s!==a){var p=n.put(f.p,f.b+f.s),v=p+f.b+f.s;f.b=p,f[r]=v,i||(h.push(v),f.hasB&&h.push(p))}}i||(u._extremes[e._id]=s.findExtremes(e,h,{tozero:!0,padded:!0}))}}(t,n,h);for(var f=0;f<i.length;f++)for(var p=i[f],v=0;v<p.length;v++){var g=p[v];g.s!==a&&g.b+g.s===h.get(g.p,g.s)&&(g._outmost=!0)}u&&y(t,n,h)}(t,e,n,x),u.length&&h(t,e,n,u)}!function(t,e){var n,r,a,o=_(e),s={},l=1/0,c=-1/0;for(n=0;n<t.length;n++)for(a=t[n],r=0;r<a.length;r++){var u=a[r].p;i(u)&&(l=Math.min(l,u),c=Math.max(c,u))}var h=1e4/(c-l),d=s.round=function(t){return String(Math.round(h*(t-l)))};for(n=0;n<t.length;n++){(a=t[n])[0].t.extents=s;var f=a[0].t.poffset,p=Array.isArray(f);for(r=0;r<a.length;r++){var v=a[r],g=v[o]-v.w/2;if(i(g)){var m=v[o]+v.w/2,y=d(v.p);s[y]=s[y]?[Math.min(g,s[y][0]),Math.max(m,s[y][1])]:[g,m]}v.p0=v.p+(p?f[r]:f),v.p1=v.p0+v.w,v.s0=v.b,v.s1=v.s0+v.s}}}(o,e)}}function h(t,e,n,i){for(var r=t._fullLayout.barnorm,a=!r,o=0;o<i.length;o++){var s=new c([i[o]],!1,a);d(t,e,s),r?(m(0,0,s),y(t,n,s)):g(0,n,s)}}function d(t,e,n){for(var i=t._fullLayout,r=n.minDiff,a=n.traces,o=r*(1-i.bargap),s=o*(1-(i.bargroupgap||0)),l=-s/2,c=0;c<a.length;c++){var u=a[c][0].t;u.barwidth=s,u.poffset=l,u.bargroupwidth=o,u.bardelta=r}n.binWidth=a[0][0].t.barwidth/100,f(n),p(0,e,n),v(0,e,n)}function f(t){var e,n,a=t.traces;for(e=0;e<a.length;e++){var o,s=a[e],l=s[0],c=l.trace,u=l.t,h=c._offset||c.offset,d=u.poffset;if(r(h)){for(o=Array.prototype.slice.call(h,0,s.length),n=0;n<o.length;n++)i(o[n])||(o[n]=d);for(n=o.length;n<s.length;n++)o.push(d);u.poffset=o}else void 0!==h&&(u.poffset=h);var f=c._width||c.width,p=u.barwidth;if(r(f)){var v=Array.prototype.slice.call(f,0,s.length);for(n=0;n<v.length;n++)i(v[n])||(v[n]=p);for(n=v.length;n<s.length;n++)v.push(p);if(u.barwidth=v,void 0===h){for(o=[],n=0;n<s.length;n++)o.push(d+(p-v[n])/2);u.poffset=o}}else void 0!==f&&(u.barwidth=f,void 0===h&&(u.poffset=d+(p-f)/2))}}function p(t,e,n){for(var i=n.traces,r=_(e),a=0;a<i.length;a++)for(var o=i[a],s=o[0].t,l=s.poffset,c=Array.isArray(l),u=s.barwidth,h=Array.isArray(u),d=0;d<o.length;d++){var f=o[d],p=f.w=h?u[d]:u;f[r]=f.p+(c?l[d]:l)+p/2}}function v(t,e,n,i){var r=n.traces,a=n.minDiff/2;s.minDtick(e,n.minDiff,n.distinctPositions[0],i);for(var o=0;o<r.length;o++){var l,c,u,h,d=r[o],f=d[0],p=f.trace,v=[];for(h=0;h<d.length;h++)c=(l=d[h]).p-a,v.push(c,u=l.p+a);if(p.width||p.offset){var g=f.t,m=g.poffset,y=g.barwidth,_=Array.isArray(m),x=Array.isArray(y);for(h=0;h<d.length;h++)u=(c=(l=d[h]).p+(_?m[h]:m))+(x?y[h]:y),v.push(c,u)}p._extremes[e._id]=s.findExtremes(e,v,{padded:!1})}}function g(t,e,n){for(var i=n.traces,r=_(e),a=0;a<i.length;a++){for(var o=i[a],l=o[0].trace,c=[],u=!0,h=0;h<o.length;h++){var d=o[h],f=d.b,p=f+d.s;d[r]=p,c.push(p),d.hasB&&c.push(f),d.hasB&&d.b>0&&d.s>0||(u=!1)}l._extremes[e._id]=s.findExtremes(e,c,{tozero:!u,padded:!0})}}function m(t,e,n){for(var i=n.traces,r=0;r<i.length;r++)for(var o=i[r],s=0;s<o.length;s++){var l=o[s];l.s!==a&&n.put(l.p,l.b+l.s)}}function y(t,e,n){var r=t._fullLayout,o=n.traces,l=_(e),c="fraction"===r.barnorm?1:100,u=c/1e9,h=e.l2c(e.c2l(0)),d="stack"===r.barmode?c:h;function f(t){return i(e.c2l(t))&&(t<h-u||t>d+u||!i(h))}for(var p=0;p<o.length;p++){for(var v=o[p],g=v[0].trace,m=[],y=!0,x=!1,b=0;b<v.length;b++){var w=v[b];if(w.s!==a){var k=Math.abs(c/n.get(w.p,w.s));w.b*=k,w.s*=k;var T=w.b,M=T+w.s;w[l]=M,m.push(M),x=x||f(M),w.hasB&&(m.push(T),x=x||f(T)),w.hasB&&w.b>0&&w.s>0||(y=!1)}}g._extremes[e._id]=s.findExtremes(e,m,{tozero:!y,padded:x})}}function _(t){return t._id.charAt(0)}e.exports={crossTraceCalc:function(t,e){for(var n=e.xaxis,i=e.yaxis,r=t._fullData,a=t.calcdata,s=[],l=[],c=0;c<r.length;c++){var h=r[c];!0===h.visible&&o.traceIs(h,"bar")&&h.xaxis===n._id&&h.yaxis===i._id&&("h"===h.orientation?s.push(a[c]):l.push(a[c]))}u(t,n,i,l),u(t,i,n,s)},setGroupPositions:u}},{"../../constants/numerical":140,"../../lib":159,"../../plots/cartesian/axes":203,"../../plots/cartesian/axis_ids":206,"../../registry":242,"./sieve.js":264,"fast-isnumeric":10}],256:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../components/color"),a=t("../../registry"),o=t("../scatter/xy_defaults"),s=t("../bar/style_defaults"),l=t("../../plots/cartesian/axis_ids").getAxisGroup,c=t("./attributes");function u(t,e,n,i){var r=e.orientation,a=l(n,e[{v:"x",h:"y"}[r]+"axis"])+r,o=n._alignmentOpts||{},s=i("alignmentgroup"),c=o[a];c||(c=o[a]={});var u=c[s];u?u.traces.push(e):u=c[s]={traces:[e],alignmentIndex:Object.keys(c).length,offsetGroups:{}};var h=i("offsetgroup"),d=u.offsetGroups,f=d[h];h&&(f||(f=d[h]={offsetIndex:Object.keys(d).length}),e._offsetIndex=f.offsetIndex)}e.exports={supplyDefaults:function(t,e,n,l){function u(n,r){return i.coerce(t,e,c,n,r)}var h=i.coerceFont;if(o(t,e,l,u)){u("orientation",e.x&&!e.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var d=u("textposition"),f=Array.isArray(d)||"auto"===d,p=f||"outside"===d;if(f||"inside"===d||p){var v=h(u,"textfont",l.font),g=i.extendFlat({},v);!(t.textfont&&t.textfont.color)&&delete g.color,h(u,"insidetextfont",g),p&&h(u,"outsidetextfont",v),u("constraintext"),u("selected.textfont.color"),u("unselected.textfont.color"),u("cliponaxis")}s(t,e,u,n,l);var m=(e.marker.line||{}).color,y=a.getComponentMethod("errorbars","supplyDefaults");y(t,e,m||r.defaultLine,{axis:"y"}),y(t,e,m||r.defaultLine,{axis:"x",inherit:"y"}),i.coerceSelectionMarkerOpacity(e,u)}else e.visible=!1},crossTraceDefaults:function(t,e){var n;function r(t){return i.coerce(n._input,n,c,t)}for(var a=0;a<t.length;a++)"bar"===(n=t[a]).type&&"group"===e.barmode&&u(0,n,e,r)},handleGroupingDefaults:u}},{"../../components/color":43,"../../lib":159,"../../plots/cartesian/axis_ids":206,"../../registry":242,"../bar/style_defaults":266,"../scatter/xy_defaults":306,"./attributes":252}],257:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("tinycolor2");n.coerceString=function(t,e,n){if("string"==typeof e){if(e||!t.noBlank)return e}else if("number"==typeof e&&!t.strict)return String(e);return void 0!==n?n:t.dflt},n.coerceNumber=function(t,e,n){if(i(e)){e=+e;var r=t.min,a=t.max;if(!(void 0!==r&&e<r||void 0!==a&&e>a))return e}return void 0!==n?n:t.dflt},n.coerceColor=function(t,e,n){return r(e).isValid()?e:void 0!==n?n:t.dflt},n.coerceEnumerated=function(t,e,n){return t.coerceNumber&&(e=+e),-1!==t.values.indexOf(e)?e:void 0!==n?n:t.dflt},n.getValue=function(t,e){var n;return Array.isArray(t)?e<t.length&&(n=t[e]):n=t,n}},{"fast-isnumeric":10,tinycolor2:26}],258:[function(t,e,n){"use strict";var i=t("../../components/fx"),r=t("../../registry"),a=t("../../components/color"),o=t("../scatter/fill_hover_text");function s(t,e){var n=e.mcc||t.marker.color,i=e.mlcc||t.marker.line.color,r=e.mlw||t.marker.line.width;return a.opacity(n)?n:a.opacity(i)&&r?i:void 0}e.exports={hoverPoints:function(t,e,n,a){var l,c,u,h,d,f,p,v=t.cd,g=v[0].trace,m=v[0].t,y="closest"===a,_=t.maxHoverDistance,x=t.maxSpikeDistance;function b(t){return t[u]-t.w/2}function w(t){return t[u]+t.w/2}var k=y?b:function(t){return Math.min(b(t),t.p-m.bardelta/2)},T=y?w:function(t){return Math.max(w(t),t.p+m.bardelta/2)};function M(t,e){return i.inbox(t-l,e-l,_+Math.min(1,Math.abs(e-t)/p)-1)}function A(t){return M(k(t),T(t))}function C(t){return i.inbox(t.b-c,t[h]-c,_+(t[h]-c)/(t[h]-t.b)-1)}"h"===g.orientation?(l=n,c=e,u="y",h="x",d=C,f=A):(l=e,c=n,u="x",h="y",f=C,d=A);var L=t[u+"a"],S=t[h+"a"];p=Math.abs(L.r2c(L.range[1])-L.r2c(L.range[0]));var E=i.getDistanceFunction(a,d,f,function(t){return(d(t)+f(t))/2});if(i.getClosest(v,E,t),!1!==t.index){y||(k=function(t){return Math.min(b(t),t.p-m.bargroupwidth/2)},T=function(t){return Math.max(w(t),t.p+m.bargroupwidth/2)});var O=v[t.index],P=g.base?O.b+O.s:O.s;t[h+"0"]=t[h+"1"]=S.c2p(O[h],!0),t[h+"LabelVal"]=P;var D=m.extents[m.extents.round(O.p)];return t[u+"0"]=L.c2p(y?k(O):D[0],!0),t[u+"1"]=L.c2p(y?T(O):D[1],!0),t[u+"LabelVal"]=O.p,t.spikeDistance=(C(O)+function(t){return M(b(t),w(t))}(O))/2+x-_,t[u+"Spike"]=L.c2p(O.p,!0),t.color=s(g,O),o(O,g,t),r.getComponentMethod("errorbars","hoverInfo")(O,g,t),t.hovertemplate=g.hovertemplate,[t]}},getTraceColor:s}},{"../../components/color":43,"../../components/fx":82,"../../registry":242,"../scatter/fill_hover_text":288}],259:[function(t,e,n){"use strict";var i={};i.attributes=t("./attributes"),i.layoutAttributes=t("./layout_attributes"),i.supplyDefaults=t("./defaults").supplyDefaults,i.crossTraceDefaults=t("./defaults").crossTraceDefaults,i.supplyLayoutDefaults=t("./layout_defaults"),i.calc=t("./calc"),i.crossTraceCalc=t("./cross_trace_calc").crossTraceCalc,i.colorbar=t("../scatter/marker_colorbar"),i.arraysToCalcdata=t("./arrays_to_calcdata"),i.plot=t("./plot"),i.style=t("./style").style,i.styleOnSelect=t("./style").styleOnSelect,i.hoverPoints=t("./hover").hoverPoints,i.selectPoints=t("./select"),i.moduleType="trace",i.name="bar",i.basePlotModule=t("../../plots/cartesian"),i.categories=["cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],i.meta={},e.exports=i},{"../../plots/cartesian":214,"../scatter/marker_colorbar":298,"./arrays_to_calcdata":251,"./attributes":252,"./calc":253,"./cross_trace_calc":255,"./defaults":256,"./hover":258,"./layout_attributes":260,"./layout_defaults":261,"./plot":262,"./select":263,"./style":265}],260:[function(t,e,n){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],261:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("../../plots/cartesian/axes"),a=t("../../lib"),o=t("./layout_attributes");e.exports=function(t,e,n){function s(n,i){return a.coerce(t,e,o,n,i)}for(var l=!1,c=!1,u=!1,h={},d=0;d<n.length;d++){var f=n[d];if(i.traceIs(f,"bar")&&f.visible){if(l=!0,"overlay"!==t.barmode&&"stack"!==t.barmode){var p=f.xaxis+f.yaxis;h[p]&&(u=!0),h[p]=!0}f.visible&&"histogram"===f.type&&"category"!==r.getFromId({_fullLayout:e},f["v"===f.orientation?"xaxis":"yaxis"]).type&&(c=!0)}}l&&("overlay"!==s("barmode")&&s("barnorm"),s("bargap",c&&!u?0:.2),s("bargroupgap"))}},{"../../lib":159,"../../plots/cartesian/axes":203,"../../registry":242,"./layout_attributes":260}],262:[function(t,e,n){"use strict";var i=t("d3"),r=t("fast-isnumeric"),a=t("../../lib"),o=t("../../lib/svg_text_utils"),s=t("../../components/color"),l=t("../../components/drawing"),c=t("../../registry"),u=t("./attributes"),h=u.text,d=u.textposition,f=t("./helpers"),p=t("./style");function v(t,e,n,i,r,a){var o;return r<1?o="scale("+r+") ":(r=1,o=""),"translate("+(n-r*t)+" "+(i-r*e)+")"+o+(a?"rotate("+a+" "+t+" "+e+") ":"")}e.exports=function(t,e,n,u){var g=e.xaxis,m=e.yaxis,y=t._fullLayout,_=a.makeTraceGroups(u,n,"trace bars").each(function(n){var c=i.select(this),u=n[0],_=u.trace;e.isRangePlot||(u.node3=c);var x=a.ensureSingle(c,"g","points").selectAll("g.point").data(a.identity);x.enter().append("g").classed("point",!0),x.exit().remove(),x.each(function(c,u){var x,b,w,k,T=i.select(this);if("h"===_.orientation?(w=m.c2p(c.p0,!0),k=m.c2p(c.p1,!0),x=g.c2p(c.s0,!0),b=g.c2p(c.s1,!0),c.ct=[b,(w+k)/2]):(x=g.c2p(c.p0,!0),b=g.c2p(c.p1,!0),w=m.c2p(c.s0,!0),k=m.c2p(c.s1,!0),c.ct=[(x+b)/2,k]),r(x)&&r(b)&&r(w)&&r(k)&&x!==b&&w!==k){var M=(c.mlw+1||_.marker.line.width+1||(c.trace?c.trace.marker.line.width:0)+1)-1,A=i.round(M/2%1,2);if(!t._context.staticPlot){var C=s.opacity(c.mc||_.marker.color)<1||M>.01?L:function(t,e){return Math.abs(t-e)>=2?L(t):t>e?Math.ceil(t):Math.floor(t)};x=C(x,b),b=C(b,x),w=C(w,k),k=C(k,w)}a.ensureSingle(T,"path").style("vector-effect","non-scaling-stroke").attr("d","M"+x+","+w+"V"+k+"H"+b+"V"+w+"Z").call(l.setClipUrl,e.layerClipId,t),function(t,e,n,i,r,s,c,u){var g;function m(e,n,i){return a.ensureSingle(e,"text").text(n).attr({class:"bartext bartext-"+g,transform:"","text-anchor":"middle","data-notex":1}).call(l.font,i).call(o.convertToTspans,t)}var y=n[0].trace,_=y.orientation,x=function(t,e){var n=f.getValue(y.text,i);return f.coerceString(h,n)}();if(g=function(t,e){var n=f.getValue(y.textposition,i);return f.coerceEnumerated(d,n)}(),x&&"none"!==g){var b,w,k,T,M,A=t._fullLayout.font,C=p.getBarColor(n[i],y),L=p.getInsideTextFont(y,i,A,C),S=p.getOutsideTextFont(y,i,A),E=t._fullLayout.barmode,O=n[i],P=!("stack"===E||"relative"===E)||O._outmost,D=Math.abs(s-r)-6,z=Math.abs(u-c)-6;"outside"===g&&(P||O.hasB||(g="inside")),"auto"===g&&(P?(g="inside",b=m(e,x,L),T=(w=l.bBox(b.node())).height,(k=w.width)>0&&T>0&&(k<=D&&T<=z||k<=z&&T<=D||("h"===_?D>=k*(z/T):z>=T*(D/k)))?g="inside":(g="outside",b.remove(),b=null)):g="inside"),!b&&(b=m(e,x,"outside"===g?S:L),T=(w=l.bBox(b.node())).height,(k=w.width)<=0||T<=0)?b.remove():(M="outside"===g?function(t,e,n,i,r,a,o){var s,l="h"===a?Math.abs(i-n):Math.abs(e-t);l>6&&(s=3);var c,u,h,d,f=1;return o&&(f="h"===a?Math.min(1,l/r.height):Math.min(1,l/r.width)),c=f*r.width,u=f*r.height,"h"===a?e<t?(h=e-s-c/2,d=(n+i)/2):(h=e+s+c/2,d=(n+i)/2):i>n?(h=(t+e)/2,d=i+s+u/2):(h=(t+e)/2,d=i-s-u/2),v((r.left+r.right)/2,(r.top+r.bottom)/2,h,d,f,!1)}(r,s,c,u,w,_,"both"===y.constraintext||"outside"===y.constraintext):function(t,e,n,i,r,a,o){var s,l,c,u,h,d,f,p=w.width,g=w.height,m=(w.left+w.right)/2,y=(w.top+w.bottom)/2,_=Math.abs(e-t),x=Math.abs(i-n);return _>6&&x>6?(_-=2*(h=3),x-=2*h):h=0,p<=_&&g<=x?(d=!1,f=1):p<=x&&g<=_?(d=!0,f=1):p<g==_<x?(d=!1,f=o?Math.min(_/p,x/g):1):(d=!0,f=o?Math.min(x/p,_/g):1),d&&(d=90),d?(s=f*g,l=f*p):(s=f*p,l=f*g),"h"===a?e<t?(c=e+h+s/2,u=(n+i)/2):(c=e-h-s/2,u=(n+i)/2):i>n?(c=(t+e)/2,u=i-h-l/2):(c=(t+e)/2,u=i+h+l/2),v(m,y,c,u,f,d)}(r,s,c,u,0,_,"both"===y.constraintext||"inside"===y.constraintext),b.attr("transform",M))}else e.select("text").remove()}(t,T,n,u,x,b,w,k),e.layerClipId&&l.hideOutsideRangePoint(c,T.select("text"),g,m,_.xcalendar,_.ycalendar)}else T.remove();function L(t){return 0===y.bargap&&0===y.bargroupgap?i.round(Math.round(t)-A,2):t}}),l.setClipUrl(c,!1===u.trace.cliponaxis?null:e.layerClipId,t)});c.getComponentMethod("errorbars","plot")(t,_,e)}},{"../../components/color":43,"../../components/drawing":64,"../../lib":159,"../../lib/svg_text_utils":180,"../../registry":242,"./attributes":252,"./helpers":257,"./style":265,d3:8,"fast-isnumeric":10}],263:[function(t,e,n){"use strict";e.exports=function(t,e){var n,i=t.cd,r=t.xaxis,a=t.yaxis,o=[];if(!1===e)for(n=0;n<i.length;n++)i[n].selected=0;else for(n=0;n<i.length;n++){var s=i[n];e.contains(s.ct,!1,n,t)?(o.push({pointNumber:n,x:r.c2d(s.x),y:a.c2d(s.y)}),s.selected=1):s.selected=0}return o}},{}],264:[function(t,e,n){"use strict";e.exports=a;var i=t("../../lib"),r=t("../../constants/numerical").BADNUM;function a(t,e,n){this.traces=t,this.separateNegativeValues=e,this.dontMergeOverlappingData=n;for(var a=1/0,o=[],s=0;s<t.length;s++){for(var l=t[s],c=0;c<l.length;c++){var u=l[c];u.p!==r&&o.push(u.p)}l[0]&&l[0].width1&&(a=Math.min(l[0].width1,a))}this.positions=o;var h=i.distinctVals(o);this.distinctPositions=h.vals,this.minDiff=1===h.vals.length&&a!==1/0?a:Math.min(h.minDiff,a),this.binWidth=this.minDiff,this.bins={}}a.prototype.put=function(t,e){var n=this.getLabel(t,e),i=this.bins[n]||0;return this.bins[n]=i+e,i},a.prototype.get=function(t,e){var n=this.getLabel(t,e);return this.bins[n]||0},a.prototype.getLabel=function(t,e){return(e<0&&this.separateNegativeValues?"v":"^")+(this.dontMergeOverlappingData?t:Math.round(t/this.binWidth))}},{"../../constants/numerical":140,"../../lib":159}],265:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../components/color"),a=t("../../components/drawing"),o=t("../../lib"),s=t("../../registry"),l=t("./attributes"),c=l.textfont,u=l.insidetextfont,h=l.outsidetextfont,d=t("./helpers");function f(t,e,n){var r=t.selectAll("path"),o=t.selectAll("text");a.pointStyle(r,e,n),o.each(function(t){var r=i.select(this),o=p(r,t,e,n);a.font(r,o)})}function p(t,e,n,i){var r=i._fullLayout.font,a=n.textfont;if(t.classed("bartext-inside")){var o=_(e,n);a=g(n,e.i,r,o)}else t.classed("bartext-outside")&&(a=m(n,e.i,r));return a}function v(t,e,n){return y(c,t.textfont,e,n)}function g(t,e,n,i){var a=v(t,e,n);return(void 0===t._input.textfont||void 0===t._input.textfont.color||Array.isArray(t.textfont.color)&&void 0===t.textfont.color[e])&&(a={color:r.contrast(i),family:a.family,size:a.size}),y(u,t.insidetextfont,e,a)}function m(t,e,n){var i=v(t,e,n);return y(h,t.outsidetextfont,e,i)}function y(t,e,n,i){var r=d.getValue((e=e||{}).family,n),a=d.getValue(e.size,n),o=d.getValue(e.color,n);return{family:d.coerceString(t.family,r,i.family),size:d.coerceNumber(t.size,a,i.size),color:d.coerceColor(t.color,o,i.color)}}function _(t,e){return t.mc||e.marker.color}e.exports={style:function(t,e){var n=e?e[0].node3:i.select(t).selectAll("g.trace.bars"),r=n.size(),a=t._fullLayout;n.style("opacity",function(t){return t[0].trace.opacity}).each(function(t){("stack"===a.barmode&&r>1||0===a.bargap&&0===a.bargroupgap&&!t[0].trace.marker.line.width)&&i.select(this).attr("shape-rendering","crispEdges")}),n.selectAll("g.points").each(function(e){f(i.select(this),e[0].trace,t)}),s.getComponentMethod("errorbars","style")(n)},styleOnSelect:function(t,e){var n=e[0].node3,r=e[0].trace;r.selectedpoints?function(t,e,n){a.selectedPointStyle(t.selectAll("path"),e),function(t,e,n){t.each(function(t){var r,s=i.select(this);if(t.selected){r=o.extendFlat({},p(s,t,e,n));var l=e.selected.textfont&&e.selected.textfont.color;l&&(r.color=l),a.font(s,r)}else a.selectedTextStyle(s,e)})}(t.selectAll("text"),e,n)}(n,r,t):f(n,r,t)},getInsideTextFont:g,getOutsideTextFont:m,getBarColor:_}},{"../../components/color":43,"../../components/drawing":64,"../../lib":159,"../../registry":242,"./attributes":252,"./helpers":257,d3:8}],266:[function(t,e,n){"use strict";var i=t("../../components/color"),r=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/defaults");e.exports=function(t,e,n,o,s){n("marker.color",o),r(t,"marker")&&a(t,e,s,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",i.defaultLine),r(t,"marker.line")&&a(t,e,s,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":43,"../../components/colorscale/defaults":53,"../../components/colorscale/helpers":54}],267:[function(t,e,n){"use strict";var i=t("../../components/color/attributes"),r=t("../../plots/font_attributes"),a=t("../../plots/attributes"),o=t("../../components/fx/hovertemplate_attributes"),s=t("../../plots/domain").attributes,l=t("../../lib/extend").extendFlat,c=r({editType:"calc",arrayOk:!0,colorEditType:"plot"});e.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:l({},a.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:o({},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},textfont:l({},c,{}),insidetextfont:l({},c,{}),outsidetextfont:l({},c,{}),title:{text:{valType:"string",dflt:"",editType:"calc"},font:l({},c,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"},editType:"calc"},domain:s({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:l({},c,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":42,"../../components/fx/hovertemplate_attributes":81,"../../lib/extend":153,"../../plots/attributes":200,"../../plots/domain":228,"../../plots/font_attributes":229}],268:[function(t,e,n){"use strict";var i=t("../../registry"),r=t("../../plots/get_data").getModuleCalcData;n.name="pie",n.plot=function(t){var e=i.getModule("pie"),n=r(t.calcdata,e)[0];n.length&&e.plot(t,n)},n.clean=function(t,e,n,i){var r=i._has&&i._has("pie"),a=e._has&&e._has("pie");r&&!a&&i._pielayer.selectAll("g.trace").remove()}},{"../../plots/get_data":231,"../../registry":242}],269:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib").isArrayOrTypedArray,a=t("tinycolor2"),o=t("../../components/color"),s=t("./helpers");n.calc=function(t,e){var n,l,c,u,h,d=e.values,f=r(d)&&d.length,p=e.labels,v=e.marker.colors||[],g=[],m=t._fullLayout,y=m._piecolormap,_={},x=0,b=m.hiddenlabels||[];if(e.dlabel)for(p=new Array(d.length),n=0;n<d.length;n++)p[n]=String(e.label0+n*e.dlabel);function w(t,e){return!!t&&!!(t=a(t)).isValid()&&(t=o.addOpacity(t,t.getAlpha()),y[e]||(y[e]=t),t)}var k=(f?d:p).length;for(n=0;n<k;n++){if(f){if(!i(l=d[n]))continue;if((l=+l)<0)continue}else l=1;void 0!==(c=p[n])&&""!==c||(c=n);var T=_[c=String(c)];void 0===T?(_[c]=g.length,(u=-1!==b.indexOf(c))||(x+=l),g.push({v:l,label:c,color:w(v[n],c),i:n,pts:[n],hidden:u})):((h=g[T]).v+=l,h.pts.push(n),h.hidden||(x+=l),!1===h.color&&v[n]&&(h.color=w(v[n],c)))}if(e.sort&&g.sort(function(t,e){return e.v-t.v}),g[0]&&(g[0].vTotal=x),e.textinfo&&"none"!==e.textinfo){var M,A=-1!==e.textinfo.indexOf("label"),C=-1!==e.textinfo.indexOf("text"),L=-1!==e.textinfo.indexOf("value"),S=-1!==e.textinfo.indexOf("percent"),E=m.separators;for(n=0;n<g.length;n++){if(h=g[n],M=A?[h.label]:[],C){var O=s.getFirstFilled(e.text,h.pts);O&&M.push(O)}L&&M.push(s.formatPieValue(h.v,E)),S&&M.push(s.formatPiePercent(h.v/x,E)),h.text=M.join("<br>")}}return g},n.crossTraceCalc=function(t){var e=t._fullLayout,n=t.calcdata,i=e.piecolorway,r=e._piecolormap;e.extendpiecolors&&(i=function(t){var e,n=JSON.stringify(t),i=l[n];if(!i){for(i=t.slice(),e=0;e<t.length;e++)i.push(a(t[e]).lighten(20).toHexString());for(e=0;e<t.length;e++)i.push(a(t[e]).darken(20).toHexString());l[n]=i}return i}(i));var o,s,c,u,h=0;for(o=0;o<n.length;o++)if("pie"===(c=n[o])[0].trace.type)for(s=0;s<c.length;s++)!1===(u=c[s]).color&&(r[u.label]?u.color=r[u.label]:(r[u.label]=u.color=i[h%i.length],h++))};var l={}},{"../../components/color":43,"../../lib":159,"./helpers":272,"fast-isnumeric":10,tinycolor2:26}],270:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./attributes"),a=t("../../plots/domain").defaults;e.exports=function(t,e,n,o){function s(n,a){return i.coerce(t,e,r,n,a)}var l,c=i.coerceFont,u=s("values"),h=i.isArrayOrTypedArray(u),d=s("labels");if(Array.isArray(d)?(l=d.length,h&&(l=Math.min(l,u.length))):h&&(l=u.length,s("label0"),s("dlabel")),l){e._length=l,s("marker.line.width")&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var f=s("text"),p=s("textinfo",Array.isArray(f)?"text+percent":"percent");if(s("hovertext"),s("hovertemplate"),p&&"none"!==p){var v=s("textposition"),g=Array.isArray(v)||"auto"===v,m=g||"inside"===v,y=g||"outside"===v;if(m||y){var _=c(s,"textfont",o.font);if(m){var x=i.extendFlat({},_);!(t.textfont&&t.textfont.color)&&delete x.color,c(s,"insidetextfont",x)}y&&c(s,"outsidetextfont",_)}}a(e,o,s);var b=s("hole");if(s("title.text")){var w=s("title.position",b?"middle center":"top center");b||"middle center"!==w||(e.title.position="top center"),c(s,"title.font",o.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else e.visible=!1}},{"../../lib":159,"../../plots/domain":228,"./attributes":267}],271:[function(t,e,n){"use strict";var i=t("../../components/fx/helpers").appendArrayMultiPointValues;e.exports=function(t,e){var n={curveNumber:e.index,pointNumbers:t.pts,data:e._input,fullData:e,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,v:t.v};return 1===t.pts.length&&(n.pointNumber=n.i=t.pts[0]),i(n,e,t.pts),n}},{"../../components/fx/helpers":78}],272:[function(t,e,n){"use strict";var i=t("../../lib");n.formatPiePercent=function(t,e){var n=(100*t).toPrecision(3);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),i.numSeparate(n,e)+"%"},n.formatPieValue=function(t,e){var n=t.toPrecision(10);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),i.numSeparate(n,e)},n.getFirstFilled=function(t,e){if(Array.isArray(t))for(var n=0;n<e.length;n++){var i=t[e[n]];if(i||0===i)return i}},n.castOption=function(t,e){return Array.isArray(t)?n.getFirstFilled(t,e):t||void 0}},{"../../lib":159}],273:[function(t,e,n){"use strict";var i={};i.attributes=t("./attributes"),i.supplyDefaults=t("./defaults"),i.supplyLayoutDefaults=t("./layout_defaults"),i.layoutAttributes=t("./layout_attributes");var r=t("./calc");i.calc=r.calc,i.crossTraceCalc=r.crossTraceCalc,i.plot=t("./plot"),i.style=t("./style"),i.styleOne=t("./style_one"),i.moduleType="trace",i.name="pie",i.basePlotModule=t("./base_plot"),i.categories=["pie","showLegend"],i.meta={},e.exports=i},{"./attributes":267,"./base_plot":268,"./calc":269,"./defaults":270,"./layout_attributes":274,"./layout_defaults":275,"./plot":276,"./style":277,"./style_one":278}],274:[function(t,e,n){"use strict";e.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],275:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("./layout_attributes");e.exports=function(t,e){function n(n,a){return i.coerce(t,e,r,n,a)}n("hiddenlabels"),n("piecolorway",e.colorway),n("extendpiecolors")}},{"../../lib":159,"./layout_attributes":274}],276:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../components/fx"),a=t("../../components/color"),o=t("../../components/drawing"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),c=t("./helpers"),u=t("./event_data");function h(t,e){if(t.v===e.vTotal&&!e.trace.hole)return 1;var n=Math.PI*Math.min(t.v/e.vTotal,.5);return Math.min(1/(1+1/Math.sin(n)),(1-e.trace.hole)/2)}function d(t,e){var n=e.pxmid[0],i=e.pxmid[1],r=t.width/2,a=t.height/2;return n<0&&(r*=-1),i<0&&(a*=-1),{scale:1,rCenter:1,rotate:0,x:r+Math.abs(a)*(r>0?1:-1)/2,y:a/(1+n*n/(i*i)),outside:!0}}function f(t,e){var n=t.trace;return Math.min(t.titleBox.height,e.h*(n.domain.y[1]-n.domain.y[0])/2)}function p(t){var e,n=t.pull;if(Array.isArray(n))for(n=0,e=0;e<t.pull.length;e++)t.pull[e]>n&&(n=t.pull[e]);return n}e.exports=function(t,e){var n=t._fullLayout;!function(t,e){for(var n,i,r=e._fullLayout,a=0;a<t.length;a++)if((i=(n=t[a][0]).trace).title.text){var c=r.meta?s.templateString(i.title.text,{meta:r.meta}):i.title.text,u=o.tester.append("text").attr("data-notex",1).text(c).call(o.font,i.title.font).call(l.convertToTspans,e),h=o.bBox(u.node(),!0);n.titleBox={width:h.width,height:h.height},u.remove()}}(e,t),function(t,e){var n,i,r,a,o,s,l,c,u,h=[];for(r=0;r<t.length;r++)n=e.w*((s=(o=t[r][0]).trace).domain.x[1]-s.domain.x[0]),i=e.h*(s.domain.y[1]-s.domain.y[0]),s.title.text&&"middle center"!==s.title.position&&(i-=f(o,e)),l=p(s),o.r=Math.min(n,i)/(2+2*l),o.cx=e.l+e.w*(s.domain.x[1]+s.domain.x[0])/2,o.cy=e.t+e.h*(1-s.domain.y[0])-i/2,s.title.text&&-1!==s.title.position.indexOf("bottom")&&(o.cy-=f(o,e)),s.scalegroup&&-1===h.indexOf(s.scalegroup)&&h.push(s.scalegroup);for(a=0;a<h.length;a++){for(u=1/0,c=h[a],r=0;r<t.length;r++)(o=t[r][0]).trace.scalegroup===c&&(u=Math.min(u,o.r*o.r/o.vTotal));for(r=0;r<t.length;r++)(o=t[r][0]).trace.scalegroup===c&&(o.r=Math.sqrt(u*o.vTotal))}}(e,n._size);var v=s.makeTraceGroups(n._pielayer,e,"trace").each(function(e){var v=i.select(this),g=e[0],m=g.trace;!function(t){var e,n,i,r=t[0],a=r.trace,o=a.rotation*Math.PI/180,s=2*Math.PI/r.vTotal,l="px0",c="px1";if("counterclockwise"===a.direction){for(e=0;e<t.length&&t[e].hidden;e++);if(e===t.length)return;o+=s*t[e].v,s*=-1,l="px1",c="px0"}function u(t){return[r.r*Math.sin(t),-r.r*Math.cos(t)]}for(i=u(o),e=0;e<t.length;e++)(n=t[e]).hidden||(n[l]=i,n.pxmid=u(o+=s*n.v/2),n.midangle=o,i=u(o+=s*n.v/2),n[c]=i,n.largeArc=n.v>r.vTotal/2?1:0)}(e),v.attr("stroke-linejoin","round"),v.each(function(){var v=i.select(this).selectAll("g.slice").data(e);v.enter().append("g").classed("slice",!0),v.exit().remove();var y=[[[],[]],[[],[]]],_=!1;v.each(function(e){if(e.hidden)i.select(this).selectAll("path,g").remove();else{e.pointNumber=e.i,e.curveNumber=m.index,y[e.pxmid[1]<0?0:1][e.pxmid[0]<0?0:1].push(e);var f=g.cx,p=g.cy,v=i.select(this),x=v.selectAll("path.surface").data([e]),b=!1,w=!1;if(x.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),v.select("path.textline").remove(),v.on("mouseover",function(){var a=t._fullLayout,o=t._fullData[m.index];if(!t._dragging&&!1!==a.hovermode){var s=o.hoverinfo;if(Array.isArray(s)&&(s=r.castHoverinfo({hoverinfo:[c.castOption(s,e.pts)],_module:m._module},a,0)),"all"===s&&(s="label+text+value+percent+name"),o.hovertemplate||"none"!==s&&"skip"!==s&&s){var l=h(e,g),d=f+e.pxmid[0]*(1-l),v=p+e.pxmid[1]*(1-l),y=n.separators,_=[];if(s&&-1!==s.indexOf("label")&&_.push(e.label),e.text=c.castOption(o.hovertext||o.text,e.pts),s&&-1!==s.indexOf("text")){var x=e.text;x&&_.push(x)}e.value=e.v,e.valueLabel=c.formatPieValue(e.v,y),s&&-1!==s.indexOf("value")&&_.push(e.valueLabel),e.percent=e.v/g.vTotal,e.percentLabel=c.formatPiePercent(e.percent,y),s&&-1!==s.indexOf("percent")&&_.push(e.percentLabel);var k=m.hoverlabel,T=k.font;r.loneHover({x0:d-l*g.r,x1:d+l*g.r,y:v,text:_.join("<br>"),name:o.hovertemplate||-1!==s.indexOf("name")?o.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:c.castOption(k.bgcolor,e.pts)||e.color,borderColor:c.castOption(k.bordercolor,e.pts),fontFamily:c.castOption(T.family,e.pts),fontSize:c.castOption(T.size,e.pts),fontColor:c.castOption(T.color,e.pts),trace:o,hovertemplate:c.castOption(o.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[u(e,o)]},{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:t}),b=!0}t.emit("plotly_hover",{points:[u(e,o)],event:i.event}),w=!0}}).on("mouseout",function(n){var a=t._fullLayout,o=t._fullData[m.index];w&&(n.originalEvent=i.event,t.emit("plotly_unhover",{points:[u(e,o)],event:i.event}),w=!1),b&&(r.loneUnhover(a._hoverlayer.node()),b=!1)}).on("click",function(){t._dragging||!1===t._fullLayout.hovermode||(t._hoverdata=[u(e,t._fullData[m.index])],r.click(t,i.event))}),m.pull){var k=+c.castOption(m.pull,e.pts)||0;k>0&&(f+=k*e.pxmid[0],p+=k*e.pxmid[1])}e.cxFinal=f,e.cyFinal=p;var T=m.hole;if(e.v===g.vTotal){var M="M"+(f+e.px0[0])+","+(p+e.px0[1])+E(e.px0,e.pxmid,!0,1)+E(e.pxmid,e.px0,!0,1)+"Z";x.attr("d",T?"M"+(f+T*e.px0[0])+","+(p+T*e.px0[1])+E(e.px0,e.pxmid,!1,T)+E(e.pxmid,e.px0,!1,T)+"Z"+M:M)}else{var A=E(e.px0,e.px1,!0,1);if(T){var C=1-T;x.attr("d","M"+(f+T*e.px1[0])+","+(p+T*e.px1[1])+E(e.px1,e.px0,!1,T)+"l"+C*e.px0[0]+","+C*e.px0[1]+A+"Z")}else x.attr("d","M"+f+","+p+"l"+e.px0[0]+","+e.px0[1]+A+"Z")}var L=c.castOption(m.textposition,e.pts),S=v.selectAll("g.slicetext").data(e.text&&"none"!==L?[0]:[]);S.enter().append("g").classed("slicetext",!0),S.exit().remove(),S.each(function(){var n=s.ensureSingle(i.select(this),"text","",function(t){t.attr("data-notex",1)});n.text(e.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(o.font,"outside"===L?function(t,e,n){return{color:c.castOption(t.outsidetextfont.color,e.pts)||c.castOption(t.textfont.color,e.pts)||n.color,family:c.castOption(t.outsidetextfont.family,e.pts)||c.castOption(t.textfont.family,e.pts)||n.family,size:c.castOption(t.outsidetextfont.size,e.pts)||c.castOption(t.textfont.size,e.pts)||n.size}}(m,e,t._fullLayout.font):function(t,e,n){var i=c.castOption(t.insidetextfont.color,e.pts);!i&&t._input.textfont&&(i=c.castOption(t._input.textfont.color,e.pts));var r=c.castOption(t.insidetextfont.family,e.pts)||c.castOption(t.textfont.family,e.pts)||n.family,o=c.castOption(t.insidetextfont.size,e.pts)||c.castOption(t.textfont.size,e.pts)||n.size;return{color:i||a.contrast(e.color),family:r,size:o}}(m,e,t._fullLayout.font)).call(l.convertToTspans,t);var r,u=o.bBox(n.node());"outside"===L?r=d(u,e):(r=function(t,e,n){var i=Math.sqrt(t.width*t.width+t.height*t.height),r=t.width/t.height,a=Math.PI*Math.min(e.v/n.vTotal,.5),o=1-n.trace.hole,s=h(e,n),l={scale:s*n.r*2/i,rCenter:1-s,rotate:0};if(l.scale>=1)return l;var c=r+1/(2*Math.tan(a)),u=n.r*Math.min(1/(Math.sqrt(c*c+.5)+c),o/(Math.sqrt(r*r+o/2)+r)),d={scale:2*u/t.height,rCenter:Math.cos(u/n.r)-u*r/n.r,rotate:(180/Math.PI*e.midangle+720)%180-90},f=1/r,p=f+1/(2*Math.tan(a)),v=n.r*Math.min(1/(Math.sqrt(p*p+.5)+p),o/(Math.sqrt(f*f+o/2)+f)),g={scale:2*v/t.width,rCenter:Math.cos(v/n.r)-v/r/n.r,rotate:(180/Math.PI*e.midangle+810)%180-90},m=g.scale>d.scale?g:d;return l.scale<1&&m.scale>l.scale?m:l}(u,e,g),"auto"===L&&r.scale<1&&(n.call(o.font,m.outsidetextfont),m.outsidetextfont.family===m.insidetextfont.family&&m.outsidetextfont.size===m.insidetextfont.size||(u=o.bBox(n.node())),r=d(u,e)));var v=f+e.pxmid[0]*r.rCenter+(r.x||0),y=p+e.pxmid[1]*r.rCenter+(r.y||0);r.outside&&(e.yLabelMin=y-u.height/2,e.yLabelMid=y,e.yLabelMax=y+u.height/2,e.labelExtraX=0,e.labelExtraY=0,_=!0),n.attr("transform","translate("+v+","+y+")"+(r.scale<1?"scale("+r.scale+")":"")+(r.rotate?"rotate("+r.rotate+")":"")+"translate("+-(u.left+u.right)/2+","+-(u.top+u.bottom)/2+")")})}function E(t,n,i,r){return"a"+r*g.r+","+r*g.r+" 0 "+e.largeArc+(i?" 1 ":" 0 ")+r*(n[0]-t[0])+","+r*(n[1]-t[1])}});var x=i.select(this).selectAll("g.titletext").data(m.title.text?[0]:[]);x.enter().append("g").classed("titletext",!0),x.exit().remove(),x.each(function(){var e,r=s.ensureSingle(i.select(this),"text","",function(t){t.attr("data-notex",1)}),a=n.meta?s.templateString(m.title.text,{meta:n.meta}):m.title.text;r.text(a).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(o.font,m.title.font).call(l.convertToTspans,t),e="middle center"===m.title.position?function(t){var e=Math.sqrt(t.titleBox.width*t.titleBox.width+t.titleBox.height*t.titleBox.height);return{x:t.cx,y:t.cy,scale:t.trace.hole*t.r*2/e,tx:0,ty:-t.titleBox.height/2+t.trace.title.font.size}}(g):function(t,e){var n,i,r,a,o=t.trace,s={x:t.cx,y:t.cy},l={tx:0,ty:0};return l.ty+=o.title.font.size,i=p(o),-1!==o.title.position.indexOf("top")?(s.y-=(1+i)*t.r,l.ty-=t.titleBox.height):-1!==o.title.position.indexOf("bottom")&&(s.y+=(1+i)*t.r),-1!==o.title.position.indexOf("left")?(n=e.w*(o.domain.x[1]-o.domain.x[0])/2+t.r,s.x-=(1+i)*t.r,l.tx+=t.titleBox.width/2):-1!==o.title.position.indexOf("center")?n=e.w*(o.domain.x[1]-o.domain.x[0]):-1!==o.title.position.indexOf("right")&&(n=e.w*(o.domain.x[1]-o.domain.x[0])/2+t.r,s.x+=(1+i)*t.r,l.tx-=t.titleBox.width/2),r=n/t.titleBox.width,a=f(t,e)/t.titleBox.height,{x:s.x,y:s.y,scale:Math.min(r,a),tx:l.tx,ty:l.ty}}(g,n._size),r.attr("transform","translate("+e.x+","+e.y+")"+(e.scale<1?"scale("+e.scale+")":"")+"translate("+e.tx+","+e.ty+")")}),_&&function(t,e){var n,i,r,a,o,s,l,u,h,d,f,p,v;function g(t,e){return t.pxmid[1]-e.pxmid[1]}function m(t,e){return e.pxmid[1]-t.pxmid[1]}function y(t,n){n||(n={});var r,u,h,f,p=n.labelExtraY+(i?n.yLabelMax:n.yLabelMin),v=i?t.yLabelMin:t.yLabelMax,g=i?t.yLabelMax:t.yLabelMin,m=t.cyFinal+o(t.px0[1],t.px1[1]),y=p-v;if(y*l>0&&(t.labelExtraY=y),Array.isArray(e.pull))for(u=0;u<d.length;u++)(h=d[u])===t||(c.castOption(e.pull,t.pts)||0)>=(c.castOption(e.pull,h.pts)||0)||((t.pxmid[1]-h.pxmid[1])*l>0?(y=h.cyFinal+o(h.px0[1],h.px1[1])-v-t.labelExtraY)*l>0&&(t.labelExtraY+=y):(g+t.labelExtraY-m)*l>0&&(r=3*s*Math.abs(u-d.indexOf(t)),(f=h.cxFinal+a(h.px0[0],h.px1[0])+r-(t.cxFinal+t.pxmid[0])-t.labelExtraX)*s>0&&(t.labelExtraX+=f)))}for(i=0;i<2;i++)for(r=i?g:m,o=i?Math.max:Math.min,l=i?1:-1,n=0;n<2;n++){for(a=n?Math.max:Math.min,s=n?1:-1,(u=t[i][n]).sort(r),d=(h=t[1-i][n]).concat(u),p=[],f=0;f<u.length;f++)void 0!==u[f].yLabelMid&&p.push(u[f]);for(v=!1,f=0;i&&f<h.length;f++)if(void 0!==h[f].yLabelMid){v=h[f];break}for(f=0;f<p.length;f++){var _=f&&p[f-1];v&&!f&&(_=v),y(p[f],_)}}}(y,m),v.each(function(t){if(t.labelExtraX||t.labelExtraY){var e=i.select(this),n=e.select("g.slicetext text");n.attr("transform","translate("+t.labelExtraX+","+t.labelExtraY+")"+n.attr("transform"));var r=t.cxFinal+t.pxmid[0],o="M"+r+","+(t.cyFinal+t.pxmid[1]),s=(t.yLabelMax-t.yLabelMin)*(t.pxmid[0]<0?-1:1)/4;if(t.labelExtraX){var l=t.labelExtraX*t.pxmid[1]/t.pxmid[0],c=t.yLabelMid+t.labelExtraY-(t.cyFinal+t.pxmid[1]);Math.abs(l)>Math.abs(c)?o+="l"+c*t.pxmid[0]/t.pxmid[1]+","+c+"H"+(r+t.labelExtraX+s):o+="l"+t.labelExtraX+","+l+"v"+(c-l)+"h"+s}else o+="V"+(t.yLabelMid+t.labelExtraY)+"h"+s;e.append("path").classed("textline",!0).call(a.stroke,m.outsidetextfont.color).attr({"stroke-width":Math.min(2,m.outsidetextfont.size/8),d:o,fill:"none"})}})})});setTimeout(function(){v.selectAll("tspan").each(function(){var t=i.select(this);t.attr("dy")&&t.attr("dy",t.attr("dy"))})},0)}},{"../../components/color":43,"../../components/drawing":64,"../../components/fx":82,"../../lib":159,"../../lib/svg_text_utils":180,"./event_data":271,"./helpers":272,d3:8}],277:[function(t,e,n){"use strict";var i=t("d3"),r=t("./style_one");e.exports=function(t){t._fullLayout._pielayer.selectAll(".trace").each(function(t){var e=t[0].trace,n=i.select(this);n.style({opacity:e.opacity}),n.selectAll("path.surface").each(function(t){i.select(this).call(r,t,e)})})}},{"./style_one":278,d3:8}],278:[function(t,e,n){"use strict";var i=t("../../components/color"),r=t("./helpers").castOption;e.exports=function(t,e,n){var a=n.marker.line,o=r(a.color,e.pts)||i.defaultLine,s=r(a.width,e.pts)||0;t.style({"stroke-width":s}).call(i.fill,e.color).call(i.stroke,o)}},{"../../components/color":43,"./helpers":272}],279:[function(t,e,n){"use strict";var i=t("../../lib");e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;i.mergeArray(e.text,t,"tx"),i.mergeArray(e.hovertext,t,"htx"),i.mergeArray(e.customdata,t,"data"),i.mergeArray(e.textposition,t,"tp"),e.textfont&&(i.mergeArray(e.textfont.size,t,"ts"),i.mergeArray(e.textfont.color,t,"tc"),i.mergeArray(e.textfont.family,t,"tf"));var r=e.marker;if(r){i.mergeArray(r.size,t,"ms"),i.mergeArray(r.opacity,t,"mo"),i.mergeArray(r.symbol,t,"mx"),i.mergeArray(r.color,t,"mc");var a=r.line;r.line&&(i.mergeArray(a.color,t,"mlc"),i.mergeArray(a.width,t,"mlw"));var o=r.gradient;o&&"none"!==o.type&&(i.mergeArray(o.type,t,"mgt"),i.mergeArray(o.color,t,"mgc"))}}},{"../../lib":159}],280:[function(t,e,n){"use strict";var i=t("../../components/fx/hovertemplate_attributes"),r=t("../../components/colorscale/attributes"),a=t("../../components/colorbar/attributes"),o=t("../../plots/font_attributes"),s=t("../../components/drawing/attributes").dash,l=t("../../components/drawing"),c=t("./constants"),u=t("../../lib/extend").extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:c.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:u({},s,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:u({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},colorbar:a,line:u({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},r("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},r("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:o({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorbar/attributes":44,"../../components/colorscale/attributes":50,"../../components/drawing":64,"../../components/drawing/attributes":63,"../../components/fx/hovertemplate_attributes":81,"../../lib/extend":153,"../../plots/font_attributes":229,"./constants":284}],281:[function(t,e,n){"use strict";var i=t("fast-isnumeric"),r=t("../../lib"),a=t("../../plots/cartesian/axes"),o=t("../../constants/numerical").BADNUM,s=t("./subtypes"),l=t("./colorscale_calc"),c=t("./arrays_to_calcdata"),u=t("./calc_selection");function h(t,e,n,i,r,o,l){var c=e._length,u=t._fullLayout,h=n._id,d=i._id,f=u._firstScatter[p(e)]===e.uid,g=(v(e,u,n,i)||{}).orientation,m=e.fill;n._minDtick=0,i._minDtick=0;var y={padded:!0},_={padded:!0};l&&(y.ppad=_.ppad=l);var x=c<2||r[0]!==r[c-1]||o[0]!==o[c-1];x&&("tozerox"===m||"tonextx"===m&&(f||"h"===g))?y.tozero=!0:(e.error_y||{}).visible||"tonexty"!==m&&"tozeroy"!==m&&(s.hasMarkers(e)||s.hasText(e))||(y.padded=!1,y.ppad=0),x&&("tozeroy"===m||"tonexty"===m&&(f||"v"===g))?_.tozero=!0:"tonextx"!==m&&"tozerox"!==m||(_.padded=!1),h&&(e._extremes[h]=a.findExtremes(n,r,y)),d&&(e._extremes[d]=a.findExtremes(i,o,_))}function d(t,e){if(s.hasMarkers(t)){var n,i=t.marker,o=1.6*(t.marker.sizeref||1);if(n="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/o),3)}:function(t){return Math.max((t||0)/o,3)},r.isArrayOrTypedArray(i.size)){var l={type:"linear"};a.setConvert(l);for(var c=l.makeCalcdata(t.marker,"size"),u=new Array(e),h=0;h<e;h++)u[h]=n(c[h]);return u}return n(i.size)}}function f(t,e){var n=p(e),i=t._firstScatter;i[n]||(i[n]=e.uid)}function p(t){var e=t.stackgroup;return t.xaxis+t.yaxis+t.type+(e?"-"+e:"")}function v(t,e,n,i){var r=t.stackgroup;if(r){var a=e._scatterStackOpts[n._id+i._id][r],o="v"===a.orientation?i:n;return"linear"===o.type||"log"===o.type?a:void 0}}e.exports={calc:function(t,e){var n,s,p,g,m,y,_=t._fullLayout,x=a.getFromId(t,e.xaxis||"x"),b=a.getFromId(t,e.yaxis||"y"),w=x.makeCalcdata(e,"x"),k=b.makeCalcdata(e,"y"),T=e._length,M=new Array(T),A=e.ids,C=v(e,_,x,b),L=!1;f(_,e);var S,E="x",O="y";for(C?(C.traceIndices.push(e.index),(n="v"===C.orientation)?(O="s",S="x"):(E="s",S="y"),m="interpolate"===C.stackgaps):h(t,e,x,b,w,k,d(e,T)),s=0;s<T;s++){var P=M[s]={},D=i(w[s]),z=i(k[s]);D&&z?(P[E]=w[s],P[O]=k[s]):C&&(n?D:z)?(P[S]=n?w[s]:k[s],P.gap=!0,m?(P.s=o,L=!0):P.s=0):P[E]=P[O]=o,A&&(P.id=String(A[s]))}if(c(M,e),l(t,e),u(M,e),C){for(s=0;s<M.length;)M[s][S]===o?M.splice(s,1):s++;if(r.sort(M,function(t,e){return t[S]-e[S]||t.i-e.i}),L){for(s=0;s<M.length-1&&M[s].gap;)s++;for((y=M[s].s)||(y=M[s].s=0),p=0;p<s;p++)M[p].s=y;for(g=M.length-1;g>s&&M[g].gap;)g--;for(y=M[g].s,p=M.length-1;p>g;p--)M[p].s=y;for(;s<g;)if(M[++s].gap){for(p=s+1;M[p].gap;)p++;for(var I=M[s-1][S],R=M[s-1].s,B=(M[p].s-R)/(M[p][S]-I);s<p;)M[s].s=R+(M[s][S]-I)*B,s++}}}return M},calcMarkerSize:d,calcAxisExpansion:h,setFirstScatter:f,getStackOpts:v}},{"../../constants/numerical":140,"../../lib":159,"../../plots/cartesian/axes":203,"./arrays_to_calcdata":279,"./calc_selection":282,"./colorscale_calc":283,"./subtypes":304,"fast-isnumeric":10}],282:[function(t,e,n){"use strict";var i=t("../../lib");e.exports=function(t,e){i.isArrayOrTypedArray(e.selectedpoints)&&i.tagSelected(t,e)}},{"../../lib":159}],283:[function(t,e,n){"use strict";var i=t("../../components/colorscale/helpers").hasColorscale,r=t("../../components/colorscale/calc"),a=t("./subtypes");e.exports=function(t,e){a.hasLines(e)&&i(e,"line")&&r(t,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(e)&&(i(e,"marker")&&r(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),i(e,"marker.line")&&r(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":51,"../../components/colorscale/helpers":54,"./subtypes":304}],284:[function(t,e,n){"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],285:[function(t,e,n){"use strict";var i=t("./calc");function r(t,e,n,i,r,a,o){r[i]=!0;var s={i:null,gap:!0,s:0};if(s[o]=n,t.splice(e,0,s),e&&n===t[e-1][o]){var l=t[e-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=function(t,e,n,i){var r=t[e-1],a=t[e+1];return a?r?r.s+(a.s-r.s)*(n-r[o])/(a[o]-r[o]):a.s:r.s}(t,e,n));e||(t[0].t=t[1].t,t[0].trace=t[1].trace,delete t[1].t,delete t[1].trace)}e.exports=function(t,e){var n=e.xaxis,a=e.yaxis,o=t._fullLayout._scatterStackOpts[n._id+a._id];if(o){var s,l,c,u,h,d,f,p,v,g,m,y,_,x,b,w=t.calcdata;for(var k in o){var T=(g=o[k]).traceIndices;if(T.length){for(m="interpolate"===g.stackgaps,y=g.groupnorm,"v"===g.orientation?(_="x",x="y"):(_="y",x="x"),b=new Array(T.length),s=0;s<b.length;s++)b[s]=!1;d=w[T[0]];var M=new Array(d.length);for(s=0;s<d.length;s++)M[s]=d[s][_];for(s=1;s<T.length;s++){for(h=w[T[s]],l=c=0;l<h.length;l++){for(f=h[l][_];f>M[c]&&c<M.length;c++)r(h,l,M[c],s,b,m,_),l++;if(f!==M[c]){for(u=0;u<s;u++)r(w[T[u]],c,f,u,b,m,_);M.splice(c,0,f)}c++}for(;c<M.length;c++)r(h,l,M[c],s,b,m,_),l++}var A=M.length;for(l=0;l<d.length;l++){for(p=d[l][x]=d[l].s,s=1;s<T.length;s++)(h=w[T[s]])[0].trace._rawLength=h[0].trace._length,h[0].trace._length=A,h[l][x]=p+=h[l].s;if(y)for(v=("fraction"===y?p:p/100)||1,s=0;s<T.length;s++){var C=w[T[s]][l];C[x]/=v,C.sNorm=C.s/v}}for(s=0;s<T.length;s++){var L=(h=w[T[s]])[0].trace,S=i.calcMarkerSize(L,L._rawLength),E=Array.isArray(S);if(S&&b[s]||E){var O=S;for(S=new Array(A),l=0;l<A;l++)S[l]=h[l].gap?0:E?O[h[l].i]:O}var P=new Array(A),D=new Array(A);for(l=0;l<A;l++)P[l]=h[l].x,D[l]=h[l].y;i.calcAxisExpansion(t,L,n,a,P,D,S),h[0].t.orientation=g.orientation}}}}}},{"./calc":281}],286:[function(t,e,n){"use strict";e.exports=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("scatter"===n.type){var i=n.fill;if("none"!==i&&"toself"!==i&&(n.opacity=void 0,"tonexty"===i||"tonextx"===i))for(var r=e-1;r>=0;r--){var a=t[r];if("scatter"===a.type&&a.xaxis===n.xaxis&&a.yaxis===n.yaxis){a.opacity=void 0;break}}}}}},{}],287:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../registry"),a=t("./attributes"),o=t("./constants"),s=t("./subtypes"),l=t("./xy_defaults"),c=t("./stack_defaults"),u=t("./marker_defaults"),h=t("./line_defaults"),d=t("./line_shape_defaults"),f=t("./text_defaults"),p=t("./fillcolor_defaults");e.exports=function(t,e,n,v){function g(n,r){return i.coerce(t,e,a,n,r)}var m=l(t,e,v,g);if(m||(e.visible=!1),e.visible){var y=c(t,e,v,g),_=!y&&m<o.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",_),s.hasLines(e)&&(h(t,e,n,v,g),d(t,e,g),g("connectgaps"),g("line.simplify")),s.hasMarkers(e)&&u(t,e,n,v,g,{gradient:!0}),s.hasText(e)&&f(t,e,v,g);var x=[];(s.hasMarkers(e)||s.hasText(e))&&(g("cliponaxis"),g("marker.maxdisplayed"),x.push("points")),g("fill",y?y.fillDflt:"none"),"none"!==e.fill&&(p(t,e,n,g),s.hasLines(e)||d(t,e,g));var b=(e.line||{}).color,w=(e.marker||{}).color;"tonext"!==e.fill&&"toself"!==e.fill||x.push("fills"),g("hoveron",x.join("+")||"points"),"fills"!==e.hoveron&&g("hovertemplate");var k=r.getComponentMethod("errorbars","supplyDefaults");k(t,e,b||w||n,{axis:"y"}),k(t,e,b||w||n,{axis:"x",inherit:"y"}),i.coerceSelectionMarkerOpacity(e,g)}}},{"../../lib":159,"../../registry":242,"./attributes":280,"./constants":284,"./fillcolor_defaults":289,"./line_defaults":293,"./line_shape_defaults":295,"./marker_defaults":299,"./stack_defaults":302,"./subtypes":304,"./text_defaults":305,"./xy_defaults":306}],288:[function(t,e,n){"use strict";var i=t("../../lib");function r(t){return t||0===t}e.exports=function(t,e,n){var a=Array.isArray(n)?function(t){n.push(t)}:function(t){n.text=t},o=i.extractOption(t,e,"htx","hovertext");if(r(o))return a(o);var s=i.extractOption(t,e,"tx","text");return r(s)?a(s):void 0}},{"../../lib":159}],289:[function(t,e,n){"use strict";var i=t("../../components/color"),r=t("../../lib").isArrayOrTypedArray;e.exports=function(t,e,n,a){var o=!1;if(e.marker){var s=e.marker.color,l=(e.marker.line||{}).color;s&&!r(s)?o=s:l&&!r(l)&&(o=l)}a("fillcolor",i.addOpacity((e.line||{}).color||o||n,.5))}},{"../../components/color":43,"../../lib":159}],290:[function(t,e,n){"use strict";var i=t("../../components/color"),r=t("./subtypes");e.exports=function(t,e){var n,a;if("lines"===t.mode)return(n=t.line.color)&&i.opacity(n)?n:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var o=e.mcc||(t.marker||{}).color,s=e.mlcc||((t.marker||{}).line||{}).color;return(a=o&&i.opacity(o)?o:s&&i.opacity(s)&&(e.mlw||((t.marker||{}).line||{}).width)?s:"")?i.opacity(a)<.3?i.addOpacity(a,.3):a:(n=(t.line||{}).color)&&i.opacity(n)&&r.hasLines(t)&&t.line.width?n:t.fillcolor}},{"../../components/color":43,"./subtypes":304}],291:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../components/fx"),a=t("../../registry"),o=t("./get_trace_color"),s=t("../../components/color"),l=t("./fill_hover_text");e.exports=function(t,e,n,c){var u=t.cd,h=u[0].trace,d=t.xa,f=t.ya,p=d.c2p(e),v=f.c2p(n),g=[p,v],m=h.hoveron||"",y=-1!==h.mode.indexOf("markers")?3:.5;if(-1!==m.indexOf("points")){var _=function(t){var e=Math.max(y,t.mrc||0),n=d.c2p(t.x)-p,i=f.c2p(t.y)-v;return Math.max(Math.sqrt(n*n+i*i)-e,1-y/e)},x=r.getDistanceFunction(c,function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,i=Math.abs(d.c2p(t.x)-p);return i<e?n*i/e:i-e+n},function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,i=Math.abs(f.c2p(t.y)-v);return i<e?n*i/e:i-e+n},_);if(r.getClosest(u,x,t),!1!==t.index){var b=u[t.index],w=d.c2p(b.x,!0),k=f.c2p(b.y,!0),T=b.mrc||1;t.index=b.i;var M=u[0].t.orientation,A=M&&(b.sNorm||b.s),C="h"===M?A:b.x,L="v"===M?A:b.y;return i.extendFlat(t,{color:o(h,b),x0:w-T,x1:w+T,xLabelVal:C,y0:k-T,y1:k+T,yLabelVal:L,spikeDistance:_(b),hovertemplate:h.hovertemplate}),l(b,h,t),a.getComponentMethod("errorbars","hoverInfo")(b,h,t),[t]}}if(-1!==m.indexOf("fills")&&h._polygons){var S,E,O,P,D,z,I,R,B=h._polygons,N=[],F=!1,j=1/0,H=-1/0,$=1/0,q=-1/0;for(S=0;S<B.length;S++)(O=B[S]).contains(g)&&(F=!F,N.push(O),$=Math.min($,O.ymin),q=Math.max(q,O.ymax));if(F){var Z=(($=Math.max($,0))+(q=Math.min(q,f._length)))/2;for(S=0;S<N.length;S++)for(P=N[S].pts,E=1;E<P.length;E++)(I=P[E-1][1])>Z!=(R=P[E][1])>=Z&&(z=P[E-1][0],R-I&&(D=z+(P[E][0]-z)*(Z-I)/(R-I),j=Math.min(j,D),H=Math.max(H,D)));j=Math.max(j,0),H=Math.min(H,d._length);var V=s.defaultLine;return s.opacity(h.fillcolor)?V=h.fillcolor:s.opacity((h.line||{}).color)&&(V=h.line.color),i.extendFlat(t,{distance:t.maxHoverDistance,x0:j,x1:H,y0:Z,y1:Z,color:V,hovertemplate:"%{name}"}),delete t.index,t.text=h.text&&!Array.isArray(h.text)?String(h.text):h.name,[t]}}}},{"../../components/color":43,"../../components/fx":82,"../../lib":159,"../../registry":242,"./fill_hover_text":288,"./get_trace_color":290}],292:[function(t,e,n){"use strict";var i={},r=t("./subtypes");i.hasLines=r.hasLines,i.hasMarkers=r.hasMarkers,i.hasText=r.hasText,i.isBubble=r.isBubble,i.attributes=t("./attributes"),i.supplyDefaults=t("./defaults"),i.crossTraceDefaults=t("./cross_trace_defaults"),i.calc=t("./calc").calc,i.crossTraceCalc=t("./cross_trace_calc"),i.arraysToCalcdata=t("./arrays_to_calcdata"),i.plot=t("./plot"),i.colorbar=t("./marker_colorbar"),i.style=t("./style").style,i.styleOnSelect=t("./style").styleOnSelect,i.hoverPoints=t("./hover"),i.selectPoints=t("./select"),i.animatable=!0,i.moduleType="trace",i.name="scatter",i.basePlotModule=t("../../plots/cartesian"),i.categories=["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],i.meta={},e.exports=i},{"../../plots/cartesian":214,"./arrays_to_calcdata":279,"./attributes":280,"./calc":281,"./cross_trace_calc":285,"./cross_trace_defaults":286,"./defaults":287,"./hover":291,"./marker_colorbar":298,"./plot":300,"./select":301,"./style":303,"./subtypes":304}],293:[function(t,e,n){"use strict";var i=t("../../lib").isArrayOrTypedArray,r=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/defaults");e.exports=function(t,e,n,o,s,l){var c=(t.marker||{}).color;s("line.color",n),r(t,"line")?a(t,e,o,s,{prefix:"line.",cLetter:"c"}):s("line.color",!i(c)&&c||n),s("line.width"),(l||{}).noDash||s("line.dash")}},{"../../components/colorscale/defaults":53,"../../components/colorscale/helpers":54,"../../lib":159}],294:[function(t,e,n){"use strict";var i=t("../../constants/numerical"),r=i.BADNUM,a=i.LOG_CLIP,o=a+.5,s=a-.5,l=t("../../lib"),c=l.segmentsIntersect,u=l.constrain,h=t("./constants");e.exports=function(t,e){var n,i,a,d,f,p,v,g,m,y,_,x,b,w,k,T,M,A,C=e.xaxis,L=e.yaxis,S="log"===C.type,E="log"===L.type,O=C._length,P=L._length,D=e.connectGaps,z=e.baseTolerance,I=e.shape,R="linear"===I,B=[],N=h.minTolerance,F=new Array(t.length),j=0;function H(e){var n=t[e];if(!n)return!1;var i=C.c2p(n.x),a=L.c2p(n.y);if(i===r){if(S&&(i=C.c2p(n.x,!0)),i===r)return!1;E&&a===r&&(i*=Math.abs(C._m*P*(C._m>0?o:s)/(L._m*O*(L._m>0?o:s)))),i*=1e3}if(a===r){if(E&&(a=L.c2p(n.y,!0)),a===r)return!1;a*=1e3}return[i,a]}function $(t,e,n,i){var r=n-t,a=i-e,o=.5-t,s=.5-e,l=r*r+a*a,c=r*o+a*s;if(c>0&&c<l){var u=o*a-s*r;if(u*u<l)return!0}}function q(t,e){var n=t[0]/O,i=t[1]/P,r=Math.max(0,-n,n-1,-i,i-1);return r&&void 0!==M&&$(n,i,M,A)&&(r=0),r&&e&&$(n,i,e[0]/O,e[1]/P)&&(r=0),(1+h.toleranceGrowth*r)*z}function Z(t,e){var n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)}var V,W,U,G,X,Y,Q,K=h.maxScreensAway,J=-O*K,tt=O*(1+K),et=-P*K,nt=P*(1+K),it=[[J,et,tt,et],[tt,et,tt,nt],[tt,nt,J,nt],[J,nt,J,et]];function rt(t){if(t[0]<J||t[0]>tt||t[1]<et||t[1]>nt)return[u(t[0],J,tt),u(t[1],et,nt)]}function at(t,e){return t[0]===e[0]&&(t[0]===J||t[0]===tt)||t[1]===e[1]&&(t[1]===et||t[1]===nt)||void 0}function ot(t,e,n){return function(i,r){var a=rt(i),o=rt(r),s=[];if(a&&o&&at(a,o))return s;a&&s.push(a),o&&s.push(o);var c=2*l.constrain((i[t]+r[t])/2,e,n)-((a||i)[t]+(o||r)[t]);return c&&((a&&o?c>0==a[t]>o[t]?a:o:a||o)[t]+=c),s}}function st(t){var e=t[0],n=t[1],i=e===F[j-1][0],r=n===F[j-1][1];if(!i||!r)if(j>1){var a=e===F[j-2][0],o=n===F[j-2][1];i&&(e===J||e===tt)&&a?o?j--:F[j-1]=t:r&&(n===et||n===nt)&&o?a?j--:F[j-1]=t:F[j++]=t}else F[j++]=t}function lt(t){F[j-1][0]!==t[0]&&F[j-1][1]!==t[1]&&st([U,G]),st(t),X=null,U=G=0}function ct(t){if(M=t[0]/O,A=t[1]/P,W=t[1]<et?et:t[1]>nt?nt:0,(V=t[0]<J?J:t[0]>tt?tt:0)||W){if(j)if(X){var e=Q(X,t);e.length>1&&(lt(e[0]),F[j++]=e[1])}else Y=Q(F[j-1],t)[0],F[j++]=Y;else F[j++]=[V||t[0],W||t[1]];var n=F[j-1];V&&W&&(n[0]!==V||n[1]!==W)?(X&&(U!==V&&G!==W?st(U&&G?(a=(r=t)[0]-(i=X)[0],o=(r[1]-i[1])/a,(i[1]*r[0]-r[1]*i[0])/a>0?[o>0?J:tt,nt]:[o>0?tt:J,et]):[U||V,G||W]):U&&G&&st([U,G])),st([V,W])):U-V&&G-W&&st([V||U,W||G]),X=t,U=V,G=W}else X&&lt(Q(X,t)[0]),F[j++]=t;var i,r,a,o}for("linear"===I||"spline"===I?Q=function(t,e){for(var n=[],i=0,r=0;r<4;r++){var a=it[r],o=c(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);o&&(!i||Math.abs(o.x-n[0][0])>1||Math.abs(o.y-n[0][1])>1)&&(o=[o.x,o.y],i&&Z(o,t)<Z(n[0],t)?n.unshift(o):n.push(o),i++)}return n}:"hv"===I||"vh"===I?Q=function(t,e){var n=[],i=rt(t),r=rt(e);return i&&r&&at(i,r)?n:(i&&n.push(i),r&&n.push(r),n)}:"hvh"===I?Q=ot(0,J,tt):"vhv"===I&&(Q=ot(1,et,nt)),n=0;n<t.length;n++)if(i=H(n)){for(j=0,X=null,ct(i),n++;n<t.length;n++){if(!(d=H(n))){if(D)continue;break}if(R&&e.simplify){var ut=H(n+1);if(!((y=Z(d,i))<q(d,ut)*N)){for(g=[(d[0]-i[0])/y,(d[1]-i[1])/y],f=i,_=y,x=w=k=0,v=!1,a=d,n++;n<t.length;n++){if(p=ut,ut=H(n+1),!p){if(D)continue;break}if(T=(m=[p[0]-i[0],p[1]-i[1]])[0]*g[1]-m[1]*g[0],w=Math.min(w,T),(k=Math.max(k,T))-w>q(p,ut))break;a=p,(b=m[0]*g[0]+m[1]*g[1])>_?(_=b,d=p,v=!1):b<x&&(x=b,f=p,v=!0)}if(v?(ct(d),a!==f&&ct(f)):(f!==i&&ct(f),a!==d&&ct(d)),ct(a),n>=t.length||!p)break;ct(p),i=p}}else ct(d)}X&&st([U||X[0],G||X[1]]),B.push(F.slice(0,j))}return B}},{"../../constants/numerical":140,"../../lib":159,"./constants":284}],295:[function(t,e,n){"use strict";e.exports=function(t,e,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],296:[function(t,e,n){"use strict";var i={tonextx:1,tonexty:1,tonext:1};e.exports=function(t,e,n){var r,a,o,s,l,c={},u=!1,h=-1,d=0,f=-1;for(a=0;a<n.length;a++)(o=(r=n[a][0].trace).stackgroup||"")?o in c?l=c[o]:(l=c[o]=d,d++):r.fill in i&&f>=0?l=f:(l=f=d,d++),l<h&&(u=!0),r._groupIndex=h=l;var p=n.slice();u&&p.sort(function(t,e){var n=t[0].trace,i=e[0].trace;return n._groupIndex-i._groupIndex||n.index-i.index});var v={};for(a=0;a<p.length;a++)o=(r=p[a][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in i&&(r._prevtrace=(s=v[o])||null,s&&(s._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),v[o]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return p}},{}],297:[function(t,e,n){"use strict";var i=t("fast-isnumeric");e.exports=function(t){var e=t.marker,n=e.sizeref||1,r=e.sizemin||0,a="area"===e.sizemode?function(t){return Math.sqrt(t/n)}:function(t){return t/n};return function(t){var e=a(t/2);return i(e)&&e>0?Math.max(e,r):0}}},{"fast-isnumeric":10}],298:[function(t,e,n){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},{}],299:[function(t,e,n){"use strict";var i=t("../../components/color"),r=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/defaults"),o=t("./subtypes");e.exports=function(t,e,n,s,l,c){var u=o.isBubble(t),h=(t.line||{}).color;c=c||{},h&&(n=h),l("marker.symbol"),l("marker.opacity",u?.7:1),l("marker.size"),l("marker.color",n),r(t,"marker")&&a(t,e,s,l,{prefix:"marker.",cLetter:"c"}),c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),c.noLine||(l("marker.line.color",h&&!Array.isArray(h)&&e.marker.color!==h?h:u?i.background:i.defaultLine),r(t,"marker.line")&&a(t,e,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",u?1:0)),u&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),c.gradient&&"none"!==l("marker.gradient.type")&&l("marker.gradient.color")}},{"../../components/color":43,"../../components/colorscale/defaults":53,"../../components/colorscale/helpers":54,"./subtypes":304}],300:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../registry"),a=t("../../lib"),o=a.ensureSingle,s=a.identity,l=t("../../components/drawing"),c=t("./subtypes"),u=t("./line_points"),h=t("./link_traces"),d=t("../../lib/polygon").tester;function f(t,e,n,h,f,p,v){var g;!function(t,e,n,r,o){var s=n.xaxis,l=n.yaxis,u=i.extent(a.simpleMap(s.range,s.r2c)),h=i.extent(a.simpleMap(l.range,l.r2c)),d=r[0].trace;if(c.hasMarkers(d)){var f=d.marker.maxdisplayed;if(0!==f){var p=r.filter(function(t){return t.x>=u[0]&&t.x<=u[1]&&t.y>=h[0]&&t.y<=h[1]}),v=Math.ceil(p.length/f),g=0;o.forEach(function(t,n){var i=t[0].trace;c.hasMarkers(i)&&i.marker.maxdisplayed>0&&n<e&&g++});var m=Math.round(g*v/3+Math.floor(g/3)*v/7.1);r.forEach(function(t){delete t.vis}),p.forEach(function(t,e){0===Math.round((e+m)%v)&&(t.vis=!0)})}}}(0,e,n,h,f);var m=!!v&&v.duration>0;function y(t){return m?t.transition():t}var _=n.xaxis,x=n.yaxis,b=h[0].trace,w=b.line,k=i.select(p),T=o(k,"g","errorbars"),M=o(k,"g","lines"),A=o(k,"g","points"),C=o(k,"g","text");if(r.getComponentMethod("errorbars","plot")(t,T,n,v),!0===b.visible){var L,S;y(k).style("opacity",b.opacity);var E=b.fill.charAt(b.fill.length-1);"x"!==E&&"y"!==E&&(E=""),n.isRangePlot||(h[0].node3=k);var O,P,D="",z=[],I=b._prevtrace;I&&(D=I._prevRevpath||"",S=I._nextFill,z=I._polygons);var R,B,N,F,j,H,$,q="",Z="",V=[],W=a.noop;if(L=b._ownFill,c.hasLines(b)||"none"!==b.fill){for(S&&S.datum(h),-1!==["hv","vh","hvh","vhv"].indexOf(w.shape)?(R=l.steps(w.shape),B=l.steps(w.shape.split("").reverse().join(""))):R=B="spline"===w.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?l.smoothclosed(t.slice(1),w.smoothing):l.smoothopen(t,w.smoothing)}:function(t){return"M"+t.join("L")},N=function(t){return B(t.reverse())},V=u(h,{xaxis:_,yaxis:x,connectGaps:b.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,simplify:w.simplify}),$=b._polygons=new Array(V.length),g=0;g<V.length;g++)b._polygons[g]=d(V[g]);V.length&&(F=V[0][0],H=(j=V[V.length-1])[j.length-1]),W=function(t){return function(e){if(O=R(e),P=N(e),q?E?(q+="L"+O.substr(1),Z=P+"L"+Z.substr(1)):(q+="Z"+O,Z=P+"Z"+Z):(q=O,Z=P),c.hasLines(b)&&e.length>1){var n=i.select(this);if(n.datum(h),t)y(n.style("opacity",0).attr("d",O).call(l.lineGroupStyle)).style("opacity",1);else{var r=y(n);r.attr("d",O),l.singleLineStyle(h,r)}}}}}var U=M.selectAll(".js-line").data(V);y(U.exit()).style("opacity",0).remove(),U.each(W(!1)),U.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(W(!0)),l.setClipUrl(U,n.layerClipId,t),V.length?(L?(L.datum(h),F&&H&&(E?("y"===E?F[1]=H[1]=x.c2p(0,!0):"x"===E&&(F[0]=H[0]=_.c2p(0,!0)),y(L).attr("d","M"+H+"L"+F+"L"+q.substr(1)).call(l.singleFillStyle)):y(L).attr("d",q+"Z").call(l.singleFillStyle))):S&&("tonext"===b.fill.substr(0,6)&&q&&D?("tonext"===b.fill?y(S).attr("d",q+"Z"+D+"Z").call(l.singleFillStyle):y(S).attr("d",q+"L"+D.substr(1)+"Z").call(l.singleFillStyle),b._polygons=b._polygons.concat(z)):(X(S),b._polygons=null)),b._prevRevpath=Z,b._prevPolygons=$):(L?X(L):S&&X(S),b._polygons=b._prevRevpath=b._prevPolygons=null),A.datum(h),C.datum(h),function(e,r,a){var o,u=a[0].trace,h=c.hasMarkers(u),d=c.hasText(u),f=function(t){if(u.ids)return J}(),p=tt,v=tt;if(h||d){var g=s,b=u.stackgroup,w=b&&"infer zero"===t._fullLayout._scatterStackOpts[_._id+x._id][b].stackgaps;u.marker.maxdisplayed||u._needsCull?g=w?Q:Y:b&&!w&&(g=K),h&&(p=g),d&&(v=g)}var k,T=(o=e.selectAll("path.point").data(p,f)).enter().append("path").classed("point",!0);m&&T.call(l.pointStyle,u,t).call(l.translatePoints,_,x).style("opacity",0).transition().style("opacity",1),o.order(),h&&(k=l.makePointStyleFns(u)),o.each(function(e){var r=i.select(this),a=y(r);l.translatePoint(e,a,_,x)?(l.singlePointStyle(e,a,u,k,t),n.layerClipId&&l.hideOutsideRangePoint(e,a,_,x,u.xcalendar,u.ycalendar),u.customdata&&r.classed("plotly-customdata",null!=e.data)):a.remove()}),m?o.exit().transition().style("opacity",0).remove():o.exit().remove(),(o=r.selectAll("g").data(v,f)).enter().append("g").classed("textpoint",!0).append("text"),o.order(),o.each(function(t){var e=i.select(this),r=y(e.select("text"));l.translatePoint(t,r,_,x)?n.layerClipId&&l.hideOutsideRangePoint(t,e,_,x,u.xcalendar,u.ycalendar):e.remove()}),o.selectAll("text").call(l.textPointStyle,u,t).each(function(t){var e=_.c2p(t.x),n=x.c2p(t.y);i.select(this).selectAll("tspan.line").each(function(){y(i.select(this)).attr({x:e,y:n})})}),o.exit().remove()}(A,C,h);var G=!1===b.cliponaxis?null:n.layerClipId;l.setClipUrl(A,G,t),l.setClipUrl(C,G,t)}function X(t){y(t).attr("d","M0,0Z")}function Y(t){return t.filter(function(t){return!t.gap&&t.vis})}function Q(t){return t.filter(function(t){return t.vis})}function K(t){return t.filter(function(t){return!t.gap})}function J(t){return t.id}function tt(){return!1}}e.exports=function(t,e,n,r,a,c){var u,d,p=!a,v=!!a&&a.duration>0,g=h(t,e,n);(u=r.selectAll("g.trace").data(g,function(t){return t[0].trace.uid})).enter().append("g").attr("class",function(t){return"trace scatter trace"+t[0].trace.uid}).style("stroke-miterlimit",2),u.order(),function(t,e,n){u.each(function(e){var r=o(i.select(this),"g","fills");l.setClipUrl(r,n.layerClipId,t);var a=e[0].trace,c=[];a._ownfill&&c.push("_ownFill"),a._nexttrace&&c.push("_nextFill");var u=r.selectAll("g").data(c,s);u.enter().append("g"),u.exit().each(function(t){a[t]=null}).remove(),u.order().each(function(t){a[t]=o(i.select(this),"path","js-fill")})})}(t,0,e),v?(c&&(d=c()),i.transition().duration(a.duration).ease(a.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()}).each(function(){r.selectAll("g.trace").each(function(n,i){f(t,i,e,n,g,this,a)})})):u.each(function(n,i){f(t,i,e,n,g,this,a)}),p&&u.exit().remove(),r.selectAll("path:not([d])").remove()}},{"../../components/drawing":64,"../../lib":159,"../../lib/polygon":171,"../../registry":242,"./line_points":294,"./link_traces":296,"./subtypes":304,d3:8}],301:[function(t,e,n){"use strict";var i=t("./subtypes");e.exports=function(t,e){var n,r,a,o,s=t.cd,l=t.xaxis,c=t.yaxis,u=[],h=s[0].trace;if(!i.hasMarkers(h)&&!i.hasText(h))return[];if(!1===e)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)a=l.c2p((r=s[n]).x),o=c.c2p(r.y),null!==r.i&&e.contains([a,o],!1,n,t)?(u.push({pointNumber:r.i,x:l.c2d(r.x),y:c.c2d(r.y)}),r.selected=1):r.selected=0;return u}},{"./subtypes":304}],302:[function(t,e,n){"use strict";var i=["orientation","groupnorm","stackgaps"];e.exports=function(t,e,n,r){var a=n._scatterStackOpts,o=r("stackgroup");if(o){var s=e.xaxis+e.yaxis,l=a[s];l||(l=a[s]={});var c=l[o],u=!1;c?c.traces.push(e):(c=l[o]={traceIndices:[],traces:[e]},u=!0);for(var h={orientation:e.x&&!e.y?"h":"v"},d=0;d<i.length;d++){var f=i[d],p=f+"Found";if(!c[p]){var v=void 0!==t[f],g="orientation"===f;if((v||u)&&(c[f]=r(f,h[f]),g&&(c.fillDflt="h"===c[f]?"tonextx":"tonexty"),v&&(c[p]=!0,!u&&(delete c.traces[0][f],g))))for(var m=0;m<c.traces.length-1;m++){var y=c.traces[m];y._input.fill!==y.fill&&(y.fill=c.fillDflt)}}}return c}}},{}],303:[function(t,e,n){"use strict";var i=t("d3"),r=t("../../components/drawing"),a=t("../../registry");function o(t,e,n){r.pointStyle(t.selectAll("path.point"),e,n)}function s(t,e,n){r.textPointStyle(t.selectAll("text"),e,n)}e.exports={style:function(t,e){var n=e?e[0].node3:i.select(t).selectAll("g.trace.scatter");n.style("opacity",function(t){return t[0].trace.opacity}),n.selectAll("g.points").each(function(e){o(i.select(this),e.trace||e[0].trace,t)}),n.selectAll("g.text").each(function(e){s(i.select(this),e.trace||e[0].trace,t)}),n.selectAll("g.trace path.js-line").call(r.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(r.fillGroupStyle),a.getComponentMethod("errorbars","style")(n)},stylePoints:o,styleText:s,styleOnSelect:function(t,e){var n=e[0].node3,i=e[0].trace;i.selectedpoints?(r.selectedPointStyle(n.selectAll("path.point"),i),r.selectedTextStyle(n.selectAll("text"),i)):(o(n,i,t),s(n,i,t))}}},{"../../components/drawing":64,"../../registry":242,d3:8}],304:[function(t,e,n){"use strict";var i=t("../../lib");e.exports={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return i.isPlainObject(t.marker)&&i.isArrayOrTypedArray(t.marker.size)}}},{"../../lib":159}],305:[function(t,e,n){"use strict";var i=t("../../lib");e.exports=function(t,e,n,r,a){a=a||{},r("textposition"),i.coerceFont(r,"textfont",n.font),a.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":159}],306:[function(t,e,n){"use strict";var i=t("../../lib"),r=t("../../registry");e.exports=function(t,e,n,a){var o,s=a("x"),l=a("y");if(r.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],n),s){var c=i.minRowLength(s);l?o=Math.min(c,i.minRowLength(l)):(o=c,a("y0"),a("dy"))}else{if(!l)return 0;o=i.minRowLength(l),a("x0"),a("dx")}return e._length=o,o}},{"../../lib":159,"../../registry":242}]},{},[5])(5)}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.L={})}(this,function(t){"use strict";function e(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}function n(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}function i(t){return t._leaflet_id=t._leaflet_id||++Wt,t._leaflet_id}function r(t,e,n){var i,r,a,o;return o=function(){i=!1,r&&(a.apply(n,r),r=!1)},a=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(o,e),i=!0)}}function a(t,e,n){var i=e[1],r=e[0],a=i-r;return t===i&&n?t:((t-r)%a+a)%a+r}function o(){return!1}function s(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function l(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return l(t).split(/\s+/)}function u(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?Vt(t.options):{}),e)t.options[n]=e[n];return t.options}function h(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}function d(t,e){return t.replace(Ut,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}function f(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function p(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function v(t){var e=+new Date,n=Math.max(0,16-(e-Yt));return Yt=e+n,window.setTimeout(t,n)}function g(t,e,i){if(!i||Qt!==v)return Qt.call(window,n(t,e));t.call(e)}function m(t){t&&Kt.call(window,t)}function y(){}function _(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}function x(t,e,n){return t instanceof _?t:Gt(t)?new _(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new _(t.x,t.y):new _(t,e,n)}function b(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function w(t,e){return!t||t instanceof b?t:new b(t,e)}function k(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function T(t,e){return t instanceof k?t:new k(t,e)}function M(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function A(t,e,n){return t instanceof M?t:Gt(t)&&"object"!=typeof t[0]?3===t.length?new M(t[0],t[1],t[2]):2===t.length?new M(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new M(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new M(t,e,n)}function C(t,e,n,i){if(Gt(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function S(t,e,n,i){return new C(t,e,n,i)}function E(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function O(t,e){var n,i,r,a,o,s,l="";for(n=0,r=t.length;n<r;n++){for(i=0,a=(o=t[n]).length;i<a;i++)l+=(i?"L":"M")+(s=o[i]).x+" "+s.y;l+=e?He?"z":"x":""}return l||"M0 0"}function P(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function D(t,e,i){var r=n(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Ge.indexOf(t.target.tagName)<0))return;gt(t)}B(t,e)});t["_leaflet_touchstart"+i]=r,t.addEventListener(Ze,r,!1),Ye||(document.documentElement.addEventListener(Ze,z,!0),document.documentElement.addEventListener(Ve,I,!0),document.documentElement.addEventListener(We,R,!0),document.documentElement.addEventListener(Ue,R,!0),Ye=!0)}function z(t){Xe[t.pointerId]=t,Qe++}function I(t){Xe[t.pointerId]&&(Xe[t.pointerId]=t)}function R(t){delete Xe[t.pointerId],Qe--}function B(t,e){for(var n in t.touches=[],Xe)t.touches.push(Xe[n]);t.changedTouches=[t],e(t)}function N(t,e,n){function i(t){var e;if(Ie){if(!pe||"mouse"===t.pointerType)return;e=Qe}else e=t.touches.length;if(!(e>1)){var n=Date.now(),i=n-(a||n);o=t.touches?t.touches[0]:t,s=i>0&&i<=l,a=n}}function r(t){if(s&&!o.cancelBubble){if(Ie){if(!pe||"mouse"===t.pointerType)return;var n,i,r={};for(i in o)r[i]=(n=o[i])&&n.bind?n.bind(o):n;o=r}o.type="dblclick",e(o),a=null}}var a,o,s=!1,l=250;return t[tn+Ke+n]=i,t[tn+Je+n]=r,t[tn+"dblclick"+n]=e,t.addEventListener(Ke,i,!1),t.addEventListener(Je,r,!1),t.addEventListener("dblclick",e,!1),this}function F(t,e){var n=t[tn+Je+e],i=t[tn+"dblclick"+e];return t.removeEventListener(Ke,t[tn+Ke+e],!1),t.removeEventListener(Je,n,!1),pe||t.removeEventListener("dblclick",i,!1),this}function j(t){return"string"==typeof t?document.getElementById(t):t}function H(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function $(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function q(t){var e=t.parentNode;e&&e.removeChild(t)}function Z(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function V(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function W(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function U(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=Q(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function G(t,e){if(void 0!==t.classList)for(var n=c(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!U(t,e)){var a=Q(t);Y(t,(a?a+" ":"")+e)}}function X(t,e){void 0!==t.classList?t.classList.remove(e):Y(t,l((" "+Q(t)+" ").replace(" "+e+" "," ")))}function Y(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function Q(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function K(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function J(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function tt(t,e,n){var i=e||new _(0,0);t.style[en]=(Ce?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function et(t,e){t._leaflet_pos=e,Ee?tt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function nt(t){return t._leaflet_pos||new _(0,0)}function it(){ct(window,"dragstart",gt)}function rt(){ut(window,"dragstart",gt)}function at(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(ot(),on=t,sn=t.style.outline,t.style.outline="none",ct(window,"keydown",ot))}function ot(){on&&(on.style.outline=sn,on=void 0,sn=void 0,ut(window,"keydown",ot))}function st(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function lt(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}function ct(t,e,n,i){if("object"==typeof e)for(var r in e)ht(t,r,e[r],n);else for(var a=0,o=(e=c(e)).length;a<o;a++)ht(t,e[a],n,i);return this}function ut(t,e,n,i){if("object"==typeof e)for(var r in e)dt(t,r,e[r],n);else if(e)for(var a=0,o=(e=c(e)).length;a<o;a++)dt(t,e[a],n,i);else{for(var s in t[un])dt(t,s,t[un][s]);delete t[un]}return this}function ht(t,e,n,r){var a=e+i(n)+(r?"_"+i(r):"");if(t[un]&&t[un][a])return this;var o=function(e){return n.call(r||t,e||window.event)},s=o;Ie&&0===e.indexOf("touch")?function(t,e,n,i){"touchstart"===e?D(t,n,i):"touchmove"===e?function(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&B(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Ve,i,!1)}(t,n,i):"touchend"===e&&function(t,e,n){var i=function(t){B(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(We,i,!1),t.addEventListener(Ue,i,!1)}(t,n,i)}(t,e,o,a):!Re||"dblclick"!==e||!N||Ie&&be?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,wt(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&ge&&(o=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=ln&&n-ln;i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?mt(t):(ln=n,e(t))}(t,s)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):N(t,o,a),t[un]=t[un]||{},t[un][a]=o}function dt(t,e,n,r){var a=e+i(n)+(r?"_"+i(r):""),o=t[un]&&t[un][a];if(!o)return this;Ie&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+a];"touchstart"===e?t.removeEventListener(Ze,i,!1):"touchmove"===e?t.removeEventListener(Ve,i,!1):"touchend"===e&&(t.removeEventListener(We,i,!1),t.removeEventListener(Ue,i,!1))}(t,e):!Re||"dblclick"!==e||!F||Ie&&be?"removeEventListener"in t?t.removeEventListener("mousewheel"===e?"onwheel"in t?"wheel":"mousewheel":"mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o):F(t,a),t[un][a]=null}function ft(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,bt(t),this}function pt(t){return ht(t,"mousewheel",ft),this}function vt(t){return ct(t,"mousedown touchstart dblclick",ft),ht(t,"click",xt),this}function gt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function mt(t){return gt(t),ft(t),this}function yt(t,e){if(!e)return new _(t.clientX,t.clientY);var n=lt(e),i=n.boundingClientRect;return new _((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}function _t(t){return pe?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/hn:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function xt(t){dn[t.type]=!0}function bt(t){var e=dn[t.type];return dn[t.type]=!1,e}function wt(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}function kt(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,a){var o,s,l,c=0;for(s=r+1;s<=a-1;s++)(l=St(e[s],e[r],e[a],!0))>c&&(o=s,c=l);c>i&&(n[o]=1,t(e,n,i,r,o),t(e,n,i,o,a))}(t,i,e,0,n-1);var r,a=[];for(r=0;r<n;r++)i[r]&&a.push(t[r]);return a}(t=function(t,e){for(var n=[t[0]],i=1,r=0,a=t.length;i<a;i++)Lt(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<a-1&&n.push(t[a-1]),n}(t,n),n)}function Tt(t,e,n){return Math.sqrt(St(t,e,n,!0))}function Mt(t,e,n,i,r){var a,o,s,l=i?kn:Ct(t,n),c=Ct(e,n);for(kn=c;;){if(!(l|c))return[t,e];if(l&c)return!1;s=Ct(o=At(t,e,a=l||c,n,r),n),a===l?(t=o,l=s):(e=o,c=s)}}function At(t,e,n,i,r){var a,o,s=e.x-t.x,l=e.y-t.y,c=i.min,u=i.max;return 8&n?(a=t.x+s*(u.y-t.y)/l,o=u.y):4&n?(a=t.x+s*(c.y-t.y)/l,o=c.y):2&n?(a=u.x,o=t.y+l*(u.x-t.x)/s):1&n&&(a=c.x,o=t.y+l*(c.x-t.x)/s),new _(a,o,r)}function Ct(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Lt(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function St(t,e,n,i){var r,a=e.x,o=e.y,s=n.x-a,l=n.y-o,c=s*s+l*l;return c>0&&((r=((t.x-a)*s+(t.y-o)*l)/c)>1?(a=n.x,o=n.y):r>0&&(a+=s*r,o+=l*r)),s=t.x-a,l=t.y-o,i?s*s+l*l:new _(a,o)}function Et(t){return!Gt(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function Ot(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Et(t)}function Pt(t,e,n){var i,r,a,o,s,l,c,u,h,d=[1,4,2,8];for(r=0,c=t.length;r<c;r++)t[r]._code=Ct(t[r],e);for(o=0;o<4;o++){for(u=d[o],i=[],r=0,a=(c=t.length)-1;r<c;a=r++)l=t[a],(s=t[r])._code&u?l._code&u||((h=At(l,s,u,e,n))._code=Ct(h,e),i.push(h)):(l._code&u&&((h=At(l,s,u,e,n))._code=Ct(h,e),i.push(h)),i.push(s));t=i}return t}function Dt(t,e){var n,i,r,a,o="Feature"===t.type?t.geometry:t,s=o?o.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||zt;if(!s&&!o)return null;switch(o.type){case"Point":return n=u(s),c?c(t,n):new qn(n);case"MultiPoint":for(r=0,a=s.length;r<a;r++)n=u(s[r]),l.push(c?c(t,n):new qn(n));return new Fn(l);case"LineString":case"MultiLineString":return i=It(s,"LineString"===o.type?0:1,u),new Un(i,e);case"Polygon":case"MultiPolygon":return i=It(s,"Polygon"===o.type?1:2,u),new Gn(i,e);case"GeometryCollection":for(r=0,a=o.geometries.length;r<a;r++){var h=Dt({geometry:o.geometries[r],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Fn(l);default:throw new Error("Invalid GeoJSON object.")}}function zt(t){return new M(t[1],t[0],t[2])}function It(t,e,n){for(var i,r=[],a=0,o=t.length;a<o;a++)i=e?It(t[a],e-1,n):(n||zt)(t[a]),r.push(i);return r}function Rt(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[s(t.lng,e),s(t.lat,e),s(t.alt,e)]:[s(t.lng,e),s(t.lat,e)]}function Bt(t,e,n,i){for(var r=[],a=0,o=t.length;a<o;a++)r.push(e?Bt(t[a],e-1,n,i):Rt(t[a],i));return!e&&n&&r.push(r[0]),r}function Nt(t,n){return t.feature?e({},t.feature,{geometry:n}):Ft(n)}function Ft(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function jt(t,e){return new Xn(t,e)}function Ht(t,e){return new ai(t,e)}function $t(t){return je?new li(t):null}function qt(t){return He||$e?new di(t):null}var Zt=Object.freeze;Object.freeze=function(t){return t};var Vt=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),Wt=0,Ut=/\{ *([\w_-]+) *\}/g,Gt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Xt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",Yt=0,Qt=window.requestAnimationFrame||p("RequestAnimationFrame")||v,Kt=window.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},Jt=(Object.freeze||Object)({freeze:Zt,extend:e,create:Vt,bind:n,lastId:Wt,stamp:i,throttle:r,wrapNum:a,falseFn:o,formatNum:s,trim:l,splitWords:c,setOptions:u,getParamString:h,template:d,isArray:Gt,indexOf:f,emptyImageUrl:Xt,requestFn:Qt,cancelFn:Kt,requestAnimFrame:g,cancelAnimFrame:m});y.extend=function(t){var n=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=n.__super__=this.prototype,r=Vt(i);for(var a in r.constructor=n,n.prototype=r,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(n[a]=this[a]);return t.statics&&(e(n,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=Gt(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=e(Vt(r.options),t.options)),e(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},n},y.include=function(t){return e(this.prototype,t),this},y.mergeOptions=function(t){return e(this.prototype.options,t),this},y.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var te={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,a=(t=c(t)).length;r<a;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,a=(t=c(t)).length;r<a;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(this._events[t]=i=[]),n===this&&(n=void 0);for(var r={fn:e,ctx:n},a=i,o=0,s=a.length;o<s;o++)if(a[o].fn===e&&a[o].ctx===n)return;a.push(r)},_off:function(t,e,n){var i,r,a;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,a=i.length;r<a;r++){var s=i[r];if(s.ctx===n&&s.fn===e)return s.fn=o,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,a=i.length;r<a;r++)i[r].fn=o;delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this;var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var o=0,s=a.length;o<s;o++){var l=a[o];l.fn.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var a=n(function(){this.off(t,e,i).off(t,a,i)},this);return this.on(t,e,i).on(t,a,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[i(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[i(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};te.addEventListener=te.on,te.removeEventListener=te.clearAllEventListeners=te.off,te.addOneTimeEventListener=te.once,te.fireEvent=te.fire,te.hasEventListeners=te.listens;var ee=y.extend(te),ne=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};_.prototype={clone:function(){return new _(this.x,this.y)},add:function(t){return this.clone()._add(x(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(x(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new _(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new _(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(t){var e=(t=x(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=x(t)).x===this.x&&t.y===this.y},contains:function(t){return t=x(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+s(this.x)+", "+s(this.y)+")"}},b.prototype={extend:function(t){return t=x(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new _((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new _(this.min.x,this.max.y)},getTopRight:function(){return new _(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof _?x(t):w(t))instanceof b?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=w(t);var e=this.min,n=this.max,i=t.min,r=t.max;return r.x>=e.x&&i.x<=n.x&&r.y>=e.y&&i.y<=n.y},overlaps:function(t){t=w(t);var e=this.min,n=this.max,i=t.min,r=t.max;return r.x>e.x&&i.x<n.x&&r.y>e.y&&i.y<n.y},isValid:function(){return!(!this.min||!this.max)}},k.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof M)e=t,n=t;else{if(!(t instanceof k))return t?this.extend(A(t)||T(t)):this;if(n=t._northEast,!(e=t._southWest)||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new M(e.lat,e.lng),this._northEast=new M(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new k(new M(e.lat-i,e.lng-r),new M(n.lat+i,n.lng+r))},getCenter:function(){return new M((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new M(this.getNorth(),this.getWest())},getSouthEast:function(){return new M(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof M||"lat"in t?A(t):T(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof k?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=T(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast();return r.lat>=e.lat&&i.lat<=n.lat&&r.lng>=e.lng&&i.lng<=n.lng},overlaps:function(t){t=T(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast();return r.lat>e.lat&&i.lat<n.lat&&r.lng>e.lng&&i.lng<n.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=T(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},M.prototype={equals:function(t,e){return!!t&&(t=A(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+s(this.lat,t)+", "+s(this.lng,t)+")"},distanceTo:function(t){return re.distance(this,A(t))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return T([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new M(this.lat,this.lng,this.alt)}};var ie={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new b(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?a(t.lng,this.wrapLng,!0):t.lng;return new M(this.wrapLat?a(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var a=t.getSouthWest(),o=t.getNorthEast();return new k(new M(a.lat-i,a.lng-r),new M(o.lat-i,o.lng-r))}},re=e({},ie,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,a=Math.sin((e.lat-t.lat)*n/2),o=Math.sin((e.lng-t.lng)*n/2),s=a*a+Math.cos(i)*Math.cos(r)*o*o,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),ae={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new _(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new M((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new b([-t,-t],[t,t])}()};C.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return new _((t.x/(e=e||1)-this._b)/this._a,(t.y/e-this._d)/this._c)}};var oe,se,le,ce=e({},re,{code:"EPSG:3857",projection:ae,transformation:function(){var t=.5/(Math.PI*ae.R);return S(t,.5,-t,.5)}()}),ue=e({},ce,{code:"EPSG:900913"}),he=document.documentElement.style,de="ActiveXObject"in window,fe=de&&!document.addEventListener,pe="msLaunchUri"in navigator&&!("documentMode"in document),ve=P("webkit"),ge=P("android"),me=P("android 2")||P("android 3"),ye=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_e=ge&&P("Google")&&ye<537&&!("AudioNode"in window),xe=!!window.opera,be=P("chrome"),we=P("gecko")&&!ve&&!xe&&!de,ke=!be&&P("safari"),Te=P("phantom"),Me="OTransition"in he,Ae=0===navigator.platform.indexOf("Win"),Ce=de&&"transition"in he,Le="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!me,Se="MozPerspective"in he,Ee=!window.L_DISABLE_3D&&(Ce||Le||Se)&&!Me&&!Te,Oe="undefined"!=typeof orientation||P("mobile"),Pe=Oe&&ve,De=Oe&&Le,ze=!window.PointerEvent&&window.MSPointerEvent,Ie=!(!window.PointerEvent&&!ze),Re=!window.L_NO_TOUCH&&(Ie||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Be=Oe&&xe,Ne=Oe&&we,Fe=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,je=!!document.createElement("canvas").getContext,He=!(!document.createElementNS||!E("svg").createSVGRect),$e=!He&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),qe=(Object.freeze||Object)({ie:de,ielt9:fe,edge:pe,webkit:ve,android:ge,android23:me,androidStock:_e,opera:xe,chrome:be,gecko:we,safari:ke,phantom:Te,opera12:Me,win:Ae,ie3d:Ce,webkit3d:Le,gecko3d:Se,any3d:Ee,mobile:Oe,mobileWebkit:Pe,mobileWebkit3d:De,msPointer:ze,pointer:Ie,touch:Re,mobileOpera:Be,mobileGecko:Ne,retina:Fe,canvas:je,svg:He,vml:$e}),Ze=ze?"MSPointerDown":"pointerdown",Ve=ze?"MSPointerMove":"pointermove",We=ze?"MSPointerUp":"pointerup",Ue=ze?"MSPointerCancel":"pointercancel",Ge=["INPUT","SELECT","OPTION"],Xe={},Ye=!1,Qe=0,Ke=ze?"MSPointerDown":Ie?"pointerdown":"touchstart",Je=ze?"MSPointerUp":Ie?"pointerup":"touchend",tn="_leaflet_",en=J(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),nn=J(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),rn="webkitTransition"===nn||"OTransition"===nn?nn+"End":"transitionend";if("onselectstart"in document)oe=function(){ct(window,"selectstart",gt)},se=function(){ut(window,"selectstart",gt)};else{var an=J(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);oe=function(){if(an){var t=document.documentElement.style;le=t[an],t[an]="none"}},se=function(){an&&(document.documentElement.style[an]=le,le=void 0)}}var on,sn,ln,cn=(Object.freeze||Object)({TRANSFORM:en,TRANSITION:nn,TRANSITION_END:rn,get:j,getStyle:H,create:$,remove:q,empty:Z,toFront:V,toBack:W,hasClass:U,addClass:G,removeClass:X,setClass:Y,getClass:Q,setOpacity:K,testProp:J,setTransform:tt,setPosition:et,getPosition:nt,disableTextSelection:oe,enableTextSelection:se,disableImageDrag:it,enableImageDrag:rt,preventOutline:at,restoreOutline:ot,getSizedParentNode:st,getScale:lt}),un="_leaflet_events",hn=Ae&&be?2*window.devicePixelRatio:we?window.devicePixelRatio:1,dn={},fn=(Object.freeze||Object)({on:ct,off:ut,stopPropagation:ft,disableScrollPropagation:pt,disableClickPropagation:vt,preventDefault:gt,stop:mt,getMousePosition:yt,getWheelDelta:_t,fakeStop:xt,skipped:bt,isExternalTarget:wt,addListener:ct,removeListener:ut}),pn=ee.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=nt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=g(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),et(this._el,n),this.fire("step")},_complete:function(){m(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),vn=ee.extend({options:{crs:ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=u(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(A(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=nn&&Ee&&!Be&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ct(this._proxy,rn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(A(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t=t||(Ee?this.options.zoomDelta:1)),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t=t||(Ee?this.options.zoomDelta:1)),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),a=(t instanceof _?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),o=this.containerPointToLatLng(r.add(a));return this.setView(o,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():T(t);var n=x(e.paddingTopLeft||e.padding||[0,0]),i=x(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var a=i.subtract(n).divideBy(2),o=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r);return{center:this.unproject(o.add(s).divideBy(2).add(a),r),zoom:r}},fitBounds:function(t,e){if(!(t=T(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=x(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){G(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function i(t){var e=(h*h-u*u+(t?-1:1)*p*p*d*d)/(2*(t?h:u)*p*d),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function r(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}if(!1===(n=n||{}).animate||!Ee)return this.setView(t,e,n);this._stop();var o=this.project(this.getCenter()),s=this.project(t),l=this.getSize(),c=this._zoom;t=A(t),e=void 0===e?c:e;var u=Math.max(l.x,l.y),h=u*this.getZoomScale(c,e),d=s.distanceTo(o)||1,f=1.42,p=f*f,v=i(0),m=Date.now(),y=(i(1)-v)/f,_=n.duration?1e3*n.duration:1e3*y*.8;return this._moveStart(!0,n.noMoveStart),(function n(){var i=(Date.now()-m)/_,l=(1-Math.pow(1-i,1.5))*y;i<=1?(this._flyToFrame=g(n,this),this._move(this.unproject(o.add(s.subtract(o).multiplyBy(function(t){return u*(a(v)*function(t){return r(t)/a(t)}(v+f*t)-r(v))/p}(l)/d)),c),this.getScaleZoom(u/function(t){return u*(a(v)/a(v+f*t))}(l),c),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}).call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=T(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,T(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=x((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=x(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),a=this.project(r),o=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),c=w([s.min.add(n),s.max.subtract(i)]);if(!c.contains(o)){this._enforcingBounds=!0;var u=a.subtract(o),h=x(o.x+u.x,o.y+u.y);(o.x<c.min.x||o.x>c.max.x)&&(h.x=a.x-u.x,u.x>0?h.x+=l.x-n.x:h.x-=l.x-i.x),(o.y<c.min.y||o.y>c.max.y)&&(h.y=a.y-u.y,u.y>0?h.y+=l.y-n.y:h.y-=l.y-i.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),a=i.divideBy(2).round(),o=r.divideBy(2).round(),s=a.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=n(this._handleGeolocationResponse,this),r=n(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,r,t):navigator.geolocation.getCurrentPosition(i,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new M(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var a={latlng:e,bounds:n,timestamp:t.timestamp};for(var o in t.coords)"number"==typeof t.coords[o]&&(a[o]=t.coords[o]);this.fire("locationfound",a)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),q(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(m(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)q(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=$("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new k(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=T(t),n=x(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),a=this.getMaxZoom(),o=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),c=w(this.project(s,i),this.project(o,i)).getSize(),u=Ee?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,f=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(f,i),u&&(i=Math.round(i/(u/100))*(u/100),i=e?Math.ceil(i/u)*u:Math.floor(i/u)*u),Math.max(r,Math.min(a,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new _(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new b(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs,i=n.zoom(t*n.scale(e=void 0===e?this._zoom:e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(A(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(x(t),e)},layerPointToLatLng:function(t){var e=x(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(A(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(A(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(T(t))},distance:function(t,e){return this.options.crs.distance(A(t),A(e))},containerPointToLayerPoint:function(t){return x(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return x(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(x(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(A(t)))},mouseEventToContainerPoint:function(t){return yt(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=j(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");ct(e,"scroll",this._onScroll,this),this._containerId=i(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ee,G(t,"leaflet-container"+(Re?" leaflet-touch":"")+(Fe?" leaflet-retina":"")+(fe?" leaflet-oldie":"")+(ke?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=H(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),et(this._mapPane,new _(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(G(t.markerPane,"leaflet-zoom-hide"),G(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){et(this._mapPane,new _(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return m(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){et(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[i(this._container)]=this;var e=t?ut:ct;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Ee&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){m(this._resizeRequest),this._resizeRequest=g(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],a="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[i(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(a&&!wt(o,t))break;if(r.push(n),a)break}if(o===this._container)break;o=o.parentNode}return r.length||s||a||!wt(o,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!bt(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||at(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n))).length){var a=i[0];"contextmenu"===n&&a.listens(n,!0)&&gt(t);var o={originalEvent:t};if("keypress"!==t.type){var s=a.getLatLng&&(!a._radius||a._radius<=10);o.containerPoint=s?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=s?a.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(n,o,!0),o.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==f(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return nt(this._mapPane)||new _(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return w([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),a=new b(i.subtract(r),i.add(r)),o=this._getBoundsOffset(a,n,e);return o.round().equals([0,0])?t:this.unproject(i.add(o),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new b(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=w(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),a=i.max.subtract(t.max);return new _(this._rebound(r.x,-a.x),this._rebound(r.y,-a.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=Ee?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){X(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=$("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=en,n=this._proxy.style[e];tt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();tt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){q(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(g(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,i,r){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,G(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&X(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),g(function(){this._moveEnd(!0)},this))}}),gn=y.extend({options:{position:"topright"},initialize:function(t){u(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return G(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(q(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),mn=function(t){return new gn(t)};vn.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,r){e[t+r]=$("div",n+t+" "+n+r,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=$("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)q(this._controlCorners[t]);q(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var yn=gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in u(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return gn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(i(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){G(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(G(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):X(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return X(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=$("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),vt(e),pt(e);var i=this._section=$("section",t+"-list");n&&(this._map.on("click",this.collapse,this),ge||ct(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=$("a",t+"-toggle",e);r.href="#",r.title="Layers",Re?(ct(r,"click",mt),ct(r,"click",this.expand,this)):ct(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=$("div",t+"-base",i),this._separator=$("div",t+"-separator",i),this._overlaysList=$("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&i(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(n(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Z(this._baseLayersList),Z(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)this._addItem(i=this._layers[n]),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(t=t&&r>1)?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(i(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers",r),this._layerControlInputs.push(e),e.layerId=i(t.layer),ct(e,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(a),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var a=n.length-1;a>=0;a--)e=this._getLayer((t=n[a]).layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(a=0;a<r.length;a++)this._map.hasLayer(r[a])&&this._map.removeLayer(r[a]);for(a=0;a<i.length;a++)this._map.hasLayer(i[a])||this._map.addLayer(i[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)e=this._getLayer((t=n[r]).layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),_n=gn.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=$("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var a=$("a",n,i);return a.innerHTML=t,a.href="#",a.title=e,a.setAttribute("role","button"),a.setAttribute("aria-label",e),vt(a),ct(a,"click",mt),ct(a,"click",r,this),ct(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";X(this._zoomInButton,e),X(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&G(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&G(this._zoomInButton,e)}});vn.mergeOptions({zoomControl:!0}),vn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _n,this.addControl(this.zoomControl))});var xn=gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=$("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=$("div",e,n)),t.imperial&&(this._iScale=$("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(n=this._getRoundNum(e=r/5280),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),bn=gn.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){u(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=$("div","leaflet-control-attribution"),vt(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});vn.mergeOptions({attributionControl:!0}),vn.addInitHook(function(){this.options.attributionControl&&(new bn).addTo(this)}),gn.Layers=yn,gn.Zoom=_n,gn.Scale=xn,gn.Attribution=bn,mn.layers=function(t,e,n){return new yn(t,e,n)},mn.zoom=function(t){return new _n(t)},mn.scale=function(t){return new xn(t)},mn.attribution=function(t){return new bn(t)};var wn=y.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});wn.addTo=function(t,e){return t.addHandler(e,this),this};var kn,Tn={Events:te},Mn=Re?"touchstart mousedown":"mousedown",An={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Cn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Ln=ee.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){u(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(ct(this._dragStartTarget,Mn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ln._dragging===this&&this.finishDrag(),ut(this._dragStartTarget,Mn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!U(this._element,"leaflet-zoom-anim")&&!(Ln._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(Ln._dragging=this,this._preventOutline&&at(this._element),it(),oe(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=st(this._element);this._startPoint=new _(e.clientX,e.clientY),this._parentScale=lt(n),ct(document,Cn[t.type],this._onMove,this),ct(document,An[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new _(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,gt(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=nt(this._element).subtract(n),G(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),G(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,m(this._animRequest),this._lastEvent=t,this._animRequest=g(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),et(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in X(document.body,"leaflet-dragging"),this._lastTarget&&(X(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Cn)ut(document,Cn[t],this._onMove,this),ut(document,An[t],this._onUp,this);rt(),se(),this._moved&&this._moving&&(m(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Ln._dragging=!1}}),Sn=(Object.freeze||Object)({simplify:kt,pointToSegmentDistance:Tt,closestPointOnSegment:function(t,e,n){return St(t,e,n)},clipSegment:Mt,_getEdgeIntersection:At,_getBitCode:Ct,_sqClosestPointOnSegment:St,isFlat:Et,_flat:Ot}),En=(Object.freeze||Object)({clipPolygon:Pt}),On={project:function(t){return new _(t.lng,t.lat)},unproject:function(t){return new M(t.y,t.x)},bounds:new b([-180,-90],[180,90])},Pn={R:6378137,R_MINOR:6356752.314245179,bounds:new b([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,a=Math.sqrt(1-r*r),o=a*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-o)/(1+o),a/2);return i=-n*Math.log(Math.max(s,1e-10)),new _(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,a=Math.sqrt(1-r*r),o=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(o),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=a*Math.sin(s),e=Math.pow((1-e)/(1+e),a/2),s+=c=Math.PI/2-2*Math.atan(o*e)-s;return new M(s*n,t.x*n/i)}},Dn=(Object.freeze||Object)({LonLat:On,Mercator:Pn,SphericalMercator:ae}),zn=e({},re,{code:"EPSG:3395",projection:Pn,transformation:function(){var t=.5/(Math.PI*Pn.R);return S(t,.5,-t,.5)}()}),In=e({},re,{code:"EPSG:4326",projection:On,transformation:S(1/180,1,-1/180,.5)}),Rn=e({},ie,{projection:On,transformation:S(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});ie.Earth=re,ie.EPSG3395=zn,ie.EPSG3857=ce,ie.EPSG900913=ue,ie.EPSG4326=In,ie.Simple=Rn;var Bn=ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[i(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[i(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});vn.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=i(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=i(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&i(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?Gt(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[i(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=i(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Nn=Bn.extend({initialize:function(t,e){var n,i;if(u(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return i(t)}}),Fn=Nn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Nn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Nn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new k;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),jn=y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){u(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=x(i),a=x("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),a&&(t.style.marginLeft=-a.x+"px",t.style.marginTop=-a.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Fe&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Hn=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Hn.imagePath||(Hn.imagePath=this._detectIconPath()),(this.options.imagePath||Hn.imagePath)+jn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=$("div","leaflet-default-icon-path",document.body),e=H(t,"background-image")||H(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),$n=wn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Ln(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),G(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&X(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,a=nt(e._icon),o=n.getPixelBounds(),s=n.getPixelOrigin(),l=w(o.min._subtract(s).add(r),o.max._subtract(s).subtract(r));if(!l.contains(a)){var c=x((Math.max(l.max.x,a.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,a.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,a.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,a.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),et(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=g(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(m(this._panRequest),this._panRequest=g(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=nt(e._icon),r=e._map.layerPointToLatLng(i);n&&et(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){m(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),qn=Bn.extend({options:{icon:new Hn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){u(this,e),this._latlng=A(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=A(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),G(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),a=!1;r!==this._shadow&&(this._removeShadow(),a=!0),r&&(G(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&a&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),q(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&q(this._shadow),this._shadow=null},_setPos:function(t){et(this._icon,t),this._shadow&&et(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(G(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$n)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $n(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;K(this._icon,t),this._shadow&&K(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Zn=Bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return u(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Vn=Zn.extend({options:{fill:!0,radius:10},initialize:function(t,e){u(this,e),this._latlng=A(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=A(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Zn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new b(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Wn=Vn.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),u(this,n),this._latlng=A(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new k(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Zn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===re.distance){var r=Math.PI/180,a=this._mRadius/re.R/r,o=n.project([e+a,t]),s=n.project([e-a,t]),l=o.add(s).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(a*r)-Math.sin(e*r)*Math.sin(c*r))/(Math.cos(e*r)*Math.cos(c*r)))/r;(isNaN(u)||0===u)&&(u=a/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,t-u]).x,this._radiusY=l.y-o.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),Un=Zn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){u(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,a=St,o=0,s=this._parts.length;o<s;o++)for(var l=this._parts[o],c=1,u=l.length;c<u;c++){var h=a(t,e=l[c-1],n=l[c],!0);h<i&&(i=h,r=a(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,a,o,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<l-1;t++)if((i+=n=(r=s[t]).distanceTo(a=s[t+1]))>e)return this._map.layerPointToLatLng([a.x-(o=(i-e)/n)*(a.x-r.x),a.y-o*(a.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=A(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new k,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Et(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Et(t),i=0,r=t.length;i<r;i++)n?(e[i]=A(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new b;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new _(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,r,a=t.length;if(t[0]instanceof M){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,a,o,s,l=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,a=(s=this._rings[e]).length;n<a-1;n++)(o=Mt(s[n],s[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(o[0]),o[1]===s[n+1]&&n!==a-2||(l[i].push(o[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=kt(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,a,o,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,a=this._parts.length;n<a;n++)for(i=0,r=(o=(s=this._parts[n]).length)-1;i<o;r=i++)if((e||0!==i)&&Tt(t,s[r],s[i])<=l)return!0;return!1}});Un._flat=Ot;var Gn=Un.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,a,o,s,l=this._rings[0],c=l.length;if(!c)return null;for(a=o=s=0,t=0,e=c-1;t<c;e=t++)o+=((n=l[t]).x+(i=l[e]).x)*(r=n.y*i.x-i.y*n.x),s+=(n.y+i.y)*r,a+=3*r;return this._map.layerPointToLatLng(0===a?l[0]:[o/a,s/a])},_convertLatLngs:function(t){var e=Un.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof M&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Un.prototype._setLatLngs.call(this,t),Et(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Et(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new _(e,e);if(t=new b(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,a=this._rings.length;r<a;r++)(i=Pt(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,a,o,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(a=0,o=(l=(e=this._parts[r]).length)-1;a<l;o=a++)(n=e[a]).y>t.y!=(i=e[o]).y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||Un.prototype._containsPoint.call(this,t,!0)}}),Xn=Fn.extend({initialize:function(t,e){u(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=Gt(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var a=this.options;if(a.filter&&!a.filter(t))return this;var o=Dt(t,a);return o?(o.feature=Ft(t),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(t,o),this.addLayer(o)):this},resetStyle:function(t){return t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),Yn={toGeoJSON:function(t){return Nt(this,{type:"Point",coordinates:Rt(this.getLatLng(),t)})}};qn.include(Yn),Wn.include(Yn),Vn.include(Yn),Un.include({toGeoJSON:function(t){var e=!Et(this._latlngs);return Nt(this,{type:(e?"Multi":"")+"LineString",coordinates:Bt(this._latlngs,e?1:0,!1,t)})}}),Gn.include({toGeoJSON:function(t){var e=!Et(this._latlngs),n=e&&!Et(this._latlngs[0]),i=Bt(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Nt(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Nn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Nt(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var a=Ft(r);"FeatureCollection"===a.type?i.push.apply(i,a.features):i.push(a)}}}),n?Nt(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Qn=jt,Kn=Bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=T(e),u(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(G(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){q(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&V(this._image),this},bringToBack:function(){return this._map&&W(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=T(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:$("img");G(e,"leaflet-image-layer"),this._zoomAnimated&&G(e,"leaflet-zoom-animated"),this.options.className&&G(e,this.options.className),e.onselectstart=o,e.onmousemove=o,e.onload=n(this.fire,this,"load"),e.onerror=n(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;tt(this._image,n,e)},_reset:function(){var t=this._image,e=new b(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();et(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){K(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Jn=Kn.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:$("video");if(G(e,"leaflet-image-layer"),this._zoomAnimated&&G(e,"leaflet-zoom-animated"),e.onselectstart=o,e.onmousemove=o,e.onloadeddata=n(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),r=[],a=0;a<i.length;a++)r.push(i[a].src);this._url=i.length>0?r:[e.src]}else{Gt(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var s=0;s<this._url.length;s++){var l=$("source");l.src=this._url[s],e.appendChild(l)}}}}),ti=Bn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){u(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&K(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&K(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(K(this._container,0),this._removeTimeout=setTimeout(n(q,void 0,this._container),200)):q(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=A(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&V(this._container),this},bringToBack:function(){return this._map&&W(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=x(this.options.offset),n=this._getAnchor();this._zoomAnimated?et(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),ei=ti.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){ti.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Zn||this._source.on("preclick",ft))},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Zn||this._source.off("preclick",ft))},getEvents:function(){var t=ti.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=$("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=$("div",t+"-content-wrapper",e);if(this._contentNode=$("div",t+"-content",n),vt(n),pt(this._contentNode),ct(n,"contextmenu",ft),this._tipContainer=$("div",t+"-tip-container",e),this._tip=$("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=$("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",ct(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=this.options.maxHeight;i&&t.offsetHeight>i?(e.height=i+"px",G(t,"leaflet-popup-scrolled")):X(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();et(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(H(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new _(this._containerLeft,-n-this._containerBottom);r._add(nt(this._container));var a=t.layerPointToContainerPoint(r),o=x(this.options.autoPanPadding),s=x(this.options.autoPanPaddingTopLeft||o),l=x(this.options.autoPanPaddingBottomRight||o),c=t.getSize(),u=0,h=0;a.x+i+l.x>c.x&&(u=a.x+i-c.x+l.x),a.x-u-s.x<0&&(u=a.x-s.x),a.y+n+l.y>c.y&&(h=a.y+n-c.y+l.y),a.y-h-s.y<0&&(h=a.y-s.y),(u||h)&&t.fire("autopanstart").panBy([u,h])}},_onCloseButtonClick:function(t){this._close(),mt(t)},_getAnchor:function(){return x(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});vn.mergeOptions({closePopupOnClick:!0}),vn.include({openPopup:function(t,e,n){return t instanceof ei||(t=new ei(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Bn.include({bindPopup:function(t,e){return t instanceof ei?(u(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new ei(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof Bn||(e=t,t=this),t instanceof Fn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(mt(t),e instanceof Zn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ni=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){ti.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=ti.prototype.getEvents.call(this);return Re&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=$("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),a=this.options.direction,o=n.offsetWidth,s=n.offsetHeight,l=x(this.options.offset),c=this._getAnchor();"top"===a?t=t.add(x(-o/2+l.x,-s+l.y+c.y,!0)):"bottom"===a?t=t.subtract(x(o/2-l.x,-l.y,!0)):"center"===a?t=t.subtract(x(o/2+l.x,s/2-c.y+l.y,!0)):"right"===a||"auto"===a&&r.x<i.x?(a="right",t=t.add(x(l.x+c.x,c.y-s/2+l.y,!0))):(a="left",t=t.subtract(x(o+c.x-l.x,s/2-c.y-l.y,!0))),X(n,"leaflet-tooltip-right"),X(n,"leaflet-tooltip-left"),X(n,"leaflet-tooltip-top"),X(n,"leaflet-tooltip-bottom"),G(n,"leaflet-tooltip-"+a),et(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&K(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return x(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});vn.include({openTooltip:function(t,e,n){return t instanceof ni||(t=new ni(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Bn.include({bindTooltip:function(t,e){return t instanceof ni?(u(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new ni(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),Re&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof Bn||(e=t,t=this),t instanceof Fn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(G(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(X(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){this._tooltip&&this._map&&this.openTooltip(t.layer||t.target,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ii=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=x(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});jn.Default=Hn;var ri=Bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Oe,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){u(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),q(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(V(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(W(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof _?t:new _(t,t)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,a=n.length;r<a;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!fe){K(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var a=Math.min(1,(t-r.loaded)/200);K(r.el,a),a<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(m(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this))}},_onOpaqueTile:o,_initContainer:function(){this._container||(this._container=$("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(q(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=$("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:o,_onRemoveLevel:o,_onCreateLevel:o,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)q(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),a=Math.floor(e/2),o=n-1,s=new _(+r,+a);s.z=+o;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),o>i&&this._retainParent(r,a,o,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var a=2*e;a<2*e+2;a++){var o=new _(r,a);o.z=n+1;var s=this._tileCoordsToKey(o),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,a,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0),i&&!(this.options.updateWhenZooming&&r!==this._tileZoom)||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();Ee?tt(t.el,r,i):et(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),a=e.getSize().divideBy(2*i);return new b(r.subtract(a),r.add(a))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),a=r.getCenter(),o=[],s=this.options.keepBuffer,l=new b(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new _(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var f=new _(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:o.push(f)}}if(o.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var v=document.createDocumentFragment();for(d=0;d<o.length;d++)this._addTile(o[d],v);this._level.el.appendChild(v)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return T(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new k(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new _(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(q(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){G(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=o,t.onmousemove=o,fe&&this.options.opacity<1&&K(t,this.options.opacity),ge&&!me&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),r=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&g(n(this._tileReady,this,t,null,a)),et(a,i),this._tiles[r]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var r=this._tileCoordsToKey(t);(i=this._tiles[r])&&(i.loaded=+new Date,this._map._fadeAnimated?(K(i.el,0),m(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(G(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),fe||!this._map._fadeAnimated?g(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new _(this._wrapX?a(t.x,this._wrapX):t.x,this._wrapY?a(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new b(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),ai=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=u(this,e)).detectRetina&&Fe&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),ge||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return ct(i,"load",n(this._tileOnLoad,this,e,i)),ct(i,"error",n(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var n={r:Fe?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return d(this._url,e(n,this.options))},_tileOnLoad:function(t,e){fe?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom;return this.options.zoomReverse&&(t=this.options.maxZoom-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=o,e.onerror=o,e.complete||(e.src=Xt,q(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return _e||e.el.setAttribute("src",Xt),ri.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==Xt))return ri.prototype._tileReady.call(this,t,e,n)}}),oi=ai.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var r in n)r in this.options||(i[r]=n[r]);var a=(n=u(this,n)).detectRetina&&Fe?2:1,o=this.getTileSize();i.width=o.x*a,i.height=o.y*a,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,ai.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=w(n.project(e[0]),n.project(e[1])),r=i.min,a=i.max,o=(this._wmsVersion>=1.3&&this._crs===In?[r.y,r.x,a.y,a.x]:[r.x,r.y,a.x,a.y]).join(","),s=ai.prototype.getTileUrl.call(this,t);return s+h(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});ai.WMS=oi,Ht.wms=function(t,e){return new oi(t,e)};var si=Bn.extend({options:{padding:.1,tolerance:0},initialize:function(t){u(this,t),i(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&G(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=nt(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,e),o=this._map.project(t,e).subtract(a),s=r.multiplyBy(-n).add(i).add(r).subtract(o);Ee?tt(this._container,s,n):et(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new b(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),li=si.extend({getEvents:function(){var t=si.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ct(t,"mousemove",r(this._onMouseMove,32,this),this),ct(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ct(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){m(this._redrawRequest),delete this._ctx,q(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){si.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=Fe?2:1;et(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Fe&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[i(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[i(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||g(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new b,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,a,o=t._parts,s=o.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(i=0,r=o[n].length;i<r;i++)l[i?"lineTo":"moveTo"]((a=o[n][i]).x,a.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(xt(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(X(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(G(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}}),ci=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ui={_initContainer:function(){this._container=$("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(si.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ci("shape");G(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ci("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[i(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;q(e),t.removeInteractiveTarget(e),delete this._layers[i(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=ci("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,e.dashStyle=i.dashArray?Gt(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):"",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=ci("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){V(t._container)},_bringToBack:function(t){W(t._container)}},hi=$e?ci:E,di=si.extend({getEvents:function(){var t=si.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=hi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=hi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){q(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){si.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),et(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=hi("path");t.options.className&&G(e,t.options.className),t.options.interactive&&G(e,"leaflet-interactive"),this._updateStyle(t),this._layers[i(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){q(t._path),t.removeInteractiveTarget(t._path),delete this._layers[i(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,O(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){V(t._path)},_bringToBack:function(t){W(t._path)}});$e&&di.include(ui),vn.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&$t(t)||qt(t)}});var fi=Gn.extend({initialize:function(t,e){Gn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=T(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});di.create=hi,di.pointsToPath=O,Xn.geometryToLayer=Dt,Xn.coordsToLatLng=zt,Xn.coordsToLatLngs=It,Xn.latLngToCoords=Rt,Xn.latLngsToCoords=Bt,Xn.getFeature=Nt,Xn.asFeature=Ft,vn.mergeOptions({boxZoom:!0});var pi=wn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){q(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),oe(),it(),this._startPoint=this._map.mouseEventToContainerPoint(t),ct(document,{contextmenu:mt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=$("div","leaflet-zoom-box",this._container),G(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new b(this._point,this._startPoint),n=e.getSize();et(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(q(this._box),X(this._container,"leaflet-crosshair")),se(),rt(),ut(document,{contextmenu:mt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var e=new k(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});vn.addInitHook("addHandler","boxZoom",pi),vn.mergeOptions({doubleClickZoom:!0});var vi=wn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});vn.addInitHook("addHandler","doubleClickZoom",vi),vn.mergeOptions({dragging:!0,inertia:!me,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gi=wn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Ln(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}G(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){X(this._map._container,"leaflet-grab"),X(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=T(this._map.options.maxBounds);this._offsetLimit=w(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,a=(i+e+n)%t-e-n,o=Math.abs(r+n)<Math.abs(a+n)?r:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),a=n.easeLinearity,o=r.multiplyBy(a/((this._lastTime-this._times[0])/1e3)),s=o.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,s),c=o.multiplyBy(l/s),u=l/(n.inertiaDeceleration*a),h=c.multiplyBy(-u/2).round();h.x||h.y?(h=e._limitOffset(h,e.options.maxBounds),g(function(){e.panBy(h,{duration:u,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});vn.addInitHook("addHandler","dragging",gi),vn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mi=wn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ct(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=x(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}mt(t)}}});vn.addInitHook("addHandler","keyboard",mi),vn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yi=wn.extend({addHooks:function(){ct(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=_t(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),r),mt(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,r=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});vn.addInitHook("addHandler","scrollWheelZoom",yi),vn.mergeOptions({tap:!0,tapTolerance:15});var _i=wn.extend({addHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(gt(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new _(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&G(i,"leaflet-active"),this._holdTimeout=setTimeout(n(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),ct(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),ut(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&X(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new _(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});Re&&!Ie&&vn.addInitHook("addHandler","tap",_i),vn.mergeOptions({touchZoom:Re&&!me,bounceAtZoomLimits:!0});var xi=wn.extend({addHooks:function(){G(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){X(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend",this._onTouchEnd,this),gt(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),a=i.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&a>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===a)return}else{var o=i._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===a&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),m(this._animRequest);var s=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=g(s,this,!0),gt(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,m(this._animRequest),ut(document,"touchmove",this._onTouchMove),ut(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});vn.addInitHook("addHandler","touchZoom",xi),vn.BoxZoom=pi,vn.DoubleClickZoom=vi,vn.Drag=gi,vn.Keyboard=mi,vn.ScrollWheelZoom=yi,vn.Tap=_i,vn.TouchZoom=xi,Object.freeze=Zt,t.version="1.4.0",t.Control=gn,t.control=mn,t.Browser=qe,t.Evented=ee,t.Mixin=Tn,t.Util=Jt,t.Class=y,t.Handler=wn,t.extend=e,t.bind=n,t.stamp=i,t.setOptions=u,t.DomEvent=fn,t.DomUtil=cn,t.PosAnimation=pn,t.Draggable=Ln,t.LineUtil=Sn,t.PolyUtil=En,t.Point=_,t.point=x,t.Bounds=b,t.bounds=w,t.Transformation=C,t.transformation=S,t.Projection=Dn,t.LatLng=M,t.latLng=A,t.LatLngBounds=k,t.latLngBounds=T,t.CRS=ie,t.GeoJSON=Xn,t.geoJSON=jt,t.geoJson=Qn,t.Layer=Bn,t.LayerGroup=Nn,t.layerGroup=function(t,e){return new Nn(t,e)},t.FeatureGroup=Fn,t.featureGroup=function(t){return new Fn(t)},t.ImageOverlay=Kn,t.imageOverlay=function(t,e,n){return new Kn(t,e,n)},t.VideoOverlay=Jn,t.videoOverlay=function(t,e,n){return new Jn(t,e,n)},t.DivOverlay=ti,t.Popup=ei,t.popup=function(t,e){return new ei(t,e)},t.Tooltip=ni,t.tooltip=function(t,e){return new ni(t,e)},t.Icon=jn,t.icon=function(t){return new jn(t)},t.DivIcon=ii,t.divIcon=function(t){return new ii(t)},t.Marker=qn,t.marker=function(t,e){return new qn(t,e)},t.TileLayer=ai,t.tileLayer=Ht,t.GridLayer=ri,t.gridLayer=function(t){return new ri(t)},t.SVG=di,t.svg=qt,t.Renderer=si,t.Canvas=li,t.canvas=$t,t.Path=Zn,t.CircleMarker=Vn,t.circleMarker=function(t,e){return new Vn(t,e)},t.Circle=Wn,t.circle=function(t,e,n){return new Wn(t,e,n)},t.Polyline=Un,t.polyline=function(t,e){return new Un(t,e)},t.Polygon=Gn,t.polygon=function(t,e){return new Gn(t,e)},t.Rectangle=fi,t.rectangle=function(t,e){return new fi(t,e)},t.Map=vn,t.map=function(t,e){return new vn(t,e)};var bi=window.L;t.noConflict=function(){return window.L=bi,this},window.L=t}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Fuse",[],e):"object"==typeof exports?exports.Fuse=e():t.Fuse=e()}(this,function(){var t=Math.min;return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,(function(e){return t[e]}).bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t){t.exports=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}},function(e,n,i){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=i(2),o=i(8),s=i(0),l=function(){function e(t,n){var i=n.location,r=void 0===i?0:i,a=n.distance,s=void 0===a?100:a,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,d=n.caseSensitive,f=n.tokenSeparator,p=void 0===f?/ +/g:f,v=n.findAllMatches,g=n.minMatchCharLength,m=void 0===g?1:g,y=n.id,_=void 0===y?null:y,x=n.keys,b=void 0===x?[]:x,w=n.shouldSort,k=n.getFn,T=void 0===k?o:k,M=n.sortFn,A=void 0===M?function(t,e){return t.score-e.score}:M,C=n.tokenize,L=n.matchAllTokens,S=n.includeMatches,E=n.includeScore,O=n.verbose;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.options={location:r,distance:s,threshold:c,maxPatternLength:h,isCaseSensitive:void 0!==d&&d,tokenSeparator:p,findAllMatches:void 0!==v&&v,minMatchCharLength:m,id:_,keys:b,includeMatches:void 0!==S&&S,includeScore:void 0!==E&&E,shouldSort:void 0===w||w,getFn:T,sortFn:A,verbose:void 0!==O&&O,tokenize:void 0!==C&&C,matchAllTokens:void 0!==L&&L},this.setCollection(t)}return function(t,e,n){e&&function(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}(t.prototype,e)}(e,[{key:"setCollection",value:function(t){return this.list=t,t}},{key:"search",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(t,'"'));var n=this._prepareSearchers(t),i=this._search(n.tokenSearchers,n.fullSearcher),r=i.results;return this._computeScore(i.weights,r),this.options.shouldSort&&this._sort(r),e.limit&&"number"==typeof e.limit&&(r=r.slice(0,e.limit)),this._format(r)}},{key:"_prepareSearchers",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=[];if(this.options.tokenize)for(var n=t.split(this.options.tokenSeparator),i=0,r=n.length;i<r;i+=1)e.push(new a(n[i],this.options));return{tokenSearchers:e,fullSearcher:new a(t,this.options)}}},{key:"_search",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length?arguments[1]:void 0,n=this.list,i={},r=[];if("string"==typeof n[0]){for(var a=0,o=n.length;a<o;a+=1)this._analyze({key:"",value:n[a],record:a,index:a},{resultMap:i,results:r,tokenSearchers:t,fullSearcher:e});return{weights:null,results:r}}for(var s,l={},c=0,u=n.length;c<u;c+=1){s=n[c];for(var h,d=0,f=this.options.keys.length;d<f;d+=1){if("string"!=typeof(h=this.options.keys[d])){if(l[h.name]={weight:1-h.weight||1},0>=h.weight||1<h.weight)throw new Error("Key weight has to be > 0 and <= 1");h=h.name}else l[h]={weight:1};this._analyze({key:h,value:this.options.getFn(s,h),record:s,index:c},{resultMap:i,results:r,tokenSearchers:t,fullSearcher:e})}}return{weights:l,results:r}}},{key:"_analyze",value:function(t,e){var n=t.key,i=t.arrayIndex,r=void 0===i?-1:i,a=t.value,o=t.record,l=t.index,c=e.tokenSearchers,u=void 0===c?[]:c,h=e.fullSearcher,d=void 0===h?[]:h,f=e.resultMap,p=void 0===f?{}:f,v=e.results,g=void 0===v?[]:v;if(null!=a){var m=!1,y=-1,_=0;if("string"==typeof a){this._log("\nKey: ".concat(""===n?"-":n));var x=d.search(a);if(this._log('Full text: "'.concat(a,'", score: ').concat(x.score)),this.options.tokenize){for(var b,w=a.split(this.options.tokenSeparator),k=[],T=0;T<u.length;T+=1){this._log('\nPattern: "'.concat((b=u[T]).pattern,'"'));for(var M=!1,A=0;A<w.length;A+=1){var C=w[A],L=b.search(C),S={};L.isMatch?(S[C]=L.score,m=!0,M=!0,k.push(L.score)):(S[C]=1,!this.options.matchAllTokens&&k.push(1)),this._log('Token: "'.concat(C,'", score: ').concat(S[C]))}M&&(_+=1)}y=k[0];for(var E=k.length,O=1;O<E;O+=1)y+=k[O];this._log("Token score average:",y/=E)}var P=x.score;-1<y&&(P=(P+y)/2),this._log("Score average:",P);var D=!(this.options.tokenize&&this.options.matchAllTokens)||_>=u.length;if(this._log("\nCheck Matches: ".concat(D)),(m||x.isMatch)&&D){var z=p[l];z?z.output.push({key:n,arrayIndex:r,value:a,score:P,matchedIndices:x.matchedIndices}):(p[l]={item:o,output:[{key:n,arrayIndex:r,value:a,score:P,matchedIndices:x.matchedIndices}]},g.push(p[l]))}}else if(s(a))for(var I=0,R=a.length;I<R;I+=1)this._analyze({key:n,arrayIndex:I,value:a[I],record:o,index:l},{resultMap:p,results:g,tokenSearchers:u,fullSearcher:d})}}},{key:"_computeScore",value:function(e,n){this._log("\n\nComputing score:\n");for(var i=0,r=n.length;i<r;i+=1){for(var a=n[i].output,o=a.length,s=1,l=1,c=0;c<o;c+=1){var u=e?e[a[c].key].weight:1,h=(1===u?a[c].score:a[c].score||.001)*u;1===u?(a[c].nScore=h,s*=h):l=t(l,h)}n[i].score=1===l?s:l,this._log(n[i])}}},{key:"_sort",value:function(t){this._log("\n\nSorting...."),t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(t,function(t,e){if("object"===r(e)&&null!==e){if(-1!==n.indexOf(e))return;n.push(e)}return e})),n=null}var i=[];this.options.includeMatches&&i.push(function(t,e){var n=t.output;e.matches=[];for(var i,r=0,a=n.length;r<a;r+=1)if(0!==(i=n[r]).matchedIndices.length){var o={indices:i.matchedIndices,value:i.value};i.key&&(o.key=i.key),i.hasOwnProperty("arrayIndex")&&-1<i.arrayIndex&&(o.arrayIndex=i.arrayIndex),e.matches.push(o)}}),this.options.includeScore&&i.push(function(t,e){e.score=t.score});for(var a,o=0,s=t.length;o<s;o+=1)if(a=t[o],this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),i.length){for(var l={item:a.item},c=0,u=i.length;c<u;c+=1)i[c](a,l);e.push(l)}else e.push(a.item);return e}},{key:"_log",value:function(){var t;this.options.verbose&&(t=console).log.apply(t,arguments)}}]),e}();e.exports=l},function(t,e,n){var i=n(3),r=n(4),a=n(7),o=function(){function t(e,n){var i=n.location,r=void 0===i?0:i,o=n.distance,s=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,d=n.isCaseSensitive,f=n.tokenSeparator,p=void 0===f?/ +/g:f,v=n.findAllMatches,g=n.minMatchCharLength,m=void 0===g?1:g;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.options={location:r,distance:s,threshold:c,maxPatternLength:h,isCaseSensitive:void 0!==d&&d,tokenSeparator:p,findAllMatches:void 0!==v&&v,minMatchCharLength:m},this.pattern=this.options.isCaseSensitive?e:e.toLowerCase(),this.pattern.length<=h&&(this.patternAlphabet=a(this.pattern))}return function(t,e,n){e&&function(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}(t.prototype,e)}(t,[{key:"search",value:function(t){if(this.options.isCaseSensitive||(t=t.toLowerCase()),this.pattern===t)return{isMatch:!0,score:0,matchedIndices:[[0,t.length-1]]};var e=this.options;if(this.pattern.length>e.maxPatternLength)return i(t,this.pattern,e.tokenSeparator);var n=this.options;return r(t,this.pattern,this.patternAlphabet,{location:n.location,distance:n.distance,threshold:n.threshold,findAllMatches:n.findAllMatches,minMatchCharLength:n.minMatchCharLength})}}]),t}();t.exports=o},function(t){var e=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;t.exports=function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,r=new RegExp(n.replace(e,"\\$&").replace(i,"|")),a=t.match(r),o=!!a,s=[];if(o)for(var l,c=0,u=a.length;c<u;c+=1)s.push([t.indexOf(l=a[c]),l.length-1]);return{score:o?.5:1,isMatch:o,matchedIndices:s}}},function(e,n,i){var r=i(5),a=i(6);e.exports=function(e,n,i,o){for(var s=Math.max,l=o.location,c=o.distance,u=void 0===c?100:c,h=o.threshold,d=o.findAllMatches,f=void 0!==d&&d,p=o.minMatchCharLength,v=void 0===p?1:p,g=void 0===l?0:l,m=e.length,y=void 0===h?.6:h,_=e.indexOf(n,g),x=n.length,b=[],w=0;w<m;w+=1)b[w]=0;if(-1!==_){var k=r(n,{errors:0,currentLocation:_,expectedLocation:g,distance:u});if(y=t(k,y),-1!==(_=e.lastIndexOf(n,g+x))){var T=r(n,{errors:0,currentLocation:_,expectedLocation:g,distance:u});y=t(T,y)}}_=-1;for(var M=[],A=1,C=x+m,L=0;L<x;L+=1){for(var S=0,E=C;S<E;)r(n,{errors:L,currentLocation:g+E,expectedLocation:g,distance:u})<=y?S=E:C=E,E=Math.floor((C-S)/2+S);C=E;var O=s(1,g-E+1),P=f?m:t(g+E,m)+x,D=Array(P+2);D[P+1]=(1<<L)-1;for(var z=P;z>=O;z-=1){var I=z-1,R=i[e.charAt(I)];if(R&&(b[I]=1),D[z]=(1|D[z+1]<<1)&R,0!=L&&(D[z]|=1|(M[z+1]|M[z])<<1|M[z+1]),D[z]&1<<x-1&&(A=r(n,{errors:L,currentLocation:I,expectedLocation:g,distance:u}))<=y){if(y=A,(_=I)<=g)break;O=s(1,2*g-_)}}if(r(n,{errors:L+1,currentLocation:g,expectedLocation:g,distance:u})>y)break;M=D}return{isMatch:0<=_,score:0===A?.001:A,matchedIndices:a(b,v)}}},function(t){t.exports=function(t,e){var n=e.errors,i=e.currentLocation,r=e.expectedLocation,a=e.distance,o=void 0===a?100:a,s=(void 0===n?0:n)/t.length,l=Math.abs((void 0===r?0:r)-(void 0===i?0:i));return o?s+l/o:l?1:s}},function(t){t.exports=function(){for(var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=[],r=-1,a=-1,o=0,s=e.length;o<s;o+=1)(t=e[o])&&-1==r?r=o:!t&&-1!=r&&((a=o-1)-r+1>=n&&i.push([r,a]),r=-1);return e[o-1]&&o-r>=n&&i.push([r,o-1]),i}},function(t){t.exports=function(t){for(var e={},n=t.length,i=0;i<n;i+=1)e[t.charAt(i)]=0;for(var r=0;r<n;r+=1)e[t.charAt(r)]|=1<<n-r-1;return e}},function(t,e,n){var i=n(0);t.exports=function(t,e){return function t(e,n,r){if(n){var a=n.indexOf("."),o=n,s=null;-1!==a&&(o=n.slice(0,a),s=n.slice(a+1));var l=e[o];if(null!=l)if(s||"string"!=typeof l&&"number"!=typeof l)if(i(l))for(var c=0,u=l.length;c<u;c+=1)t(l[c],s,r);else s&&t(l,s,r);else r.push(l.toString())}else r.push(e);return r}(t,e,[])}}])}),Array.prototype.map||(Array.prototype.map=function(t){var e=this.length;if("function"!=typeof t)throw new TypeError;for(var n=new Array(e),i=arguments[1],r=0;r<e;r++)r in this&&(n[r]=t.call(i,this[r],r,this));return n}),L.Control.FuseSearch=L.Control.extend({includes:L.Evented.prototype,options:{position:"topright",title:"Search",panelTitle:"",placeholder:"Search",caseSensitive:!1,threshold:.5,maxResultLength:null,showResultFct:null,showInvisibleFeatures:!0},initialize:function(t){L.setOptions(this,t),this._panelOnLeftSide=-1!==this.options.position.indexOf("left")},onAdd:function(t){var e=this._createControl();return this._createPanel(t),this._setEventListeners(),t.invalidateSize(),e},onRemove:function(t){return this.hidePanel(t),this._clearEventListeners(),this._clearPanel(t),this._clearControl(),this},_createControl:function(){var t=L.DomUtil.create("div","leaflet-fusesearch-control"),e=this._openButton=L.DomUtil.create("a","button",t);e.href="#",e.title=this.options.title;var n=L.DomEvent.stopPropagation;return L.DomEvent.on(e,"click",n).on(e,"mousedown",n).on(e,"touchstart",n).on(e,"mousewheel",n).on(e,"MozMousePixelScroll",n),L.DomEvent.on(e,"click",L.DomEvent.preventDefault),L.DomEvent.on(e,"click",this.showPanel,this),t},_clearControl:function(){var t=this._openButton,e=L.DomEvent.stopPropagation;L.DomEvent.off(t,"click",e).off(t,"mousedown",e).off(t,"touchstart",e).off(t,"mousewheel",e).off(t,"MozMousePixelScroll",e),L.DomEvent.off(t,"click",L.DomEvent.preventDefault),L.DomEvent.off(t,"click",this.showPanel)},_createPanel:function(t){var e=this,n=t.getContainer(),i=this._panel=L.DomUtil.create("div","leaflet-fusesearch-panel",n),r=L.DomEvent.stopPropagation;L.DomEvent.on(i,"click",r).on(i,"dblclick",r).on(i,"mousedown",r).on(i,"touchstart",r).on(i,"mousewheel",r).on(i,"MozMousePixelScroll",r),this._panelOnLeftSide?L.DomUtil.addClass(i,"left"):L.DomUtil.addClass(i,"right");var a=L.DomUtil.create("div","content",i),o=L.DomUtil.create("div","header",a);this.options.panelTitle&&(L.DomUtil.create("p","panel-title",o).innerHTML=this.options.panelTitle),L.DomUtil.create("img","search-image",o),this._input=L.DomUtil.create("input","search-input",o),this._input.maxLength=30,this._input.placeholder=this.options.placeholder,this._input.onkeyup=function(t){e.searchFeatures(t.currentTarget.value)};var s=this._closeButton=L.DomUtil.create("a","close",o);return s.innerHTML="&times;",L.DomEvent.on(s,"click",this.hidePanel,this),this._resultList=L.DomUtil.create("div","result-list",a),i},_clearPanel:function(t){var e=L.DomEvent.stopPropagation;L.DomEvent.off(this._panel,"click",e).off(this._panel,"dblclick",e).off(this._panel,"mousedown",e).off(this._panel,"touchstart",e).off(this._panel,"mousewheel",e).off(this._panel,"MozMousePixelScroll",e),L.DomEvent.off(this._closeButton,"click",this.hidePanel),t.getContainer().removeChild(this._panel),this._panel=null},_setEventListeners:function(){var t=this,e=this._input;this._map.addEventListener("overlayadd",function(){t.searchFeatures(e.value)}),this._map.addEventListener("overlayremove",function(){t.searchFeatures(e.value)})},_clearEventListeners:function(){this._map.removeEventListener("overlayadd"),this._map.removeEventListener("overlayremove")},isPanelVisible:function(){return L.DomUtil.hasClass(this._panel,"visible")},showPanel:function(){this.isPanelVisible()||(L.DomUtil.addClass(this._panel,"visible"),this._map.panBy([.5*this.getOffset(),0],{duration:.5}),this.fire("show"),this._input.select(),this.searchFeatures(this._input.value))},hidePanel:function(t){this.isPanelVisible()&&(L.DomUtil.removeClass(this._panel,"visible"),null!==this._map&&this._map.panBy([-.5*this.getOffset(),0],{duration:.5}),this.fire("hide"),t&&L.DomEvent.stopPropagation(t))},getOffset:function(){return this._panelOnLeftSide?-this._panel.offsetWidth:this._panel.offsetWidth},indexFeatures:function(t,e){var n=t.features||t;this._keys=e;var i=n.map(function(t){return t.properties._feature=t,t.properties});this._fuseIndex=new Fuse(i,{keys:e,caseSensitive:this.options.caseSensitive,threshold:this.options.threshold})},searchFeatures:function(t){for(var e=this._fuseIndex.search(t),n=document.querySelectorAll(".result-item"),i=0;i<n.length;i++)n[i].remove();var r=document.querySelector(".result-list"),a=0,o=this.options.maxResultLength;for(var i in e){var s=e[i],l=this._getFeaturePopupIfVisible(s._feature);if((void 0!==l||this.options.showInvisibleFeatures)&&(this.createResultItem(s,r,l),void 0!==o&&++a===o))break}},refresh:function(){this.isPanelVisible()&&this.searchFeatures(this._input.value)},_getFeaturePopupIfVisible:function(t){var e=t.layer;if(void 0!==e&&this._map.hasLayer(e))return e.getPopup()},createResultItem:function(t,e,n){var i=this,r=t._feature,a=L.DomUtil.create("p","result-item",e);if(void 0!==n&&(L.DomUtil.addClass(a,"clickable"),a.onclick=function(){window.matchMedia("(max-width:480px)").matches?(i.hidePanel(),r.layer.openPopup()):i._panAndPopup(r,n)}),null!==this.options.showResultFct)this.options.showResultFct(r,a);else{str="<b>"+t[this._keys[0]]+"</b>";for(var o=1;o<this._keys.length;o++)str+="<br/>"+t[this._keys[o]];a.innerHTML=str}return a},_panAndPopup:function(t,e){if(this._panelOnLeftSide){var n=e.options.autoPanPaddingTopLeft,i=new L.Point(-this.getOffset(),10);e.options.autoPanPaddingTopLeft=i,t.layer.openPopup(),e.options.autoPanPaddingTopLeft=n}else n=e.options.autoPanPaddingBottomRight,i=new L.Point(this.getOffset(),10),e.options.autoPanPaddingBottomRight=i,t.layer.openPopup(),e.options.autoPanPaddingBottomRight=n}}),L.control.fuseSearch=function(t){return new L.Control.FuseSearch(t)},function(t,e){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports&&(module.exports=t(void 0!==e&&e.L?L:require("leaflet"))),void 0!==e&&e.L&&(e.L.Control.Locate=t(L))}(function(t){var e=function(e,n,i){(i=i.split(" ")).forEach(function(i){t.DomUtil[e].call(this,n,i)})},n=function(t,n){e("addClass",t,n)},i=function(t,n){e("removeClass",t,n)},r=t.Marker.extend({initialize:function(e,n){t.Util.setOptions(this,n),this._latlng=e,this.createIcon()},createIcon:function(){var e=this.options,n="";void 0!==e.color&&(n+="stroke:"+e.color+";"),void 0!==e.weight&&(n+="stroke-width:"+e.weight+";"),void 0!==e.fillColor&&(n+="fill:"+e.fillColor+";"),void 0!==e.fillOpacity&&(n+="fill-opacity:"+e.fillOpacity+";"),void 0!==e.opacity&&(n+="opacity:"+e.opacity+";");var i=this._getIconSVG(e,n);this._locationIcon=t.divIcon({className:i.className,html:i.svg,iconSize:[i.w,i.h]}),this.setIcon(this._locationIcon)},_getIconSVG:function(t,e){var n=t.radius,i=n+t.weight,r=2*i;return{className:"leaflet-control-locate-location",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+r+'" height="'+r+'" version="1.1" viewBox="-'+i+" -"+i+" "+r+" "+r+'"><circle r="'+n+'" style="'+e+'" /></svg>',w:r,h:r}},setStyle:function(e){t.Util.setOptions(this,e),this.createIcon()}}),a=r.extend({initialize:function(e,n,i){t.Util.setOptions(this,i),this._latlng=e,this._heading=n,this.createIcon()},setHeading:function(t){this._heading=t},_getIconSVG:function(t,e){var n=t.width+t.weight,i=2*(t.radius+t.depth+t.weight);return{className:"leafet-control-locate-heading",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+i+'" version="1.1" viewBox="-'+n/2+" 0 "+n+" "+i+'" style="transform: rotate('+this._heading+'deg)"><path d="M0,0 l'+t.width/2+","+t.depth+" l-"+n+',0 z" style="'+e+'" /></svg>',w:n,h:i}}}),o=t.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,getLocationBounds:function(t){return t.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:r,compassClass:a,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",circlePadding:[0,0],metric:!0,createButtonCallback:function(e,n){var i=t.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",e);return i.title=n.strings.title,{link:i,icon:t.DomUtil.create(n.iconElementTag,n.icon,i)}},onLocationError:function(t,e){alert(t.message)},onLocationOutsideMapBounds:function(t){t.stop(),alert(t.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize:function(e){for(var n in e)"object"==typeof this.options[n]?t.extend(this.options[n],e[n]):this.options[n]=e[n];this.options.followMarkerStyle=t.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=t.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=t.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd:function(e){var n=t.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._layer=this.options.layer||new t.LayerGroup,this._layer.addTo(e),this._event=void 0,this._compassHeading=null,this._prevBounds=null;var i=this.options.createButtonCallback(n,this.options);return this._link=i.link,this._icon=i.icon,t.DomEvent.on(this._link,"click",t.DomEvent.stopPropagation).on(this._link,"click",t.DomEvent.preventDefault).on(this._link,"click",this._onClick,this).on(this._link,"dblclick",t.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),n},_onClick:function(){this._justClicked=!0;var t=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active&&void 0!==this._event){var e=this.options.clickBehavior,n=e.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(n=t?e.inView:e.inViewNotFollowing),e[n]&&(n=e[n]),n){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds)}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start:function(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop:function(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing:function(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate:function(){this._active||(this._map.locate(this.options.locateOptions),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),this.options.showCompass&&("ondeviceorientationabsolute"in window?t.DomEvent.on(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&t.DomEvent.on(window,"deviceorientation",this._onDeviceOrientation,this)))},_deactivate:function(){this._map.stopLocate(),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?t.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&t.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView:function(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this.options.keepCurrentZoomLevel)(e=this.options.flyTo?this._map.flyTo:this._map.panTo).bind(this._map)([this._event.latitude,this._event.longitude]);else{var e=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;this._ignoreEvent=!0,e.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom}),t.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this)}},_drawCompass:function(){if(this._event){var t=this._event.latlng;if(this.options.showCompass&&t&&null!==this._compassHeading){var e=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle;this._compass?(this._compass.setLatLng(t),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(e)):this._compass=new this.options.compassClass(t,this._compassHeading,e).addTo(this._layer)}!this._compass||this.options.showCompass&&null!==this._compassHeading||(this._compass.removeFrom(this._layer),this._compass=null)}},_drawMarker:function(){void 0===this._event.accuracy&&(this._event.accuracy=0);var e,n,i=this._event.accuracy,r=this._event.latlng;if(this.options.drawCircle){var a=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(r).setRadius(i).setStyle(a):this._circle=t.circle(r,i,a).addTo(this._layer)}if(n=this.options.metric?(e=i.toFixed(0),this.options.strings.metersUnit):(e=(3.2808399*i).toFixed(0),this.options.strings.feetUnit),this.options.drawMarker){var o=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(r),this._marker.setStyle&&this._marker.setStyle(o)):this._marker=new this.options.markerClass(r,o).addTo(this._layer)}this._drawCompass();var s=this.options.strings.popup;this.options.showPopup&&s&&this._marker&&this._marker.bindPopup(t.Util.template(s,{distance:e,unit:n}))._popup.setLatLng(r),this.options.showPopup&&s&&this._compass&&this._compass.bindPopup(t.Util.template(s,{distance:e,unit:n}))._popup.setLatLng(r)},_removeMarker:function(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload:function(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading:function(e){!isNaN(parseFloat(e))&&isFinite(e)?(e=Math.round(e),this._compassHeading=e,t.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration:function(){this._setCompassHeading()},_onDeviceOrientation:function(t){this._active&&(t.webkitCompassHeading?this._setCompassHeading(t.webkitCompassHeading):t.absolute&&t.alpha&&this._setCompassHeading(360-t.alpha))},_onLocationError:function(t){3==t.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(t,this))},_onLocationFound:function(t){if((!this._event||this._event.latlng.lat!==t.latlng.lat||this._event.latlng.lng!==t.latlng.lng||this._event.accuracy!==t.accuracy)&&this._active){switch(this._event=t,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":this._userPanned||this._userZoomed||this.setView();break;case"always":this.setView()}this._justClicked=!1}},_onDrag:function(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom:function(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd:function(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing:function(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:"untilPanOrZoom"===this.options.setView?!this._userPanned&&!this._userZoomed:void 0))},_isOutsideMapBounds:function(){return void 0!==this._event&&this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle:function(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses:function(t){"requesting"==t?(i(this._container,"active following"),n(this._container,"requesting"),i(this._icon,this.options.icon),n(this._icon,this.options.iconLoading)):"active"==t?(i(this._container,"requesting following"),n(this._container,"active"),i(this._icon,this.options.iconLoading),n(this._icon,this.options.icon)):"following"==t&&(i(this._container,"requesting"),n(this._container,"active following"),i(this._icon,this.options.iconLoading),n(this._icon,this.options.icon))},_cleanClasses:function(){t.DomUtil.removeClass(this._container,"requesting"),t.DomUtil.removeClass(this._container,"active"),t.DomUtil.removeClass(this._container,"following"),i(this._icon,this.options.iconLoading),n(this._icon,this.options.icon)},_resetVariables:function(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return t.control.locate=function(e){return new t.Control.Locate(e)},o},window);var _get=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}window.cash=function(){var t,e=document,n=window,i=Array.prototype,r=i.slice,a=i.filter,o=i.push,s=function(){},l=function(t){return typeof t==typeof s&&t.call},c=function(t){return"string"==typeof t},u=/^#[\w-]*$/,h=/^\.[\w-]*$/,d=/<.+>/,f=/^\w+$/;function p(t,n){return n=n||e,h.test(t)?n.getElementsByClassName(t.slice(1)):f.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t)}function v(n){if(!t){var i=(t=e.implementation.createHTMLDocument(null)).createElement("base");i.href=e.location.href,t.head.appendChild(i)}return t.body.innerHTML=n,t.body.childNodes}function g(t){"loading"!==e.readyState?t():e.addEventListener("DOMContentLoaded",t)}function m(t,i){if(!t)return this;if(t.cash&&t!==n)return t;var r,a=t,o=0;if(c(t))a=u.test(t)?e.getElementById(t.slice(1)):d.test(t)?v(t):p(t,i);else if(l(t))return g(t),this;if(!a)return this;if(a.nodeType||a===n)this[0]=a,this.length=1;else for(r=this.length=a.length;o<r;o++)this[o]=a[o];return this}function y(t,e){return new m(t,e)}var _=y.fn=y.prototype=m.prototype={cash:!0,length:0,push:o,splice:i.splice,map:i.map,init:m};function x(t,e){for(var n=t.length,i=0;i<n&&!1!==e.call(t[i],t[i],i,t);i++);}function b(t,e){var n=t&&(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector);return!!n&&n.call(t,e)}function w(t){return c(t)?b:t.cash?function(e){return t.is(e)}:function(t,e){return t===e}}function k(t){return y(r.call(t).filter(function(t,e,n){return n.indexOf(t)===e}))}Object.defineProperty(_,"constructor",{value:y}),y.parseHTML=v,y.noop=s,y.isFunction=l,y.isString=c,y.extend=_.extend=function(t){t=t||{};var e=r.call(arguments),n=e.length,i=1;for(1===e.length&&(t=this,i=0);i<n;i++)if(e[i])for(var a in e[i])e[i].hasOwnProperty(a)&&(t[a]=e[i][a]);return t},y.extend({merge:function(t,e){for(var n=+e.length,i=t.length,r=0;r<n;i++,r++)t[i]=e[r];return t.length=i,t},each:x,matches:b,unique:k,isArray:Array.isArray,isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}});var T=y.uid="_cash"+Date.now();function M(t){return t[T]=t[T]||{}}function A(t,e,n){return M(t)[e]=n}function C(t,e){var n=M(t);return void 0===n[e]&&(n[e]=t.dataset?t.dataset[e]:y(t).attr("data-"+e)),n[e]}_.extend({data:function(t,e){if(c(t))return void 0===e?C(this[0],t):this.each(function(n){return A(n,t,e)});for(var n in t)this.data(n,t[n]);return this},removeData:function(t){return this.each(function(e){return i=t,void((r=M(n=e))?delete r[i]:n.dataset?delete n.dataset[i]:y(n).removeAttr("data-"+name));var n,i,r})}});var L=/\S+/g;function S(t){return c(t)&&t.match(L)}function E(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function O(t,e,n){t.classList?t.classList.add(e):n.indexOf(" "+e+" ")&&(t.className+=" "+e)}function P(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(e,"")}_.extend({addClass:function(t){var e=S(t);return e?this.each(function(t){var n=" "+t.className+" ";x(e,function(e){O(t,e,n)})}):this},attr:function(t,e){if(t){if(c(t))return void 0===e?this[0]?this[0].getAttribute?this[0].getAttribute(t):this[0][t]:void 0:this.each(function(n){n.setAttribute?n.setAttribute(t,e):n[t]=e});for(var n in t)this.attr(n,t[n]);return this}},hasClass:function(t){var e=!1,n=S(t);return n&&n.length&&this.each(function(t){return!(e=E(t,n[0]))}),e},prop:function(t,e){if(c(t))return void 0===e?this[0][t]:this.each(function(n){n[t]=e});for(var n in t)this.prop(n,t[n]);return this},removeAttr:function(t){return this.each(function(e){e.removeAttribute?e.removeAttribute(t):delete e[t]})},removeClass:function(t){if(!arguments.length)return this.attr("class","");var e=S(t);return e?this.each(function(t){x(e,function(e){P(t,e)})}):this},removeProp:function(t){return this.each(function(e){delete e[t]})},toggleClass:function(t,e){if(void 0!==e)return this[e?"addClass":"removeClass"](t);var n=S(t);return n?this.each(function(t){var e=" "+t.className+" ";x(n,function(n){E(t,n)?P(t,n):O(t,n,e)})}):this}}),_.extend({add:function(t,e){return k(y.merge(this,y(t,e)))},each:function(t){return x(this,t),this},eq:function(t){return y(this.get(t))},filter:function(t){if(!t)return this;var e=l(t)?t:w(t);return y(a.call(this,function(n){return e(n,t)}))},first:function(){return this.eq(0)},get:function(t){return void 0===t?r.call(this):t<0?this[t+this.length]:this[t]},index:function(t){var e=t?y(t)[0]:this[0],n=t?this:y(e).parent().children();return r.call(n).indexOf(e)},last:function(){return this.eq(-1)}});var D,z,I,R,B,N=(R=/(?:^\w|[A-Z]|\b\w)/g,B=/[\s-_]+/g,function(t){return t.replace(R,function(t,e){return t[0===e?"toLowerCase":"toUpperCase"]()}).replace(B,"")}),F=(D={},z=document.createElement("div"),I=z.style,function(t){if(t=N(t),D[t])return D[t];var e=t.charAt(0).toUpperCase()+t.slice(1);return x((t+" "+["webkit","moz","ms","o"].join(e+" ")+e).split(" "),function(e){if(e in I)return D[e]=t=D[t]=e,!1}),D[t]});function j(t,e){return parseInt(n.getComputedStyle(t[0],null)[e],10)||0}function H(t,e,n){var i,r=C(t,"_cashEvents"),a=r&&r[e];a&&(n?(t.removeEventListener(e,n),0<=(i=a.indexOf(n))&&a.splice(i,1)):(x(a,function(n){t.removeEventListener(e,n)}),a=[]))}function $(t,e){return"&"+encodeURIComponent(t)+"="+encodeURIComponent(e).replace(/%20/g,"+")}function q(t){var e,n,i,r=t.type;if(!r)return null;switch(r.toLowerCase()){case"select-one":return 0<=(i=(n=t).selectedIndex)?n.options[i].value:null;case"select-multiple":return e=[],x(t.options,function(t){t.selected&&e.push(t.value)}),e.length?e:null;case"radio":case"checkbox":return t.checked?t.value:null;default:return t.value?t.value:null}}function Z(t,e,n){var i=c(e);i||!e.length?x(t,i?function(t){return t.insertAdjacentHTML(n?"afterbegin":"beforeend",e)}:function(t,i){return function(t,e,i){n?t.insertBefore(e,t.childNodes[0]):t.appendChild(e)}(t,0===i?e:e.cloneNode(!0))}):x(e,function(e){return Z(t,e,n)})}y.prefixedProp=F,y.camelCase=N,_.extend({css:function(t,e){if(c(t))return t=F(t),1<arguments.length?this.each(function(n){return n.style[t]=e}):n.getComputedStyle(this[0])[t];for(var i in t)this.css(i,t[i]);return this}}),x(["Width","Height"],function(t){var e=t.toLowerCase();_[e]=function(){return this[0].getBoundingClientRect()[e]},_["inner"+t]=function(){return this[0]["client"+t]},_["outer"+t]=function(e){return this[0]["offset"+t]+(e?j(this,"margin"+("Width"===t?"Left":"Top"))+j(this,"margin"+("Width"===t?"Right":"Bottom")):0)}}),_.extend({off:function(t,e){return this.each(function(n){return H(n,t,e)})},on:function(t,e,n,i){var r;if(!c(t)){for(var a in t)this.on(a,e,t[a]);return this}return l(e)&&(n=e,e=null),"ready"===t?(g(n),this):(e&&(r=n,n=function(t){for(var n=t.target;!b(n,e);){if(n===this||null===n)return!1;n=n.parentNode}n&&r.call(n,t)}),this.each(function(e){var r,a,o,s,l=n;i&&(l=function(){n.apply(this,arguments),H(e,t,l)}),a=t,o=l,(s=C(r=e,"_cashEvents")||A(r,"_cashEvents",{}))[a]=s[a]||[],s[a].push(o),r.addEventListener(a,o)}))},one:function(t,e,n){return this.on(t,e,n,!0)},ready:g,trigger:function(t,e){if(document.createEvent){var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!1),n=this.extend(n,e),this.each(function(t){return t.dispatchEvent(n)})}}}),_.extend({serialize:function(){var t="";return x(this[0].elements||this,function(e){if(!e.disabled&&"FIELDSET"!==e.tagName){var n=e.name;switch(e.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var i=q(e);null!==i&&x(i,function(e){t+=$(n,e)});break;default:var r=q(e);null!==r&&(t+=$(n,r))}}}),t.substr(1)},val:function(t){return void 0===t?q(this[0]):this.each(function(e){return e.value=t})}}),_.extend({after:function(t){return y(t).insertAfter(this),this},append:function(t){return Z(this,t),this},appendTo:function(t){return Z(y(t),this),this},before:function(t){return y(t).insertBefore(this),this},clone:function(){return y(this.map(function(t){return t.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(t){if(void 0===t)return this[0].innerHTML;var e=t.nodeType?t[0].outerHTML:t;return this.each(function(t){return t.innerHTML=e})},insertAfter:function(t){var e=this;return y(t).each(function(t,n){var i=t.parentNode,r=t.nextSibling;e.each(function(t){i.insertBefore(0===n?t:t.cloneNode(!0),r)})}),this},insertBefore:function(t){var e=this;return y(t).each(function(t,n){var i=t.parentNode;e.each(function(e){i.insertBefore(0===n?e:e.cloneNode(!0),t)})}),this},prepend:function(t){return Z(this,t,!0),this},prependTo:function(t){return Z(y(t),this,!0),this},remove:function(){return this.each(function(t){if(t.parentNode)return t.parentNode.removeChild(t)})},text:function(t){return void 0===t?this[0].textContent:this.each(function(e){return e.textContent=t})}});var V=e.documentElement;return _.extend({position:function(){var t=this[0];return{left:t.offsetLeft,top:t.offsetTop}},offset:function(){var t=this[0].getBoundingClientRect();return{top:t.top+n.pageYOffset-V.clientTop,left:t.left+n.pageXOffset-V.clientLeft}},offsetParent:function(){return y(this[0].offsetParent)}}),_.extend({children:function(t){var e=[];return this.each(function(t){o.apply(e,t.children)}),e=k(e),t?e.filter(function(e){return b(e,t)}):e},closest:function(t){return!t||this.length<1?y():this.is(t)?this.filter(t):this.parent().closest(t)},is:function(t){if(!t)return!1;var e=!1,n=w(t);return this.each(function(i){return!(e=n(i,t))}),e},find:function(t){if(!t||t.nodeType)return y(t&&this.has(t).length?t:null);var e=[];return this.each(function(n){o.apply(e,p(t,n))}),k(e)},has:function(t){var e=c(t)?function(e){return 0!==p(t,e).length}:function(e){return e.contains(t)};return this.filter(e)},next:function(){return y(this[0].nextElementSibling)},not:function(t){if(!t)return this;var e=w(t);return this.filter(function(n){return!e(n,t)})},parent:function(){var t=[];return this.each(function(e){e&&e.parentNode&&t.push(e.parentNode)}),k(t)},parents:function(t){var n,i=[];return this.each(function(r){for(n=r;n&&n.parentNode&&n!==e.body.parentNode;)n=n.parentNode,(!t||t&&b(n,t))&&i.push(n)}),k(i)},prev:function(){return y(this[0].previousElementSibling)},siblings:function(t){var e=this.parent().children(t),n=this[0];return e.filter(function(t){return t!==n})}}),y}();var Component=function(){function t(e,n,i){_classCallCheck(this,t),n instanceof Element||console.error(Error(n+" is not an HTML Element"));var r=e.getInstance(n);r&&r.destroy(),this.el=n,this.$el=cash(n)}return _createClass(t,null,[{key:"init",value:function(t,e,n){var i=null;if(e instanceof Element)i=new t(e,n);else if(e&&(e.jquery||e.cash||e instanceof NodeList)){for(var r=[],a=0;a<e.length;a++)r.push(new t(e[a],n));i=r}return i}}]),t}();!function(t){t.Package?M={}:t.M={},M.jQueryLoaded=!!t.jQuery}(window),"function"==typeof define&&define.amd?define("M",[],function(){return M}):"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=M),exports.default=M),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var docHandleKeydown=function(t){M.keyDown=!0,t.which!==M.keys.TAB&&t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||(M.tabPressed=!0)},docHandleKeyup=function(t){M.keyDown=!1,t.which!==M.keys.TAB&&t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||(M.tabPressed=!1)},docHandleFocus=function(t){M.keyDown&&document.body.classList.add("keyboard-focused")},docHandleBlur=function(t){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",docHandleKeydown,!0),document.addEventListener("keyup",docHandleKeyup,!0),document.addEventListener("focus",docHandleFocus,!0),document.addEventListener("blur",docHandleBlur,!0),M.initializeJqueryWrapper=function(t,e,n){jQuery.fn[e]=function(i){if(t.prototype[i]){var r=Array.prototype.slice.call(arguments,1);if("get"===i.slice(0,3)){var a=this.first()[0][n];return a[i].apply(a,r)}return this.each(function(){var t=this[n];t[i].apply(t,r)})}if("object"==typeof i||!i)return t.init(this,i),this;jQuery.error("Method "+i+" does not exist on jQuery."+e)}},M.AutoInit=function(t){var e=t||document.body,n={Autocomplete:e.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:e.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:e.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:e.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:e.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:e.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:e.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:e.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:e.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:e.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:e.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:e.querySelectorAll("select:not(.no-autoinit)"),Sidenav:e.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:e.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:e.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:e.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:e.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:e.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var i in n)M[i].init(n[i])},M.objectSelectorString=function(t){return((t.prop("tagName")||"")+(t.attr("id")||"")+(t.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(),M.escapeHash=function(t){return t.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(t){var e=$(t),n=e.add(e.parents()),i=!1;return n.each(function(){if("fixed"===$(this).css("position"))return!(i=!0)}),i},M.checkWithinContainer=function(t,e,n){var i={top:!1,right:!1,bottom:!1,left:!1},r=t.getBoundingClientRect(),a=t===document.body?Math.max(r.bottom,window.innerHeight):r.bottom,o=e.left-t.scrollLeft,s=e.top-t.scrollTop;return(o<r.left+n||o<n)&&(i.left=!0),(o+e.width>r.right-n||o+e.width>window.innerWidth-n)&&(i.right=!0),(s<r.top+n||s<n)&&(i.top=!0),(s+e.height>a-n||s+e.height>window.innerHeight-n)&&(i.bottom=!0),i},M.checkPossibleAlignments=function(t,e,n,i){var r={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},a="visible"===getComputedStyle(e).overflow,o=e.getBoundingClientRect(),s=Math.min(o.height,window.innerHeight),l=Math.min(o.width,window.innerWidth),c=t.getBoundingClientRect(),u=e.scrollTop,h=n.left-e.scrollLeft,d=n.top-u,f=n.top+c.height-u;return r.spaceOnRight=a?window.innerWidth-(c.left+n.width):l-(h+n.width),r.spaceOnRight<0&&(r.left=!1),r.spaceOnLeft=a?c.right-n.width:h-n.width+c.width,r.spaceOnLeft<0&&(r.right=!1),r.spaceOnBottom=a?window.innerHeight-(c.top+n.height+i):s-(d+n.height+i),r.spaceOnBottom<0&&(r.top=!1),r.spaceOnTop=a?c.bottom-(n.height+i):f-(n.height-i),r.spaceOnTop<0&&(r.bottom=!1),r},M.getOverflowParent=function(t){return null==t?null:t===document.body||"visible"!==getComputedStyle(t).overflow?t:M.getOverflowParent(t.parentElement)},M.getIdFromTrigger=function(t){var e=t.getAttribute("data-target");return e||(e=(e=t.getAttribute("href"))?e.slice(1):""),e},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var getTime=Date.now||function(){return(new Date).getTime()};M.throttle=function(t,e,n){var i=void 0,r=void 0,a=void 0,o=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:getTime(),o=null,a=t.apply(i,r),i=r=null};return function(){var c=getTime();s||!1!==n.leading||(s=c);var u=e-(c-s);return i=this,r=arguments,u<=0?(clearTimeout(o),o=null,s=c,a=t.apply(i,r),i=r=null):o||!1===n.trailing||(o=setTimeout(l,u)),a}};var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:"undefined"!=typeof global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(t){var e=0;return $jscomp.iteratorPrototype(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(t,e){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},$jscomp.polyfill=function(t,e,n,i){if(e){for(n=$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.keys",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t){return t})}},"es6-impl","es3");var $jscomp$this=this;M.anime=function(){function t(t){if(!S.col(t))try{return document.querySelectorAll(t)}catch(t){}}function e(t,e){for(var n=t.length,i=2<=arguments.length?e:void 0,r=[],a=0;a<n;a++)if(a in t){var o=t[a];e.call(i,o,a,t)&&r.push(o)}return r}function n(t){return t.reduce(function(t,e){return t.concat(S.arr(e)?n(e):e)},[])}function i(e){return S.arr(e)?e:(S.str(e)&&(e=t(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function r(t,e){return t.some(function(t){return t===e})}function a(t){var e,n={};for(e in t)n[e]=t[e];return n}function o(t,e){var n,i=a(t);for(n in t)i[n]=e.hasOwnProperty(n)?e[n]:t[n];return i}function s(t,e){var n,i=a(t);for(n in e)i[n]=S.und(t[n])?e[n]:t[n];return i}function l(t){if(t=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t))return t[2]}function c(t,e){return S.fnc(t)?t(e.target,e.id,e.total):t}function u(t,e){if(e in t.style)return getComputedStyle(t).getPropertyValue(e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function h(t,e){return S.dom(t)&&r(L,e)?"transform":S.dom(t)&&(t.getAttribute(e)||S.svg(t)&&t[e])?"attribute":S.dom(t)&&"transform"!==e&&u(t,e)?"css":null!=t[e]?"object":void 0}function d(t,n){switch(h(t,n)){case"transform":return function(t,n){var i,r=-1<(i=n).indexOf("translate")||"perspective"===i?"px":-1<i.indexOf("rotate")||-1<i.indexOf("skew")?"deg":void 0;if(r=-1<n.indexOf("scale")?1:0+r,!(t=t.style.transform))return r;for(var a=[],o=[],s=[],l=/(\w+)\((.+?)\)/g;a=l.exec(t);)o.push(a[1]),s.push(a[2]);return(t=e(s,function(t,e){return o[e]===n})).length?t[0]:r}(t,n);case"css":return u(t,n);case"attribute":return t.getAttribute(n)}return t[n]||0}function f(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var i=l(t)||0;switch(e=parseFloat(e),t=parseFloat(t.replace(n[0],"")),n[0][0]){case"+":return e+t+i;case"-":return e-t+i;case"*":return e*t+i}}function p(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function v(t){t=t.points;for(var e,n=0,i=0;i<t.numberOfItems;i++){var r=t.getItem(i);0<i&&(n+=p(e,r)),e=r}return n}function g(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return 2*Math.PI*t.getAttribute("r");case"rect":return 2*t.getAttribute("width")+2*t.getAttribute("height");case"line":return p({x:t.getAttribute("x1"),y:t.getAttribute("y1")},{x:t.getAttribute("x2"),y:t.getAttribute("y2")});case"polyline":return v(t);case"polygon":var e=t.points;return v(t)+p(e.getItem(e.numberOfItems-1),e.getItem(0))}}function m(t,e){function n(n){return t.el.getPointAtLength(1<=e+(n=void 0===n?0:n)?e+n:0)}var i=n(),r=n(-1),a=n(1);switch(t.property){case"x":return i.x;case"y":return i.y;case"angle":return 180*Math.atan2(a.y-r.y,a.x-r.x)/Math.PI}}function y(t,e){var n,i=/-?\d*\.?\d+/g;if(n=S.pth(t)?t.totalLength:t,S.col(n))if(S.rgb(n)){var r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=r?"rgba("+r[1]+",1)":n}else n=S.hex(n)?function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,n,i){return e+e+n+n+i+i});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+(t=parseInt(e[1],16))+","+parseInt(e[2],16)+","+(e=parseInt(e[3],16))+",1)"}(n):S.hsl(n)?function(t){function e(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t);t=parseInt(n[1])/360;var i=parseInt(n[2])/100,r=parseInt(n[3])/100;if(n=n[4]||1,0==i)r=i=t=r;else{var a=r<.5?r*(1+i):r+i-r*i,o=2*r-a;r=e(o,a,t+1/3),i=e(o,a,t),t=e(o,a,t-1/3)}return"rgba("+255*r+","+255*i+","+255*t+","+n+")"}(n):void 0;else r=(r=l(n))?n.substr(0,n.length-r.length):n,n=e&&!/\s/g.test(n)?r+e:r;return{original:n+="",numbers:n.match(i)?n.match(i).map(Number):[0],strings:S.str(t)||e?n.split(i):[]}}function _(t){return e(t=t?n(S.arr(t)?t.map(i):i(t)):[],function(t,e,n){return n.indexOf(t)===e})}function x(t,e){var n=a(e);if(S.arr(t)){var r=t.length;2!==r||S.obj(t[0])?S.fnc(e.duration)||(n.duration=e.duration/r):t={value:t}}return i(t).map(function(t,n){return n=n?0:e.delay,t=S.obj(t)&&!S.pth(t)?t:{value:t},S.und(t.delay)&&(t.delay=n),t}).map(function(t){return s(t,n)})}function b(t,e){var n;return t.tweens.map(function(i){var r=(i=function(t,e){var n,i={};for(n in t){var r=c(t[n],e);S.arr(r)&&1===(r=r.map(function(t){return c(t,e)})).length&&(r=r[0]),i[n]=r}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}(i,e)).value,a=d(e.target,t.name),o=n?n.to.original:a,s=(o=S.arr(r)?r[0]:o,f(S.arr(r)?r[1]:r,o));return a=l(s)||l(o)||l(a),i.from=y(o,a),i.to=y(s,a),i.start=n?n.end:t.offset,i.end=i.start+i.delay+i.duration,i.easing=function(t){return S.arr(t)?E.apply(this,t):O[t]}(i.easing),i.elasticity=(1e3-Math.min(Math.max(i.elasticity,1),999))/1e3,i.isPath=S.pth(r),i.isColor=S.col(i.from.original),i.isColor&&(i.round=1),n=i})}function w(t,e,n,i){var r="delay"===t;return e.length?(r?Math.min:Math.max).apply(Math,e.map(function(e){return e[t]})):r?i.delay:n.offset+i.delay+i.duration}function k(t){var i,r,a,l=o(A,t),c=o(C,t),u=(r=_(t.targets)).map(function(t,e){return{target:t,id:e,total:r.length}}),d=[],f=s(l,c);for(i in t)f.hasOwnProperty(i)||"targets"===i||d.push({name:i,offset:f.offset,tweens:x(t[i],c)});return a=d,t=e(n(u.map(function(t){return a.map(function(e){var n=h(t.target,e.name);if(n){var i=b(e,t);e={type:n,property:e.name,animatable:t,tweens:i,duration:i[i.length-1].end,delay:i[0].delay}}else e=void 0;return e})})),function(t){return!S.und(t)}),s(l,{children:[],animatables:u,animations:t,duration:w("duration",t,l,c),delay:w("delay",t,l,c)})}function T(t){function n(){return window.Promise&&new Promise(function(t){return d=t})}function i(t){return p.reversed?p.duration-t:t}function r(t){for(var n=0,i={},r=p.animations,a=r.length;n<a;){var o=r[n],s=o.animatable,l=(c=o.tweens)[f=c.length-1];f&&(l=e(c,function(e){return t<e.end})[0]||l);for(var c=Math.min(Math.max(t-l.start-l.delay,0),l.duration)/l.duration,h=isNaN(c)?1:l.easing(c,l.elasticity),d=(c=l.to.strings,l.round),f=[],v=void 0,g=(v=l.to.numbers.length,0);g<v;g++){var y=void 0,_=(y=l.to.numbers[g],l.from.numbers[g]);y=l.isPath?m(l.value,h*y):_+h*(y-_),d&&(l.isColor&&2<g||(y=Math.round(y*d)/d)),f.push(y)}if(l=c.length)for(v=c[0],h=0;h<l;h++)d=c[h+1],g=f[h],isNaN(g)||(v=d?v+(g+d):v+(g+" "));else v=f[0];P[o.type](s.target,o.property,v,i,s.id),o.currentValue=v,n++}if(n=Object.keys(i).length)for(r=0;r<n;r++)M||(M=u(document.body,"transform")?"transform":"-webkit-transform"),p.animatables[r].target.style[M]=i[r].join(" ");p.currentTime=t,p.progress=t/p.duration*100}function a(t){p[t]&&p[t](p)}function o(){p.remaining&&!0!==p.remaining&&p.remaining--}function s(t){var e=p.duration,s=p.offset,u=s+p.delay,v=p.currentTime,g=p.reversed,m=i(t);if(p.children.length){var y=p.children,_=y.length;if(m>=p.currentTime)for(var x=0;x<_;x++)y[x].seek(m);else for(;_--;)y[_].seek(m)}(u<=m||!e)&&(p.began||(p.began=!0,a("begin")),a("run")),s<m&&m<e?r(m):(m<=s&&0!==v&&(r(0),g&&o()),(e<=m&&v!==e||!e)&&(r(e),g||o())),a("update"),e<=t&&(p.remaining?(c=l,"alternate"===p.direction&&(p.reversed=!p.reversed)):(p.pause(),p.completed||(p.completed=!0,a("complete"),"Promise"in window&&(d(),f=n()))),h=0)}t=void 0===t?{}:t;var l,c,h=0,d=null,f=n(),p=k(t);return p.reset=function(){var t=p.direction,e=p.loop;for(p.currentTime=0,p.progress=0,p.paused=!0,p.began=!1,p.completed=!1,p.reversed="reverse"===t,p.remaining="alternate"===t&&1===e?2:e,r(0),t=p.children.length;t--;)p.children[t].reset()},p.tick=function(t){l=t,c||(c=l),s((h+l-c)*T.speed)},p.seek=function(t){s(i(t))},p.pause=function(){var t=D.indexOf(p);-1<t&&D.splice(t,1),p.paused=!0},p.play=function(){p.paused&&(p.paused=!1,c=0,h=i(p.currentTime),D.push(p),z||I())},p.reverse=function(){p.reversed=!p.reversed,c=0,h=i(p.currentTime)},p.restart=function(){p.pause(),p.reset(),p.play()},p.finished=f,p.reset(),p.autoplay&&p.play(),p}var M,A={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},C={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},L="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),S={arr:function(t){return Array.isArray(t)},obj:function(t){return-1<Object.prototype.toString.call(t).indexOf("Object")},pth:function(t){return S.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},dom:function(t){return t.nodeType||S.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return S.hex(t)||S.rgb(t)||S.hsl(t)}},E=function(){function t(t,e,n){return(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t}return function(e,n,i,r){if(0<=e&&e<=1&&0<=i&&i<=1){var a=new Float32Array(11);if(e!==n||i!==r)for(var o=0;o<11;++o)a[o]=t(.1*o,e,i);return function(o){if(e===n&&i===r)return o;if(0===o)return 0;if(1===o)return 1;for(var s=0,l=1;10!==l&&a[l]<=o;++l)s+=.1;l=s+(o-a[--l])/(a[l+1]-a[l])*.1;var c=3*(1-3*i+3*e)*l*l+2*(3*i-6*e)*l+3*e;if(.001<=c){for(s=0;s<4&&0!=(c=3*(1-3*i+3*e)*l*l+2*(3*i-6*e)*l+3*e);++s){var u=t(l,e,i)-o;l-=u/c}o=l}else if(0===c)o=l;else{l=s,s+=.1;for(var h=0;0<(c=t(u=l+(s-l)/2,e,i)-o)?s=u:l=u,1e-7<Math.abs(c)&&++h<10;);o=u}return t(o,n,r)}}}}(),O=function(){function t(t,e){return 0===t||1===t?t:-Math.pow(2,10*(t-1))*Math.sin(2*(t-1-e/(2*Math.PI)*Math.asin(1))*Math.PI/e)}var e,n="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),i={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],t],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(e,n){return 1-t(1-e,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(e,n){return e<.5?t(2*e,n)/2:1-t(-2*e+2,n)/2}]},r={linear:E(.25,.25,.75,.75)},a={};for(e in i)a.type=e,i[a.type].forEach(function(t){return function(e,i){r["ease"+t.type+n[i]]=S.fnc(e)?e:E.apply($jscomp$this,e)}}(a)),a={type:a.type};return r}(),P={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,i,r){i[r]||(i[r]=[]),i[r].push(e+"("+n+")")}},D=[],z=0,I=function(){function t(){z=requestAnimationFrame(e)}function e(e){var n=D.length;if(n){for(var i=0;i<n;)D[i]&&D[i].tick(e),i++;t()}else cancelAnimationFrame(z),z=0}return t}();return T.version="2.2.0",T.speed=1,T.running=D,T.remove=function(t){t=_(t);for(var e=D.length;e--;)for(var n=D[e],i=n.animations,a=i.length;a--;)r(t,i[a].animatable.target)&&(i.splice(a,1),i.length||n.pause())},T.getValue=d,T.path=function(e,n){var i=S.str(e)?t(e)[0]:e,r=n||100;return function(t){return{el:i,property:t,totalLength:g(i)*(r/100)}}},T.setDashoffset=function(t){var e=g(t);return t.setAttribute("stroke-dasharray",e),e},T.bezier=E,T.easings=O,T.timeline=function(t){var e=T(t);return e.pause(),e.duration=0,e.add=function(n){return e.children.forEach(function(t){t.began=!0,t.completed=!0}),i(n).forEach(function(n){var i=s(n,o(C,t||{}));i.targets=i.targets||t.targets,n=e.duration;var r=i.offset;i.autoplay=!1,i.direction=e.direction,i.offset=S.und(r)?n:f(r,n),e.began=!0,e.completed=!0,e.seek(i.offset),(i=T(i)).began=!0,i.completed=!0,i.duration>n&&(e.duration=i.duration),e.children.push(i)}),e.seek(0),e.reset(),e.autoplay&&e.restart(),e},e},T.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},T}(),function(t,e){"use strict";var n={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));(i.el.M_Collapsible=i).options=t.extend({},r.defaults,n),i.$headers=i.$el.children("li").children(".collapsible-header"),i.$headers.attr("tabindex",0),i._setupEventHandlers();var a=i.$el.children("li.active").children(".collapsible-body");return i.options.accordion?a.first().css("display","block"):a.css("display","block"),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(e){e.addEventListener("keydown",t._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var t=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(e){e.removeEventListener("keydown",t._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(e){var n=t(e.target).closest(".collapsible-header");if(e.target&&n.length){var i=n.closest(".collapsible");if(i[0]===this.el){var r=n.closest("li"),a=i.children("li"),o=r[0].classList.contains("active"),s=a.index(r);o?this.close(s):this.open(s)}}}},{key:"_handleCollapsibleKeydown",value:function(t){13===t.keyCode&&this._handleCollapsibleClickBound(t)}},{key:"_animateIn",value:function(t){var n=this,i=this.$el.children("li").eq(t);if(i.length){var r=i.children(".collapsible-body");e.remove(r[0]),r.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var a=r.css("padding-top"),o=r.css("padding-bottom"),s=r[0].scrollHeight;r.css({paddingTop:0,paddingBottom:0}),e({targets:r[0],height:s,paddingTop:a,paddingBottom:o,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(t){r.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,i[0])}})}}},{key:"_animateOut",value:function(t){var n=this,i=this.$el.children("li").eq(t);if(i.length){var r=i.children(".collapsible-body");e.remove(r[0]),r.css("overflow","hidden"),e({targets:r[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){r.css({height:"",overflow:"",padding:"",display:""}),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,i[0])}})}}},{key:"open",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length&&!i[0].classList.contains("active")){if("function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,i[0]),this.options.accordion){var r=this.$el.children("li");this.$el.children("li.active").each(function(e){var i=r.index(t(e));n.close(i)})}i[0].classList.add("active"),this._animateIn(e)}}},{key:"close",value:function(t){var e=this.$el.children("li").eq(t);e.length&&e[0].classList.contains("active")&&("function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,e[0]),e[0].classList.remove("active"),this._animateOut(t))}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Collapsible}},{key:"defaults",get:function(){return n}}]),r}();M.Collapsible=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"collapsible","M_Collapsible")}(cash,M.anime),function(t,e){"use strict";var n={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_Dropdown=i,r._dropdowns.push(i),i.id=M.getIdFromTrigger(e),i.dropdownEl=document.getElementById(i.id),i.$dropdownEl=t(i.dropdownEl),i.options=t.extend({},r.defaults,n),i.isOpen=!1,i.isScrollable=!1,i.isTouchMoving=!1,i.focusedIndex=-1,i.filterQuery=[],i.options.container?t(i.options.container).append(i.dropdownEl):i.$el.after(i.dropdownEl),i._makeDropdownFocusable(),i._resetFilterQueryBound=i._resetFilterQuery.bind(i),i._handleDocumentClickBound=i._handleDocumentClick.bind(i),i._handleDocumentTouchmoveBound=i._handleDocumentTouchmove.bind(i),i._handleDropdownClickBound=i._handleDropdownClick.bind(i),i._handleDropdownKeydownBound=i._handleDropdownKeydown.bind(i),i._handleTriggerKeydownBound=i._handleTriggerKeydown.bind(i),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),r._dropdowns.splice(r._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(t){t.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(e){var n=e.toElement||e.relatedTarget,i=!!t(n).closest(".dropdown-content").length,r=!1,a=t(n).closest(".dropdown-trigger");a.length&&a[0].M_Dropdown&&a[0].M_Dropdown.isOpen&&(r=!0),r||i||this.close()}},{key:"_handleDocumentClick",value:function(e){var n=this,i=t(e.target);this.options.closeOnClick&&i.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){n.close()},0):!i.closest(".dropdown-trigger").length&&i.closest(".dropdown-content").length||setTimeout(function(){n.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(t){t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ENTER||this.isOpen||(t.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(e){t(e.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(e){if("function"==typeof this.options.onItemClick){var n=t(e.target).closest("li")[0];this.options.onItemClick.call(this,n)}}},{key:"_handleDropdownKeydown",value:function(e){if(e.which===M.keys.TAB)e.preventDefault(),this.close();else if(e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||!this.isOpen)if(e.which===M.keys.ENTER&&this.isOpen){var n=this.dropdownEl.children[this.focusedIndex],i=t(n).find("a, button").first();i.length?i[0].click():n&&n.click()}else e.which===M.keys.ESC&&this.isOpen&&(e.preventDefault(),this.close());else{e.preventDefault();var r=e.which===M.keys.ARROW_DOWN?1:-1,a=this.focusedIndex,o=!1;do{if(this.dropdownEl.children[a+=r]&&-1!==this.dropdownEl.children[a].tabIndex){o=!0;break}}while(a<this.dropdownEl.children.length&&0<=a);o&&(this.focusedIndex=a,this._focusFocusedItem())}var s=String.fromCharCode(e.which).toLowerCase();if(s&&-1===[9,13,27,38,40].indexOf(e.which)){this.filterQuery.push(s);var l=this.filterQuery.join(""),c=t(this.dropdownEl).find("li").filter(function(e){return 0===t(e).text().toLowerCase().indexOf(l)})[0];c&&(this.focusedIndex=t(c).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,t(this.dropdownEl).children().each(function(t){t.getAttribute("tabindex")||t.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){0<=this.focusedIndex&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var t=this.el.getBoundingClientRect(),e=this.dropdownEl.getBoundingClientRect(),n=e.height,i=e.width,r=t.left-e.left,a=t.top-e.top,o=M.checkPossibleAlignments(this.el,this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,{left:r,top:a,height:n,width:i},this.options.coverTrigger?0:t.height),s="top",l=this.options.alignment;if(a+=this.options.coverTrigger?0:t.height,this.isScrollable=!1,o.top||(o.bottom?s="bottom":(this.isScrollable=!0,o.spaceOnTop>o.spaceOnBottom?(s="bottom",n+=o.spaceOnTop,a-=o.spaceOnTop):n+=o.spaceOnBottom)),!o[l]){var c="left"===l?"right":"left";o[c]?l=c:o.spaceOnLeft>o.spaceOnRight?(l="right",i+=o.spaceOnLeft,r-=o.spaceOnLeft):(l="left",i+=o.spaceOnRight)}return"bottom"===s&&(a=a-e.height+(this.options.coverTrigger?t.height:0)),"right"===l&&(r=r-e.width+t.width),{x:r,y:a,verticalAlignment:s,horizontalAlignment:l,height:n,width:i}}},{key:"_animateIn",value:function(){var t=this;e.remove(this.dropdownEl),e({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(e){t.options.autoFocus&&t.dropdownEl.focus(),"function"==typeof t.options.onOpenEnd&&t.options.onOpenEnd.call(t,t.el)}})}},{key:"_animateOut",value:function(){var t=this;e.remove(this.dropdownEl),e({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(e){t._resetDropdownStyles(),"function"==typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t,t.el)}})}},{key:"_placeDropdown",value:function(){var t=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=t+"px";var e=this._getDropdownPosition();this.dropdownEl.style.left=e.x+"px",this.dropdownEl.style.top=e.y+"px",this.dropdownEl.style.height=e.height+"px",this.dropdownEl.style.width=e.width+"px",this.dropdownEl.style.transformOrigin=("left"===e.horizontalAlignment?"0":"100%")+" "+("top"===e.verticalAlignment?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Dropdown}},{key:"defaults",get:function(){return n}}]),r}();i._dropdowns=[],M.Dropdown=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"dropdown","M_Dropdown")}(cash,M.anime),function(t,e){"use strict";var n={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return(i.el.M_Modal=i).options=t.extend({},r.defaults,n),i.isOpen=!1,i.id=i.$el.attr("id"),i._openingTrigger=void 0,i.$overlay=t('<div class="modal-overlay"></div>'),i.el.tabIndex=0,i._nthModalOpened=0,r._count++,i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){r._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),1===r._count&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){0===r._count&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(e){var n=t(e.target).closest(".modal-trigger");if(n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Modal;r&&r.open(n),e.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(e){t(e.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(t){27===t.keyCode&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(t){this.el.contains(t.target)||this._nthModalOpened!==r._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var n=this;t.extend(this.el.style,{display:"block",opacity:0}),t.extend(this.$overlay[0].style,{display:"block",opacity:0}),e({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var i={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,n.el,n._openingTrigger)}};this.el.classList.contains("bottom-sheet")?t.extend(i,{bottom:0,opacity:1}):t.extend(i,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),e(i)}},{key:"_animateOut",value:function(){var n=this;e({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var i={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){n.el.style.display="none",n.$overlay.remove(),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,n.el)}};this.el.classList.contains("bottom-sheet")?t.extend(i,{bottom:"-100%",opacity:0}):t.extend(i,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),e(i)}},{key:"open",value:function(t){if(!this.isOpen)return this.isOpen=!0,this._nthModalOpened=++r._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*r._modalsOpen,this.el.style.zIndex=1e3+2*r._modalsOpen+1,this._openingTrigger=t?t[0]:void 0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),e.remove(this.el),e.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,r._modalsOpen--,this._nthModalOpened=0,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),0===r._modalsOpen&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),e.remove(this.el),e.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Modal}},{key:"defaults",get:function(){return n}}]),r}();i._modalsOpen=0,i._count=0,M.Modal=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"modal","M_Modal")}(cash,M.anime),function(t,e){"use strict";var n={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return(i.el.M_Materialbox=i).options=t.extend({},r.defaults,n),i.overlayActive=!1,i.doneAnimating=!0,i.placeholder=t("<div></div>").addClass("material-placeholder"),i.originalWidth=0,i.originalHeight=0,i.originInlineStyles=i.$el.attr("style"),i.caption=i.el.getAttribute("data-caption")||"",i.$el.before(i.placeholder),i.placeholder.append(i.$el),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,t(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(t){!1===this.doneAnimating||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(t){27===t.keyCode&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=t();for(var e=this.placeholder[0].parentNode;null!==e&&!t(e).is(document);){var n=t(e);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),this.ancestorsChanged=void 0===this.ancestorsChanged?n:this.ancestorsChanged.add(n)),e=e.parentNode}}},{key:"_animateImageIn",value:function(){var t=this,n={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){t.doneAnimating=!0,"function"==typeof t.options.onOpenEnd&&t.options.onOpenEnd.call(t,t.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),"none"!==this.maxWidth&&(n.maxWidth=this.newWidth),"none"!==this.maxHeight&&(n.maxHeight=this.newHeight),e(n)}},{key:"_animateImageOut",value:function(){var t=this;e({targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){t.placeholder.css({height:"",width:"",position:"",top:"",left:""}),t.attrWidth&&t.$el.attr("width",t.attrWidth),t.attrHeight&&t.$el.attr("height",t.attrHeight),t.$el.removeAttr("style"),t.originInlineStyles&&t.$el.attr("style",t.originInlineStyles),t.$el.removeClass("active"),t.doneAnimating=!0,t.ancestorsChanged.length&&t.ancestorsChanged.css("overflow",""),"function"==typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t,t.el)}})}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var n=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=t('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){n.doneAnimating&&n.close()}),this.$el.before(this.$overlay);var i=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*i.left+"px",top:-1*i.top+"px"}),e.remove(this.el),e.remove(this.$overlay[0]),e({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),""!==this.caption&&(this.$photocaption&&e.remove(this.$photoCaption[0]),this.$photoCaption=t('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),t("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),e({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var r=0,a=this.originalWidth/this.windowWidth,o=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,o<a?(r=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*r):(this.newWidth=.9*this.windowHeight*(r=this.originalWidth/this.originalHeight),this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var t=this;this._updateVars(),this.doneAnimating=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),e.remove(this.el),e.remove(this.$overlay[0]),""!==this.caption&&e.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),e({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){t.overlayActive=!1,t.$overlay.remove()}}),this._animateImageOut(),""!==this.caption&&e({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){t.$photoCaption.remove()}})}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Materialbox}},{key:"defaults",get:function(){return n}}]),r}();M.Materialbox=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"materialbox","M_Materialbox")}(cash,M.anime),function(t){"use strict";var e={responsiveThreshold:0},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return(r.el.M_Parallax=r).options=t.extend({},i.defaults,n),r._enabled=window.innerWidth>r.options.responsiveThreshold,r.$img=r.$el.find("img").first(),r.$img.each(function(){this.complete&&t(this).trigger("load")}),r._updateParallax(),r._setupEventHandlers(),r._setupStyles(),i._parallaxes.push(r),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){i._parallaxes.splice(i._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(i._handleScrollThrottled=M.throttle(i._handleScroll,5),window.addEventListener("scroll",i._handleScrollThrottled),i._handleWindowResizeThrottled=M.throttle(i._handleWindowResize,5),window.addEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(window.removeEventListener("scroll",i._handleScrollThrottled),window.removeEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var t=0<this.$el.height()?this.el.parentNode.offsetHeight:500,e=this.$img[0].offsetHeight-t,n=this.$el.offset().top+t,i=this.$el.offset().top,r=M.getDocumentScrollTop(),a=window.innerHeight;this._enabled?r<n&&i<r+a&&(this.$img[0].style.transform="translate3D(-50%, "+e*((r+a-i)/(t+a))+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Parallax}},{key:"_handleScroll",value:function(){for(var t=0;t<i._parallaxes.length;t++){var e=i._parallaxes[t];e._updateParallax.call(e)}}},{key:"_handleWindowResize",value:function(){for(var t=0;t<i._parallaxes.length;t++){var e=i._parallaxes[t];e._enabled=window.innerWidth>e.options.responsiveThreshold}}},{key:"defaults",get:function(){return e}}]),i}();n._parallaxes=[],M.Parallax=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"parallax","M_Parallax")}(cash),function(t,e){"use strict";var n={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return(i.el.M_Tabs=i).options=t.extend({},r.defaults,n),i.$tabLinks=i.$el.children("li.tab").children("a"),i.index=0,i._setupActiveTabLink(),i.options.swipeable?i._setupSwipeableTabs():i._setupNormalTabs(),i._setTabsAndTabWidth(),i._createIndicator(),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),0!==this.tabWidth&&0!==this.tabsWidth&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(e){var n=this,i=t(e.target).closest("li.tab"),r=t(e.target).closest("a");if(r.length&&r.parent().hasClass("tab"))if(i.hasClass("disabled"))e.preventDefault();else if(!r.attr("target")){this.$activeTabLink.removeClass("active");var a=this.$content;this.$activeTabLink=r,this.$content=t(M.escapeHash(r[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var o=this.index;this.index=Math.max(this.$tabLinks.index(r),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){"function"==typeof n.options.onShow&&n.options.onShow.call(n,n.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),"function"==typeof this.options.onShow&&this.options.onShow.call(this,this.$content[0]),a.length&&!a.is(this.$content)&&(a[0].style.display="none",a.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(o),e.preventDefault()}}},{key:"_createIndicator",value:function(){var t=this,e=document.createElement("li");e.classList.add("indicator"),this.el.appendChild(e),this._indicator=e,setTimeout(function(){t._indicator.style.left=t._calcLeftPos(t.$activeTabLink)+"px",t._indicator.style.right=t._calcRightPos(t.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=t(this.$tabLinks.filter('[href="'+location.hash+'"]')),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=t(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var e=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var n=t();this.$tabLinks.each(function(e){var i=t(M.escapeHash(e.hash));i.addClass("carousel-item"),n=n.add(i)});var i=t('<div class="tabs-content carousel carousel-slider"></div>');n.first().before(i),i.append(n),n[0].style.display="";var r=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(i[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(n){var i=e.index;e.index=t(n).index(),e.$activeTabLink.removeClass("active"),e.$activeTabLink=e.$tabLinks.eq(e.index),e.$activeTabLink.addClass("active"),e._animateIndicator(i),"function"==typeof e.options.onShow&&e.options.onShow.call(e,e.$content[0])}}),this._tabsCarousel.set(r)}},{key:"_teardownSwipeableTabs",value:function(){var t=this._tabsCarousel.$el;this._tabsCarousel.destroy(),t.after(t.children()),t.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(e){if(e.hash){var n=t(M.escapeHash(e.hash));n.length&&(n[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(e){if(e.hash){var n=t(M.escapeHash(e.hash));n.length&&(n[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(t){return Math.ceil(this.tabsWidth-t.position().left-t[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(t){return Math.floor(t.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(t){var n=0,i=0;0<=this.index-t?n=90:i=90;var r={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:n},right:{value:this._calcRightPos(this.$activeTabLink),delay:i},duration:this.options.duration,easing:"easeOutQuad"};e.remove(this._indicator),e(r)}},{key:"select",value:function(t){var e=this.$tabLinks.filter('[href="#'+t+'"]');e.length&&e.trigger("click")}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Tabs}},{key:"defaults",get:function(){return n}}]),r}();M.Tabs=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tabs","M_Tabs")}(cash,M.anime),function(t,e){"use strict";var n={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return(i.el.M_Tooltip=i).options=t.extend({},r.defaults,n),i.isOpen=!1,i.isHovered=!1,i.isFocused=!1,i._appendTooltipEl(),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){t(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var t=document.createElement("div");t.classList.add("material-tooltip"),this.tooltipEl=t;var e=document.createElement("div");e.classList.add("tooltip-content"),e.innerHTML=this.options.html,t.appendChild(e),document.body.appendChild(t)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(e){this.isOpen||(e=void 0===e||void 0,this.isOpen=!0,this.options=t.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(e))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var t=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){t.isHovered||t.isFocused||t._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(t){var e=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(e.isHovered||e.isFocused||t)&&e._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var e,n=this.el,i=this.tooltipEl,r=n.offsetHeight,a=n.offsetWidth,o=i.offsetHeight,s=i.offsetWidth,l=this.options.margin,c=void 0,u=void 0;this.xMovement=0,this.yMovement=0,c=n.getBoundingClientRect().top+M.getDocumentScrollTop(),u=n.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(c+=-o-l,u+=a/2-s/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(c+=r/2-o/2,u+=a+l,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(c+=r/2-o/2,u+=-s-l,this.xMovement=-this.options.transitionMovement):(c+=r+l,u+=a/2-s/2,this.yMovement=this.options.transitionMovement),e=this._repositionWithinScreen(u,c,s,o),t(i).css({top:e.y+"px",left:e.x+"px"})}},{key:"_repositionWithinScreen",value:function(t,e,n,i){var r=M.getDocumentScrollLeft(),a=M.getDocumentScrollTop(),o=t-r,s=e-a,l=this.options.margin+this.options.transitionMovement,c=M.checkWithinContainer(document.body,{left:o,top:s,width:n,height:i},l);return c.left?o=l:c.right&&(o-=o+n-window.innerWidth),c.top?s=l:c.bottom&&(s-=s+i-window.innerHeight),{x:o+r,y:s+a}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",e.remove(this.tooltipEl),e({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){e.remove(this.tooltipEl),e({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var t={},e=this.el.getAttribute("data-tooltip"),n=this.el.getAttribute("data-position");return e&&(t.html=e),n&&(t.position=n),t}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Tooltip}},{key:"defaults",get:function(){return n}}]),r}();M.Tooltip=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tooltip","M_Tooltip")}(cash,M.anime),function(t){"use strict";var e=e||{},n=document.querySelectorAll.bind(document);function i(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e}var r={duration:750,show:function(t,e){if(2===t.button)return!1;var n=e||this,a=document.createElement("div");a.className="waves-ripple",n.appendChild(a);var o,s,l,c,u,h,d,f=(h={top:0,left:0},s=(d=(o=n)&&o.ownerDocument).documentElement,void 0!==o.getBoundingClientRect&&(h=o.getBoundingClientRect()),l=null!==(u=c=d)&&u===u.window?c:9===c.nodeType&&c.defaultView,{top:h.top+l.pageYOffset-s.clientTop,left:h.left+l.pageXOffset-s.clientLeft}),p=t.pageY-f.top,v=t.pageX-f.left,g="scale("+n.clientWidth/100*10+")";"touches"in t&&(p=t.touches[0].pageY-f.top,v=t.touches[0].pageX-f.left),a.setAttribute("data-hold",Date.now()),a.setAttribute("data-scale",g),a.setAttribute("data-x",v),a.setAttribute("data-y",p);var m={top:p+"px",left:v+"px"};a.className=a.className+" waves-notransition",a.setAttribute("style",i(m)),a.className=a.className.replace("waves-notransition",""),m["-webkit-transform"]=g,m["-moz-transform"]=g,m["-ms-transform"]=g,m["-o-transform"]=g,m.transform=g,m.opacity="1",m["-webkit-transition-duration"]=r.duration+"ms",m["-moz-transition-duration"]=r.duration+"ms",m["-o-transition-duration"]=r.duration+"ms",m["transition-duration"]=r.duration+"ms",m["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",m["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",m["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",m["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",a.setAttribute("style",i(m))},hide:function(t){a.touchup(t);var e=this,n=null,o=e.getElementsByClassName("waves-ripple");if(!(0<o.length))return!1;var s=(n=o[o.length-1]).getAttribute("data-x"),l=n.getAttribute("data-y"),c=n.getAttribute("data-scale"),u=350-(Date.now()-Number(n.getAttribute("data-hold")));u<0&&(u=0),setTimeout(function(){n.setAttribute("style",i({top:l+"px",left:s+"px",opacity:"0","-webkit-transition-duration":r.duration+"ms","-moz-transition-duration":r.duration+"ms","-o-transition-duration":r.duration+"ms","transition-duration":r.duration+"ms","-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c})),setTimeout(function(){try{e.removeChild(n)}catch(t){return!1}},r.duration)},u)},wrapInput:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=n.className+" waves-input-wrapper";var a=n.getAttribute("style");a||(a=""),r.setAttribute("style",a),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(r,n),r.appendChild(n)}}}},a={touches:0,allowEvent:function(t){var e=!0;return"touchstart"===t.type?a.touches+=1:"touchend"===t.type||"touchcancel"===t.type?setTimeout(function(){0<a.touches&&(a.touches-=1)},500):"mousedown"===t.type&&0<a.touches&&(e=!1),e},touchup:function(t){a.allowEvent(t)}};function o(e){var n=function(t){if(!1===a.allowEvent(t))return null;for(var e=null,n=t.target||t.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){e=n;break}n=n.parentNode}return e}(e);null!==n&&(r.show(e,n),"ontouchstart"in t&&(n.addEventListener("touchend",r.hide,!1),n.addEventListener("touchcancel",r.hide,!1)),n.addEventListener("mouseup",r.hide,!1),n.addEventListener("mouseleave",r.hide,!1),n.addEventListener("dragend",r.hide,!1))}e.displayEffect=function(e){"duration"in(e=e||{})&&(r.duration=e.duration),r.wrapInput(n(".waves-effect")),"ontouchstart"in t&&document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("mousedown",o,!1)},e.attach=function(e){"input"===e.tagName.toLowerCase()&&(r.wrapInput([e]),e=e.parentNode),"ontouchstart"in t&&e.addEventListener("touchstart",o,!1),e.addEventListener("mousedown",o,!1)},t.Waves=e,document.addEventListener("DOMContentLoaded",function(){e.displayEffect()},!1)}(window),function(t,e){"use strict";var n={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},i=function(){function i(e){_classCallCheck(this,i),this.options=t.extend({},i.defaults,e),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,0===i._toasts.length&&i._createContainer(),i._toasts.push(this);var n=this._createToast();(n.M_Toast=this).el=n,this.$el=t(n),this._animateIn(),this._setTimer()}return _createClass(i,[{key:"_createToast",value:function(){var e=document.createElement("div");return e.classList.add("toast"),this.options.classes.length&&t(e).addClass(this.options.classes),("object"==typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"==typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"==typeof this.message.nodeName)?e.appendChild(this.message):this.message.jquery?t(e).append(this.message[0]):e.innerHTML=this.message,i._container.appendChild(e),e}},{key:"_animateIn",value:function(){e({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var t=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){t.panning||(t.timeRemaining-=20),t.timeRemaining<=0&&t.dismiss()},20))}},{key:"dismiss",value:function(){var t=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+n+"px)",this.el.style.opacity=0),e({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){"function"==typeof t.options.completeCallback&&t.options.completeCallback(),t.$el.remove(),i._toasts.splice(i._toasts.indexOf(t),1),0===i._toasts.length&&i._removeContainer()}})}}],[{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Toast}},{key:"_createContainer",value:function(){var t=document.createElement("div");t.setAttribute("id","toast-container"),t.addEventListener("touchstart",i._onDragStart),t.addEventListener("touchmove",i._onDragMove),t.addEventListener("touchend",i._onDragEnd),t.addEventListener("mousedown",i._onDragStart),document.addEventListener("mousemove",i._onDragMove),document.addEventListener("mouseup",i._onDragEnd),document.body.appendChild(t),i._container=t}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",i._onDragMove),document.removeEventListener("mouseup",i._onDragEnd),t(i._container).remove(),i._container=null}},{key:"_onDragStart",value:function(e){if(e.target&&t(e.target).closest(".toast").length){var n=t(e.target).closest(".toast")[0].M_Toast;n.panning=!0,(i._draggedToast=n).el.classList.add("panning"),n.el.style.transition="",n.startingXPos=i._xPos(e),n.time=Date.now(),n.xPos=i._xPos(e)}}},{key:"_onDragMove",value:function(t){if(i._draggedToast){t.preventDefault();var e=i._draggedToast;e.deltaX=Math.abs(e.xPos-i._xPos(t)),e.xPos=i._xPos(t),e.velocityX=e.deltaX/(Date.now()-e.time),e.time=Date.now();var n=e.xPos-e.startingXPos,r=e.el.offsetWidth*e.options.activationPercent;e.el.style.transform="translateX("+n+"px)",e.el.style.opacity=1-Math.abs(n/r)}}},{key:"_onDragEnd",value:function(){if(i._draggedToast){var t=i._draggedToast;t.panning=!1,t.el.classList.remove("panning");var e=t.el.offsetWidth*t.options.activationPercent;Math.abs(t.xPos-t.startingXPos)>e||1<t.velocityX?(t.wasSwiped=!0,t.dismiss()):(t.el.style.transition="transform .2s, opacity .2s",t.el.style.transform="",t.el.style.opacity=""),i._draggedToast=null}}},{key:"_xPos",value:function(t){return t.targetTouches&&1<=t.targetTouches.length?t.targetTouches[0].clientX:t.clientX}},{key:"dismissAll",value:function(){for(var t in i._toasts)i._toasts[t].dismiss()}},{key:"defaults",get:function(){return n}}]),i}();i._toasts=[],i._container=null,i._draggedToast=null,M.Toast=i,M.toast=function(t){return new i(t)}}(cash,M.anime),function(t,e){"use strict";var n={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return(i.el.M_Sidenav=i).id=i.$el.attr("id"),i.options=t.extend({},r.defaults,n),i.isOpen=!1,i.isFixed=i.el.classList.contains("sidenav-fixed"),i.isDragged=!1,i.lastWindowWidth=window.innerWidth,i.lastWindowHeight=window.innerHeight,i._createOverlay(),i._createDragTarget(),i._setupEventHandlers(),i._setupClasses(),i._setupFixed(),r._sidenavs.push(i),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var t=r._sidenavs.indexOf(this);0<=t&&r._sidenavs.splice(t,1)}},{key:"_createOverlay",value:function(){var t=document.createElement("div");this._closeBound=this.close.bind(this),t.classList.add("sidenav-overlay"),t.addEventListener("click",this._closeBound),document.body.appendChild(t),this._overlay=t}},{key:"_setupEventHandlers",value:function(){0===r._sidenavs.length&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){1===r._sidenavs.length&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(e){var n=t(e.target).closest(".sidenav-trigger");if(e.target&&n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Sidenav;r&&r.open(n),e.preventDefault()}}},{key:"_startDrag",value:function(t){var n=t.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=n,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,e.remove(this.el),e.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(t){var e=t.targetTouches[0].clientX,n=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-e),this._xPos=e,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==n&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(t){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(t),this._dragMoveUpdate(t);var e=this._xPos-this._startingXpos,n=0<e?"right":"left";e=Math.min(this._width,Math.abs(e)),this.options.edge===n&&(e=0);var i=e,r="translateX(-100%)";"right"===this.options.edge&&(r="translateX(100%)",i=-i),this.percentOpen=Math.min(1,e/this._width),this.el.style.transform=r+" translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(.2<this.percentOpen?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(t){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(t),this._dragMoveUpdate(t);var e=this._xPos-this._startingXpos,n=0<e?"right":"left";e=Math.min(this._width,Math.abs(e)),this.options.edge!==n&&(e=0);var i=-e;"right"===this.options.edge&&(i=-i),this.percentOpen=Math.min(1,1-e/this._width),this.el.style.transform="translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(.8<this.percentOpen?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(e){t(e.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(992<window.innerWidth?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){"right"===this.options.edge&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&992<window.innerWidth}},{key:"_createDragTarget",value:function(){var t=document.createElement("div");t.classList.add("drag-target"),document.body.appendChild(t),this.dragTarget=t}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){!0!==this.isOpen&&(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(e.remove(this.el),e({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&1==this.percentOpen||this._animateIn()))}},{key:"close",value:function(){!1!==this.isOpen&&(this.isOpen=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()?this.el.style.transform="translateX("+("left"===this.options.edge?"-105%":"105%")+")":(this._enableBodyScrolling(),this.isDragged&&0==this.percentOpen?this._overlay.style.display="none":this._animateOut()))}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var t=this,n="left"===this.options.edge?-1:1;this.isDragged&&(n="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),e.remove(this.el),e({targets:this.el,translateX:[100*n+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){"function"==typeof t.options.onOpenEnd&&t.options.onOpenEnd.call(t,t.el)}})}},{key:"_animateOverlayIn",value:function(){var n=0;this.isDragged?n=this.percentOpen:t(this._overlay).css({display:"block"}),e.remove(this._overlay),e({targets:this._overlay,opacity:[n,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var t=this,n="left"===this.options.edge?-1:1,i=0;this.isDragged&&(i="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),e.remove(this.el),e({targets:this.el,translateX:[100*i+"%",105*n+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){"function"==typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t,t.el)}})}},{key:"_animateOverlayOut",value:function(){var n=this;e.remove(this._overlay),e({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){t(n._overlay).css("display","none")}})}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Sidenav}},{key:"defaults",get:function(){return n}}]),r}();i._sidenavs=[],M.Sidenav=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"sidenav","M_Sidenav")}(cash,M.anime),function(t,e){"use strict";var n={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(t){return'a[href="#'+t+'"]'}},i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return(i.el.M_ScrollSpy=i).options=t.extend({},r.defaults,n),r._elements.push(i),r._count++,r._increment++,i.tickId=-1,i.id=r._increment,i._setupEventHandlers(),i._handleWindowScroll(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){r._elements.splice(r._elements.indexOf(this),1),r._elementsInView.splice(r._elementsInView.indexOf(this),1),r._visibleElements.splice(r._visibleElements.indexOf(this.$el),1),r._count--,this._removeEventHandlers(),t(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var t=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=t.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),1===r._count&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){0===r._count&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(n){for(var i=t(n.target),a=r._elements.length-1;0<=a;a--){var o=r._elements[a];if(i.is('a[href="#'+o.$el.attr("id")+'"]')){n.preventDefault();var s=o.$el.offset().top+1;e({targets:[document.documentElement,document.body],scrollTop:s-o.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){r._ticks++;for(var t=M.getDocumentScrollTop(),e=M.getDocumentScrollLeft(),n=e+window.innerWidth,i=t+window.innerHeight,a=r._findElements(t,n,i,e),o=0;o<a.length;o++){var s=a[o];s.tickId<0&&s._enter(),s.tickId=r._ticks}for(var l=0;l<r._elementsInView.length;l++){var c=r._elementsInView[l],u=c.tickId;0<=u&&u!==r._ticks&&(c._exit(),c.tickId=-1)}r._elementsInView=a}},{key:"_enter",value:function(){(r._visibleElements=r._visibleElements.filter(function(t){return 0!=t.height()}))[0]?(t(this.options.getActiveElement(r._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),r._visibleElements[0][0].M_ScrollSpy&&this.id<r._visibleElements[0][0].M_ScrollSpy.id?r._visibleElements.unshift(this.$el):r._visibleElements.push(this.$el)):r._visibleElements.push(this.$el),t(this.options.getActiveElement(r._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var e=this;(r._visibleElements=r._visibleElements.filter(function(t){return 0!=t.height()}))[0]&&(t(this.options.getActiveElement(r._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),(r._visibleElements=r._visibleElements.filter(function(t){return t.attr("id")!=e.$el.attr("id")}))[0]&&t(this.options.getActiveElement(r._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_ScrollSpy}},{key:"_findElements",value:function(t,e,n,i){for(var a=[],o=0;o<r._elements.length;o++){var s=r._elements[o],l=t+s.options.scrollOffset||200;if(0<s.$el.height()){var c=s.$el.offset().top,u=s.$el.offset().left,h=u+s.$el.width(),d=c+s.$el.height();!(e<u||h<i||n<c||d<l)&&a.push(s)}}return a}},{key:"defaults",get:function(){return n}}]),r}();i._elements=[],i._elementsInView=[],i._visibleElements=[],i._count=0,i._increment=0,i._ticks=0,M.ScrollSpy=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(t){"use strict";var e={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(t,e,n){return t.indexOf(n)-e.indexOf(n)}},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return(r.el.M_Autocomplete=r).options=t.extend({},i.defaults,n),r.isOpen=!1,r.count=0,r.activeIndex=-1,r.$inputField=r.$el.closest(".input-field"),r.$active=t(),r._mousedown=!1,r._setupDropdown(),r._setupEventHandlers(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var e=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),t(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(n){e.selectOption(t(n))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(t){"keyup"===t.type&&(i._keydown=!1),this.count=0;var e=this.el.value.toLowerCase();13!==t.keyCode&&38!==t.keyCode&&40!==t.keyCode&&(this.oldVal===e||!M.tabPressed&&"focus"===t.type||this.open(),this.oldVal=e)}},{key:"_handleInputKeydown",value:function(e){i._keydown=!0;var n=e.keyCode,r=void 0,a=t(this.container).children("li").length;n===M.keys.ENTER&&0<=this.activeIndex?(r=t(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(r),e.preventDefault()):n!==M.keys.ARROW_UP&&n!==M.keys.ARROW_DOWN||(e.preventDefault(),n===M.keys.ARROW_UP&&0<this.activeIndex&&this.activeIndex--,n===M.keys.ARROW_DOWN&&this.activeIndex<a-1&&this.activeIndex++,this.$active.removeClass("active"),0<=this.activeIndex&&(this.$active=t(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(t){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(t){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(t){this._mousedown=!1}},{key:"_highlight",value:function(t,e){var n=e.find("img"),i=e.text().toLowerCase().indexOf(""+t.toLowerCase()),r=i+t.length-1,a=e.text().slice(0,i),o=e.text().slice(i,r+1),s=e.text().slice(r+1);e.html("<span>"+a+"<span class='highlight'>"+o+"</span>"+s+"</span>"),n.length&&e.prepend(n)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){t(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(t){var e=t.text().trim();this.el.value=e,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),"function"==typeof this.options.onAutocomplete&&this.options.onAutocomplete.call(this,e)}},{key:"_renderDropdown",value:function(e,n){var i=this;this._resetAutocomplete();var r=[];for(var a in e)if(e.hasOwnProperty(a)&&-1!==a.toLowerCase().indexOf(n)){if(this.count>=this.options.limit)break;r.push({data:e[a],key:a}),this.count++}this.options.sortFunction&&r.sort(function(t,e){return i.options.sortFunction(t.key.toLowerCase(),e.key.toLowerCase(),n.toLowerCase())});for(var o=0;o<r.length;o++){var s=r[o],l=t("<li></li>");l.append(s.data?'<img src="'+s.data+'" class="right circle"><span>'+s.key+"</span>":"<span>"+s.key+"</span>"),t(this.container).append(l),this._highlight(n,l)}}},{key:"open",value:function(){var t=this.el.value.toLowerCase();this._resetAutocomplete(),t.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,t)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(t){var e=this.el.value.toLowerCase();this.options.data=t,this.isOpen&&this._renderDropdown(t,e)}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Autocomplete}},{key:"defaults",get:function(){return e}}]),i}();n._keydown=!1,M.Autocomplete=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"autocomplete","M_Autocomplete")}(cash),function(t){M.updateTextFields=function(){t("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(e,n){var i=t(this);0<e.value.length||t(e).is(":focus")||e.autofocus||null!==i.attr("placeholder")?i.siblings("label").addClass("active"):e.validity?i.siblings("label").toggleClass("active",!0===e.validity.badInput):i.siblings("label").removeClass("active")})},M.validate_field=function(t){var e=null!==t.attr("data-length"),n=parseInt(t.attr("data-length")),i=t[0].value.length;0!==i||!1!==t[0].validity.badInput||t.is(":required")?t.hasClass("validate")&&(t.is(":valid")&&e&&i<=n||t.is(":valid")&&!e?(t.removeClass("invalid"),t.addClass("valid")):(t.removeClass("valid"),t.addClass("invalid"))):t.hasClass("validate")&&(t.removeClass("valid"),t.removeClass("invalid"))},M.textareaAutoResize=function(e){if(e instanceof Element&&(e=t(e)),e.length){var n=t(".hiddendiv").first();n.length||(n=t('<div class="hiddendiv common"></div>'),t("body").append(n));var i=e.css("font-family"),r=e.css("font-size"),a=e.css("line-height"),o=e.css("padding-top"),s=e.css("padding-right"),l=e.css("padding-bottom"),c=e.css("padding-left");r&&n.css("font-size",r),i&&n.css("font-family",i),a&&n.css("line-height",a),o&&n.css("padding-top",o),s&&n.css("padding-right",s),l&&n.css("padding-bottom",l),c&&n.css("padding-left",c),e.data("original-height")||e.data("original-height",e.height()),"off"===e.attr("wrap")&&n.css("overflow-wrap","normal").css("white-space","pre"),n.text(e[0].value+"\n");var u=n.html().replace(/\n/g,"<br>");n.html(u),n.css("width",0<e[0].offsetWidth&&0<e[0].offsetHeight?e.width()+"px":window.innerWidth/2+"px"),e.data("original-height")<=n.innerHeight()?e.css("height",n.innerHeight()+"px"):e[0].value.length<e.data("previous-length")&&e.css("height",e.data("original-height")+"px"),e.data("previous-length",e[0].value.length)}else console.error("No textarea element found")},t(document).ready(function(){var e="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";t(document).on("change",e,function(){0===this.value.length&&null===t(this).attr("placeholder")||t(this).siblings("label").addClass("active"),M.validate_field(t(this))}),t(document).ready(function(){M.updateTextFields()}),t(document).on("reset",function(n){var i=t(n.target);i.is("form")&&(i.find(e).removeClass("valid").removeClass("invalid"),i.find(e).each(function(e){this.value.length&&t(this).siblings("label").removeClass("active")}),setTimeout(function(){i.find("select").each(function(){this.M_FormSelect&&t(this).trigger("change")})},0))}),document.addEventListener("focus",function(n){t(n.target).is(e)&&t(n.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(n){var i=t(n.target);if(i.is(e)){var r=".prefix";0===i[0].value.length&&!0!==i[0].validity.badInput&&null===i.attr("placeholder")&&(r+=", label"),i.siblings(r).removeClass("active"),M.validate_field(i)}},!0),t(document).on("keyup","input[type=radio], input[type=checkbox]",function(e){if(e.which===M.keys.TAB)return t(this).addClass("tabbed"),void t(this).one("blur",function(e){t(this).removeClass("tabbed")})});var n=".materialize-textarea";t(n).each(function(){var e=t(this);e.data("original-height",e.height()),e.data("previous-length",this.value.length),M.textareaAutoResize(e)}),t(document).on("keyup",n,function(){M.textareaAutoResize(t(this))}),t(document).on("keydown",n,function(){M.textareaAutoResize(t(this))}),t(document).on("change",'.file-field input[type="file"]',function(){for(var e=t(this).closest(".file-field").find("input.file-path"),n=t(this)[0].files,i=[],r=0;r<n.length;r++)i.push(n[r].name);e[0].value=i.join(", "),e.trigger("change")})})}(cash),function(t,e){"use strict";var n={indicators:!0,height:400,duration:500,interval:6e3},i=function(i){function r(n,i){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,n,i));return(a.el.M_Slider=a).options=t.extend({},r.defaults,i),a.$slider=a.$el.find(".slides"),a.$slides=a.$slider.children("li"),a.activeIndex=a.$slides.filter(function(e){return t(e).hasClass("active")}).first().index(),-1!=a.activeIndex&&(a.$active=a.$slides.eq(a.activeIndex)),a._setSliderHeight(),a.$slides.find(".caption").each(function(t){a._animateCaptionIn(t,0)}),a.$slides.find("img").each(function(e){var n="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";t(e).attr("src")!==n&&(t(e).css("background-image",'url("'+t(e).attr("src")+'")'),t(e).attr("src",n))}),a._setupIndicators(),a.$active?a.$active.css("display","block"):(a.$slides.first().addClass("active"),e({targets:a.$slides.first()[0],opacity:1,duration:a.options.duration,easing:"easeOutQuad"}),a.activeIndex=0,a.$active=a.$slides.eq(a.activeIndex),a.options.indicators&&a.$indicators.eq(a.activeIndex).addClass("active")),a.$active.find("img").each(function(t){e({targets:a.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:a.options.duration,easing:"easeOutQuad"})}),a._setupEventHandlers(),a.start(),a}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(e){e.addEventListener("click",t._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var t=this;this.options.indicators&&this.$indicators.each(function(e){e.removeEventListener("click",t._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(e){var n=t(e.target).index();this.set(n)}},{key:"_handleInterval",value:function(){var t=this.$slider.find(".active").index();this.$slides.length===t+1?t=0:t+=1,this.set(t)}},{key:"_animateCaptionIn",value:function(n,i){var r={targets:n,opacity:0,duration:i,easing:"easeOutQuad"};t(n).hasClass("center-align")?r.translateY=-100:t(n).hasClass("right-align")?r.translateX=100:t(n).hasClass("left-align")&&(r.translateX=-100),e(r)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.$el.css("height",this.options.indicators?this.options.height+40+"px":this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var e=this;this.options.indicators&&(this.$indicators=t('<ul class="indicators"></ul>'),this.$slides.each(function(n,i){var r=t('<li class="indicator-item"></li>');e.$indicators.append(r[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(t){var n=this;if(t>=this.$slides.length?t=0:t<0&&(t=this.$slides.length-1),this.activeIndex!=t){this.$active=this.$slides.eq(this.activeIndex);var i=this.$active.find(".caption");this.$active.removeClass("active"),e({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){n.$slides.not(".active").each(function(t){e({targets:t,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(i[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(t).addClass("active")),e({targets:this.$slides.eq(t)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),e({targets:this.$slides.eq(t).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(t).addClass("active"),this.activeIndex=t,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var t=this.activeIndex+1;t>=this.$slides.length?t=0:t<0&&(t=this.$slides.length-1),this.set(t)}},{key:"prev",value:function(){var t=this.activeIndex-1;t>=this.$slides.length?t=0:t<0&&(t=this.$slides.length-1),this.set(t)}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Slider}},{key:"defaults",get:function(){return n}}]),r}();M.Slider=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"slider","M_Slider")}(cash,M.anime),function(t,e){t(document).on("click",".card",function(n){if(t(this).children(".card-reveal").length){var i=t(n.target).closest(".card");void 0===i.data("initialOverflow")&&i.data("initialOverflow",void 0===i.css("overflow")?"":i.css("overflow"));var r=t(this).find(".card-reveal");t(n.target).is(t(".card-reveal .card-title"))||t(n.target).is(t(".card-reveal .card-title i"))?e({targets:r[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(e){t(e.animatables[0].target).css({display:"none"}),i.css("overflow",i.data("initialOverflow"))}}):(t(n.target).is(t(".card .activator"))||t(n.target).is(t(".card .activator i")))&&(i.css("overflow","hidden"),r.css({display:"block"}),e({targets:r[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(t){"use strict";var e={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return(r.el.M_Chips=r).options=t.extend({},i.defaults,n),r.$el.addClass("chips input-field"),r.chipsData=[],r.$chips=t(),r._setupInput(),r.hasAutocomplete=0<Object.keys(r.options.autocompleteOptions).length,r.$input.attr("id")||r.$input.attr("id",M.guid()),r.options.data.length&&(r.chipsData=r.options.data,r._renderChips(r.chipsData)),r.hasAutocomplete&&r._setupAutocomplete(),r._setPlaceholder(),r._setupLabel(),r._setupEventHandlers(),r}return _inherits(i,Component),_createClass(i,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",i._handleChipsKeydown),document.addEventListener("keyup",i._handleChipsKeyup),this.el.addEventListener("blur",i._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",i._handleChipsKeydown),document.removeEventListener("keyup",i._handleChipsKeyup),this.el.removeEventListener("blur",i._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(e){var n=t(e.target).closest(".chip"),i=t(e.target).is(".close");if(n.length){var r=n.index();i?(this.deleteChip(r),this.$input[0].focus()):this.selectChip(r)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(t){if(i._keydown=!0,13===t.keyCode){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;t.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else 8!==t.keyCode&&37!==t.keyCode||""!==this.$input[0].value||!this.chipsData.length||(t.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(e){if(e.tag){var n=document.createElement("div"),i=document.createElement("i");if(n.classList.add("chip"),n.textContent=e.tag,n.setAttribute("tabindex",0),t(i).addClass("material-icons close"),i.textContent="close",e.image){var r=document.createElement("img");r.setAttribute("src",e.image),n.insertBefore(r,n.firstChild)}return n.appendChild(i),n}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var t=0;t<this.chipsData.length;t++){var e=this._renderChip(this.chipsData[t]);this.$el.append(e),this.$chips.add(e)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var t=this;this.options.autocompleteOptions.onAutocomplete=function(e){t.addChip({tag:e}),t.$input[0].value="",t.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=t("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){void 0!==this.chipsData&&!this.chipsData.length&&this.options.placeholder?t(this.$input).prop("placeholder",this.options.placeholder):(void 0===this.chipsData||this.chipsData.length)&&this.options.secondaryPlaceholder&&t(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(t){if(t.hasOwnProperty("tag")&&""!==t.tag){for(var e=!1,n=0;n<this.chipsData.length;n++)if(this.chipsData[n].tag===t.tag){e=!0;break}return!e}return!1}},{key:"addChip",value:function(e){if(this._isValid(e)&&!(this.chipsData.length>=this.options.limit)){var n=this._renderChip(e);this.$chips.add(n),this.chipsData.push(e),t(this.$input).before(n),this._setPlaceholder(),"function"==typeof this.options.onChipAdd&&this.options.onChipAdd.call(this,this.$el,n)}}},{key:"deleteChip",value:function(e){var n=this.$chips.eq(e);this.$chips.eq(e).remove(),this.$chips=this.$chips.filter(function(e){return 0<=t(e).index()}),this.chipsData.splice(e,1),this._setPlaceholder(),"function"==typeof this.options.onChipDelete&&this.options.onChipDelete.call(this,this.$el,n[0])}},{key:"selectChip",value:function(t){var e=this.$chips.eq(t);(this._selectedChip=e)[0].focus(),"function"==typeof this.options.onChipSelect&&this.options.onChipSelect.call(this,this.$el,e[0])}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Chips}},{key:"_handleChipsKeydown",value:function(e){i._keydown=!0;var n=t(e.target).closest(".chips"),r=e.target&&n.length;if(!t(e.target).is("input, textarea")&&r){var a=n[0].M_Chips;if(8===e.keyCode||46===e.keyCode){e.preventDefault();var o=a.chipsData.length;if(a._selectedChip){var s=a._selectedChip.index();a.deleteChip(s),a._selectedChip=null,o=Math.max(s-1,0)}a.chipsData.length&&a.selectChip(o)}else if(37===e.keyCode){if(a._selectedChip){var l=a._selectedChip.index()-1;if(l<0)return;a.selectChip(l)}}else if(39===e.keyCode&&a._selectedChip){var c=a._selectedChip.index()+1;c>=a.chipsData.length?a.$input[0].focus():a.selectChip(c)}}}},{key:"_handleChipsKeyup",value:function(t){i._keydown=!1}},{key:"_handleChipsBlur",value:function(e){i._keydown||(t(e.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return e}}]),i}();n._keydown=!1,M.Chips=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"chips","M_Chips"),t(document).ready(function(){t(document.body).on("click",".chip .close",function(){var e=t(this).closest(".chips");e.length&&e[0].M_Chips||t(this).closest(".chip").remove()})})}(cash),function(t){"use strict";var e={top:0,bottom:1/0,offset:0,onPositionChange:null},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return(r.el.M_Pushpin=r).options=t.extend({},i.defaults,n),r.originalOffset=r.el.offsetTop,i._pushpins.push(r),r._setupEventHandlers(),r._updatePosition(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var t=i._pushpins.indexOf(this);i._pushpins.splice(t,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",i._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",i._updateElements)}},{key:"_updatePosition",value:function(){var t=M.getDocumentScrollTop()+this.options.offset;this.options.top<=t&&this.options.bottom>=t&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pinned")),t<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-top")),t>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px","function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Pushpin}},{key:"_updateElements",value:function(){for(var t in i._pushpins)i._pushpins[t]._updatePosition()}},{key:"defaults",get:function(){return e}}]),i}();n._pushpins=[],M.Pushpin=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"pushpin","M_Pushpin")}(cash),function(t,e){"use strict";var n={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};t.fn.reverse=[].reverse;var i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return(i.el.M_FloatingActionButton=i).options=t.extend({},r.defaults,n),i.isOpen=!1,i.$anchor=i.$el.children("a").first(),i.$menu=i.$el.children("ul").first(),i.$floatingBtns=i.$el.find("ul .btn-floating"),i.$floatingBtnsReverse=i.$el.find("ul .btn-floating").reverse(),i.offsetY=0,i.offsetX=0,i.$el.addClass("direction-"+i.options.direction),"top"===i.options.direction?i.offsetY=40:"right"===i.options.direction?i.offsetX=-40:"bottom"===i.options.direction?i.offsetY=-40:i.offsetX=40,i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(e){t(e.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var t=this;this.$el.addClass("active");var n=0;this.$floatingBtnsReverse.each(function(i){e({targets:i,opacity:1,scale:[.4,1],translateY:[t.offsetY,0],translateX:[t.offsetX,0],duration:275,delay:n,easing:"easeInOutQuad"}),n+=40})}},{key:"_animateOutFAB",value:function(){var t=this;this.$floatingBtnsReverse.each(function(n){e.remove(n),e({targets:n,opacity:0,scale:.4,translateY:t.offsetY,translateX:t.offsetX,duration:175,easing:"easeOutQuad",complete:function(){t.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var e,n=this,i=window.innerWidth,r=window.innerHeight,a=this.el.getBoundingClientRect(),o=t('<div class="fab-backdrop"></div>'),s=this.$anchor.css("background-color");this.$anchor.append(o),this.offsetX=a.left-i/2+a.width/2,this.offsetY=r-a.bottom,e=i/o[0].clientWidth,this.btnBottom=a.bottom,this.btnLeft=a.left,this.btnWidth=a.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),o.css({"background-color":s}),setTimeout(function(){n.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),n.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){n.$el.css({overflow:"hidden","background-color":s}),o.css({transform:"scale("+e+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),n.$menu.children("li").children("a").css({opacity:1}),n._handleDocumentClickBound=n._handleDocumentClick.bind(n),window.addEventListener("scroll",n._handleCloseBound,!0),document.body.addEventListener("click",n._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var t=this,e=window.innerWidth,n=window.innerHeight,i=this.$el.find(".fab-backdrop"),r=this.$anchor.css("background-color");this.offsetX=this.btnLeft-e/2+this.btnWidth/2,this.offsetY=n-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),i.css({transform:"scale(0)","background-color":r}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){i.remove(),t.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-t.offsetX+"px,0,0)"}),t.$anchor.css({overflow:"",transform:"translate3d(0,"+t.offsetY+"px,0)"}),setTimeout(function(){t.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),t.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_FloatingActionButton}},{key:"defaults",get:function(){return n}}]),r}();M.FloatingActionButton=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(t){"use strict";var e={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"\u2039",nextMonth:"\u203a",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));(r.el.M_Datepicker=r).options=t.extend({},i.defaults,n),n&&n.hasOwnProperty("i18n")&&"object"==typeof n.i18n&&(r.options.i18n=t.extend({},i.defaults.i18n,n.i18n)),r.options.minDate&&r.options.minDate.setHours(0,0,0,0),r.options.maxDate&&r.options.maxDate.setHours(0,0,0,0),r.id=M.guid(),r._setupVariables(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupEventHandlers(),r.options.defaultDate||(r.options.defaultDate=new Date(Date.parse(r.el.value)));var a=r.options.defaultDate;return i._isDate(a)?r.options.setDefaultDate?(r.setDate(a,!0),r.setInputValue()):r.gotoDate(a):r.gotoDate(new Date),r.isOpen=!1,r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),t(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var t=this.calendarEl.querySelector(".orig-select-year");t&&M.FormSelect.getInstance(t).destroy();var e=this.calendarEl.querySelector(".orig-select-month");e&&M.FormSelect.getInstance(e).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(t(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var t=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){t.isOpen=!1}})}},{key:"toString",value:function(t){var e=this;return t=t||this.options.format,i._isDate(this.date)?t.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(function(t){return e.formats[t]?e.formats[t]():t}).join(""):""}},{key:"setDate",value:function(t,e){if(!t)return this.date=null,this._renderDateDisplay(),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),i._isDate(t)){var n=this.options.minDate,r=this.options.maxDate;i._isDate(n)&&t<n?t=n:i._isDate(r)&&r<t&&(t=r),this.date=new Date(t.getTime()),this._renderDateDisplay(),i._setToStartOfDay(this.date),this.gotoDate(this.date),e||"function"!=typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var t=i._isDate(this.date)?this.date:new Date,e=this.options.i18n,n=e.weekdaysShort[t.getDay()],r=e.monthsShort[t.getMonth()],a=t.getDate();this.yearTextEl.innerHTML=t.getFullYear(),this.dateTextEl.innerHTML=n+", "+r+" "+a}},{key:"gotoDate",value:function(t){var e=!0;if(i._isDate(t)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),a=t.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),e=a<n.getTime()||r.getTime()<a}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),11<t.month&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(t,e,n){var r=this.options,a=new Date,o=i._getDaysInMonth(t,e),s=new Date(t,e,1).getDay(),l=[],c=[];i._setToStartOfDay(a),0<r.firstDay&&(s-=r.firstDay)<0&&(s+=7);for(var u=0===e?11:e-1,h=11===e?0:e+1,d=0===e?t-1:t,f=11===e?t+1:t,p=i._getDaysInMonth(d,u),v=o+s,g=v;7<g;)g-=7;v+=7-g;for(var m=!1,y=0,_=0;y<v;y++){var x=new Date(t,e,y-s+1),b=!!i._isDate(this.date)&&i._compareDates(x,this.date),w=i._compareDates(x,a),k=-1!==r.events.indexOf(x.toDateString()),T=y<s||o+s<=y,M=y-s+1,A=e,C=t,L=r.startRange&&i._compareDates(r.startRange,x),S=r.endRange&&i._compareDates(r.endRange,x),E=r.startRange&&r.endRange&&r.startRange<x&&x<r.endRange;T&&(y<s?(M=p+M,A=u,C=d):(M-=o,A=h,C=f));var O={day:M,month:A,year:C,hasEvent:k,isSelected:b,isToday:w,isDisabled:r.minDate&&x<r.minDate||r.maxDate&&x>r.maxDate||r.disableWeekends&&i._isWeekend(x)||r.disableDayFn&&r.disableDayFn(x),isEmpty:T,isStartRange:L,isEndRange:S,isInRange:E,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths};c.push(this.renderDay(O)),7==++_&&(l.push(this.renderRow(c,r.isRTL,m)),_=0,m=!(c=[]))}return this.renderTable(r,l,n)}},{key:"renderDay",value:function(t){var e=[],n="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),n="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'" aria-selected="'+n+'"><button class="datepicker-day-button" type="button" data-year="'+t.year+'" data-month="'+t.month+'" data-day="'+t.day+'">'+t.day+"</button></td>"}},{key:"renderRow",value:function(t,e,n){return'<tr class="datepicker-row'+(n?" is-selected":"")+'">'+(e?t.reverse():t).join("")+"</tr>"}},{key:"renderTable",value:function(t,e,n){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+n+'">'+this.renderHead(t)+this.renderBody(e)+"</table></div>"}},{key:"renderHead",value:function(t){var e=void 0,n=[];for(e=0;e<7;e++)n.push('<th scope="col"><abbr title="'+this.renderDayName(t,e)+'">'+this.renderDayName(t,e,!0)+"</abbr></th>");return"<thead><tr>"+(t.isRTL?n.reverse():n).join("")+"</tr></thead>"}},{key:"renderBody",value:function(t){return"<tbody>"+t.join("")+"</tbody>"}},{key:"renderTitle",value:function(e,n,i,r,a,o){var s,l,c=void 0,u=void 0,h=void 0,d=this.options,f=i===d.minYear,p=i===d.maxYear,v='<div id="'+o+'" class="datepicker-controls" role="heading" aria-live="assertive">',g=!0,m=!0;for(h=[],c=0;c<12;c++)h.push('<option value="'+(i===a?c-n:12+c-n)+'"'+(c===r?' selected="selected"':"")+(f&&c<d.minMonth||p&&c>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[c]+"</option>");for(s='<select class="datepicker-select orig-select-month" tabindex="-1">'+h.join("")+"</select>",t.isArray(d.yearRange)?(c=d.yearRange[0],u=d.yearRange[1]+1):(c=i-d.yearRange,u=1+i+d.yearRange),h=[];c<u&&c<=d.maxYear;c++)c>=d.minYear&&h.push('<option value="'+c+'" '+(c===i?'selected="selected"':"")+">"+c+"</option>");return l='<select class="datepicker-select orig-select-year" tabindex="-1">'+h.join("")+"</select>",v+='<button class="month-prev'+(g?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',v+='<div class="selects-container">',v+=d.showMonthAfterYear?l+s:s+l,v+="</div>",f&&(0===r||d.minMonth>=r)&&(g=!1),p&&(11===r||d.maxMonth<=r)&&(m=!1),(v+='<button class="month-next'+(m?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(t){if(this.isOpen||t){var e,n=this.options,i=n.minYear,r=n.maxYear,a=n.minMonth,o=n.maxMonth,s="";this._y<=i&&(this._y=i,!isNaN(a)&&this._m<a&&(this._m=a)),this._y>=r&&(this._y=r,!isNaN(o)&&this._m>o&&(this._m=o)),e="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var l=0;l<1;l++)this._renderDateDisplay(),s+=this.renderTitle(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,e)+this.render(this.calendars[l].year,this.calendars[l].month,e);this.destroySelects(),this.calendarEl.innerHTML=s;var c=this.calendarEl.querySelector(".orig-select-year"),u=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(c,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(u,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),c.addEventListener("change",this._handleYearChange.bind(this)),u.addEventListener("change",this._handleMonthChange.bind(this)),"function"==typeof this.options.onDraw&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var e=this;this.$modalEl=t(i._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return e.date.getDate()},dd:function(){var t=e.date.getDate();return(t<10?"0":"")+t},ddd:function(){return e.options.i18n.weekdaysShort[e.date.getDay()]},dddd:function(){return e.options.i18n.weekdays[e.date.getDay()]},m:function(){return e.date.getMonth()+1},mm:function(){var t=e.date.getMonth()+1;return(t<10?"0":"")+t},mmm:function(){return e.options.i18n.monthsShort[e.date.getMonth()]},mmmm:function(){return e.options.i18n.months[e.date.getMonth()]},yy:function(){return(""+e.date.getFullYear()).slice(2)},yyyy:function(){return e.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(t){t.which===M.keys.ENTER&&(t.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(e){if(this.isOpen){var n=t(e.target);n.hasClass("is-disabled")||(!n.hasClass("datepicker-day-button")||n.hasClass("is-empty")||n.parent().hasClass("is-disabled")?n.closest(".month-prev").length?this.prevMonth():n.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(e.target.getAttribute("data-year"),e.target.getAttribute("data-month"),e.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(t){this.gotoMonth(t.target.value)}},{key:"_handleYearChange",value:function(t){this.gotoYear(t.target.value)}},{key:"gotoMonth",value:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())}},{key:"gotoYear",value:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(t){var e=void 0;t.firedBy!==this&&(e=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),i._isDate(e)&&this.setDate(e))}},{key:"renderDayName",value:function(t,e,n){for(e+=t.firstDay;7<=e;)e-=7;return n?t.i18n.weekdaysAbbrev[e]:t.i18n.weekdays[e]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"_isDate",value:function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())}},{key:"_isWeekend",value:function(t){var e=t.getDay();return 0===e||6===e}},{key:"_setToStartOfDay",value:function(t){i._isDate(t)&&t.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(t,e){return[31,i._isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}},{key:"_isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"_compareDates",value:function(t,e){return t.getTime()===e.getTime()}},{key:"_setToStartOfDay",value:function(t){i._isDate(t)&&t.setHours(0,0,0,0)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Datepicker}},{key:"defaults",get:function(){return e}}]),i}();n._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"datepicker","M_Datepicker")}(cash),function(t){"use strict";var e={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return(r.el.M_Timepicker=r).options=t.extend({},i.defaults,n),r.id=M.guid(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupVariables(),r._setupEventHandlers(),r._clockSetup(),r._pickerSetup(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),t(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),t(this.spanHours).on("click",this.showView.bind(this,"hours")),t(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(t){t.which===M.keys.ENTER&&(t.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(t){t.preventDefault();var e=this.plate.getBoundingClientRect(),n=e.top;this.x0=e.left+this.options.dialRadius,this.y0=n+this.options.dialRadius,this.moved=!1;var r=i._Pos(t);this.dx=r.x-this.x0,this.dy=r.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(t){t.preventDefault();var e=i._Pos(t),n=e.x-this.x0,r=e.y-this.y0;this.moved=!0,this.setHand(n,r,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(e){var n=this;e.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var r=i._Pos(e),a=r.x-this.x0,o=r.y-this.y0;this.moved&&a===this.dx&&o===this.dy&&this.setHand(a,o),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(t(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){n.done()},this.options.duration/2)),"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=t(i._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var e=document.querySelector(this.options.container);this.options.container&&e?this.$modalEl.appendTo(e):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var t=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){"function"==typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t),t.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var e=t('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&e.css({visibility:""});var n=t('<div class="confirmation-btns"></div>');t('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(n).on("click",this.close.bind(this)),t('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(n).on("click",this.done.bind(this)),n.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=t('<div class="am-btn">AM</div>'),this.$pmBtn=t('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var t=this.options.dialRadius,e=this.options.tickRadius,n=2*t,r=i._createSVGEl("svg");r.setAttribute("class","timepicker-svg"),r.setAttribute("width",n),r.setAttribute("height",n);var a=i._createSVGEl("g");a.setAttribute("transform","translate("+t+","+t+")");var o=i._createSVGEl("circle");o.setAttribute("class","timepicker-canvas-bearing"),o.setAttribute("cx",0),o.setAttribute("cy",0),o.setAttribute("r",4);var s=i._createSVGEl("line");s.setAttribute("x1",0),s.setAttribute("y1",0);var l=i._createSVGEl("circle");l.setAttribute("class","timepicker-canvas-bg"),l.setAttribute("r",e),a.appendChild(s),a.appendChild(l),a.appendChild(o),r.appendChild(a),this._canvas.appendChild(r),this.hand=s,this.bg=l,this.bearing=o,this.g=a}},{key:"_buildHoursView",value:function(){var e=t('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var n=1;n<13;n+=1){var i=e.clone(),r=n/6*Math.PI,a=this.options.outerRadius;i.css({left:this.options.dialRadius+Math.sin(r)*a-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(r)*a-this.options.tickRadius+"px"}),i.html(0===n?"00":n),this.hoursView.appendChild(i[0])}else for(var o=0;o<24;o+=1){var s=e.clone(),l=o/6*Math.PI,c=0<o&&o<13?this.options.innerRadius:this.options.outerRadius;s.css({left:this.options.dialRadius+Math.sin(l)*c-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(l)*c-this.options.tickRadius+"px"}),s.html(0===o?"00":o),this.hoursView.appendChild(s[0])}}},{key:"_buildMinutesView",value:function(){for(var e=t('<div class="timepicker-tick"></div>'),n=0;n<60;n+=5){var r=e.clone(),a=n/30*Math.PI;r.css({left:this.options.dialRadius+Math.sin(a)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(a)*this.options.outerRadius-this.options.tickRadius+"px"}),r.html(i._addLeadingZero(n)),this.minutesView.appendChild(r[0])}}},{key:"_handleAmPmClick",value:function(e){var n=t(e.target);this.amOrPm=n.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var t=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&void 0!==t[1]&&(this.amOrPm=0<t[1].toUpperCase().indexOf("AM")?"AM":"PM",t[1]=t[1].replace("AM","").replace("PM","")),"now"===t[0]){var e=new Date(+new Date+this.options.fromNow);t=[e.getHours(),e.getMinutes()],this.options.twelveHour&&(this.amOrPm=12<=t[0]&&t[0]<24?"PM":"AM")}this.hours=+t[0]||0,this.minutes=+t[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=i._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(e,n){"minutes"===e&&t(this.hoursView).css("visibility");var i="hours"===e,r=i?this.hoursView:this.minutesView,a=i?this.minutesView:this.hoursView;this.currentView=e,t(this.spanHours).toggleClass("text-primary",i),t(this.spanMinutes).toggleClass("text-primary",!i),a.classList.add("timepicker-dial-out"),t(r).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){t(a).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(e){var n=this.currentView,i=this[n],r="hours"===n,a=i*(Math.PI/(r?6:30)),o=r&&0<i&&i<13?this.options.innerRadius:this.options.outerRadius,s=Math.sin(a)*o,l=-Math.cos(a)*o,c=this;e?(t(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){t(c.canvas).removeClass("timepicker-canvas-out"),c.setHand(s,l)},e)):this.setHand(s,l)}},{key:"setHand",value:function(t,e,n){var r=this,a=Math.atan2(t,-e),o="hours"===this.currentView,s=Math.PI/(o||n?6:30),l=Math.sqrt(t*t+e*e),c=o&&l<(this.options.outerRadius+this.options.innerRadius)/2,u=c?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(u=this.options.outerRadius),a<0&&(a=2*Math.PI+a);var h=Math.round(a/s);a=h*s,this.options.twelveHour?o?0===h&&(h=12):(n&&(h*=5),60===h&&(h=0)):o?(12===h&&(h=0),h=c?0===h?12:h:0===h?0:h+12):(n&&(h*=5),60===h&&(h=0)),this[this.currentView]!==h&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){r.vibrateTimer=null},100))),this[this.currentView]=h,o?this.spanHours.innerHTML=h:this.spanMinutes.innerHTML=i._addLeadingZero(h);var d=Math.sin(a)*(u-this.options.tickRadius),f=-Math.cos(a)*(u-this.options.tickRadius),p=Math.sin(a)*u,v=-Math.cos(a)*u;this.hand.setAttribute("x2",d),this.hand.setAttribute("y2",f),this.bg.setAttribute("cx",p),this.bg.setAttribute("cy",v)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(t,e){var n=this.el.value,r=e?"":i._addLeadingZero(this.hours)+":"+i._addLeadingZero(this.minutes);this.time=r,!e&&this.options.twelveHour&&(r=r+" "+this.amOrPm),(this.el.value=r)!==n&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"_addLeadingZero",value:function(t){return(t<10?"0":"")+t}},{key:"_createSVGEl",value:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}},{key:"_Pos",value:function(t){return t.targetTouches&&1<=t.targetTouches.length?{x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY}:{x:t.clientX,y:t.clientY}}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Timepicker}},{key:"defaults",get:function(){return e}}]),i}();n._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"timepicker","M_Timepicker")}(cash),function(t){"use strict";var e={},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return(r.el.M_CharacterCounter=r).options=t.extend({},i.defaults,n),r.isInvalid=!1,r.isValidLength=!1,r._setupCounter(),r._setupEventHandlers(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),t(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){t(this.counterEl).remove()}},{key:"updateCounter",value:function(){var e=+this.$el.attr("data-length"),n=this.el.value.length;this.isValidLength=n<=e;var i=n;e&&(i+="/"+e,this._validateInput()),t(this.counterEl).html(i)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_CharacterCounter}},{key:"defaults",get:function(){return e}}]),i}();M.CharacterCounter=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"characterCounter","M_CharacterCounter")}(cash),function(t){"use strict";var e={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return(r.el.M_Carousel=r).options=t.extend({},i.defaults,n),r.hasMultipleSlides=1<r.$el.find(".carousel-item").length,r.showIndicators=r.options.indicators&&r.hasMultipleSlides,r.noWrap=r.options.noWrap||!r.hasMultipleSlides,r.pressed=!1,r.dragged=!1,r.offset=r.target=0,r.images=[],r.itemWidth=r.$el.find(".carousel-item").first().innerWidth(),r.itemHeight=r.$el.find(".carousel-item").first().innerHeight(),r.dim=2*r.itemWidth+r.options.padding||1,r._autoScrollBound=r._autoScroll.bind(r),r._trackBound=r._track.bind(r),r.options.fullWidth&&(r.options.dist=0,r._setCarouselHeight(),r.showIndicators&&r.$el.find(".carousel-fixed-item").addClass("with-indicators")),r.$indicators=t('<ul class="indicators"></ul>'),r.$el.find(".carousel-item").each(function(e,n){if(r.images.push(e),r.showIndicators){var i=t('<li class="indicator-item"></li>');0===n&&i[0].classList.add("active"),r.$indicators.append(i)}}),r.showIndicators&&r.$el.append(r.$indicators),r.count=r.images.length,r.options.numVisible=Math.min(r.count,r.options.numVisible),r.xform="transform",["webkit","Moz","O","ms"].every(function(t){var e=t+"Transform";return void 0===document.body.style[e]||(r.xform=e,!1)}),r._setupEventHandlers(),r._scroll(r.offset),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),void 0!==window.ontouchstart&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(e,n){e.addEventListener("click",t._handleIndicatorClickBound)}));var e=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=e.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var t=this;void 0!==window.ontouchstart&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(e,n){e.removeEventListener("click",t._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(e){"mousedown"===e.type&&t(e.target).is("img")&&e.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(e),this.referenceY=this._ypos(e),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(t){var e=void 0,n=void 0,i=void 0;if(this.pressed)if(e=this._xpos(t),n=this._ypos(t),i=this.reference-e,Math.abs(this.referenceY-n)<30&&!this.verticalDragged)(2<i||i<-2)&&(this.dragged=!0,this.reference=e,this._scroll(this.offset+i));else{if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(t){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(10<this.velocity||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(e){if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1;if(!this.options.fullWidth){var n=t(e.target).closest(".carousel-item").index();0!=this._wrap(this.center)-n&&(e.preventDefault(),e.stopPropagation()),this._cycleTo(n)}}},{key:"_handleIndicatorClick",value:function(e){e.stopPropagation();var n=t(e.target).closest(".indicator-item");n.length&&this._cycleTo(n.index())}},{key:"_handleResize",value:function(t){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(t){var e=this,n=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),i=n.find("img").first();if(i.length)if(i[0].complete){var r=i.height();if(0<r)this.$el.css("height",r+"px");else{var a=i[0].naturalWidth,o=i[0].naturalHeight,s=this.$el.width()/a*o;this.$el.css("height",s+"px")}}else i.one("load",function(t,n){e.$el.css("height",t.offsetHeight+"px")});else if(!t){var l=n.height();this.$el.css("height",l+"px")}}},{key:"_xpos",value:function(t){return t.targetTouches&&1<=t.targetTouches.length?t.targetTouches[0].clientX:t.clientX}},{key:"_ypos",value:function(t){return t.targetTouches&&1<=t.targetTouches.length?t.targetTouches[0].clientY:t.clientY}},{key:"_wrap",value:function(t){return t>=this.count?t%this.count:t<0?this._wrap(this.count+t%this.count):t}},{key:"_track",value:function(){var t,e,n;e=(t=Date.now())-this.timestamp,this.timestamp=t,n=this.offset-this.frame,this.frame=this.offset,this.velocity=1e3*n/(1+e)*.8+.2*this.velocity}},{key:"_autoScroll",value:function(){var t=void 0,e=void 0;this.amplitude&&(t=Date.now()-this.timestamp,2<(e=this.amplitude*Math.exp(-t/this.options.duration))||e<-2?(this._scroll(this.target-e),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(e){var n=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),null!=this.scrollingTimeout&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){n.$el.removeClass("scrolling")},this.options.duration);var i,r,a,o,s=void 0,l=void 0,c=void 0,u=void 0,h=void 0,d=void 0,f=this.center,p=1/this.options.numVisible;if(this.offset="number"==typeof e?e:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),o=-(a=(r=this.offset-this.center*this.dim)<0?1:-1)*r*2/this.dim,i=this.count>>1,this.options.fullWidth?(c="translateX(0)",d=1):(c="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",c+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",d=1-p*o),this.showIndicators){var v=this.center%this.count,g=this.$indicators.find(".indicator-item.active");g.index()!==v&&(g.removeClass("active"),this.$indicators.find(".indicator-item").eq(v)[0].classList.add("active"))}for((!this.noWrap||0<=this.center&&this.center<this.count)&&(l=this.images[this._wrap(this.center)],t(l).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),l.classList.add("active")),this._updateItemStyle(l,d,0,c+" translateX("+-r/2+"px) translateX("+a*this.options.shift*o*s+"px) translateZ("+this.options.dist*o+"px)")),s=1;s<=i;++s)this.options.fullWidth?(u=this.options.dist,h=s===i&&r<0?1-o:1):(u=this.options.dist*(2*s+o*a),h=1-p*(2*s+o*a)),(!this.noWrap||this.center+s<this.count)&&(l=this.images[this._wrap(this.center+s)],this._updateItemStyle(l,h,-s,c+" translateX("+(this.options.shift+(this.dim*s-r)/2)+"px) translateZ("+u+"px)")),this.options.fullWidth?(u=this.options.dist,h=s===i&&0<r?1-o:1):(u=this.options.dist*(2*s-o*a),h=1-p*(2*s-o*a)),(!this.noWrap||0<=this.center-s)&&(l=this.images[this._wrap(this.center-s)],this._updateItemStyle(l,h,-s,c+" translateX("+((-this.dim*s-r)/2-this.options.shift)+"px) translateZ("+u+"px)"));(!this.noWrap||0<=this.center&&this.center<this.count)&&(l=this.images[this._wrap(this.center)],this._updateItemStyle(l,d,0,c+" translateX("+-r/2+"px) translateX("+a*this.options.shift*o+"px) translateZ("+this.options.dist*o+"px)"));var m=this.$el.find(".carousel-item").eq(this._wrap(this.center));f!==this.center&&"function"==typeof this.options.onCycleTo&&this.options.onCycleTo.call(this,m[0],this.dragged),"function"==typeof this.oneTimeCallback&&(this.oneTimeCallback.call(this,m[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(t,e,n,i){t.style[this.xform]=i,t.style.zIndex=n,t.style.opacity=e,t.style.visibility="visible"}},{key:"_cycleTo",value:function(t,e){var n=this.center%this.count-t;this.noWrap||(n<0?Math.abs(n+this.count)<Math.abs(n)&&(n+=this.count):0<n&&Math.abs(n-this.count)<n&&(n-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),n<0?this.target+=this.dim*Math.abs(n):0<n&&(this.target-=this.dim*n),"function"==typeof e&&(this.oneTimeCallback=e),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(t){(void 0===t||isNaN(t))&&(t=1);var e=this.center+t;if(e>=this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e)}},{key:"prev",value:function(t){(void 0===t||isNaN(t))&&(t=1);var e=this.center-t;if(e>=this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e)}},{key:"set",value:function(t,e){if((void 0===t||isNaN(t))&&(t=0),t>this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t,e)}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Carousel}},{key:"defaults",get:function(){return e}}]),i}();M.Carousel=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"carousel","M_Carousel")}(cash),function(t){"use strict";var e={onOpen:void 0,onClose:void 0},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return(r.el.M_TapTarget=r).options=t.extend({},i.defaults,n),r.isOpen=!1,r.$origin=t("#"+r.$el.attr("data-target")),r._setup(),r._calculatePositioning(),r._setupEventHandlers(),r}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var t=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=t.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(t){this.open()}},{key:"_handleOriginClick",value:function(t){this.close()}},{key:"_handleResize",value:function(t){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(e){t(e.target).closest(".tap-target-wrapper").length||(this.close(),e.preventDefault(),e.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=t(this.wrapper).find(".tap-target-wave")[0],this.originEl=t(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],t(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(t(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var e="fixed"===this.$origin.css("position");if(!e)for(var n=this.$origin.parents(),i=0;i<n.length&&!(e="fixed"==t(n[i]).css("position"));i++);var r=this.$origin.outerWidth(),a=this.$origin.outerHeight(),o=e?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,s=e?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,l=window.innerWidth,c=window.innerHeight,u=l/2,h=c/2,d=s<=u,f=u<s,p=o<=h,v=h<o,g=.25*l<=s&&s<=.75*l,m=this.$el.outerWidth(),y=this.$el.outerHeight(),_=o+a/2-y/2,x=s+r/2-m/2,b=e?"fixed":"absolute",w=g?m:m/2+r,k=y/2,T=p?y/2:0,A=d&&!g?m/2-r:0,C=r,L=v?"bottom":"top",S=2*r,E=S,O=y/2-E/2,P=m/2-S/2,D={};D.top=p?_+"px":"",D.right=f?l-x-m+"px":"",D.bottom=v?c-_-y+"px":"",D.left=d?x+"px":"",D.position=b,t(this.wrapper).css(D),t(this.contentEl).css({width:w+"px",height:k+"px",top:T+"px",right:"0px",bottom:"0px",left:A+"px",padding:C+"px",verticalAlign:L}),t(this.waveEl).css({top:O+"px",left:P+"px",width:S+"px",height:E+"px"})}},{key:"open",value:function(){this.isOpen||("function"==typeof this.options.onOpen&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&("function"==typeof this.options.onClose&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_TapTarget}},{key:"defaults",get:function(){return e}}]),i}();M.TapTarget=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"tapTarget","M_TapTarget")}(cash),function(t){"use strict";var e={classes:"",dropdownOptions:{}},n=function(n){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.$el.hasClass("browser-default")?_possibleConstructorReturn(r):((r.el.M_FormSelect=r).options=t.extend({},i.defaults,n),r.isMultiple=r.$el.prop("multiple"),r.el.tabIndex=-1,r._keysSelected={},r._valueDict={},r._setupDropdown(),r._setupEventHandlers(),r)}return _inherits(i,Component),_createClass(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),t(this.dropdownOptions).find("li:not(.optgroup)").each(function(t){t.addEventListener("click",e._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var e=this;t(this.dropdownOptions).find("li:not(.optgroup)").each(function(t){t.removeEventListener("click",e._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(t){this._setValueToInput()}},{key:"_handleOptionClick",value:function(e){e.preventDefault();var n=t(e.target).closest("li")[0],i=n.id;if(!t(n).hasClass("disabled")&&!t(n).hasClass("optgroup")&&i.length){var r=!0;if(this.isMultiple){var a=t(this.dropdownOptions).find("li.disabled.selected");a.length&&(a.removeClass("selected"),a.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(a[0].id)),r=this._toggleEntryFromArray(i)}else t(this.dropdownOptions).find("li").removeClass("selected"),t(n).toggleClass("selected",r);t(this._valueDict[i].el).prop("selected")!==r&&(t(this._valueDict[i].el).prop("selected",r),this.$el.trigger("change"))}e.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var e=this;this.wrapper=document.createElement("div"),t(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(t(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),t(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(n){var i;if(t(n).is("option"))i=e.isMultiple?e._appendOptionWithIcon(e.$el,n,"multiple"):e._appendOptionWithIcon(e.$el,n),e._addOptionToValueDict(n,i);else if(t(n).is("optgroup")){var r=t(n).children("option");t(e.dropdownOptions).append(t('<li class="optgroup"><span>'+n.getAttribute("label")+"</span></li>")[0]),r.each(function(t){var n=e._appendOptionWithIcon(e.$el,t,"optgroup-option");e._addOptionToValueDict(t,n)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),t(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&t(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var n=t('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(n[0]),!this.el.disabled){var i=t.extend({},this.options.dropdownOptions);i.onOpenEnd=function(n){var i=t(e.dropdownOptions).find(".selected").first();if(i.length&&(M.keyDown=!0,e.dropdown.focusedIndex=i.index(),e.dropdown._focusFocusedItem(),M.keyDown=!1,e.dropdown.isScrollable)){var r=i[0].getBoundingClientRect().top-e.dropdownOptions.getBoundingClientRect().top;e.dropdownOptions.scrollTop=r-=e.dropdownOptions.clientHeight/2}},this.isMultiple&&(i.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,i)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(t,e){var n=Object.keys(this._valueDict).length,i=this.dropdownOptions.id+n,r={};e.id=i,r.el=t,r.optionEl=e,this._valueDict[i]=r}},{key:"_removeDropdown",value:function(){t(this.wrapper).find(".caret").remove(),t(this.input).remove(),t(this.dropdownOptions).remove(),t(this.wrapper).before(this.$el),t(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(e,n,i){var r=n.disabled?"disabled ":"",a="optgroup-option"===i?"optgroup-option ":"",o=this.isMultiple?'<label><input type="checkbox"'+r+'"/><span>'+n.innerHTML+"</span></label>":n.innerHTML,s=t("<li></li>"),l=t("<span></span>");l.html(o),s.addClass(r+" "+a),s.append(l);var c=n.getAttribute("data-icon");if(c){var u=t('<img alt="" src="'+c+'">');s.prepend(u)}return t(this.dropdownOptions).append(s[0]),s[0]}},{key:"_toggleEntryFromArray",value:function(e){var n=!this._keysSelected.hasOwnProperty(e),i=t(this._valueDict[e].optionEl);return n?this._keysSelected[e]=!0:delete this._keysSelected[e],i.toggleClass("selected",n),i.find('input[type="checkbox"]').prop("checked",n),i.prop("selected",n),n}},{key:"_setValueToInput",value:function(){var e=[];if(this.$el.find("option").each(function(n){if(t(n).prop("selected")){var i=t(n).text();e.push(i)}}),!e.length){var n=this.$el.find("option:disabled").eq(0);n.length&&""===n[0].value&&e.push(n.text())}this.input.value=e.join(", ")}},{key:"_setSelectedStates",value:function(){for(var e in this._keysSelected={},this._valueDict){var n=this._valueDict[e],i=t(n.el).prop("selected");t(n.optionEl).find('input[type="checkbox"]').prop("checked",i),i?(this._activateOption(t(this.dropdownOptions),t(n.optionEl)),this._keysSelected[e]=!0):t(n.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(e,n){n&&(this.isMultiple||e.find("li.selected").removeClass("selected"),t(n).addClass("selected"))}},{key:"getSelectedValues",value:function(){var t=[];for(var e in this._keysSelected)t.push(this._valueDict[e].el.value);return t}}],[{key:"init",value:function(t,e){return _get(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_FormSelect}},{key:"defaults",get:function(){return e}}]),i}();M.FormSelect=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"formSelect","M_FormSelect")}(cash),function(t,e){"use strict";var n={},i=function(i){function r(e,n){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return(i.el.M_Range=i).options=t.extend({},r.defaults,n),i._mousedown=!1,i._setupThumb(),i._setupEventHandlers(),i}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){t(this.value).html(this.$el.val()),t(this.thumb).hasClass("active")||this._showRangeBubble();var e=this._calcRangeOffset();t(this.thumb).addClass("active").css("left",e+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(e){if(t(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),t(this.thumb).hasClass("active")||this._showRangeBubble(),"input"!==e.type){var n=this._calcRangeOffset();t(this.thumb).addClass("active").css("left",n+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){t(this.thumb).hasClass("active")||this._showRangeBubble();var e=this._calcRangeOffset();t(this.thumb).addClass("active").css("left",e+"px"),t(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var n=7+parseInt(this.$el.css("padding-left"))+"px";t(this.thumb).hasClass("active")&&(e.remove(this.thumb),e({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:n,duration:100})),t(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),t(this.thumb).addClass("thumb"),t(this.value).addClass("value"),t(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){t(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var n=-7+parseInt(t(this.thumb).parent().css("padding-left"))+"px";e.remove(this.thumb),e({targets:this.thumb,height:30,width:30,top:-30,marginLeft:n,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var t=this.$el.width()-15,e=parseFloat(this.$el.attr("max"))||100,n=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-n)/(e-n)*t}}],[{key:"init",value:function(t,e){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){return(t.jquery?t[0]:t).M_Range}},{key:"defaults",get:function(){return n}}]),r}();M.Range=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"range","M_Range"),i.init(t("input[type=range]"))}(cash,M.anime);